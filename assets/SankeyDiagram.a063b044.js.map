{"version":3,"file":"SankeyDiagram.a063b044.js","sources":["../../node_modules/d3-timer/src/timeout.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-array/src/ascending.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-array/src/bisector.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-array/src/bisect.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-array/src/max.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-array/src/min.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-array/src/sum.js","../../node_modules/graphlib/lib/lodash.js","../../node_modules/graphlib/lib/graph.js","../../node_modules/graphlib/lib/version.js","../../node_modules/graphlib/lib/index.js","../../node_modules/graphlib/lib/json.js","../../node_modules/graphlib/lib/alg/components.js","../../node_modules/graphlib/lib/data/priority-queue.js","../../node_modules/graphlib/lib/alg/dijkstra.js","../../node_modules/graphlib/lib/alg/dijkstra-all.js","../../node_modules/graphlib/lib/alg/tarjan.js","../../node_modules/graphlib/lib/alg/find-cycles.js","../../node_modules/graphlib/lib/alg/floyd-warshall.js","../../node_modules/graphlib/lib/alg/topsort.js","../../node_modules/graphlib/lib/alg/is-acyclic.js","../../node_modules/graphlib/lib/alg/dfs.js","../../node_modules/graphlib/lib/alg/postorder.js","../../node_modules/graphlib/lib/alg/preorder.js","../../node_modules/graphlib/lib/alg/prim.js","../../node_modules/graphlib/lib/alg/index.js","../../node_modules/graphlib/index.js","../../node_modules/d3-collection/src/map.js","../../node_modules/d3-collection/src/nest.js","../../node_modules/d3-collection/src/set.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-color/src/define.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-color/src/color.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-interpolate/src/constant.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-interpolate/src/color.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-interpolate/src/rgb.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-interpolate/src/numberArray.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-interpolate/src/array.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-interpolate/src/date.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-interpolate/src/number.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-interpolate/src/object.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-interpolate/src/string.js","../../node_modules/@simwrapper/d3-sankey-diagram/node_modules/d3-interpolate/src/value.js","../../node_modules/d3-selection/src/namespaces.js","../../node_modules/d3-selection/src/namespace.js","../../node_modules/d3-selection/src/creator.js","../../node_modules/d3-selection/src/selector.js","../../node_modules/d3-selection/src/selection/select.js","../../node_modules/d3-selection/src/selectorAll.js","../../node_modules/d3-selection/src/selection/selectAll.js","../../node_modules/d3-selection/src/matcher.js","../../node_modules/d3-selection/src/selection/filter.js","../../node_modules/d3-selection/src/selection/sparse.js","../../node_modules/d3-selection/src/selection/enter.js","../../node_modules/d3-selection/src/constant.js","../../node_modules/d3-selection/src/selection/data.js","../../node_modules/d3-selection/src/selection/exit.js","../../node_modules/d3-selection/src/selection/join.js","../../node_modules/d3-selection/src/selection/merge.js","../../node_modules/d3-selection/src/selection/order.js","../../node_modules/d3-selection/src/selection/sort.js","../../node_modules/d3-selection/src/selection/call.js","../../node_modules/d3-selection/src/selection/nodes.js","../../node_modules/d3-selection/src/selection/node.js","../../node_modules/d3-selection/src/selection/size.js","../../node_modules/d3-selection/src/selection/empty.js","../../node_modules/d3-selection/src/selection/each.js","../../node_modules/d3-selection/src/selection/attr.js","../../node_modules/d3-selection/src/window.js","../../node_modules/d3-selection/src/selection/style.js","../../node_modules/d3-selection/src/selection/property.js","../../node_modules/d3-selection/src/selection/classed.js","../../node_modules/d3-selection/src/selection/text.js","../../node_modules/d3-selection/src/selection/html.js","../../node_modules/d3-selection/src/selection/raise.js","../../node_modules/d3-selection/src/selection/lower.js","../../node_modules/d3-selection/src/selection/append.js","../../node_modules/d3-selection/src/selection/insert.js","../../node_modules/d3-selection/src/selection/remove.js","../../node_modules/d3-selection/src/selection/clone.js","../../node_modules/d3-selection/src/selection/datum.js","../../node_modules/d3-selection/src/selection/on.js","../../node_modules/d3-selection/src/selection/dispatch.js","../../node_modules/d3-selection/src/selection/index.js","../../node_modules/d3-selection/src/select.js","../../node_modules/d3-transition/src/transition/schedule.js","../../node_modules/d3-transition/src/interrupt.js","../../node_modules/d3-transition/src/selection/interrupt.js","../../node_modules/d3-transition/node_modules/d3-color/src/define.js","../../node_modules/d3-transition/node_modules/d3-color/src/color.js","../../node_modules/d3-transition/node_modules/d3-interpolate/src/constant.js","../../node_modules/d3-transition/node_modules/d3-interpolate/src/color.js","../../node_modules/d3-transition/node_modules/d3-interpolate/src/rgb.js","../../node_modules/d3-transition/node_modules/d3-interpolate/src/number.js","../../node_modules/d3-transition/node_modules/d3-interpolate/src/string.js","../../node_modules/d3-transition/node_modules/d3-interpolate/src/transform/decompose.js","../../node_modules/d3-transition/node_modules/d3-interpolate/src/transform/parse.js","../../node_modules/d3-transition/node_modules/d3-interpolate/src/transform/index.js","../../node_modules/d3-transition/src/transition/tween.js","../../node_modules/d3-transition/src/transition/interpolate.js","../../node_modules/d3-transition/src/transition/attr.js","../../node_modules/d3-transition/src/transition/attrTween.js","../../node_modules/d3-transition/src/transition/delay.js","../../node_modules/d3-transition/src/transition/duration.js","../../node_modules/d3-transition/src/transition/ease.js","../../node_modules/d3-transition/src/transition/filter.js","../../node_modules/d3-transition/src/transition/merge.js","../../node_modules/d3-transition/src/transition/on.js","../../node_modules/d3-transition/src/transition/remove.js","../../node_modules/d3-transition/src/transition/select.js","../../node_modules/d3-transition/src/transition/selectAll.js","../../node_modules/d3-transition/src/transition/selection.js","../../node_modules/d3-transition/src/transition/style.js","../../node_modules/d3-transition/src/transition/styleTween.js","../../node_modules/d3-transition/src/transition/text.js","../../node_modules/d3-transition/src/transition/textTween.js","../../node_modules/d3-transition/src/transition/transition.js","../../node_modules/d3-transition/src/transition/end.js","../../node_modules/d3-transition/src/transition/index.js","../../node_modules/d3-ease/src/cubic.js","../../node_modules/d3-transition/src/selection/transition.js","../../node_modules/d3-transition/src/selection/index.js","../../node_modules/@simwrapper/d3-sankey-diagram/build/d3-sankey-diagram.esm.js","../../src/plugins/sankey/SankeyDiagram.vue","../../src/plugins/sankey/SankeyDiagram.vue?vue&type=template&lang.js"],"sourcesContent":["import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(function(elapsed) {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","export default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      max;\n\n  if (valueof == null) {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = values[i]) != null && value > max) {\n            max = value;\n          }\n        }\n      }\n    }\n  }\n\n  else {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null && value > max) {\n            max = value;\n          }\n        }\n      }\n    }\n  }\n\n  return max;\n}\n","export default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      min;\n\n  if (valueof == null) {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        min = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = values[i]) != null && min > value) {\n            min = value;\n          }\n        }\n      }\n    }\n  }\n\n  else {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        min = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null && min > value) {\n            min = value;\n          }\n        }\n      }\n    }\n  }\n\n  return min;\n}\n","export default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      sum = 0;\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (value = +values[i]) sum += value; // Note: zero and null are equivalent.\n    }\n  }\n\n  else {\n    while (++i < n) {\n      if (value = +valueof(values[i], i, values)) sum += value;\n    }\n  }\n\n  return sum;\n}\n","/* global window */\n\nvar lodash;\n\nif (typeof require === \"function\") {\n  try {\n    lodash = {\n      clone: require(\"lodash/clone\"),\n      constant: require(\"lodash/constant\"),\n      each: require(\"lodash/each\"),\n      filter: require(\"lodash/filter\"),\n      has:  require(\"lodash/has\"),\n      isArray: require(\"lodash/isArray\"),\n      isEmpty: require(\"lodash/isEmpty\"),\n      isFunction: require(\"lodash/isFunction\"),\n      isUndefined: require(\"lodash/isUndefined\"),\n      keys: require(\"lodash/keys\"),\n      map: require(\"lodash/map\"),\n      reduce: require(\"lodash/reduce\"),\n      size: require(\"lodash/size\"),\n      transform: require(\"lodash/transform\"),\n      union: require(\"lodash/union\"),\n      values: require(\"lodash/values\")\n    };\n  } catch (e) {\n    // continue regardless of error\n  }\n}\n\nif (!lodash) {\n  lodash = window._;\n}\n\nmodule.exports = lodash;\n","\"use strict\";\n\nvar _ = require(\"./lodash\");\n\nmodule.exports = Graph;\n\nvar DEFAULT_EDGE_NAME = \"\\x00\";\nvar GRAPH_NODE = \"\\x00\";\nvar EDGE_KEY_DELIM = \"\\x01\";\n\n// Implementation notes:\n//\n//  * Node id query functions should return string ids for the nodes\n//  * Edge id query functions should return an \"edgeObj\", edge object, that is\n//    composed of enough information to uniquely identify an edge: {v, w, name}.\n//  * Internally we use an \"edgeId\", a stringified form of the edgeObj, to\n//    reference edges. This is because we need a performant way to look these\n//    edges up and, object properties, which have string keys, are the closest\n//    we're going to get to a performant hashtable in JavaScript.\n\nfunction Graph(opts) {\n  this._isDirected = _.has(opts, \"directed\") ? opts.directed : true;\n  this._isMultigraph = _.has(opts, \"multigraph\") ? opts.multigraph : false;\n  this._isCompound = _.has(opts, \"compound\") ? opts.compound : false;\n\n  // Label for the graph itself\n  this._label = undefined;\n\n  // Defaults to be set when creating a new node\n  this._defaultNodeLabelFn = _.constant(undefined);\n\n  // Defaults to be set when creating a new edge\n  this._defaultEdgeLabelFn = _.constant(undefined);\n\n  // v -> label\n  this._nodes = {};\n\n  if (this._isCompound) {\n    // v -> parent\n    this._parent = {};\n\n    // v -> children\n    this._children = {};\n    this._children[GRAPH_NODE] = {};\n  }\n\n  // v -> edgeObj\n  this._in = {};\n\n  // u -> v -> Number\n  this._preds = {};\n\n  // v -> edgeObj\n  this._out = {};\n\n  // v -> w -> Number\n  this._sucs = {};\n\n  // e -> edgeObj\n  this._edgeObjs = {};\n\n  // e -> label\n  this._edgeLabels = {};\n}\n\n/* Number of nodes in the graph. Should only be changed by the implementation. */\nGraph.prototype._nodeCount = 0;\n\n/* Number of edges in the graph. Should only be changed by the implementation. */\nGraph.prototype._edgeCount = 0;\n\n\n/* === Graph functions ========= */\n\nGraph.prototype.isDirected = function() {\n  return this._isDirected;\n};\n\nGraph.prototype.isMultigraph = function() {\n  return this._isMultigraph;\n};\n\nGraph.prototype.isCompound = function() {\n  return this._isCompound;\n};\n\nGraph.prototype.setGraph = function(label) {\n  this._label = label;\n  return this;\n};\n\nGraph.prototype.graph = function() {\n  return this._label;\n};\n\n\n/* === Node functions ========== */\n\nGraph.prototype.setDefaultNodeLabel = function(newDefault) {\n  if (!_.isFunction(newDefault)) {\n    newDefault = _.constant(newDefault);\n  }\n  this._defaultNodeLabelFn = newDefault;\n  return this;\n};\n\nGraph.prototype.nodeCount = function() {\n  return this._nodeCount;\n};\n\nGraph.prototype.nodes = function() {\n  return _.keys(this._nodes);\n};\n\nGraph.prototype.sources = function() {\n  var self = this;\n  return _.filter(this.nodes(), function(v) {\n    return _.isEmpty(self._in[v]);\n  });\n};\n\nGraph.prototype.sinks = function() {\n  var self = this;\n  return _.filter(this.nodes(), function(v) {\n    return _.isEmpty(self._out[v]);\n  });\n};\n\nGraph.prototype.setNodes = function(vs, value) {\n  var args = arguments;\n  var self = this;\n  _.each(vs, function(v) {\n    if (args.length > 1) {\n      self.setNode(v, value);\n    } else {\n      self.setNode(v);\n    }\n  });\n  return this;\n};\n\nGraph.prototype.setNode = function(v, value) {\n  if (_.has(this._nodes, v)) {\n    if (arguments.length > 1) {\n      this._nodes[v] = value;\n    }\n    return this;\n  }\n\n  this._nodes[v] = arguments.length > 1 ? value : this._defaultNodeLabelFn(v);\n  if (this._isCompound) {\n    this._parent[v] = GRAPH_NODE;\n    this._children[v] = {};\n    this._children[GRAPH_NODE][v] = true;\n  }\n  this._in[v] = {};\n  this._preds[v] = {};\n  this._out[v] = {};\n  this._sucs[v] = {};\n  ++this._nodeCount;\n  return this;\n};\n\nGraph.prototype.node = function(v) {\n  return this._nodes[v];\n};\n\nGraph.prototype.hasNode = function(v) {\n  return _.has(this._nodes, v);\n};\n\nGraph.prototype.removeNode =  function(v) {\n  var self = this;\n  if (_.has(this._nodes, v)) {\n    var removeEdge = function(e) { self.removeEdge(self._edgeObjs[e]); };\n    delete this._nodes[v];\n    if (this._isCompound) {\n      this._removeFromParentsChildList(v);\n      delete this._parent[v];\n      _.each(this.children(v), function(child) {\n        self.setParent(child);\n      });\n      delete this._children[v];\n    }\n    _.each(_.keys(this._in[v]), removeEdge);\n    delete this._in[v];\n    delete this._preds[v];\n    _.each(_.keys(this._out[v]), removeEdge);\n    delete this._out[v];\n    delete this._sucs[v];\n    --this._nodeCount;\n  }\n  return this;\n};\n\nGraph.prototype.setParent = function(v, parent) {\n  if (!this._isCompound) {\n    throw new Error(\"Cannot set parent in a non-compound graph\");\n  }\n\n  if (_.isUndefined(parent)) {\n    parent = GRAPH_NODE;\n  } else {\n    // Coerce parent to string\n    parent += \"\";\n    for (var ancestor = parent;\n      !_.isUndefined(ancestor);\n      ancestor = this.parent(ancestor)) {\n      if (ancestor === v) {\n        throw new Error(\"Setting \" + parent+ \" as parent of \" + v +\n                        \" would create a cycle\");\n      }\n    }\n\n    this.setNode(parent);\n  }\n\n  this.setNode(v);\n  this._removeFromParentsChildList(v);\n  this._parent[v] = parent;\n  this._children[parent][v] = true;\n  return this;\n};\n\nGraph.prototype._removeFromParentsChildList = function(v) {\n  delete this._children[this._parent[v]][v];\n};\n\nGraph.prototype.parent = function(v) {\n  if (this._isCompound) {\n    var parent = this._parent[v];\n    if (parent !== GRAPH_NODE) {\n      return parent;\n    }\n  }\n};\n\nGraph.prototype.children = function(v) {\n  if (_.isUndefined(v)) {\n    v = GRAPH_NODE;\n  }\n\n  if (this._isCompound) {\n    var children = this._children[v];\n    if (children) {\n      return _.keys(children);\n    }\n  } else if (v === GRAPH_NODE) {\n    return this.nodes();\n  } else if (this.hasNode(v)) {\n    return [];\n  }\n};\n\nGraph.prototype.predecessors = function(v) {\n  var predsV = this._preds[v];\n  if (predsV) {\n    return _.keys(predsV);\n  }\n};\n\nGraph.prototype.successors = function(v) {\n  var sucsV = this._sucs[v];\n  if (sucsV) {\n    return _.keys(sucsV);\n  }\n};\n\nGraph.prototype.neighbors = function(v) {\n  var preds = this.predecessors(v);\n  if (preds) {\n    return _.union(preds, this.successors(v));\n  }\n};\n\nGraph.prototype.isLeaf = function (v) {\n  var neighbors;\n  if (this.isDirected()) {\n    neighbors = this.successors(v);\n  } else {\n    neighbors = this.neighbors(v);\n  }\n  return neighbors.length === 0;\n};\n\nGraph.prototype.filterNodes = function(filter) {\n  var copy = new this.constructor({\n    directed: this._isDirected,\n    multigraph: this._isMultigraph,\n    compound: this._isCompound\n  });\n\n  copy.setGraph(this.graph());\n\n  var self = this;\n  _.each(this._nodes, function(value, v) {\n    if (filter(v)) {\n      copy.setNode(v, value);\n    }\n  });\n\n  _.each(this._edgeObjs, function(e) {\n    if (copy.hasNode(e.v) && copy.hasNode(e.w)) {\n      copy.setEdge(e, self.edge(e));\n    }\n  });\n\n  var parents = {};\n  function findParent(v) {\n    var parent = self.parent(v);\n    if (parent === undefined || copy.hasNode(parent)) {\n      parents[v] = parent;\n      return parent;\n    } else if (parent in parents) {\n      return parents[parent];\n    } else {\n      return findParent(parent);\n    }\n  }\n\n  if (this._isCompound) {\n    _.each(copy.nodes(), function(v) {\n      copy.setParent(v, findParent(v));\n    });\n  }\n\n  return copy;\n};\n\n/* === Edge functions ========== */\n\nGraph.prototype.setDefaultEdgeLabel = function(newDefault) {\n  if (!_.isFunction(newDefault)) {\n    newDefault = _.constant(newDefault);\n  }\n  this._defaultEdgeLabelFn = newDefault;\n  return this;\n};\n\nGraph.prototype.edgeCount = function() {\n  return this._edgeCount;\n};\n\nGraph.prototype.edges = function() {\n  return _.values(this._edgeObjs);\n};\n\nGraph.prototype.setPath = function(vs, value) {\n  var self = this;\n  var args = arguments;\n  _.reduce(vs, function(v, w) {\n    if (args.length > 1) {\n      self.setEdge(v, w, value);\n    } else {\n      self.setEdge(v, w);\n    }\n    return w;\n  });\n  return this;\n};\n\n/*\n * setEdge(v, w, [value, [name]])\n * setEdge({ v, w, [name] }, [value])\n */\nGraph.prototype.setEdge = function() {\n  var v, w, name, value;\n  var valueSpecified = false;\n  var arg0 = arguments[0];\n\n  if (typeof arg0 === \"object\" && arg0 !== null && \"v\" in arg0) {\n    v = arg0.v;\n    w = arg0.w;\n    name = arg0.name;\n    if (arguments.length === 2) {\n      value = arguments[1];\n      valueSpecified = true;\n    }\n  } else {\n    v = arg0;\n    w = arguments[1];\n    name = arguments[3];\n    if (arguments.length > 2) {\n      value = arguments[2];\n      valueSpecified = true;\n    }\n  }\n\n  v = \"\" + v;\n  w = \"\" + w;\n  if (!_.isUndefined(name)) {\n    name = \"\" + name;\n  }\n\n  var e = edgeArgsToId(this._isDirected, v, w, name);\n  if (_.has(this._edgeLabels, e)) {\n    if (valueSpecified) {\n      this._edgeLabels[e] = value;\n    }\n    return this;\n  }\n\n  if (!_.isUndefined(name) && !this._isMultigraph) {\n    throw new Error(\"Cannot set a named edge when isMultigraph = false\");\n  }\n\n  // It didn't exist, so we need to create it.\n  // First ensure the nodes exist.\n  this.setNode(v);\n  this.setNode(w);\n\n  this._edgeLabels[e] = valueSpecified ? value : this._defaultEdgeLabelFn(v, w, name);\n\n  var edgeObj = edgeArgsToObj(this._isDirected, v, w, name);\n  // Ensure we add undirected edges in a consistent way.\n  v = edgeObj.v;\n  w = edgeObj.w;\n\n  Object.freeze(edgeObj);\n  this._edgeObjs[e] = edgeObj;\n  incrementOrInitEntry(this._preds[w], v);\n  incrementOrInitEntry(this._sucs[v], w);\n  this._in[w][e] = edgeObj;\n  this._out[v][e] = edgeObj;\n  this._edgeCount++;\n  return this;\n};\n\nGraph.prototype.edge = function(v, w, name) {\n  var e = (arguments.length === 1\n    ? edgeObjToId(this._isDirected, arguments[0])\n    : edgeArgsToId(this._isDirected, v, w, name));\n  return this._edgeLabels[e];\n};\n\nGraph.prototype.hasEdge = function(v, w, name) {\n  var e = (arguments.length === 1\n    ? edgeObjToId(this._isDirected, arguments[0])\n    : edgeArgsToId(this._isDirected, v, w, name));\n  return _.has(this._edgeLabels, e);\n};\n\nGraph.prototype.removeEdge = function(v, w, name) {\n  var e = (arguments.length === 1\n    ? edgeObjToId(this._isDirected, arguments[0])\n    : edgeArgsToId(this._isDirected, v, w, name));\n  var edge = this._edgeObjs[e];\n  if (edge) {\n    v = edge.v;\n    w = edge.w;\n    delete this._edgeLabels[e];\n    delete this._edgeObjs[e];\n    decrementOrRemoveEntry(this._preds[w], v);\n    decrementOrRemoveEntry(this._sucs[v], w);\n    delete this._in[w][e];\n    delete this._out[v][e];\n    this._edgeCount--;\n  }\n  return this;\n};\n\nGraph.prototype.inEdges = function(v, u) {\n  var inV = this._in[v];\n  if (inV) {\n    var edges = _.values(inV);\n    if (!u) {\n      return edges;\n    }\n    return _.filter(edges, function(edge) { return edge.v === u; });\n  }\n};\n\nGraph.prototype.outEdges = function(v, w) {\n  var outV = this._out[v];\n  if (outV) {\n    var edges = _.values(outV);\n    if (!w) {\n      return edges;\n    }\n    return _.filter(edges, function(edge) { return edge.w === w; });\n  }\n};\n\nGraph.prototype.nodeEdges = function(v, w) {\n  var inEdges = this.inEdges(v, w);\n  if (inEdges) {\n    return inEdges.concat(this.outEdges(v, w));\n  }\n};\n\nfunction incrementOrInitEntry(map, k) {\n  if (map[k]) {\n    map[k]++;\n  } else {\n    map[k] = 1;\n  }\n}\n\nfunction decrementOrRemoveEntry(map, k) {\n  if (!--map[k]) { delete map[k]; }\n}\n\nfunction edgeArgsToId(isDirected, v_, w_, name) {\n  var v = \"\" + v_;\n  var w = \"\" + w_;\n  if (!isDirected && v > w) {\n    var tmp = v;\n    v = w;\n    w = tmp;\n  }\n  return v + EDGE_KEY_DELIM + w + EDGE_KEY_DELIM +\n             (_.isUndefined(name) ? DEFAULT_EDGE_NAME : name);\n}\n\nfunction edgeArgsToObj(isDirected, v_, w_, name) {\n  var v = \"\" + v_;\n  var w = \"\" + w_;\n  if (!isDirected && v > w) {\n    var tmp = v;\n    v = w;\n    w = tmp;\n  }\n  var edgeObj =  { v: v, w: w };\n  if (name) {\n    edgeObj.name = name;\n  }\n  return edgeObj;\n}\n\nfunction edgeObjToId(isDirected, edgeObj) {\n  return edgeArgsToId(isDirected, edgeObj.v, edgeObj.w, edgeObj.name);\n}\n","module.exports = '2.1.8';\n","// Includes only the \"core\" of graphlib\nmodule.exports = {\n  Graph: require(\"./graph\"),\n  version: require(\"./version\")\n};\n","var _ = require(\"./lodash\");\nvar Graph = require(\"./graph\");\n\nmodule.exports = {\n  write: write,\n  read: read\n};\n\nfunction write(g) {\n  var json = {\n    options: {\n      directed: g.isDirected(),\n      multigraph: g.isMultigraph(),\n      compound: g.isCompound()\n    },\n    nodes: writeNodes(g),\n    edges: writeEdges(g)\n  };\n  if (!_.isUndefined(g.graph())) {\n    json.value = _.clone(g.graph());\n  }\n  return json;\n}\n\nfunction writeNodes(g) {\n  return _.map(g.nodes(), function(v) {\n    var nodeValue = g.node(v);\n    var parent = g.parent(v);\n    var node = { v: v };\n    if (!_.isUndefined(nodeValue)) {\n      node.value = nodeValue;\n    }\n    if (!_.isUndefined(parent)) {\n      node.parent = parent;\n    }\n    return node;\n  });\n}\n\nfunction writeEdges(g) {\n  return _.map(g.edges(), function(e) {\n    var edgeValue = g.edge(e);\n    var edge = { v: e.v, w: e.w };\n    if (!_.isUndefined(e.name)) {\n      edge.name = e.name;\n    }\n    if (!_.isUndefined(edgeValue)) {\n      edge.value = edgeValue;\n    }\n    return edge;\n  });\n}\n\nfunction read(json) {\n  var g = new Graph(json.options).setGraph(json.value);\n  _.each(json.nodes, function(entry) {\n    g.setNode(entry.v, entry.value);\n    if (entry.parent) {\n      g.setParent(entry.v, entry.parent);\n    }\n  });\n  _.each(json.edges, function(entry) {\n    g.setEdge({ v: entry.v, w: entry.w, name: entry.name }, entry.value);\n  });\n  return g;\n}\n","var _ = require(\"../lodash\");\n\nmodule.exports = components;\n\nfunction components(g) {\n  var visited = {};\n  var cmpts = [];\n  var cmpt;\n\n  function dfs(v) {\n    if (_.has(visited, v)) return;\n    visited[v] = true;\n    cmpt.push(v);\n    _.each(g.successors(v), dfs);\n    _.each(g.predecessors(v), dfs);\n  }\n\n  _.each(g.nodes(), function(v) {\n    cmpt = [];\n    dfs(v);\n    if (cmpt.length) {\n      cmpts.push(cmpt);\n    }\n  });\n\n  return cmpts;\n}\n","var _ = require(\"../lodash\");\n\nmodule.exports = PriorityQueue;\n\n/**\n * A min-priority queue data structure. This algorithm is derived from Cormen,\n * et al., \"Introduction to Algorithms\". The basic idea of a min-priority\n * queue is that you can efficiently (in O(1) time) get the smallest key in\n * the queue. Adding and removing elements takes O(log n) time. A key can\n * have its priority decreased in O(log n) time.\n */\nfunction PriorityQueue() {\n  this._arr = [];\n  this._keyIndices = {};\n}\n\n/**\n * Returns the number of elements in the queue. Takes `O(1)` time.\n */\nPriorityQueue.prototype.size = function() {\n  return this._arr.length;\n};\n\n/**\n * Returns the keys that are in the queue. Takes `O(n)` time.\n */\nPriorityQueue.prototype.keys = function() {\n  return this._arr.map(function(x) { return x.key; });\n};\n\n/**\n * Returns `true` if **key** is in the queue and `false` if not.\n */\nPriorityQueue.prototype.has = function(key) {\n  return _.has(this._keyIndices, key);\n};\n\n/**\n * Returns the priority for **key**. If **key** is not present in the queue\n * then this function returns `undefined`. Takes `O(1)` time.\n *\n * @param {Object} key\n */\nPriorityQueue.prototype.priority = function(key) {\n  var index = this._keyIndices[key];\n  if (index !== undefined) {\n    return this._arr[index].priority;\n  }\n};\n\n/**\n * Returns the key for the minimum element in this queue. If the queue is\n * empty this function throws an Error. Takes `O(1)` time.\n */\nPriorityQueue.prototype.min = function() {\n  if (this.size() === 0) {\n    throw new Error(\"Queue underflow\");\n  }\n  return this._arr[0].key;\n};\n\n/**\n * Inserts a new key into the priority queue. If the key already exists in\n * the queue this function returns `false`; otherwise it will return `true`.\n * Takes `O(n)` time.\n *\n * @param {Object} key the key to add\n * @param {Number} priority the initial priority for the key\n */\nPriorityQueue.prototype.add = function(key, priority) {\n  var keyIndices = this._keyIndices;\n  key = String(key);\n  if (!_.has(keyIndices, key)) {\n    var arr = this._arr;\n    var index = arr.length;\n    keyIndices[key] = index;\n    arr.push({key: key, priority: priority});\n    this._decrease(index);\n    return true;\n  }\n  return false;\n};\n\n/**\n * Removes and returns the smallest key in the queue. Takes `O(log n)` time.\n */\nPriorityQueue.prototype.removeMin = function() {\n  this._swap(0, this._arr.length - 1);\n  var min = this._arr.pop();\n  delete this._keyIndices[min.key];\n  this._heapify(0);\n  return min.key;\n};\n\n/**\n * Decreases the priority for **key** to **priority**. If the new priority is\n * greater than the previous priority, this function will throw an Error.\n *\n * @param {Object} key the key for which to raise priority\n * @param {Number} priority the new priority for the key\n */\nPriorityQueue.prototype.decrease = function(key, priority) {\n  var index = this._keyIndices[key];\n  if (priority > this._arr[index].priority) {\n    throw new Error(\"New priority is greater than current priority. \" +\n        \"Key: \" + key + \" Old: \" + this._arr[index].priority + \" New: \" + priority);\n  }\n  this._arr[index].priority = priority;\n  this._decrease(index);\n};\n\nPriorityQueue.prototype._heapify = function(i) {\n  var arr = this._arr;\n  var l = 2 * i;\n  var r = l + 1;\n  var largest = i;\n  if (l < arr.length) {\n    largest = arr[l].priority < arr[largest].priority ? l : largest;\n    if (r < arr.length) {\n      largest = arr[r].priority < arr[largest].priority ? r : largest;\n    }\n    if (largest !== i) {\n      this._swap(i, largest);\n      this._heapify(largest);\n    }\n  }\n};\n\nPriorityQueue.prototype._decrease = function(index) {\n  var arr = this._arr;\n  var priority = arr[index].priority;\n  var parent;\n  while (index !== 0) {\n    parent = index >> 1;\n    if (arr[parent].priority < priority) {\n      break;\n    }\n    this._swap(index, parent);\n    index = parent;\n  }\n};\n\nPriorityQueue.prototype._swap = function(i, j) {\n  var arr = this._arr;\n  var keyIndices = this._keyIndices;\n  var origArrI = arr[i];\n  var origArrJ = arr[j];\n  arr[i] = origArrJ;\n  arr[j] = origArrI;\n  keyIndices[origArrJ.key] = i;\n  keyIndices[origArrI.key] = j;\n};\n","var _ = require(\"../lodash\");\nvar PriorityQueue = require(\"../data/priority-queue\");\n\nmodule.exports = dijkstra;\n\nvar DEFAULT_WEIGHT_FUNC = _.constant(1);\n\nfunction dijkstra(g, source, weightFn, edgeFn) {\n  return runDijkstra(g, String(source),\n    weightFn || DEFAULT_WEIGHT_FUNC,\n    edgeFn || function(v) { return g.outEdges(v); });\n}\n\nfunction runDijkstra(g, source, weightFn, edgeFn) {\n  var results = {};\n  var pq = new PriorityQueue();\n  var v, vEntry;\n\n  var updateNeighbors = function(edge) {\n    var w = edge.v !== v ? edge.v : edge.w;\n    var wEntry = results[w];\n    var weight = weightFn(edge);\n    var distance = vEntry.distance + weight;\n\n    if (weight < 0) {\n      throw new Error(\"dijkstra does not allow negative edge weights. \" +\n                      \"Bad edge: \" + edge + \" Weight: \" + weight);\n    }\n\n    if (distance < wEntry.distance) {\n      wEntry.distance = distance;\n      wEntry.predecessor = v;\n      pq.decrease(w, distance);\n    }\n  };\n\n  g.nodes().forEach(function(v) {\n    var distance = v === source ? 0 : Number.POSITIVE_INFINITY;\n    results[v] = { distance: distance };\n    pq.add(v, distance);\n  });\n\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    vEntry = results[v];\n    if (vEntry.distance === Number.POSITIVE_INFINITY) {\n      break;\n    }\n\n    edgeFn(v).forEach(updateNeighbors);\n  }\n\n  return results;\n}\n","var dijkstra = require(\"./dijkstra\");\nvar _ = require(\"../lodash\");\n\nmodule.exports = dijkstraAll;\n\nfunction dijkstraAll(g, weightFunc, edgeFunc) {\n  return _.transform(g.nodes(), function(acc, v) {\n    acc[v] = dijkstra(g, v, weightFunc, edgeFunc);\n  }, {});\n}\n","var _ = require(\"../lodash\");\n\nmodule.exports = tarjan;\n\nfunction tarjan(g) {\n  var index = 0;\n  var stack = [];\n  var visited = {}; // node id -> { onStack, lowlink, index }\n  var results = [];\n\n  function dfs(v) {\n    var entry = visited[v] = {\n      onStack: true,\n      lowlink: index,\n      index: index++\n    };\n    stack.push(v);\n\n    g.successors(v).forEach(function(w) {\n      if (!_.has(visited, w)) {\n        dfs(w);\n        entry.lowlink = Math.min(entry.lowlink, visited[w].lowlink);\n      } else if (visited[w].onStack) {\n        entry.lowlink = Math.min(entry.lowlink, visited[w].index);\n      }\n    });\n\n    if (entry.lowlink === entry.index) {\n      var cmpt = [];\n      var w;\n      do {\n        w = stack.pop();\n        visited[w].onStack = false;\n        cmpt.push(w);\n      } while (v !== w);\n      results.push(cmpt);\n    }\n  }\n\n  g.nodes().forEach(function(v) {\n    if (!_.has(visited, v)) {\n      dfs(v);\n    }\n  });\n\n  return results;\n}\n","var _ = require(\"../lodash\");\nvar tarjan = require(\"./tarjan\");\n\nmodule.exports = findCycles;\n\nfunction findCycles(g) {\n  return _.filter(tarjan(g), function(cmpt) {\n    return cmpt.length > 1 || (cmpt.length === 1 && g.hasEdge(cmpt[0], cmpt[0]));\n  });\n}\n","var _ = require(\"../lodash\");\n\nmodule.exports = floydWarshall;\n\nvar DEFAULT_WEIGHT_FUNC = _.constant(1);\n\nfunction floydWarshall(g, weightFn, edgeFn) {\n  return runFloydWarshall(g,\n    weightFn || DEFAULT_WEIGHT_FUNC,\n    edgeFn || function(v) { return g.outEdges(v); });\n}\n\nfunction runFloydWarshall(g, weightFn, edgeFn) {\n  var results = {};\n  var nodes = g.nodes();\n\n  nodes.forEach(function(v) {\n    results[v] = {};\n    results[v][v] = { distance: 0 };\n    nodes.forEach(function(w) {\n      if (v !== w) {\n        results[v][w] = { distance: Number.POSITIVE_INFINITY };\n      }\n    });\n    edgeFn(v).forEach(function(edge) {\n      var w = edge.v === v ? edge.w : edge.v;\n      var d = weightFn(edge);\n      results[v][w] = { distance: d, predecessor: v };\n    });\n  });\n\n  nodes.forEach(function(k) {\n    var rowK = results[k];\n    nodes.forEach(function(i) {\n      var rowI = results[i];\n      nodes.forEach(function(j) {\n        var ik = rowI[k];\n        var kj = rowK[j];\n        var ij = rowI[j];\n        var altDistance = ik.distance + kj.distance;\n        if (altDistance < ij.distance) {\n          ij.distance = altDistance;\n          ij.predecessor = kj.predecessor;\n        }\n      });\n    });\n  });\n\n  return results;\n}\n","var _ = require(\"../lodash\");\n\nmodule.exports = topsort;\ntopsort.CycleException = CycleException;\n\nfunction topsort(g) {\n  var visited = {};\n  var stack = {};\n  var results = [];\n\n  function visit(node) {\n    if (_.has(stack, node)) {\n      throw new CycleException();\n    }\n\n    if (!_.has(visited, node)) {\n      stack[node] = true;\n      visited[node] = true;\n      _.each(g.predecessors(node), visit);\n      delete stack[node];\n      results.push(node);\n    }\n  }\n\n  _.each(g.sinks(), visit);\n\n  if (_.size(visited) !== g.nodeCount()) {\n    throw new CycleException();\n  }\n\n  return results;\n}\n\nfunction CycleException() {}\nCycleException.prototype = new Error(); // must be an instance of Error to pass testing","var topsort = require(\"./topsort\");\n\nmodule.exports = isAcyclic;\n\nfunction isAcyclic(g) {\n  try {\n    topsort(g);\n  } catch (e) {\n    if (e instanceof topsort.CycleException) {\n      return false;\n    }\n    throw e;\n  }\n  return true;\n}\n","var _ = require(\"../lodash\");\n\nmodule.exports = dfs;\n\n/*\n * A helper that preforms a pre- or post-order traversal on the input graph\n * and returns the nodes in the order they were visited. If the graph is\n * undirected then this algorithm will navigate using neighbors. If the graph\n * is directed then this algorithm will navigate using successors.\n *\n * Order must be one of \"pre\" or \"post\".\n */\nfunction dfs(g, vs, order) {\n  if (!_.isArray(vs)) {\n    vs = [vs];\n  }\n\n  var navigation = (g.isDirected() ? g.successors : g.neighbors).bind(g);\n\n  var acc = [];\n  var visited = {};\n  _.each(vs, function(v) {\n    if (!g.hasNode(v)) {\n      throw new Error(\"Graph does not have node: \" + v);\n    }\n\n    doDfs(g, v, order === \"post\", visited, navigation, acc);\n  });\n  return acc;\n}\n\nfunction doDfs(g, v, postorder, visited, navigation, acc) {\n  if (!_.has(visited, v)) {\n    visited[v] = true;\n\n    if (!postorder) { acc.push(v); }\n    _.each(navigation(v), function(w) {\n      doDfs(g, w, postorder, visited, navigation, acc);\n    });\n    if (postorder) { acc.push(v); }\n  }\n}\n","var dfs = require(\"./dfs\");\n\nmodule.exports = postorder;\n\nfunction postorder(g, vs) {\n  return dfs(g, vs, \"post\");\n}\n","var dfs = require(\"./dfs\");\n\nmodule.exports = preorder;\n\nfunction preorder(g, vs) {\n  return dfs(g, vs, \"pre\");\n}\n","var _ = require(\"../lodash\");\nvar Graph = require(\"../graph\");\nvar PriorityQueue = require(\"../data/priority-queue\");\n\nmodule.exports = prim;\n\nfunction prim(g, weightFunc) {\n  var result = new Graph();\n  var parents = {};\n  var pq = new PriorityQueue();\n  var v;\n\n  function updateNeighbors(edge) {\n    var w = edge.v === v ? edge.w : edge.v;\n    var pri = pq.priority(w);\n    if (pri !== undefined) {\n      var edgeWeight = weightFunc(edge);\n      if (edgeWeight < pri) {\n        parents[w] = v;\n        pq.decrease(w, edgeWeight);\n      }\n    }\n  }\n\n  if (g.nodeCount() === 0) {\n    return result;\n  }\n\n  _.each(g.nodes(), function(v) {\n    pq.add(v, Number.POSITIVE_INFINITY);\n    result.setNode(v);\n  });\n\n  // Start from an arbitrary node\n  pq.decrease(g.nodes()[0], 0);\n\n  var init = false;\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    if (_.has(parents, v)) {\n      result.setEdge(v, parents[v]);\n    } else if (init) {\n      throw new Error(\"Input graph is not connected: \" + g);\n    } else {\n      init = true;\n    }\n\n    g.nodeEdges(v).forEach(updateNeighbors);\n  }\n\n  return result;\n}\n","module.exports = {\n  components: require(\"./components\"),\n  dijkstra: require(\"./dijkstra\"),\n  dijkstraAll: require(\"./dijkstra-all\"),\n  findCycles: require(\"./find-cycles\"),\n  floydWarshall: require(\"./floyd-warshall\"),\n  isAcyclic: require(\"./is-acyclic\"),\n  postorder: require(\"./postorder\"),\n  preorder: require(\"./preorder\"),\n  prim: require(\"./prim\"),\n  tarjan: require(\"./tarjan\"),\n  topsort: require(\"./topsort\")\n};\n","/**\n * Copyright (c) 2014, Chris Pettitt\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n * list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its contributors\n * may be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nvar lib = require(\"./lib\");\n\nmodule.exports = {\n  Graph: lib.Graph,\n  json: require(\"./lib/json\"),\n  alg: require(\"./lib/alg\"),\n  version: lib.version\n};\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import map from \"./map\";\n\nexport default function() {\n  var keys = [],\n      sortKeys = [],\n      sortValues,\n      rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (sortValues != null) array.sort(sortValues);\n      return rollup != null ? rollup(array) : array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function(values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n\n    return result;\n  }\n\n  function entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array, sortKey = sortKeys[depth - 1];\n    if (rollup != null && depth >= keys.length) array = map.entries();\n    else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\n    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\n  }\n\n  return nest = {\n    object: function(array) { return apply(array, 0, createObject, setObject); },\n    map: function(array) { return apply(array, 0, createMap, setMap); },\n    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\n    key: function(d) { keys.push(d); return nest; },\n    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\n    sortValues: function(order) { sortValues = order; return nest; },\n    rollup: function(f) { rollup = f; return nest; }\n  };\n}\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume itâ€™s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like â€œ__proto__â€.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that donâ€™t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_join from \"./join\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_clone from \"./clone\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar cssNode,\n    cssRoot,\n    cssView,\n    svgNode;\n\nexport function parseCss(value) {\n  if (value === \"none\") return identity;\n  if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n  cssNode.style.transform = value;\n  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n  cssRoot.removeChild(cssNode);\n  value = value.slice(7, -1).split(\",\");\n  return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and weâ€™re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and weâ€™re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and weâ€™re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and weâ€™re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and weâ€™re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n  });\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  end: transition_end\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      return defaultTiming.time = now(), defaultTiming;\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import { max, min, sum } from 'd3-array';\nimport { Graph, alg } from 'graphlib';\nimport { map, nest, set } from 'd3-collection';\nimport { interpolate } from 'd3-interpolate';\nimport { event, select } from 'd3-selection';\nimport { transition } from 'd3-transition';\nimport { dispatch } from 'd3-dispatch';\nimport { format } from 'd3-format';\n\n/**\n * Create a new graph where nodes in the same rank set are merged into one node.\n *\n * Depends on the \"backwards\" attribute of the nodes in G, and the \"delta\"\n * atribute of the edges.\n *\n */\nfunction groupedGraph (G, rankSets) {\n  if ( rankSets === void 0 ) rankSets = [];\n\n  // Not multigraph because this is only used for calculating ranks\n  var GG = new Graph({directed: true});\n  if (G.nodes().length === 0) { return GG }\n\n  // Make sure there is a minimum-rank set\n  rankSets = ensureSmin(G, rankSets);\n\n  // Construct map of node ids to the set they are in, if any\n  var nodeSets = map();\n  var set$$1;\n  var id;\n  var i;\n  var j;\n  for (i = 0; i < rankSets.length; ++i) {\n    set$$1 = rankSets[i];\n    if (!set$$1.nodes || set$$1.nodes.length === 0) { continue }\n    id = '' + i;\n    for (j = 0; j < set$$1.nodes.length; ++j) {\n      nodeSets.set(set$$1.nodes[j], id);\n    }\n    GG.setNode(id, { type: set$$1.type, nodes: set$$1.nodes });\n  }\n\n  // use i to keep counting new ids\n  var nodes = G.nodes();\n  G.nodes().forEach(function (u) {\n    var d = G.node(u);\n    if (!nodeSets.has(u)) {\n      id = '' + (i++);\n      set$$1 = { type: 'same', nodes: [u] };\n      nodeSets.set(u, id);\n      GG.setNode(id, set$$1);\n    }\n  });\n\n  // Add edges between nodes/groups\n  G.edges().forEach(function (e) {\n    var d = G.edge(e);\n    var sourceSet = nodeSets.get(e.v);\n    var targetSet = nodeSets.get(e.w);\n\n    // Minimum edge length depends on direction of nodes:\n    //  -> to -> : 1\n    //  -> to <- : 0\n    //  <- to -> : 0 (in opposite direction??)\n    //  <- to <- : 1 in opposite direction\n    var edge = GG.edge(sourceSet, targetSet) || { delta: 0 };\n    if (sourceSet === targetSet) {\n      edge.delta = 0;\n      GG.setEdge(sourceSet, targetSet, edge);\n    } else if (G.node(e.v).backwards) {\n      edge.delta = Math.max(edge.delta, G.node(e.w).backwards ? 1 : 0);\n      GG.setEdge(targetSet, sourceSet, edge);\n    } else {\n      edge.delta = Math.max(edge.delta, G.node(e.w).backwards ? 0 : 1);\n      GG.setEdge(sourceSet, targetSet, edge);\n    }\n  });\n\n  return GG\n}\n\n// export function linkDelta (nodeBackwards, link) {\n//   if (nodeBackwards(link.source)) {\n//     return nodeBackwards(link.target) ? 1 : 0\n//   } else {\n//     return nodeBackwards(link.target) ? 0 : 1\n//   }\n// }\n\nfunction ensureSmin (G, rankSets) {\n  for (var i = 0; i < rankSets.length; ++i) {\n    if (rankSets[i].type === 'min') {\n      return rankSets  // ok\n    }\n  }\n\n  // find the first sourceSet node, or else use the first node\n  var sources = G.sources();\n  var n0 = sources.length ? sources[0] : G.nodes()[0];\n  return [{ type: 'min', nodes: [ n0 ] }].concat(rankSets)\n}\n\n/**\n * Reverse edges in G to make it acyclic\n */\nfunction makeAcyclic (G, v0) {\n  var tree = findSpanningTree(G, v0);\n\n  G.edges().forEach(function (e) {\n    var rel = nodeRelationship(tree, e.v, e.w);\n    if (rel < 0) {\n      var label = G.edge(e) || {};\n      label.reversed = true;\n      G.removeEdge(e);\n      G.setEdge(e.w, e.v, label);\n    }\n  });\n\n  return G\n}\n\n// find spanning tree, starting from the given node.\n// return new graph where nodes have depth and thread\nfunction findSpanningTree (G, v0) {\n  var visited = set();\n  var tree = new Graph({directed: true});\n  var thread = [];\n\n  if (!G.hasNode(v0)) { throw Error('node not in graph') }\n\n  doDfs(G, v0, visited, tree, thread);\n  G.nodes().forEach(function (u) {\n    if (!visited.has(u)) {\n      doDfs(G, u, visited, tree, thread);\n    }\n  });\n\n  thread.forEach(function (u, i) {\n    tree.node(u).thread = (i + 1 < thread.length) ? thread[i + 1] : thread[0];\n  });\n\n  return tree\n}\n\n/**\n * Returns 1 if w is a descendent of v, -1 if v is a descendent of w, and 0 if\n * they are unrelated.\n */\nfunction nodeRelationship (tree, v, w) {\n  var V = tree.node(v);\n  var W = tree.node(w);\n  if (V.depth < W.depth) {\n    var u = V.thread;  // next node\n    while (tree.node(u).depth > V.depth) {\n      if (u === w) { return 1 }\n      u = tree.node(u).thread;\n    }\n  } else if (W.depth < V.depth) {\n    var u$1 = W.thread;  // next node\n    while (tree.node(u$1).depth > W.depth) {\n      if (u$1 === v) { return -1 }\n      u$1 = tree.node(u$1).thread;\n    }\n  }\n  return 0\n}\n\nfunction doDfs (G, v, visited, tree, thread, depth) {\n  if ( depth === void 0 ) depth = 0;\n\n  if (!visited.has(v)) {\n    visited.add(v);\n    thread.push(v);\n    tree.setNode(v, { depth: depth });\n\n    // It doesn't seem to cause a problem with letters as node ids, but numbers\n    // are sorted when using G.successors(). So use G.outEdges() instead.\n    var next = G.outEdges(v).map(function (e) { return e.w; });\n    next.forEach(function (w, i) {\n      if (!visited.has(w)) {\n        tree.setEdge(v, w, { delta: 1 });\n      }\n      doDfs(G, w, visited, tree, thread, depth + 1);\n    });\n  }\n}\n\n/**\n * Take an acyclic graph and assign initial ranks to the nodes\n */\nfunction assignInitialRanks (G) {\n  // Place nodes on queue when they have no unmarked in-edges. Initially, this\n  // means sources.\n  var queue = G.sources();\n  var seen = set();\n  var marked = set();\n\n  // Mark any loops, since they don't affect rank assignment\n  G.edges().forEach(function (e) {\n    if (e.v === e.w) { marked.add(edgeIdString(e)); }\n  });\n\n  G.nodes().forEach(function (v) {\n    G.node(v).rank = 0;\n  });\n\n  var loop = function () {\n    var v = queue.shift();\n    seen.add(v);\n\n    var V = G.node(v);\n    if (!V) { G.setNode(v, (V = {})); }\n\n    // Set rank to minimum of incoming edges\n    V.rank = 0;\n    G.inEdges(v).forEach(function (e) {\n      var delta = G.edge(e).delta === undefined ? 1 : G.edge(e).delta;\n      V.rank = Math.max(V.rank, G.node(e.v).rank + delta);\n    });\n\n    // Mark outgoing edges\n    G.outEdges(v).forEach(function (e) {\n      marked.add(edgeIdString(e));\n    });\n\n    // Add nodes to queue when they have no unmarked in-edges.\n    G.nodes().forEach(function (n) {\n      if (queue.indexOf(n) < 0 && !seen.has(n) &&\n          !G.inEdges(n).some(function (e) { return !marked.has(edgeIdString(e)); })) {\n        queue.push(n);\n      }\n    });\n  };\n\n  while (queue.length > 0) loop();\n}\n\nfunction edgeIdString (e) {\n  return e.v + '\\x01' + e.w + '\\x01' + e.name\n}\n\n/**\n * Assign ranks to the nodes in G, according to rankSets.\n */\nfunction assignRanks (G, rankSets) {\n  // Group nodes together, and add additional edges from Smin to sources\n  var GG = groupedGraph(G, rankSets);\n  if (GG.nodeCount() === 0) { return }\n\n  // Add additional edges from Smin to sources\n  addTemporaryEdges(GG);\n\n  // Make the graph acyclic\n  makeAcyclic(GG, '0');\n\n  // Assign the initial ranks\n  assignInitialRanks(GG);\n\n  // XXX improve initial ranking...\n  moveSourcesRight(GG);\n\n  // Apply calculated ranks to original graph\n  // const ranks = []\n  GG.nodes().forEach(function (u) {\n    var groupedNode = GG.node(u);\n    // while (node.rank >= ranks.length) ranks.push([])\n    groupedNode.nodes.forEach(function (v) {\n      G.node(v).rank = groupedNode.rank;\n    });\n  });\n  // return ranks\n}\n\n// export function nodeBackwards (link) {\n//   if (link.source.direction === 'l') {\n//     return link.target.direction === 'l' ? 1 : 0\n//   } else {\n//     return link.target.direction === 'l' ? 0 : 1\n//   }\n// }\n\nfunction addTemporaryEdges (GG) {\n  // Add temporary edges between Smin and sources\n  GG.sources().forEach(function (u) {\n    if (u !== '0') {\n      GG.setEdge('0', u, { temp: true, delta: 0 });\n    }\n  });\n\n  // XXX Should also add edges from sinks to Smax\n\n  // G.nodes().forEach(u => {\n  //   if (!nodeSets.has(u)) {\n  //     GG.\n  //   }\n  // });\n}\n\nfunction moveSourcesRight (GG) {\n  GG.edges().forEach(function (e) {\n    var edge = GG.edge(e);\n    if (edge.temp) { moveRight(e.w); }\n  });\n\n  function moveRight (v) {\n    var V = GG.node(v);\n    var rank = min(GG.outEdges(v), function (e) { return GG.node(e.w).rank - GG.edge(e).delta; });\n    if (rank !== undefined) { V.rank = rank; }\n  }\n}\n\nfunction initialOrdering (G, ranks) {\n  var order = [];\n  if (ranks.length === 0) { return order }\n\n  // Start with sources & nodes in rank 0\n  var start = G.sources();\n  var nodeRanks = map();\n  ranks.forEach(function (nodes, i) {\n    order.push([]);\n    nodes.forEach(function (u) {\n      if (i === 0 && start.indexOf(u) < 0) { start.push(u); }\n      nodeRanks.set(u, i);\n    });\n  });\n\n  alg.preorder(G, start).forEach(function (u) {\n    order[nodeRanks.get(u)].push(u);\n  });\n\n  return order\n}\n\n/** @module node-ordering/count-crossings */\n\n/**\n * Count the total number of crossings between 2 layers.\n *\n * This is the sum of the countBetweenCrossings and countLoopCrossings.\n *\n * @param {Graph} G - The graph.\n * @param {Array} orderA - List of node ids on left side.\n * @param {Array} orderB - List of node ids on right side.\n */\nfunction countCrossings (G, orderA, orderB) {\n  return (\n    countBetweenCrossings(G, orderA, orderB) // +\n    // countLoopCrossings(G, orderA, orderB)\n  )\n}\n\n/**\n * Count the number of crossings of edges passing between 2 layers.\n *\n * Algorithm from\n * http://jgaa.info/accepted/2004/BarthMutzelJuenger2004.8.2.pdf\n *\n * @param {Graph} G - The graph.\n * @param {Array} orderA - List of node ids on left side.\n * @param {Array} orderB - List of node ids on right side.\n */\nfunction countBetweenCrossings (G, orderA, orderB) {\n  var north;\n  var south;\n  var q;\n\n  if (orderA.length > orderB.length) {\n    north = orderA;\n    south = orderB;\n  } else {\n    north = orderB;\n    south = orderA;\n  }\n  q = south.length;\n\n  // lexicographically sorted edges from north to south\n  var southSeq = [];\n  north.forEach(function (u) {\n    south.forEach(function (v, j) {\n      if (G.hasEdge(u, v) || G.hasEdge(v, u)) { southSeq.push(j); }\n    });\n  });\n\n  // build accumulator tree\n  var firstIndex = 1;\n  while (firstIndex < q) { firstIndex *= 2; }\n  var treeSize = 2 * firstIndex - 1;  // number of tree nodes\n  firstIndex -= 1;                      // index of leftmost leaf\n\n  var tree = new Array(treeSize);\n  for (var i = 0; i < treeSize; i++) { tree[i] = 0; }\n\n  // count the crossings\n  var count = 0;\n  southSeq.forEach(function (k) {\n    var index = k + firstIndex;\n    tree[index]++;\n    while (index > 0) {\n      if (index % 2) { count += tree[index + 1]; }\n      index = Math.floor((index - 1) / 2);\n      tree[index]++;\n    }\n  });\n\n  return count\n}\n\n/**\n * Count the number of crossings from within-layer edges.\n *\n * @param {Graph} G - The graph.\n * @param {Array} orderA - List of node ids on left side.\n * @param {Array} orderB - List of node ids on right side.\n */\n\nfunction swapNodes (G, order) {\n  var improved = true;\n  while (improved) {\n    improved = false;\n    for (var i = 0; i < order.length; ++i) {\n      for (var j = 0; j < order[i].length - 1; ++j) {\n        var count0 = allCrossings$1(G, order, i);\n        transpose(order[i], j, j + 1);\n        var count1 = allCrossings$1(G, order, i);\n\n        if (count1 < count0) {\n          improved = true;\n        } else {\n          transpose(order[i], j, j + 1);  // put back\n        }\n      }\n    }\n  }\n}\n\nfunction allCrossings$1 (G, order, i) {\n  var count = 0;\n  if (i > 0) {\n    count += countCrossings(G, order[i - 1], order[i]);\n  }\n  if (i + 1 < order.length) {\n    count += countCrossings(G, order[i], order[i + 1]);\n  }\n  return count\n}\n\nfunction transpose (list, i, j) {\n  var tmp = list[i];\n  list[i] = list[j];\n  list[j] = tmp;\n}\n\nfunction medianValue (positions) {\n  var m = Math.floor(positions.length / 2);\n  if (positions.length === 0) {\n    return -1\n  } else if (positions.length % 2 === 1) {\n    return positions[m]\n  } else if (positions.length === 2) {\n    return (positions[0] + positions[1]) / 2\n  } else {\n    var left = positions[m - 1] - positions[0];\n    var right = positions[positions.length - 1] - positions[m];\n    return (positions[m - 1] * right + positions[m] * left) / (left + right)\n  }\n}\n\nfunction neighbourPositions (G, order, i, j, u, includeLoops) {\n  if ( includeLoops === void 0 ) includeLoops = false;\n\n  // current rank i\n  // neighbour rank j\n  var thisRank = order[i];\n  var otherRank = order[j];\n\n  var positions = [];\n\n  // neighbouring positions on other rank\n  otherRank.forEach(function (n, i) {\n    if (G.nodeEdges(n, u).length > 0) {\n      positions.push(i);\n    }\n  });\n\n  if (positions.length === 0 && includeLoops) {\n    // if no neighbours in other rank, look for loops to this rank\n    // XXX only on one side?\n    thisRank.forEach(function (n, i) {\n      if (G.nodeEdges(n, u).length > 0) {\n        positions.push(i + 0.5);\n      }\n    });\n  }\n\n  positions.sort(function (a, b) { return a - b; });\n\n  return positions\n}\n\n/**\n * Sort arr according to order. -1 in order means stay in same position.\n */\nfunction sortByPositions (arr, order) {\n  var origOrder = map(arr.map(function (d, i) { return [d, i]; }), function (d) { return d[0]; });\n\n  // console.log('sorting', arr, order, origOrder)\n  for (var i = 1; i < arr.length; ++i) {\n    // console.group('start', i, arr[i])\n    for (var k = i; k > 0; --k) {\n      var j = k - 1;\n      var a = order.get(arr[j]);\n      var b = order.get(arr[k]);\n\n      // count back over any fixed positions (-1)\n      while ((a = order.get(arr[j])) === -1 && j > 0) { j--; }\n\n      // console.log(j, k, arr[j], arr[k], a, b)\n      if (b === -1 || a === -1) {\n        // console.log('found -1', a, b, 'skipping', j, k)\n        break\n      }\n\n      if (a === b) {\n        a = origOrder.get(arr[j]);\n        b = origOrder.get(arr[k]);\n        // console.log('a == b, switching to orig order', a, b)\n      }\n\n      if (b >= a) {\n        // console.log('k > k -1, stopping')\n        break\n      }\n      // console.log('swapping', arr[k], arr[j])\n      // swap arr[k], arr[j]\n      var assign;\n      (assign = [arr[j], arr[k]], arr[k] = assign[0], arr[j] = assign[1]);\n      // console.log(arr)\n    }\n    // console.groupEnd()\n  }\n  // console.log('-->', arr)\n}\n\nfunction sortNodes$1 (G, order, sweepDirection, includeLoops) {\n  if ( sweepDirection === void 0 ) sweepDirection = 1;\n  if ( includeLoops === void 0 ) includeLoops = false;\n\n  if (sweepDirection > 0) {\n    var loop = function ( r ) {\n      var medians = map();\n      order[r].forEach(function (u) {\n        var neighbour = medianValue(neighbourPositions(G, order, r, r - 1, u, includeLoops));\n        medians.set(u, neighbour);\n      });\n      sortByPositions(order[r], medians);\n    };\n\n    for (var r = 1; r < order.length; ++r) loop( r );\n  } else {\n    var loop$1 = function ( r ) {\n      var medians$1 = map();\n      order[r].forEach(function (u) {\n        var neighbour = medianValue(neighbourPositions(G, order, r, r + 1, u, includeLoops));\n        medians$1.set(u, neighbour);\n      });\n      sortByPositions(order[r], medians$1);\n    };\n\n    for (var r$1 = order.length - 2; r$1 >= 0; --r$1) loop$1( r$1 );\n  }\n}\n\n/** @module node-ordering */\n\n/**\n * Sorts the nodes in G, setting the `depth` attribute on each.\n *\n * @param {Graph} G - The graph. Nodes must have a `rank` attribute.\n *\n */\nfunction sortNodes (G, maxIterations) {\n  if ( maxIterations === void 0 ) maxIterations = 25;\n\n  var ranks = getRanks(G);\n  var order = initialOrdering(G, ranks);\n  var best = order;\n  var i = 0;\n\n  while (i++ < maxIterations) {\n    sortNodes$1(G, order, (i % 2 === 0));\n    swapNodes(G, order);\n    if (allCrossings(G, order) < allCrossings(G, best)) {\n      // console.log('improved', allCrossings(G, order), order);\n      best = copy(order);\n    }\n  }\n\n  // Assign depth to nodes\n  // const depths = map()\n  best.forEach(function (nodes) {\n    nodes.forEach(function (u, i) {\n      // depths.set(u, i)\n      G.node(u).depth = i;\n    });\n  });\n}\n\nfunction getRanks (G) {\n  var ranks = [];\n  G.nodes().forEach(function (u) {\n    var r = G.node(u).rank || 0;\n    while (r >= ranks.length) { ranks.push([]); }\n    ranks[r].push(u);\n  });\n  return ranks\n}\n\nfunction allCrossings (G, order) {\n  var count = 0;\n  for (var i = 0; i < order.length - 1; ++i) {\n    count += countCrossings(G, order[i], order[i + 1]);\n  }\n  return count\n}\n\nfunction copy (order) {\n  var result = [];\n  order.forEach(function (rank) {\n    result.push(rank.map(function (d) { return d; }));\n  });\n  return result\n}\n\nfunction addDummyNodes (G) {\n  // Add edges & dummy nodes\n  if (typeof G.graph() !== 'object') { G.setGraph({}); }\n  G.graph().dummyChains = [];\n  G.edges().forEach(function (e) { return normaliseEdge(G, e); });\n}\n\n// based on https://github.com/cpettitt/dagre/blob/master/lib/normalize.js\nfunction normaliseEdge (G, e) {\n  var edge = G.edge(e);\n  var dummies = dummyNodes(G.node(e.v), G.node(e.w));\n  if (dummies.length === 0) { return }\n\n  G.removeEdge(e);\n\n  var v = e.v;\n  dummies.forEach(function (dummy, i) {\n    var id = \"__\" + (e.v) + \"_\" + (e.w) + \"_\" + i;\n    if (!G.hasNode(id)) {\n      dummy.dummy = 'edge';\n      G.setNode(id, dummy);\n      if (i === 0) {\n        G.graph().dummyChains.push(id);\n      }\n    }\n    addDummyEdge(v, (v = id));\n  });\n  addDummyEdge(v, e.w);\n\n  function addDummyEdge (v, w) {\n    var label = { points: [], value: edge.value, origEdge: e, origLabel: edge };\n    G.setEdge(v, w, label, e.name);\n  }\n}\n\nfunction removeDummyNodes (G) {\n  var chains = G.graph().dummyChains || [];\n  chains.forEach(function (v) {\n    var node = G.node(v);\n    var dummyEdges = G.inEdges(v).map(function (e) { return G.edge(e); });\n\n    // Set dy and starting point of edge and add back to graph\n    dummyEdges.forEach(function (dummyEdge) {\n      dummyEdge.origLabel.dy = dummyEdge.dy;\n      dummyEdge.origLabel.x0 = dummyEdge.x0;\n      dummyEdge.origLabel.y0 = dummyEdge.y0;\n      dummyEdge.origLabel.r0 = dummyEdge.r0;\n      dummyEdge.origLabel.d0 = dummyEdge.d0;\n      G.setEdge(dummyEdge.origEdge, dummyEdge.origLabel);\n    });\n    var r1s = dummyEdges.map(function (dummyEdge) { return dummyEdge.r1; });\n\n    // Walk through chain\n    var w;\n    while (node.dummy) {\n      dummyEdges = G.outEdges(v).map(function (e) { return G.edge(e); });\n      dummyEdges.forEach(function (dummyEdge, i) {\n        dummyEdge.origLabel.points.push({\n          x: (node.x0 + node.x1) / 2,\n          y: dummyEdge.y0,\n          d: dummyEdge.d0,\n          ro: dummyEdge.r0,\n          ri: r1s[i]  // from last edge\n        });\n      });\n      r1s = dummyEdges.map(function (dummyEdge) { return dummyEdge.r1; });\n\n      // move on\n      w = G.successors(v)[0];\n      G.removeNode(v);\n      node = G.node(v = w);\n    }\n\n    // Set ending point of edge\n    dummyEdges.forEach(function (dummyEdge) {\n      dummyEdge.origLabel.x1 = dummyEdge.x1;\n      dummyEdge.origLabel.y1 = dummyEdge.y1;\n      dummyEdge.origLabel.r1 = dummyEdge.r1;\n      dummyEdge.origLabel.d1 = dummyEdge.d1;\n    });\n  });\n}\n\nfunction dummyNodes (source, target) {\n  var dummyNodes = [];\n  var r = source.rank;\n\n  if (r + 1 <= target.rank) {\n    // add more to get forwards\n    if (source.backwards) {\n      dummyNodes.push({rank: r, backwards: false});  // turn around\n    }\n    while (++r < target.rank) {\n      dummyNodes.push({rank: r, backwards: false});\n    }\n    if (target.backwards) {\n      dummyNodes.push({rank: r, backwards: false});  // turn around\n    }\n  } else if (r > target.rank) {\n    // add more to get backwards\n    if (!source.backwards) {\n      dummyNodes.push({rank: r, backwards: true});  // turn around\n    }\n    while (r-- > target.rank + 1) {\n      dummyNodes.push({rank: r, backwards: true});\n    }\n    if (!target.backwards) {\n      dummyNodes.push({rank: r, backwards: true});  // turn around\n    }\n  }\n\n  return dummyNodes\n}\n\nfunction nestGraph (nodes) {\n  var maxRank = max(nodes, function (d) { return d.rank || 0; }) || 0;\n  var maxBand = max(nodes, function (d) { return d.band || 0; }) || 0;\n\n  // const nodes = graph.nodes().concat(graph.dummyNodes())\n\n  var nested = nest()\n    .key(function (d) { return d.rank || 0; })\n    .key(function (d) { return d.band || 0; })\n    .sortValues(function (a, b) { return a.depth - b.depth; })\n    .map(nodes);\n\n  var result = new Array(maxRank + 1);\n  var rank;\n  for (var i = 0; i <= maxRank; ++i) {\n    result[i] = new Array(maxBand + 1);\n    rank = nested.get(i);\n    if (rank) {\n      for (var j = 0; j <= maxBand; ++j) {\n        result[i][j] = rank.get(j) || [];\n      }\n    } else {\n      for (var j$1 = 0; j$1 <= maxBand; ++j$1) {\n        result[i][j$1] = [];\n      }\n    }\n  }\n\n  result.bandValues = bandValues(result);\n\n  return result\n}\n\nfunction bandValues (nested) {\n  if (nested.length === 0 || nested[0].length === 0) { return [] }\n\n  var Nb = nested[0].length;\n  var values = new Array(Nb);\n  for (var i = 0; i < Nb; i++) { values[i] = 0; }\n\n  nested.forEach(function (rank) {\n    rank.forEach(function (band, j) {\n      var total = sum(band, function (d) { return d.value; });\n      values[j] = Math.max(values[j], total);\n    });\n  });\n\n  return values\n}\n\n// export function minEdgeDx (w, y0, y1) {\n//   console.log('mindx', w, y0, y1)\n//   const dy = y1 - y0\n//   const ay = Math.abs(dy) - w  // final sign doesn't matter\n//   const dx2 = w * w - ay * ay\n//   const dx = dx2 >= 0 ? Math.sqrt(dx2) : w\n//   return dx\n// }\n\nfunction positionHorizontally (G, width, nodeWidth) {\n  // const minWidths = new Array(maxRank).fill(0)\n  // G.edges().forEach(e => {\n  //   const r0 = G.node(e.v).rank || 0\n  //   minWidths[r0] = Math.max(minWidths[r0], minEdgeDx(G.edge(e).dy, G.node(e.v).y, G.node(e.w).y))\n  // })\n  // for (let i = 0; i < nested.length - 1; ++i) {\n  //   minWidths[i] = 0\n  //   nested[i].forEach(band => {\n  //     band.forEach(d => {\n  //       // edges for dummy nodes, outgoing for real nodes\n  //       (d.outgoing || d.edges).forEach(e => {\n  //         minWidths[i] = Math.max(minWidths[i], minEdgeDx(e))\n  //       })\n  //     })\n  //   })\n  // }\n  // const totalMinWidth = sum(minWidths)\n  // let dx\n  // if (totalMinWidth > width) {\n  //   // allocate fairly\n  //   dx = minWidths.map(w => width * w / totalMinWidth)\n  // } else {\n  //   const spare = (width - totalMinWidth) / (nested.length - 1)\n  //   dx = minWidths.map(w => w + spare)\n  // }\n\n  var maxRank = max(G.nodes(), function (u) { return G.node(u).rank || 0; }) || 0;\n  var dx = (width - nodeWidth) / maxRank;\n\n  G.nodes().forEach(function (u) {\n    var node = G.node(u);\n    node.x0 = dx * (node.rank || 0);\n    node.x1 = node.x0 + nodeWidth;\n  });\n}\n\nfunction defaultSeparation (a, b) {\n  return 1\n}\n\nfunction positionNodesVertically () {\n  var separation = defaultSeparation;\n\n  function layout (nested, totalHeight, whitespace) {\n    nested.forEach(function (layer) {\n      var y = 0;\n      layer.forEach(function (band, j) {\n        // Height of this band, based on fraction of value\n        var bandHeight = nested.bandValues[j] / sum(nested.bandValues) * totalHeight;\n\n        var margin = whitespace * bandHeight / 5;\n        var height = bandHeight - 2 * margin;\n        var total = sum(band, function (d) { return d.dy; });\n        var gaps = band.map(function (d, i) {\n          if (!d.value) { return 0 }\n          return band[i + 1] ? separation(band[i], band[i + 1], layout) : 0\n        });\n        var space = Math.max(0, height - total);\n        var kg = sum(gaps) ? space / sum(gaps) : 0;\n\n        var isFirst = true;\n        var isLast = true;  // XXX bands\n\n        var yy = y + margin;\n        if (band.length === 1) {\n          // centre vertically\n          yy += (height - band[0].dy) / 2;\n        }\n\n        var prevGap = isFirst ? Number.MAX_VALUE : 0;  // edge of graph\n        band.forEach(function (node, i) {\n          node.y = yy;\n          node.spaceAbove = prevGap;\n          node.spaceBelow = gaps[i] * kg;\n          yy += node.dy + node.spaceBelow;\n          prevGap = node.spaceBelow;\n\n          // XXX is this a good idea?\n          if (node.data && node.data.forceY !== undefined) {\n            node.y = margin + node.data.forceY * (height - node.dy);\n          }\n        });\n        if (band.length > 0) {\n          band[band.length - 1].spaceBelow = isLast ? Number.MAX_VALUE : 0;  // edge of graph\n        }\n\n        y += bandHeight;\n      });\n    });\n  }\n\n  layout.separation = function (x) {\n    if (!arguments.length) { return separation }\n    separation = required$1(x);\n    return layout\n  };\n\n  return layout\n}\n\nfunction required$1 (f) {\n  if (typeof f !== 'function') { throw new Error() }\n  return f\n}\n\nfunction prepareNodePorts (G, sortPorts) {\n  G.nodes().forEach(function (u) {\n    var node = G.node(u);\n    var ports = map();\n    function getOrSet (id, side) {\n      if (ports.has(id)) { return ports.get(id) }\n      var port = { id: id, node: node.data, side: side, incoming: [], outgoing: [] };\n      ports.set(id, port);\n      return port\n    }\n\n    G.inEdges(u).forEach(function (e) {\n      var edge = G.edge(e);\n      var port = getOrSet(edge.targetPortId || 'in', node.direction !== 'l' ? 'west' : 'east');\n      port.incoming.push(e);\n      edge.targetPort = port;\n    });\n    G.outEdges(u).forEach(function (e) {\n      var edge = G.edge(e);\n      var port = getOrSet(edge.sourcePortId || 'out', node.direction !== 'l' ? 'east' : 'west');\n      port.outgoing.push(e);\n      edge.sourcePort = port;\n    });\n\n    node.ports = ports.values();\n    node.ports.sort(sortPorts);\n\n    // Initialise from/to elsewhere lists\n    // XXX need to take more care with node directions\n    node.fromElsewhere = node.fromElsewhere || [];\n    node.toElsewhere = node.toElsewhere || [];\n    var fromElsewhereDy = 0;\n    node.fromElsewhere.forEach(function (link) {\n      link.x1 = node.x0;\n      fromElsewhereDy += link.dy;\n    });\n\n    // Set positions of ports, roughly -- so the other endpoints of links are\n    // known approximately when being sorted.\n    var y = {west: fromElsewhereDy, east: 0};\n    var i = {west: 0, east: 0};\n    node.ports.forEach(function (port) {\n      port.y = y[port.side];\n      port.index = i[port.side];\n      port.dy = Math.max(sum(port.incoming, function (e) { return G.edge(e).dy; }),\n                         sum(port.outgoing, function (e) { return G.edge(e).dy; }));\n      var x = (port.side === 'west' ? node.x0 : node.x1);\n\n      port.outgoing.forEach(function (e) {\n        var link = G.edge(e);\n        link.x0 = x;\n        link.y0 = node.y + port.y + link.dy / 2;\n      });\n      port.incoming.forEach(function (e) {\n        var link = G.edge(e);\n        link.x1 = x;\n        link.y1 = node.y + port.y + link.dy / 2;\n      });\n      y[port.side] += port.dy;\n      i[port.side] += 1;\n    });\n\n    node.toElsewhere.forEach(function (link) {\n      link.x0 = node.x1;\n    });\n  });\n}\n\nfunction linkDirection (G, e, head) {\n  if ( head === void 0 ) head = true;\n\n  if (e.v === e.w) {\n    // pretend self-links go downwards\n    return Math.PI / 2 * (head ? +1 : -1)\n  } else {\n    // const source = G.node(e.v)\n    // const target = G.node(e.w)\n    // return Math.atan2(target.y - source.y,\n    //                   target.x0 - source.x1)\n    var link = G.edge(e);\n    return Math.atan2(link.y1 - link.y0,\n                      link.x1 - link.x0)\n  }\n}\n\n/** @module edge-ordering */\n\n/**\n * Order the edges at all nodes.\n */\nfunction orderEdges (G, opts) {\n  G.nodes().forEach(function (u) { return orderEdgesOne(G, u, opts); });\n}\n\n/**\n * Order the edges at the given node.\n * The ports have already been setup and sorted.\n */\nfunction orderEdgesOne (G, v) {\n  var node = G.node(v);\n  node.ports.forEach(function (port) {\n    port.incoming.sort(compareDirection(G, node, false));\n    port.outgoing.sort(compareDirection(G, node, true));\n  });\n}\n\n/**\n * Sort links based on their endpoints & type\n */\nfunction compareDirection (G, node, head) {\n  if ( head === void 0 ) head = true;\n\n  return function (a, b) {\n    var da = linkDirection(G, a, head);\n    var db = linkDirection(G, b, head);\n    var c = head ? 1 : -1;\n\n    // links between same node, sort on type\n    if (a.v === b.v && a.w === b.w && Math.abs(da - db) < 1e-3) {\n      if (typeof a.name === 'number' && typeof b.name === 'number') {\n        return a.name - b.name\n      } else if (typeof a.name === 'string' && typeof b.name === 'string') {\n        return a.name.localeCompare(b.name)\n      } else {\n        return 0\n      }\n    }\n\n    // loops to same slice based on y-position\n    if (Math.abs(da - db) < 1e-3) {\n      if (a.w === b.w) {\n        return G.node(b.v).y - G.node(a.v).y\n      } else if (a.v === b.v) {\n        return G.node(b.w).y - G.node(a.w).y\n      } else {\n        return 0\n      }\n    }\n\n    // otherwise sort by direction\n    return c * (da - db)\n  }\n}\n\nfunction findFirst(links, p) {\n  var jmid = null;\n  for (var j = 0; j < links.length; ++j) {\n    if (p(links[j])) { jmid = j; break; }\n  }\n  return jmid;\n}\n\n\n/**\n * Adjust radii of curvature to avoid overlaps, as much as possible.\n * @param links - the list of links, ordered from outside to inside of bend\n * @param rr - \"r0\" or \"r1\", the side to work on\n */\nfunction sweepCurvatureInwards(links, rr) {\n  if (links.length === 0) { return; }\n\n  // sweep from inside of curvature towards outside\n  var Rmin = 0, h;\n  for (var i = links.length - 1; i >= 0; --i) {\n    h = links[i].dy / 2;\n    if (links[i][rr] - h < Rmin) {  // inner radius\n      links[i][rr] = Math.min(links[i].Rmax, Rmin + h);\n    }\n    Rmin = links[i][rr] + h;\n  }\n\n  // sweep from outside of curvature towards centre\n  var Rmax = links[0].Rmax + links[0].dy / 2;\n  for (var i$1 = 0; i$1 < links.length; ++i$1) {\n    h = links[i$1].dy / 2;\n    if (links[i$1][rr] + h > Rmax) {  // outer radius\n      links[i$1][rr] = Math.max(h, Rmax - h);\n    }\n    Rmax = links[i$1][rr] - h;\n  }\n\n}\n\n/**\n * Edge positioning.\n *\n * @module link-positioning\n */\n\n/*\n * Requires incoming and outgoing attributes on nodes\n */\nfunction layoutLinks (G) {\n  setEdgeEndpoints(G);\n  setEdgeCurvatures(G);\n  return G\n}\n\nfunction setEdgeEndpoints (G) {\n  G.nodes().forEach(function (u) {\n    var node = G.node(u);\n\n    var sy = node.y;\n    var ty = node.y;\n\n    node.fromElsewhere.forEach(function (link) {\n      link.y1 = ty + link.dy / 2;\n      link.d1 = node.backwards ? 'l' : 'r';\n      link.dy = link.dy;\n      ty += link.dy;\n    });\n\n    node.ports.forEach(function (port) {\n      sy = node.y + port.y;\n      ty = node.y + port.y;\n\n      port.outgoing.forEach(function (e) {\n        var link = G.edge(e);\n        // link.x0 = node.x1\n        link.y0 = sy + link.dy / 2;\n        link.d0 = node.backwards ? 'l' : 'r';\n        link.dy = link.dy;\n        sy += link.dy;\n      });\n\n      port.incoming.forEach(function (e) {\n        var link = G.edge(e);\n        // link.x1 = node.x0\n        link.y1 = ty + link.dy / 2;\n        link.d1 = node.backwards ? 'l' : 'r';\n        link.dy = link.dy;\n        ty += link.dy;\n      });\n    });\n\n    node.toElsewhere.forEach(function (link) {\n      link.y0 = sy + link.dy / 2;\n      link.d0 = node.backwards ? 'l' : 'r';\n      link.dy = link.dy;\n      sy += link.dy;\n    });\n  });\n}\n\nfunction setEdgeCurvatures (G) {\n  G.nodes().forEach(function (u) {\n    var node = G.node(u);\n    setEdgeEndCurvatures(node.toElsewhere, 'r0');\n    setEdgeEndCurvatures(node.fromElsewhere, 'r1');\n    node.ports.forEach(function (port) {\n      setEdgeEndCurvatures(port.outgoing.map(function (e) { return G.edge(e); }), 'r0');\n      setEdgeEndCurvatures(port.incoming.map(function (e) { return G.edge(e); }), 'r1');\n    });\n  });\n}\n\nfunction maximumRadiusOfCurvature (link) {\n  var Dx = link.x1 - link.x0;\n  var Dy = link.y1 - link.y0;\n  if (link.d0 !== link.d1) {\n    return Math.abs(Dy) / 2.1\n  } else {\n    return (Dy !== 0) ? (Dx * Dx + Dy * Dy) / Math.abs(4 * Dy) : Infinity\n  }\n}\n\nfunction setEdgeEndCurvatures (links, rr) {\n  // initialise segments, find reversal of curvature\n  links.forEach(function (link) {\n    // const link = (i < 0) ? link.segments[link.segments.length + i] : link.segments[i]\n    link.Rmax = maximumRadiusOfCurvature(link);\n    link[rr] = Math.max(link.dy / 2, (link.d0 === link.d1 ? link.Rmax * 0.6 : (5 + link.dy / 2)));\n  });\n\n  var jmid = (rr === 'r0'\n              ? findFirst(links, function (f) { return f.y1 > f.y0; })\n              : findFirst(links, function (f) { return f.y0 > f.y1; }));\n  if (jmid === null) { jmid = links.length; }\n\n  // Set maximum radius down from middle\n  sweepCurvatureInwards(links.slice(jmid), rr);\n\n  // Set maximum radius up from middle\n  if (jmid > 0) {\n    var links2 = [];\n    for (var j = jmid - 1; j >= 0; j--) { links2.push(links[j]); }\n    sweepCurvatureInwards(links2, rr);\n  }\n}\n\nfunction buildGraph (graph, nodeId, nodeBackwards, sourceId, targetId, linkType, linkValue) {\n  var G = new Graph({ directed: true, multigraph: true });\n  graph.nodes.forEach(function (node, i) {\n    var id = nodeId(node, i);\n    if (G.hasNode(id)) { throw new Error('duplicate: ' + id) }\n    G.setNode(id, {\n      data: node,\n      index: i,\n      backwards: nodeBackwards(node, i),\n      fromElsewhere: node.fromElsewhere || [],\n      toElsewhere: node.toElsewhere || [],\n      // XXX don't need these now have nodePositions?\n      x0: node.x0,\n      x1: node.x1,\n      y: node.y0\n    });\n  });\n\n  graph.links.forEach(function (link, i) {\n    var v = idAndPort(sourceId(link, i));\n    var w = idAndPort(targetId(link, i));\n    var label = {\n      data: link,\n      sourcePortId: v.port,\n      targetPortId: w.port,\n      index: i,\n      points: [],\n      value: linkValue(link, i),\n      type: linkType(link, i)\n    };\n    if (!G.hasNode(v.id)) { throw new Error('missing: ' + v.id) }\n    if (!G.hasNode(w.id)) { throw new Error('missing: ' + w.id) }\n    G.setEdge(v.id, w.id, label, linkType(link, i));\n  });\n\n  G.setGraph({});\n\n  return G\n}\n\nfunction idAndPort (x) {\n  if (typeof x === 'object') { return x }\n  return {id: x, port: undefined}\n}\n\n/**\n */\n\nfunction defaultNodes (graph) {\n  return graph.nodes\n}\n\nfunction defaultLinks (graph) {\n  return graph.links\n}\n\nfunction defaultNodeId (d) {\n  return d.id\n}\n\nfunction defaultNodeBackwards (d) {\n  return d.direction && d.direction.toLowerCase() === 'l'\n}\n\nfunction defaultSourceId (d) {\n  // return typeof d.source === 'object' ? d.source.id : d.source\n  return {\n    id: typeof d.source === 'object' ? d.source.id : d.source,\n    port: typeof d.sourcePort === 'object' ? d.sourcePort.id : d.sourcePort\n  }\n}\n\nfunction defaultTargetId (d) {\n  // return typeof d.target === 'object' ? d.target.id : d.target\n  return {\n    id: typeof d.target === 'object' ? d.target.id : d.target,\n    port: typeof d.targetPort === 'object' ? d.targetPort.id : d.targetPort\n  }\n}\n\nfunction defaultLinkType (d) {\n  return d.type\n}\n\nfunction defaultSortPorts (a, b) {\n  // XXX weighted sum\n  return a.id.localeCompare(b.id)\n}\n\n// function defaultNodeSubdivisions\n\nfunction sankeyLayout () {\n  var nodes = defaultNodes;\n  var links = defaultLinks;\n  var nodeId = defaultNodeId;\n  var nodeBackwards = defaultNodeBackwards;\n  var sourceId = defaultSourceId;\n  var targetId = defaultTargetId;\n  var linkType = defaultLinkType;\n  var ordering = null;\n  var rankSets = [];\n  var maxIterations = 25; // XXX setter/getter\n  var nodePosition = null;\n  var sortPorts = defaultSortPorts;\n\n  // extent\n  var x0 = 0;\n  var y0 = 0;\n  var x1 = 1;\n  var y1 = 1;\n\n  // node width\n  var dx = 1;\n\n  var scale = null;\n  var linkValue = function (e) { return e.value };\n  var whitespace = 0.5;\n  var verticalLayout = positionNodesVertically();\n\n  function sankey () {\n    var graph = {nodes: nodes.apply(null, arguments), links: links.apply(null, arguments)};\n    var G = buildGraph(graph, nodeId, nodeBackwards, sourceId, targetId, linkType, linkValue);\n\n    setNodeValues(G, linkValue);\n\n    if (nodePosition) {\n      // hard-coded node positions\n\n      G.nodes().forEach(function (u) {\n        var node = G.node(u);\n        var pos = nodePosition(node.data);\n        node.x0 = pos[0];\n        node.x1 = pos[0] + dx;\n        node.y = pos[1];\n      });\n      setWidths(G, scale);\n    } else {\n      // calculate node positions\n\n      if (ordering !== null) {\n        applyOrdering(G, ordering);\n      } else {\n        assignRanks(G, rankSets);\n        sortNodes(G, maxIterations);\n      }\n\n      addDummyNodes(G);\n      setNodeValues(G, linkValue);\n      if (ordering === null) {\n        // XXX sort nodes?\n        sortNodes(G, maxIterations);\n      }\n\n      var nested = nestGraph(G.nodes().map(function (u) { return G.node(u); }));\n      maybeScaleToFit(G, nested);\n      setWidths(G, scale);\n\n      // position nodes\n      verticalLayout(nested, y1 - y0, whitespace);\n      positionHorizontally(G, x1 - x0, dx);\n\n      // adjust origin\n      G.nodes().forEach(function (u) {\n        var node = G.node(u);\n        node.x0 += x0;\n        node.x1 += x0;\n        node.y += y0;\n      });\n    }\n\n    // sort & position links\n    prepareNodePorts(G, sortPorts);\n    orderEdges(G);\n    layoutLinks(G);\n\n    removeDummyNodes(G);\n    addLinkEndpoints(G);\n\n    copyResultsToGraph(G, graph);\n\n    return graph\n  }\n\n  sankey.update = function (graph, doOrderLinks) {\n    var G = buildGraph(graph, nodeId, nodeBackwards, sourceId, targetId, linkType, linkValue);\n    setNodeValues(G, linkValue);\n    var nested = nestGraph(G.nodes().map(function (u) { return G.node(u); }));\n    maybeScaleToFit(G, nested);\n    setWidths(G, scale);\n\n    prepareNodePorts(G, sortPorts);\n    orderEdges(G);\n    layoutLinks(G);\n\n    // removeDummyNodes(G)\n    addLinkEndpoints(G);\n\n    copyResultsToGraph(G, graph);\n\n    return graph\n  };\n  //   if (scale === null) sankey.scaleToFit(graph)\n  //   // set node and edge sizes\n  //   setNodeValues(graph, linkValue, scale)\n  //   if (doOrderLinks) {\n  //     orderLinks(graph)\n  //   }\n  //   layoutLinks(graph)\n  //   return graph\n  // }\n\n  sankey.nodes = function (x) {\n    if (arguments.length) {\n      nodes = required(x);\n      return sankey\n    }\n    return nodes\n  };\n\n  sankey.links = function (x) {\n    if (arguments.length) {\n      links = required(x);\n      return sankey\n    }\n    return links\n  };\n\n  sankey.nodeId = function (x) {\n    if (arguments.length) {\n      nodeId = required(x);\n      return sankey\n    }\n    return nodeId\n  };\n\n  sankey.nodeBackwards = function (x) {\n    if (arguments.length) {\n      nodeBackwards = required(x);\n      return sankey\n    }\n    return nodeBackwards\n  };\n\n  sankey.sourceId = function (x) {\n    if (arguments.length) {\n      sourceId = required(x);\n      return sankey\n    }\n    return sourceId\n  };\n\n  sankey.targetId = function (x) {\n    if (arguments.length) {\n      targetId = required(x);\n      return sankey\n    }\n    return targetId\n  };\n\n  sankey.linkType = function (x) {\n    if (arguments.length) {\n      linkType = required(x);\n      return sankey\n    }\n    return linkType\n  };\n\n  sankey.sortPorts = function (x) {\n    if (arguments.length) {\n      sortPorts = required(x);\n      return sankey\n    }\n    return sortPorts\n  };\n\n  // sankey.scaleToFit = function (graph) {\n  function maybeScaleToFit (G, nested) {\n    if (scale !== null) { return }\n    var maxValue = sum(nested.bandValues);\n    if (maxValue <= 0) {\n      scale = 1;\n    } else {\n      scale = (y1 - y0) / maxValue;\n      if (whitespace !== 1) { scale *= (1 - whitespace); }\n    }\n  }\n\n  sankey.ordering = function (x) {\n    if (!arguments.length) { return ordering }\n    ordering = x;\n    return sankey\n  };\n\n  sankey.rankSets = function (x) {\n    if (!arguments.length) { return rankSets }\n    rankSets = x;\n    return sankey\n  };\n\n  sankey.nodeWidth = function (x) {\n    if (!arguments.length) { return dx }\n    dx = x;\n    return sankey\n  };\n\n  sankey.nodePosition = function (x) {\n    if (!arguments.length) { return nodePosition }\n    nodePosition = x;\n    return sankey\n  };\n\n  sankey.size = function (x) {\n    if (!arguments.length) { return [x1 - x0, y1 - y0] }\n    x0 = y0 = 0;\n    x1 = +x[0];\n    y1 = +x[1];\n    return sankey\n  };\n\n  sankey.extent = function (x) {\n    if (!arguments.length) { return [[x0, y0], [x1, y1]] }\n    x0 = +x[0][0];\n    y0 = +x[0][1];\n    x1 = +x[1][0];\n    y1 = +x[1][1];\n    return sankey\n  };\n\n  sankey.whitespace = function (x) {\n    if (!arguments.length) { return whitespace }\n    whitespace = x;\n    return sankey\n  };\n\n  sankey.scale = function (x) {\n    if (!arguments.length) { return scale }\n    scale = x;\n    return sankey\n  };\n\n  sankey.linkValue = function (x) {\n    if (!arguments.length) { return linkValue }\n    linkValue = x;\n    return sankey\n  };\n\n  sankey.verticalLayout = function (x) {\n    if (!arguments.length) { return verticalLayout }\n    verticalLayout = required(x);\n    return sankey\n  };\n\n  function applyOrdering (G, ordering) {\n    ordering.forEach(function (x, i) {\n      x.forEach(function (u, j) {\n        if (u.forEach) {\n          u.forEach(function (v, k) {\n            var d = G.node(v);\n            if (d) {\n              d.rank = i;\n              d.band = j;\n              d.depth = k;\n            }\n          });\n        } else {\n          var d = G.node(u);\n          if (d) {\n            d.rank = i;\n            // d.band = 0\n            d.depth = j;\n          }\n        }\n      });\n    });\n  }\n\n  return sankey\n}\n\nfunction setNodeValues (G, linkValue) {\n  G.nodes().forEach(function (u) {\n    var d = G.node(u);\n    var incoming = sum(G.inEdges(u), function (e) { return G.edge(e).value; });\n    var outgoing = sum(G.outEdges(u), function (e) { return G.edge(e).value; });\n    incoming += sum(d.fromElsewhere || [], function (link) { return linkValue(link); });\n    outgoing += sum(d.toElsewhere | [], function (link) { return linkValue(link); });\n    d.value = Math.max(incoming, outgoing);\n  });\n}\n\nfunction setWidths (G, scale) {\n  G.edges().forEach(function (e) {\n    var edge = G.edge(e);\n    edge.dy = edge.value * scale;\n  });\n  G.nodes().forEach(function (u) {\n    var node = G.node(u);\n    node.dy = node.value * scale;\n\n    // Initialise from/to elsewhere lists\n    node.fromElsewhere = (node.fromElsewhere || []);\n    node.toElsewhere = (node.toElsewhere || []);\n    node.fromElsewhere.forEach(function (link) {\n      link.dy = link.value * scale;\n      link.source = { id: \"__from_elsewhere_\" + u };\n      link.target = node.data;\n    });\n    node.toElsewhere.forEach(function (link) {\n      link.dy = link.value * scale;\n      link.source = node.data;\n      link.target = { id: \"__to_elsewhere_\" + u };\n    });\n  });\n}\n\nfunction required (f) {\n  if (typeof f !== 'function') { throw new Error() }\n  return f\n}\n\nfunction addLinkEndpoints (G) {\n  G.edges().forEach(function (e) {\n    var edge = G.edge(e);\n    edge.points.unshift({x: edge.x0, y: edge.y0, ro: edge.r0, d: edge.d0});\n    edge.points.push({x: edge.x1, y: edge.y1, ri: edge.r1, d: edge.d1});\n  });\n\n  G.nodes().forEach(function (u) {\n    var node = G.node(u);\n    node.fromElsewhere.forEach(function (link) {\n      link.points = [{x: link.x1, y: link.y1, ri: link.r1, d: link.d1, style: \"down-right\"}];\n    });\n    node.toElsewhere.forEach(function (link) {\n      link.points = [{x: link.x0, y: link.y0, ri: link.r0, d: link.d0, style: \"right-down\"}];\n    });\n  });\n}\n\nfunction copyResultsToGraph (G, graph) {\n  G.nodes().forEach(function (u) {\n    var node = G.node(u);\n\n    // Build lists of edge data objects\n    node.data.incoming = [];\n    node.data.outgoing = [];\n    node.data.ports = node.ports;\n    node.data.ports.forEach(function (port) {\n      port.incoming = [];\n      port.outgoing = [];\n    });\n\n    node.data.dy = node.dy;\n    node.data.x0 = node.x0;\n    node.data.x1 = node.x1;\n    node.data.y0 = node.y;\n    node.data.y1 = node.y + node.dy;\n    node.data.rank = node.rank;\n    node.data.band = node.band;\n    node.data.depth = node.depth;\n    node.data.value = node.value;\n    node.data.spaceAbove = node.spaceAbove;\n    node.data.spaceBelow = node.spaceBelow;\n  });\n\n  G.edges().forEach(function (e) {\n    var edge = G.edge(e);\n    edge.data.source = G.node(e.v).data;\n    edge.data.target = G.node(e.w).data;\n    edge.data.sourcePort = edge.sourcePort;\n    edge.data.targetPort = edge.targetPort;\n    // console.log(edge)\n    edge.data.source.outgoing.push(edge.data);\n    edge.data.target.incoming.push(edge.data);\n    if (edge.data.sourcePort) { edge.data.sourcePort.outgoing.push(edge.data); }\n    if (edge.data.targetPort) { edge.data.targetPort.incoming.push(edge.data); }\n    edge.data.value = edge.value;\n    edge.data.type = edge.type;\n    edge.data.dy = edge.dy;\n    edge.data.points = edge.points || [];\n    // edge.data.id = `${e.v}-${e.w}-${e.name}`\n  });\n}\n\nfunction positionNodesVertically$1 () {\n  var iterations = 25;\n  var nodePadding = 8;\n\n  function layout (nested, height) {\n    initializeNodeDepth();\n    resolveCollisions();\n    for (var alpha = 1, i = iterations; i > 0; --i) {\n      relaxRightToLeft(alpha *= 0.99);\n      resolveCollisions();\n      relaxLeftToRight(alpha);\n      resolveCollisions();\n    }\n\n    function initializeNodeDepth () {\n      nested.forEach(function (layer) {\n        var i = 0;\n        layer.forEach(function (band) {\n          // ignore bands for this layout\n          band.forEach(function (node) {\n            node.y = i++;\n          });\n        });\n      });\n    }\n\n    function relaxLeftToRight (alpha) {\n      nested.forEach(function (layer) {\n        layer.forEach(function (band) {\n          band.forEach(function (node) {\n            var edges = node.incoming || node.edges;\n            if (edges.length) {\n              var y = sum(edges, weightedSource) / sum(edges, value);\n              node.y += (y - center(node)) * alpha;\n            }\n          });\n        });\n      });\n\n      function weightedSource (link) {\n        return center(link.source) * link.value\n      }\n    }\n\n    function relaxRightToLeft (alpha) {\n      nested.slice().reverse().forEach(function (layer) {\n        layer.forEach(function (band) {\n          band.forEach(function (node) {\n            var edges = node.outgoing || node.edges;\n            if (edges.length) {\n              var y = sum(edges, weightedTarget) / sum(edges, value);\n              node.y += (y - center(node)) * alpha;\n            }\n          });\n        });\n      });\n\n      function weightedTarget (link) {\n        return center(link.target) * link.value\n      }\n    }\n\n    function resolveCollisions () {\n      nested.forEach(function (layer) {\n        layer.forEach(function (nodes) {\n          var node;\n          var dy;\n          var y0 = 0;\n          var n = nodes.length;\n          var i;\n\n          // Push any overlapping nodes down.\n          nodes.sort(ascendingDepth);\n          for (i = 0; i < n; ++i) {\n            node = nodes[i];\n            dy = y0 - node.y;\n            if (dy > 0) { node.y += dy; }\n            y0 = node.y + node.dy + nodePadding;\n          }\n\n          // If the bottommost node goes outside the bounds, push it back up.\n          dy = y0 - nodePadding - height;\n          if (dy > 0) {\n            y0 = node.y -= dy;\n\n            // Push any overlapping nodes back up.\n            for (i = n - 2; i >= 0; --i) {\n              node = nodes[i];\n              dy = node.y + node.dy + nodePadding - y0;\n              if (dy > 0) { node.y -= dy; }\n              y0 = node.y;\n            }\n          }\n        });\n      });\n    }\n  }\n\n  layout.iterations = function (x) {\n    if (!arguments.length) { return iterations }\n    iterations = +x;\n    return layout\n  };\n\n  layout.padding = function (x) {\n    if (!arguments.length) { return nodePadding }\n    nodePadding = +x;\n    return layout\n  };\n\n  return layout\n}\n\nfunction center (node) {\n  return node.y + node.dy / 2\n}\n\nfunction value (link) {\n  return link.value\n}\n\nfunction ascendingDepth (a, b) {\n  return a.y - b.y\n}\n\n// function defaultSegments (d) {\n//   return d.segments\n// }\n\nfunction defaultMinWidth (d) {\n  return (d.dy === 0) ? 0 : 2\n}\n\nfunction sankeyLink() {\n  // var segments = defaultSegments\n  var minWidth = defaultMinWidth;\n\n  function radiusBounds(d) {\n    var Dx = d.x1 - d.x0,\n        Dy = d.y1 - d.y0,\n        Rmin = d.dy / 2,\n        Rmax = (Dx*Dx + Dy*Dy) / Math.abs(4*Dy);\n    return [Rmin, Rmax];\n  }\n\n  function link(d) {\n    if (d.points.length === 1) {\n      return toOrFromElsewherePath(d)\n    }\n\n    var path = '';\n    var seg;\n    for (var i = 0; i < d.points.length - 1; ++i) {\n      seg = {\n        x0: d.points[i].x,\n        y0: d.points[i].y,\n        x1: d.points[i + 1].x,\n        y1: d.points[i + 1].y,\n        r0: d.points[i].ro,\n        r1: d.points[i + 1].ri,\n        d0: d.points[i].d,\n        d1: d.points[i + 1].d,\n        dy: d.dy\n      };\n      path += segmentPath(seg);\n    }\n    return path\n  }\n\n  function segmentPath (d) {\n    var dir = (d.d0 || 'r') + (d.d1 || 'r');\n    if (d.source && d.source === d.target) {\n      return selfLink(d);\n    }\n    if (dir === 'rl') {\n      return fbLink(d);\n    }\n    if (dir === 'rd') {\n      return fdLink(d);\n    }\n    if (dir === 'dr') {\n      return dfLink(d);\n    }\n    if (dir === 'lr') {\n      return bfLink(d);\n    }\n\n    // Minimum thickness 2px\n    var h = Math.max(minWidth(d), d.dy) / 2,\n        x0 = d.x0,\n        x1 = d.x1,\n        y0 = d.y0,\n        y1 = d.y1;\n\n    if (x1 < x0) {\n      var assign;\n      (assign = [x1, x0], x0 = assign[0], x1 = assign[1]);\n      var assign$1;\n      (assign$1 = [y1, y0], y0 = assign$1[0], y1 = assign$1[1]);\n    }\n\n    var f = y1 > y0 ? 1 : -1,\n        fx = 1;  // dir === 'll' ? -1 : 1;\n\n    var Rlim = radiusBounds(d),\n          defaultRadius = Math.max(Rlim[0], Math.min(Rlim[1], (x1 - x0)/3));\n\n    var r0 = Math.max(Rlim[0], Math.min(Rlim[1], (d.r0 || defaultRadius))),\n        r1 = Math.max(Rlim[0], Math.min(Rlim[1], (d.r1 || defaultRadius)));\n\n    var dcx = (x1 - x0),\n          dcy = (y1 - y0) - f * (r0 + r1),\n          D = Math.sqrt(dcx*dcx + dcy*dcy);\n\n    var phi = -f * Math.acos(Math.min(1, (r0 + r1) / D)),\n          psi = Math.atan2(dcy, dcx);\n\n    var theta = Math.PI/2 + f * (psi + phi);\n\n    var hs = h * f * Math.sin(theta),\n        hc = h * Math.cos(theta),\n        x2 = x0 + fx * r0 * Math.sin(Math.abs(theta)),\n        x3 = x1 - fx * r1 * Math.sin(Math.abs(theta)),\n        y2 = y0 + r0 * f * (1 - Math.cos(theta)),\n        y3 = y1 - r1 * f * (1 - Math.cos(theta));\n\n    if (isNaN(theta) || Math.abs(theta) < 1e-3) {\n      theta = r0 = r1 = 0;\n      x2 = x0;\n      x3 = x1;\n      y2 = y0;\n      y3 = y1;\n      hs = 0;\n      hc = h;\n    }\n\n    function arc(dir, r) {\n      var f = ( dir * (y1-y0) > 0) ? 1 : 0,\n          rr = (fx * dir * (y1-y0) > 0) ? (r + h) : (r - h);\n      // straight line\n      if (theta === 0) { rr = r; }\n      return \"A\" + rr + \" \" + rr + \" \" + Math.abs(theta) + \" 0 \" + f + \" \";\n    }\n\n    var path;\n    // if (fx * (x2 - x3) < 0 || Math.abs(y1 - y0) > 4*h) {\n    // XXX this causes juddering during transitions\n\n    path =  (\"M\"     + [x0,    y0-h ] + \" \" +\n              arc(+1, r0) + [x2+hs, y2-hc] + \" \" +\n            \"L\"     + [x3+hs, y3-hc] + \" \" +\n              arc(-1, r1) + [x1,    y1-h ] + \" \" +\n            \"L\"     + [x1,    y1+h ] + \" \" +\n              arc(+1, r1) + [x3-hs, y3+hc] + \" \" +\n            \"L\"     + [x2-hs, y2+hc] + \" \" +\n              arc(-1, r0) + [x0,    y0+h ] + \" \" +\n            \"Z\");\n    \n    if (/NaN/.test(path)) {\n      console.error('path NaN', d, path);\n    }\n    return path;\n  }\n\n  function selfLink(d) {\n    var h = Math.max(minWidth(d), d.dy) / 2,\n        r = h*1.5,\n        theta = 2 * Math.PI,\n        x0 = d.x0,\n        y0 = d.y0;\n\n    function arc(dir) {\n      var f = (dir > 0) ? 1 : 0,\n          rr = (dir > 0) ? (r + h) : (r - h);\n      return \"A\" + rr + \" \" + rr + \" \" + Math.abs(theta) + \" 1 \" + f + \" \";\n    }\n\n    return (\"M\"     + [x0+0.1, y0-h] + \" \" +\n            arc(+1) + [x0-0.1, y0-h] + \" \" +\n            \"L\"     + [x0-0.1, y0+h] + \" \" +\n            arc(-1) + [x0+0.1, y0+h] + \" \" +\n            \"Z\");\n  }\n\n  function fbLink(d) {\n    // Minimum thickness 2px\n    var h = Math.max(minWidth(d), d.dy) / 2,\n        x0 = d.x0,\n        x1 = d.x1,\n        y0 = d.y0,\n        y1 = d.y1,\n        Dx = d.x1 - d.x0,\n        Dy = d.y1 - d.y0,\n        //Rlim = radiusBounds(d),\n        defaultRadius = ((d.r0 + d.r1) / 2) || (5 + h), //Math.max(Rlim[0], Math.min(Rlim[1], Dx/3)),\n        r = Math.min(Math.abs(y1-y0)/2.1, defaultRadius), //2*(d.r || defaultRadius),\n        theta = Math.atan2(Dy - 2*r, Dx),\n        l = Math.sqrt(Math.max(0, Dx*Dx + (Dy-2*r)*(Dy-2*r))),\n        f = d.y1 > d.y0 ? 1 : -1,\n        hs = h * Math.sin(theta),\n        hc = h * Math.cos(theta),\n        x2 = d.x0 + r * Math.sin(Math.abs(theta)),\n        x3 = d.x1 + r * Math.sin(Math.abs(theta)),\n        y2 = d.y0 + r * f * (1 - Math.cos(theta)),\n        y3 = d.y1 - r * f * (1 - Math.cos(theta));\n\n    function arc(dir) {\n      var f = (dir * theta > 0) ? 1 : 0,\n          rr = (dir * theta > 0) ? (r + h) : (r - h);\n      // straight line\n      if (theta === 0) { rr = r; }\n      return \"A\" + rr + \" \" + rr + \" \" + Math.abs(theta) + \" 0 \" + f + \" \";\n    }\n\n    return (\"M\"     + [x0,    y0-h ] + \" \" +\n            arc(+1) + [x2+hs, y2-hc] + \" \" +\n            \"L\"     + [x3+hs, y3-hc] + \" \" +\n            arc(+1) + [x1,    y1+h ] + \" \" +\n            \"L\"     + [x1,    y1-h ] + \" \" +\n            arc(-1) + [x3-hs, y3+hc] + \" \" +\n            \"L\"     + [x2-hs, y2+hc] + \" \" +\n            arc(-1) + [x0,    y0+h ] + \" \" +\n            \"Z\");\n  }\n\n  function fdLink(d) {\n    // Minimum thickness 2px\n    var h = Math.max(minWidth(d), d.dy) / 2,\n        x0 = d.x0,\n        x1 = d.x1,\n        y0 = d.y0,\n        y1 = d.y1,\n        Dx = d.x1 - d.x0,\n        Dy = d.y1 - d.y0,\n        theta = Math.PI / 2,\n        r = Math.max(0, x1 - x0),\n        f = d.y1 > d.y0,  // = 1\n        y2 = y0 + r;\n\n    function arc(dir) {\n      var f = (dir * theta > 0) ? 1 : 0,\n          rr = (dir * theta > 0) ? (r + h) : (r - h);\n      // straight line\n      if (theta === 0) { rr = r; }\n      return \"A\" + rr + \" \" + rr + \" \" + Math.abs(theta) + \" 0 \" + f + \" \";\n    }\n\n    return (\"M\"     + [x0,    y0-h ] + \" \" +\n            arc(+1) + [x1+h,  y2   ] + \" \" +\n            \"L\"     + [x1+h,  y1   ] + \" \" +\n            \"\"      + [x1-h,  y1   ] + \" \" +\n            \"\"      + [x1-h,  y2   ] + \" \" +\n            arc(-1) + [x0,    y0+h ] + \" \" +\n            \"Z\");\n  }\n\n  function dfLink(d) {\n    // Minimum thickness 2px\n    var h = Math.max(minWidth(d), d.dy) / 2,\n        x0 = d.x0,\n        x1 = d.x1,\n        y0 = d.y0,\n        y1 = d.y1,\n        Dx = d.x1 - d.x0,\n        Dy = d.y1 - d.y0,\n        theta = Math.PI / 2,\n        r = Math.max(0, x1 - x0),\n        f = d.y1 > d.y0,  // = 1\n        y2 = y1 - r;\n\n    function arc(dir) {\n      var f = (dir * theta > 0) ? 1 : 0,\n          rr = (dir * theta > 0) ? (r + h) : (r - h);\n      // straight line\n      if (theta === 0) { rr = r; }\n      return \"A\" + rr + \" \" + rr + \" \" + Math.abs(theta) + \" 0 \" + f + \" \";\n    }\n\n    return (\"M\"     + [x0-h,  y0   ] + \" \" +\n            \"L\"     + [x0+h,  y0   ] + \" \" +\n            \"\"      + [x0+h,  y2   ] + \" \" +\n            arc(-1) + [x1  ,  y1-h ] + \" \" +\n            \"L\"     + [x1  ,  y1+h ] + \" \" +\n            arc(+1) + [x0-h,  y2   ] + \" \" +\n            \"Z\");\n  }\n\n  function bfLink(d) {\n    // Minimum thickness 2px\n    var h = Math.max(minWidth(d), d.dy) / 2,\n        x0 = d.x0,\n        x1 = d.x1,\n        y0 = d.y0,\n        y1 = d.y1,\n        Dx = d.x1 - d.x0,\n        Dy = d.y1 - d.y0,\n        //Rlim = radiusBounds(d),\n        defaultRadius = ((d.r0 + d.r1) / 2) || (5 + h), //Math.max(Rlim[0], Math.min(Rlim[1], Dx/3)),\n        r = Math.min(Math.abs(Dy)/2.1, defaultRadius), //2*(d.r || defaultRadius),\n        theta = Math.atan2(Dy - 2*r, Dx),\n        l = Math.sqrt(Math.max(0, Dx*Dx + (Dy-2*r)*(Dy-2*r))),\n        f = d.y1 > d.y0 ? 1 : -1,\n        hs = h * Math.sin(theta),\n        hc = h * Math.cos(theta),\n        x2 = d.x0 - r * Math.sin(Math.abs(theta)),\n        x3 = d.x1 - r * Math.sin(Math.abs(theta)),\n        y2 = d.y0 + r * f * (1 - Math.cos(theta)),\n        y3 = d.y1 - r * f * (1 - Math.cos(theta));\n\n    function arc(dir) {\n      var f = (dir * theta > 0) ? 1 : 0,\n          rr = (-dir * theta > 0) ? (r + h) : (r - h);\n      // straight line\n      if (theta === 0) { rr = r; }\n      return \"A\" + rr + \" \" + rr + \" \" + Math.abs(theta) + \" 0 \" + f + \" \";\n    }\n\n    return (\"M\"     + [x0,    y0-h ] + \" \" +\n            arc(-1) + [x2-hs, y2-hc] + \" \" +\n            \"L\"     + [x3-hs, y3-hc] + \" \" +\n            arc(-1) + [x1,    y1+h ] + \" \" +\n            \"L\"     + [x1,    y1-h ] + \" \" +\n            arc(+1) + [x3+hs, y3-hc] + \" \" +\n            \"L\"     + [x2+hs, y2-hc] + \" \" +\n            arc(+1) + [x0,    y0+h ] + \" \" +\n            \"Z\");\n  }\n\n  function toOrFromElsewherePath(d) {\n    var p = d.points[0];\n    var h = Math.max(minWidth(d), d.dy) / 2;\n\n    // XXX draw these properly with curves and appropriate radii\n\n    if (p.style === \"down-right\") {\n      return (\"M\" + [p.x - 20, p.y-h] + \" \" +\n              \"L\" + [p.x, p.y-h] + \" \" +\n              \"L\" + [p.x, p.y+h] + \" \" +\n              \"L\" + [p.x - 20, p.y+h] + \" \" +\n              \"Z\")\n    }\n    if (p.style === \"right-down\") {\n      return (\"M\" + [p.x, p.y-h] + \" \" +\n              \"L\" + [p.x + 20, p.y-h] + \" \" +\n              \"L\" + [p.x + 20, p.y+h] + \" \" +\n              \"L\" + [p.x, p.y+h] + \" \" +\n              \"Z\")\n    }\n  }\n\n  link.minWidth = function (x) {\n    if (arguments.length) {\n      minWidth = required$2(x);\n      return link\n    }\n    return minWidth\n  };\n\n  return link;\n}\n\nfunction required$2 (f) {\n  if (typeof f !== 'function') { throw new Error() }\n  return f\n}\n\nvar sankeyNode = function () {\n  var nodeTitle = function (d) { return d.title !== undefined ? d.title : d.id; };\n  var nodeValue = function (d) { return null; };\n  var nodeVisible = function (d) { return !!nodeTitle(d); };\n\n  function sankeyNode (context) {\n    var selection = context.selection ? context.selection() : context;\n\n    if (selection.select('text').empty()) {\n      selection.append('title');\n      selection.append('line')\n        .attr('x1', 0)\n        .attr('x2', 0);\n      selection.append('rect')\n        .attr('class', 'node-body');\n      selection.append('text')\n        .attr('class', 'node-value')\n        .attr('dy', '.35em')\n        .attr('text-anchor', 'middle');\n      selection.append('text')\n        .attr('class', 'node-title')\n        .attr('dy', '.35em');\n      selection.append('rect')\n        .attr('class', 'node-click-target')\n        .attr('x', -5)\n        .attr('y', -5)\n        .attr('width', 10)\n        .style('fill', 'none')\n        .style('visibility', 'hidden')\n        .style('pointer-events', 'all');\n\n      selection\n        .attr('transform', nodeTransform);\n    }\n\n    selection.each(function (d) {\n      var title = select(this).select('title');\n      var value = select(this).select('.node-value');\n      var text = select(this).select('.node-title');\n      var line = select(this).select('line');\n      var body = select(this).select('.node-body');\n      var clickTarget = select(this).select('.node-click-target');\n\n      // Local var for title position of each node\n      var layoutData = titlePosition(d);\n      layoutData.dy = (d.y0 === d.y1) ? 0 : Math.max(1, d.y1 - d.y0);\n\n      var separateValue = (d.x1 - d.x0) > 2;\n      var titleText = nodeTitle(d) + ((!separateValue && nodeValue(d))\n                                        ? ' (' + nodeValue(d) + ')' : '');\n\n      // Update un-transitioned\n      title\n        .text(titleText);\n\n      value\n        .text(nodeValue)\n        .style('display', separateValue ? 'inline' : 'none');\n\n      text\n        .attr('text-anchor', layoutData.right ? 'end' : 'start')\n        .text(titleText)\n        .each(wrap, 100);\n\n      // Are we in a transition?\n      if (context !== selection) {\n        text = text.transition(context);\n        line = line.transition(context);\n        body = body.transition(context);\n        clickTarget = clickTarget.transition(context);\n      }\n\n      // Update\n      context\n        .attr('transform', nodeTransform);\n\n      line\n        .attr('y1', function (d) { return layoutData.titleAbove ? -5 : 0 })\n        .attr('y2', function (d) { return layoutData.dy })\n        .style('display', function (d) {\n          return (d.y0 === d.y1 || !nodeVisible(d)) ? 'none' : 'inline'\n        });\n\n      clickTarget\n        .attr('height', function (d) { return layoutData.dy + 5 });\n\n      body\n        .attr('width', function (d) { return d.x1 - d.x0 })\n        .attr('height', function (d) { return layoutData.dy });\n\n      text\n        .attr('transform', textTransform)\n        .style('display', function (d) {\n          return (d.y0 === d.y1 || !nodeVisible(d)) ? 'none' : 'inline'\n        });\n\n      value\n        .style('font-size', function (d) { return Math.min(d.x1 - d.x0 - 4, d.y1 - d.y0 - 4) + 'px' })\n        .attr('transform', function (d) {\n          var dx = d.x1 - d.x0;\n          var dy = d.y1 - d.y0;\n          var theta = dx > dy ? 0 : -90;\n          return 'translate(' + (dx / 2) + ',' + (dy / 2) + ') rotate(' + theta + ')'\n        });\n\n      function textTransform (d) {\n        var layout = layoutData;\n        var y = layout.titleAbove ? -10 : (d.y1 - d.y0) / 2;\n        var x;\n        if (layout.titleAbove) {\n          x = (layout.right ? 4 : -4);\n        } else {\n          x = (layout.right ? -4 : d.x1 - d.x0 + 4);\n        }\n        return 'translate(' + x + ',' + y + ')'\n      }\n    });\n  }\n\n  sankeyNode.nodeVisible = function (x) {\n    if (arguments.length) {\n      nodeVisible = required$3(x);\n      return sankeyNode\n    }\n    return nodeVisible\n  };\n\n  sankeyNode.nodeTitle = function (x) {\n    if (arguments.length) {\n      nodeTitle = required$3(x);\n      return sankeyNode\n    }\n    return nodeTitle\n  };\n\n  sankeyNode.nodeValue = function (x) {\n    if (arguments.length) {\n      nodeValue = required$3(x);\n      return sankeyNode\n    }\n    return nodeValue\n  };\n\n  return sankeyNode\n};\n\nfunction nodeTransform (d) {\n  return 'translate(' + d.x0 + ',' + d.y0 + ')'\n}\n\nfunction titlePosition (d) {\n  var titleAbove = false;\n  var right = false;\n\n  // If thin, and there's enough space, put above\n  if (d.spaceAbove > 20 && d.style !== 'type') {\n    titleAbove = true;\n  } else {\n    titleAbove = false;\n  }\n\n  if (d.incoming.length === 0) {\n    right = true;\n    titleAbove = false;\n  } else if (d.outgoing.length === 0) {\n    right = false;\n    titleAbove = false;\n  }\n\n  return {titleAbove: titleAbove, right: right}\n}\n\nfunction wrap (d, width) {\n  var text = select(this);\n  var lines = text.text().split(/\\n/);\n  var lineHeight = 1.1; // ems\n  if (lines.length === 1) { return }\n  text.text(null);\n  lines.forEach(function (line, i) {\n    text.append('tspan')\n      .attr('x', 0)\n      .attr('dy', (i === 0 ? 0.7 - lines.length / 2 : 1) * lineHeight + 'em')\n      .text(line);\n  });\n}\n\nfunction required$3 (f) {\n  if (typeof f !== 'function') { throw new Error() }\n  return f\n}\n\nfunction positionGroup (nodes, group) {\n  var rect = {\n    top: Number.MAX_VALUE,\n    left: Number.MAX_VALUE,\n    bottom: 0,\n    right: 0\n  };\n\n  group.nodes.forEach(function (n) {\n    var node = nodes.get(n);\n    if (!node) { return }\n    if (node.x0 < rect.left) { rect.left = node.x0; }\n    if (node.x1 > rect.right) { rect.right = node.x1; }\n    if (node.y0 < rect.top) { rect.top = node.y0; }\n    if (node.y1 > rect.bottom) { rect.bottom = node.y1; }\n  });\n\n  group.rect = rect;\n  return group\n}\n\n// The reusable SVG component for the sliced Sankey diagram\n\nfunction linkTitleGenerator (nodeTitle, typeTitle, fmt) {\n  return function (d) {\n    var parts = [];\n    var sourceTitle = nodeTitle(d.source);\n    var targetTitle = nodeTitle(d.target);\n    var matTitle = typeTitle(d);\n\n    parts.push((sourceTitle + \" â†’ \" + targetTitle));\n    if (matTitle) { parts.push(matTitle); }\n    parts.push(fmt(d.value));\n    return parts.join('\\n')\n  }\n}\n\nfunction sankeyDiagram () {\n  var margin = {top: 0, right: 0, bottom: 0, left: 0};\n\n  var selectedNode = null;\n  var selectedEdge = null;\n\n  var groups = [];\n\n  var fmt = format('.3s');\n  var node = sankeyNode();\n  var link = sankeyLink();\n\n  var linkColor = function (d) { return null; };\n  var linkTitle = linkTitleGenerator(node.nodeTitle(), function (d) { return d.type; }, fmt);\n  var linkLabel = defaultLinkLabel;\n\n  var listeners = dispatch('selectNode', 'selectGroup', 'selectLink');\n\n  /* Main chart */\n\n  function exports (context) {\n    var selection = context.selection ? context.selection() : context;\n\n    selection.each(function (G) {\n      // Create the skeleton, if it doesn't already exist\n      var svg = select(this);\n\n      var sankey = svg.selectAll('.sankey')\n            .data([{type: 'sankey'}]);\n\n      var sankeyEnter = sankey.enter()\n            .append('g')\n            .classed('sankey', true);\n\n      sankeyEnter.append('g').classed('groups', true);\n      sankeyEnter.append('g').classed('links', true);  // Links below nodes\n      sankeyEnter.append('g').classed('nodes', true);\n      sankeyEnter.append('g').classed('slice-titles', true);  // Slice titles\n\n      sankey = sankey.merge(sankeyEnter);\n\n      // Update margins\n      sankey\n        .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n        // .select('.slice-titles')\n        // .attr('transform', 'translate(' + margin.left + ',0)')\n\n      // Groups of nodes\n      var nodeMap = map(G.nodes, function (n) { return n.id; });\n      var groupsPositioned = (groups || []).map(function (g) { return positionGroup(nodeMap, g); });\n\n\n      // All links -- including \"from elsewhere\" and \"to elsewhere\" ones\n      var links = Array.from(G.links);\n      G.nodes.forEach(function (node) {\n        Array.prototype.push.apply(links, node.fromElsewhere || []);\n        Array.prototype.push.apply(links, node.toElsewhere || []);\n      });\n\n      // Render\n      updateNodes(sankey, context, G.nodes);\n      updateLinks(sankey, context, links);\n      updateGroups(svg, groupsPositioned);\n      // updateSlices(svg, layout.slices(nodes));\n\n      // Events\n      svg.on('click', function () {\n        listeners.call('selectNode', this, null);\n        listeners.call('selectLink', this, null);\n      });\n    });\n  }\n\n  function updateNodes (sankey, context, nodes) {\n    var nodeSel = sankey\n        .select('.nodes')\n        .selectAll('.node')\n        .data(nodes, function (d) { return d.id; });\n\n    // EXIT\n    nodeSel.exit().remove();\n\n    nodeSel = nodeSel.merge(\n      nodeSel.enter()\n        .append('g')\n        .attr('class', 'node')\n        .call(node)\n        .on('click', selectNode));\n\n    if (context instanceof transition) {\n      nodeSel.transition(context)\n        .call(node);\n    } else {\n      nodeSel.call(node);\n    }\n  }\n\n  function updateLinks (sankey, context, edges) {\n    var linkSel = sankey\n        .select('.links')\n        .selectAll('.link')\n        .data(edges, function (d) { return d.source.id + '-' + d.target.id + '-' + d.type; });\n\n    // EXIT\n\n    linkSel.exit().remove();\n\n    // ENTER\n\n    var linkEnter = linkSel.enter()\n        .append('g')\n        .attr('class', 'link')\n        .on('click', selectLink);\n\n    linkEnter.append('path')\n      .attr('d', link)\n      .style('fill', 'white')\n      .each(function (d) { this._current = d; });\n\n    linkEnter.append('title');\n\n    linkEnter.append('text')\n      .attr('class', 'label')\n      .attr('dy', '0.35em')\n      .attr('x', function (d) { return d.points[0].x + 4; })\n      .attr('y', function (d) { return d.points[0].y; });\n\n    // UPDATE\n\n    linkSel = linkSel.merge(linkEnter);\n\n    // Non-transition updates\n    linkSel.classed('selected', function (d) { return d.id === selectedEdge; });\n    linkSel.sort(linkOrder);\n\n    // Transition updates, if available\n    if (context instanceof transition) {\n      linkSel = linkSel.transition(context);\n      linkSel\n        .select('path')\n        .style('fill', linkColor)\n        .each(function (d) {\n          select(this)\n            .transition(context)\n            .attrTween('d', interpolateLink);\n        });\n    } else {\n      linkSel\n        .select('path')\n        .style('fill', linkColor)\n        .attr('d', link);\n    }\n\n    linkSel.select('title')\n      .text(linkTitle);\n\n    linkSel.select('.label')\n      .text(linkLabel)\n      .attr('x', function (d) { return d.points[0].x + 4; })\n      .attr('y', function (d) { return d.points[0].y; });\n  }\n\n  // function updateSlices(svg, slices) {\n  //   var slice = svg.select('.slice-titles').selectAll('.slice')\n  //         .data(slices, function(d) { return d.id; });\n\n  //   var textWidth = (slices.length > 1 ?\n  //                    0.9 * (slices[1].x - slices[0].x) :\n  //                    null);\n\n  //   slice.enter().append('g')\n  //     .attr('class', 'slice')\n  //     .append('foreignObject')\n  //     .attr('requiredFeatures',\n  //           'http://www.w3.org/TR/SVG11/feature#Extensibility')\n  //     .attr('height', margin.top)\n  //     .attr('class', 'title')\n  //     .append('xhtml:div')\n  //     .style('text-align', 'center')\n  //     .style('word-wrap', 'break-word');\n  //   // .text(pprop('sliceMetadata', 'title'));\n\n  //   slice\n  //     .attr('transform', function(d) {\n  //       return 'translate(' + (d.x - textWidth / 2) + ',0)'; })\n  //     .select('foreignObject')\n  //     .attr('width', textWidth)\n  //     .select('div');\n  //   // .text(pprop('sliceMetadata', 'title'));\n\n  //   slice.exit().remove();\n  // }\n\n  function updateGroups (svg, groups) {\n    var group = svg.select('.groups').selectAll('.group')\n      .data(groups);\n\n    // EXIT\n    group.exit().remove();\n\n    // ENTER\n    var enter = group.enter().append('g')\n            .attr('class', 'group');\n            // .on('click', selectGroup);\n\n    enter.append('rect');\n    enter.append('text')\n      .attr('x', -10)\n      .attr('y', -25);\n\n    group = group.merge(enter);\n\n    group\n      .style('display', function (d) { return d.title ? 'inline' : 'none'; })\n      .attr('transform', function (d) { return (\"translate(\" + (d.rect.left) + \",\" + (d.rect.top) + \")\"); })\n      .select('rect')\n      .attr('x', -10)\n      .attr('y', -20)\n      .attr('width', function (d) { return d.rect.right - d.rect.left + 20; })\n      .attr('height', function (d) { return d.rect.bottom - d.rect.top + 30; });\n\n    group.select('text')\n      .text(function (d) { return d.title; });\n  }\n\n  function interpolateLink (b) {\n    // XXX should limit radius better\n    b.points.forEach(function (p) {\n      if (p.ri > 1e3) { p.ri = 1e3; }\n      if (p.ro > 1e3) { p.ro = 1e3; }\n    });\n    var interp = interpolate(linkGeom(this._current), b);\n    var that = this;\n    return function (t) {\n      that._current = interp(t);\n      return link(that._current)\n    }\n  }\n\n  function linkGeom (l) {\n    return {\n      points: l.points,\n      dy: l.dy\n    }\n  }\n\n  function linkOrder (a, b) {\n    if (a.id === selectedEdge) { return +1 }\n    if (b.id === selectedEdge) { return -1 }\n    if (!a.source || a.target && a.target.direction === 'd') { return -1 }\n    if (!b.source || b.target && b.target.direction === 'd') { return +1 }\n    if (!a.target || a.source && a.source.direction === 'd') { return -1 }\n    if (!b.target || b.source && b.source.direction === 'd') { return +1 }\n    return a.dy - b.dy\n  }\n\n  function selectLink (d) {\n    event.stopPropagation();\n    var el = select(this).node();\n    listeners.call('selectLink', el, d);\n  }\n\n  function selectNode (d) {\n    event.stopPropagation();\n    var el = select(this).node();\n    listeners.call('selectNode', el, d);\n  }\n\n  // function selectGroup(d) {\n  //   d3.event.stopPropagation();\n  //   var el = d3.select(this)[0][0];\n  //   dispatch.selectGroup.call(el, d);\n  // }\n\n  exports.margins = function (_x) {\n    if (!arguments.length) { return margin }\n    margin = {\n      top: _x.top === undefined ? margin.top : _x.top,\n      left: _x.left === undefined ? margin.left : _x.left,\n      bottom: _x.bottom === undefined ? margin.bottom : _x.bottom,\n      right: _x.right === undefined ? margin.right : _x.right\n    };\n    return this\n  };\n\n  exports.groups = function (_x) {\n    if (!arguments.length) { return groups }\n    groups = _x;\n    return this\n  };\n\n  // Node styles and title\n  exports.nodeTitle = function (_x) {\n    if (!arguments.length) { return node.nodeTitle() }\n    node.nodeTitle(_x);\n    linkTitle = linkTitleGenerator(_x, function (d) { return d.type; }, fmt);\n    return this\n  };\n\n  exports.nodeValue = function (_x) {\n    if (!arguments.length) { return node.nodeValue() }\n    node.nodeValue(_x);\n    return this\n  };\n\n  // Link styles and titles\n  exports.linkTitle = function (_x) {\n    if (!arguments.length) { return linkTitle }\n    linkTitle = _x;\n    return this\n  };\n\n  exports.linkLabel = function (_x) {\n    if (!arguments.length) { return linkLabel }\n    linkLabel = _x;\n    return this\n  };\n\n  exports.linkColor = function (_x) {\n    if (!arguments.length) { return linkColor }\n    linkColor = _x;\n    return this\n  };\n\n  exports.linkMinWidth = function (_x) {\n    if (!arguments.length) { return link.minWidth() }\n    link.minWidth(_x);\n    return this\n  };\n\n  exports.selectNode = function (_x) {\n    selectedNode = _x;\n    return this\n  };\n\n  exports.selectLink = function (_x) {\n    selectedEdge = _x;\n    return this\n  };\n\n  exports.on = function () {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? exports : value\n  };\n\n  return exports\n}\n\nfunction defaultLinkLabel (d) {\n  return null\n}\n\nexport { sankeyLayout as sankey, positionNodesVertically as sankeyPositionJustified, positionNodesVertically$1 as sankeyPositionRelaxation, sankeyLink, sankeyNode, sankeyDiagram, linkTitleGenerator as sankeyLinkTitle };\n","<template lang=\"pug\">\r\n.sankey-container(:class=\"{'is-thumbnail': thumbnail}\")\r\n\r\n  //- .labels(v-if=\"!thumbnail\")\r\n  //-   h3.center {{ vizDetails.title }}\r\n  //-   h5.center {{ vizDetails.description }}\r\n\r\n  svg.chart-area(:id=\"cleanConfigId\" :class=\"{'is-thumbnail': thumbnail}\")\r\n\r\n  .labels(v-if=\"!thumbnail\")\r\n    p.center: b {{ totalTrips.toLocaleString() }} {{ $t('total') }}\r\n\r\n  b-switch.switcher(v-if=\"!thumbnail\" v-model=\"onlyShowChanges\") {{ $t('showChanges')}}\r\n\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nconst i18n = {\r\n  messages: {\r\n    en: { total: 'total', showChanges: 'Only show changes' },\r\n    de: { total: 'Insgesamt', showChanges: 'Nur Ã„nderungen zeigen' },\r\n  },\r\n}\r\n\r\nimport { defineComponent } from 'vue'\r\n\r\nimport yaml from 'yaml'\r\nimport { sankey, sankeyDiagram } from '@simwrapper/d3-sankey-diagram'\r\nimport { select } from 'd3-selection'\r\nimport { scaleOrdinal } from 'd3-scale'\r\nimport {\r\n  interpolateRainbow as interpolator,\r\n  schemeCategory10 as colorScheme,\r\n} from 'd3-scale-chromatic'\r\n\r\nimport Papa from '@simwrapper/papaparse'\r\n\r\nimport globalStore from '@/store'\r\nimport { FileSystemConfig, VisualizationPlugin } from '@/Globals'\r\nimport HTTPFileSystem from '@/js/HTTPFileSystem'\r\n\r\ninterface SankeyYaml {\r\n  csv: string\r\n  title?: string\r\n  description?: string\r\n}\r\n\r\nconst MyComponent = defineComponent({\r\n  name: 'SankeyPlugin',\r\n  i18n,\r\n  props: {\r\n    root: { type: String, required: true },\r\n    subfolder: { type: String, required: true },\r\n    yamlConfig: String,\r\n    thumbnail: Boolean,\r\n    config: Object as any,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      globalState: globalStore.state,\r\n      vizDetails: { csv: '', title: '', description: '' } as SankeyYaml,\r\n      loadingText: '',\r\n      jsonChart: {} as any,\r\n      totalTrips: 0,\r\n      cleanConfigId: `sankey-${Math.floor(1e12 * Math.random())}` as any,\r\n      onlyShowChanges: false,\r\n      csvData: [] as any[],\r\n      colorRamp: [] as string[],\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    fileApi(): HTTPFileSystem {\r\n      return new HTTPFileSystem(this.fileSystem, globalStore)\r\n    },\r\n\r\n    fileSystem(): FileSystemConfig {\r\n      const svnProject: FileSystemConfig[] = this.$store.state.svnProjects.filter(\r\n        (a: FileSystemConfig) => a.slug === this.root\r\n      )\r\n      if (svnProject.length === 0) {\r\n        console.log('no such project')\r\n        throw Error\r\n      }\r\n      return svnProject[0]\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    'globalState.resizeEvents'() {\r\n      this.changeDimensions()\r\n    },\r\n\r\n    yamlConfig() {\r\n      this.getVizDetails()\r\n    },\r\n\r\n    subfolder() {\r\n      this.getVizDetails()\r\n    },\r\n\r\n    onlyShowChanges() {\r\n      this.jsonChart = this.processInputs()\r\n      this.doD3()\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    changeDimensions() {\r\n      if (this.jsonChart?.nodes) this.doD3()\r\n    },\r\n\r\n    async getVizDetails() {\r\n      if (this.config) {\r\n        this.vizDetails = Object.assign({}, this.config)\r\n        this.$emit('title', this.vizDetails.title)\r\n        return\r\n      }\r\n      // might be a project config:\r\n      this.loadingText = 'Loading config...'\r\n      const config = this.yamlConfig ?? ''\r\n      const filename = config.indexOf('/') > -1 ? config : this.subfolder + '/' + config\r\n\r\n      const text = await this.fileApi.getFileText(filename)\r\n      this.vizDetails = yaml.parse(text)\r\n\r\n      this.$emit('title', this.vizDetails.title)\r\n    },\r\n\r\n    async loadFiles(): Promise<any[]> {\r\n      this.loadingText = 'Loading files...'\r\n      try {\r\n        const rawText = await this.fileApi.getFileText(this.subfolder + '/' + this.vizDetails.csv)\r\n\r\n        const content = Papa.parse(rawText, {\r\n          // using header:false because we don't care what\r\n          // the column names are: we expect \"from,to,value\" in cols 0,1,2.\r\n          header: false,\r\n          dynamicTyping: true,\r\n          skipEmptyLines: true,\r\n        })\r\n        return content.data\r\n      } catch (err) {\r\n        const e = err as any\r\n        console.error({ e })\r\n        this.loadingText = '' + e\r\n\r\n        // maybe it failed because password?\r\n        if (this.fileSystem && this.fileSystem.needPassword && e.status === 401) {\r\n          globalStore.commit('requestLogin', this.fileSystem.slug)\r\n        }\r\n      }\r\n      return []\r\n    },\r\n\r\n    processInputs() {\r\n      this.loadingText = 'Building node graph...'\r\n\r\n      const fromNodes: any[] = []\r\n      const toNodes: any[] = []\r\n      const links: any[] = []\r\n      this.totalTrips = 0\r\n\r\n      try {\r\n        for (const cols of this.csvData.slice(1) as any[]) {\r\n          if (!fromNodes.includes(cols[0])) fromNodes.push(cols[0])\r\n          if (!toNodes.includes(cols[1])) toNodes.push(cols[1])\r\n\r\n          const value = cols[2]\r\n\r\n          if (value === 0) continue\r\n          if (value < 0) {\r\n            console.warn('Data contains NEGATIVE numbers!!!')\r\n            continue\r\n          }\r\n\r\n          // Don't include non-changes in the graph if we are hiding them\r\n          if (this.onlyShowChanges && cols[0] === cols[1]) continue\r\n\r\n          links.push([cols[0], cols[1], value])\r\n          this.totalTrips += value\r\n        }\r\n      } catch (err) {\r\n        const e = err as any\r\n        console.error(e)\r\n      }\r\n\r\n      // build js object\r\n      const fromOrder = [] as number[]\r\n      const toOrder = [] as number[]\r\n\r\n      const answer = {\r\n        nodes: [] as { id: any; title: string }[],\r\n        links: [] as { source: any; target: any; value: number }[],\r\n        // alignTypes: true,\r\n        ordering: [[fromOrder], [toOrder]],\r\n      }\r\n\r\n      const fromLookup: any = {}\r\n      const toLookup: any = {}\r\n\r\n      fromNodes.forEach((title: string, i: number) => {\r\n        answer.nodes.push({ id: i, title })\r\n        fromLookup[title] = i\r\n        fromOrder.push(i)\r\n      })\r\n\r\n      toNodes.forEach((title: string, i: number) => {\r\n        const offset = i + fromNodes.length\r\n        answer.nodes.push({ id: offset, title })\r\n        toLookup[title] = offset\r\n        toOrder.push(offset)\r\n      })\r\n\r\n      for (const link of links) {\r\n        answer.links.push({\r\n          source: fromLookup[link[0]],\r\n          target: toLookup[link[1]],\r\n          value: link[2],\r\n        })\r\n      }\r\n\r\n      const numColors = fromNodes.length\r\n      const colors = [...Array(numColors).keys()].map(i => {\r\n        const solidColor = interpolator(i / numColors)\r\n        const opacityColor = solidColor.replace(/rgb(.*)\\)/, 'rgba$1, 0.7)')\r\n        return opacityColor\r\n      })\r\n\r\n      this.colorRamp = colors\r\n\r\n      return answer\r\n    },\r\n\r\n    getMaxLabelWidth() {\r\n      const canvas = document.createElement('canvas')\r\n      const context = canvas.getContext('2d')\r\n      if (!context) return 120\r\n\r\n      context.font = '16px Arial'\r\n\r\n      let max = 0\r\n\r\n      for (const node of this.jsonChart.nodes) {\r\n        const text = node.title\r\n        const width = context.measureText(text).width\r\n        max = Math.max(max, width)\r\n      }\r\n\r\n      return max\r\n    },\r\n\r\n    doD3() {\r\n      const data = this.jsonChart\r\n      // data.alignTypes = true\r\n      // data.alignLinkTypes = true\r\n\r\n      // figure out dimensions, depending on if we are in a dashboard or not\r\n      let box = document.querySelector(`#${this.cleanConfigId}`) as Element\r\n      let width = box ? box.clientWidth : 100\r\n      let height = box ? box.clientHeight : 100\r\n\r\n      let labelWidth = 5 + this.getMaxLabelWidth() // this.thumbnail ? 60 : 125\r\n\r\n      const layout = sankey()\r\n        .nodeWidth(8)\r\n        .ordering(data.ordering)\r\n        .extent([\r\n          [labelWidth, 0],\r\n          [width - labelWidth, height],\r\n        ])\r\n\r\n      const diagram = sankeyDiagram().linkColor((link: any) => this.colorRamp[link.source.id])\r\n\r\n      select('#' + this.cleanConfigId)\r\n        .datum(layout(data))\r\n        .call(diagram)\r\n        .attr('preserveAspectRatio', 'xMinYMin meet')\r\n        .attr('viewBox', `0 0 ${width} ${height}`)\r\n    },\r\n  },\r\n\r\n  async mounted() {\r\n    await this.getVizDetails()\r\n    this.csvData = await this.loadFiles()\r\n    this.jsonChart = this.processInputs()\r\n\r\n    window.addEventListener('resize', this.changeDimensions)\r\n\r\n    this.doD3()\r\n  },\r\n\r\n  beforeDestroy() {\r\n    window.removeEventListener('resize', this.changeDimensions)\r\n  },\r\n})\r\n\r\nexport default MyComponent\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '@/styles.scss';\r\n\r\n.sankey-container {\r\n  padding-top: 1rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.sankey-container.is-thumbnail {\r\n  padding-top: 0;\r\n  height: $thumbnailHeight;\r\n}\r\n\r\nh1 {\r\n  margin: 0px auto;\r\n  font-size: 1.5rem;\r\n}\r\n\r\nh3 {\r\n  margin: 0px auto;\r\n}\r\n\r\nh4,\r\np {\r\n  margin: 1rem 1rem;\r\n}\r\n\r\n.details {\r\n  font-size: 12px;\r\n}\r\n\r\n.bigtitle {\r\n  font-weight: bold;\r\n  font-style: italic;\r\n  font-size: 20px;\r\n  margin: 20px 0px;\r\n}\r\n\r\n.info-header {\r\n  background-color: #097c43;\r\n  padding: 0.5rem 0rem;\r\n  border-top: solid 1px #888;\r\n  border-bottom: solid 1px #888;\r\n}\r\n\r\n/* from sankey example */\r\n.node rect {\r\n  cursor: move;\r\n  fill-opacity: 0.9;\r\n  shape-rendering: crispEdges;\r\n}\r\n\r\n.node text {\r\n  pointer-events: none;\r\n  text-shadow: 0 1px 0 #fff;\r\n}\r\n\r\n.link {\r\n  fill: none;\r\n  stroke: #000;\r\n  stroke-opacity: 0.2;\r\n}\r\n\r\n.link:hover {\r\n  stroke-opacity: 0.4;\r\n}\r\n\r\n.center {\r\n  text-align: center;\r\n}\r\n\r\n.labels {\r\n  padding: 0rem 1rem;\r\n\r\n  p {\r\n    padding-top: 0;\r\n    margin: 0px 0px;\r\n  }\r\n}\r\n\r\n.switcher {\r\n  margin: 0.5rem auto 0.5rem 1rem;\r\n}\r\n\r\n.chart-area {\r\n  height: 100%;\r\n  width: 100%;\r\n  flex: 1;\r\n  margin: 0 auto;\r\n}\r\n\r\n.chart-area.is-thumbnail {\r\n  padding: 0rem 0rem;\r\n  margin: 0 0;\r\n}\r\n</style>\r\n","\r\n.sankey-container(:class=\"{'is-thumbnail': thumbnail}\")\r\n\r\n  //- .labels(v-if=\"!thumbnail\")\r\n  //-   h3.center {{ vizDetails.title }}\r\n  //-   h5.center {{ vizDetails.description }}\r\n\r\n  svg.chart-area(:id=\"cleanConfigId\" :class=\"{'is-thumbnail': thumbnail}\")\r\n\r\n  .labels(v-if=\"!thumbnail\")\r\n    p.center: b {{ totalTrips.toLocaleString() }} {{ $t('total') }}\r\n\r\n  b-switch.switcher(v-if=\"!thumbnail\" v-model=\"onlyShowChanges\") {{ $t('showChanges')}}\r\n\r\n"],"names":["timeout","callback","delay","time","t","Timer","elapsed","ascending$1","a","b","bisector","compare","ascendingComparator","x","lo","hi","mid","f","d","ascending","max","values","valueof","i","value","min","sum","lodash","require","lodash_1","_","require$$0","graph","Graph","DEFAULT_EDGE_NAME","GRAPH_NODE","EDGE_KEY_DELIM","opts","label","newDefault","self","v","vs","args","removeEdge","e","child","parent","ancestor","children","predsV","sucsV","preds","neighbors","filter","copy","parents","findParent","w","name","valueSpecified","arg0","edgeArgsToId","edgeObj","edgeArgsToObj","incrementOrInitEntry","edgeObjToId","edge","decrementOrRemoveEntry","u","inV","edges","outV","inEdges","map","k","isDirected","v_","w_","tmp","version","lib","require$$1","json","write","read","g","writeNodes","writeEdges","nodeValue","node","edgeValue","entry","components_1","components","visited","cmpts","cmpt","dfs","priorityQueue","PriorityQueue","key","index","priority","keyIndices","arr","l","largest","j","origArrI","origArrJ","dijkstra_1","dijkstra","DEFAULT_WEIGHT_FUNC","source","weightFn","edgeFn","runDijkstra","results","pq","vEntry","updateNeighbors","wEntry","weight","distance","dijkstraAll_1","dijkstraAll","weightFunc","edgeFunc","acc","tarjan_1","tarjan","stack","findCycles_1","findCycles","floydWarshall_1","floydWarshall","runFloydWarshall","nodes","rowK","rowI","ik","kj","ij","altDistance","topsort_1","topsort","CycleException","visit","isAcyclic_1","isAcyclic","dfs_1","order","navigation","doDfs","postorder","postorder_1","preorder_1","preorder","require$$2","prim_1","prim","result","pri","edgeWeight","init","alg","require$$3","require$$4","require$$5","require$$6","require$$7","require$$8","require$$9","require$$10","graphlib","prefix","Map","property","keys","entries","size","object","n","o","nest","sortKeys","sortValues","rollup","apply","array","depth","createResult","setResult","keyValue","valuesByKey","sortKey","createObject","setObject","createMap","setMap","Set","proto","set","define$1","constructor","factory","prototype","extend","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","define","color","channels","color_formatHex","color_formatHsl","color_formatRgb","hslConvert","format","m","rgbn","Rgb","rgba","hsla","r","rgbConvert","rgb","opacity","rgb_formatHex","rgb_formatRgb","hex","h","s","Hsl","hsl","m2","m1","hsl2rgb","constant$2","linear","exponential","y","gamma","nogamma","constant","rgb$1","rgbGamma","start","end","colorRgb","numberArray","c","isNumberArray","genericArray","nb","na","date","number","reA","reB","zero","one","string","bi","am","bm","bs","q","interpolate$1","xhtml","namespaces","namespace","creatorInherit","document","uri","creatorFixed","fullname","creator","none","selector","selection_select","select","groups","subgroups","group","subgroup","subnode","Selection","empty","selectorAll","selection_selectAll","matcher","selection_filter","match","sparse","update","selection_enter","EnterNode","datum","next","constant$1","keyPrefix","bindIndex","enter","exit","data","groupLength","dataLength","bindKey","nodeByKeyValue","keyValues","selection_data","bind","enterGroup","updateGroup","exitGroup","i0","i1","previous","selection_exit","selection_join","onenter","onupdate","onexit","selection_merge","selection","groups0","groups1","m0","merges","group0","group1","merge","selection_order","selection_sort","compareNode","sortgroups","sortgroup","selection_call","selection_nodes","selection_node","selection_size","selection_empty","selection_each","attrRemove","attrRemoveNS","attrConstant","attrConstantNS","attrFunction","attrFunctionNS","selection_attr","defaultView","styleRemove","styleConstant","styleFunction","selection_style","styleValue","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","classList","ClassList","classedAdd","names","list","classedRemove","classedTrue","classedFalse","classedFunction","selection_classed","textRemove","textConstant","textFunction","selection_text","htmlRemove","htmlConstant","htmlFunction","selection_html","raise","selection_raise","lower","selection_lower","selection_append","create","constantNull","selection_insert","before","remove","selection_remove","selection_cloneShallow","clone","selection_cloneDeep","selection_clone","deep","selection_datum","filterEvents","event","element","filterContextListener","listener","contextListener","related","event1","event0","parseTypenames","typenames","onRemove","typename","on","onAdd","capture","wrap","selection_on","dispatchEvent","type","params","window","dispatchConstant","dispatchFunction","selection_dispatch","root","emptyOn","dispatch","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","schedule","id","timing","schedules","get","tween","timer","stop","tick","interrupt","active","selection_interrupt","interpolateRgb","interpolateNumber","interpolateString","degrees","identity","decompose","scaleX","scaleY","skewX","cssNode","cssRoot","cssView","svgNode","parseCss","parseSvg","interpolateTransform","parse","pxComma","pxParen","degParen","pop","translate","xa","ya","xb","yb","rotate","scale","interpolateTransformCss","interpolateTransformSvg","tweenRemove","tween0","tween1","tweenFunction","transition_tween","tweenValue","transition","interpolate","value1","string00","string1","interpolate0","string0","string10","transition_attr","attrInterpolate","attrInterpolateNS","attrTweenNS","t0","attrTween","transition_attrTween","delayFunction","delayConstant","transition_delay","durationFunction","durationConstant","transition_duration","easeConstant","transition_ease","transition_filter","Transition","transition_merge","onFunction","on0","on1","sit","transition_on","removeFunction","transition_remove","transition_select","transition_selectAll","inherit","transition_selection","styleNull","style","styleMaybeRemove","listener0","transition_style","styleInterpolate","styleTween","transition_styleTween","transition_text","textInterpolate","textTween","transition_textTween","transition_transition","id0","id1","newId","transition_end","that","resolve","reject","cancel","selection_prototype","cubicInOut","defaultTiming","easeCubicInOut","now","selection_transition","groupedGraph","G","rankSets","GG","ensureSmin","nodeSets","set$$1","sourceSet","targetSet","sources","n0","makeAcyclic","v0","tree","findSpanningTree","rel","nodeRelationship","thread","V","W","u$1","assignInitialRanks","queue","seen","marked","edgeIdString","loop","delta","assignRanks","addTemporaryEdges","moveSourcesRight","groupedNode","moveRight","rank","initialOrdering","ranks","nodeRanks","countCrossings","orderA","orderB","countBetweenCrossings","north","south","southSeq","firstIndex","treeSize","count","swapNodes","improved","count0","allCrossings$1","transpose","count1","medianValue","positions","left","right","neighbourPositions","includeLoops","thisRank","otherRank","sortByPositions","origOrder","assign","sortNodes$1","sweepDirection","medians","neighbour","loop$1","medians$1","r$1","sortNodes","maxIterations","getRanks","best","allCrossings","addDummyNodes","normaliseEdge","dummies","dummyNodes","dummy","addDummyEdge","removeDummyNodes","chains","dummyEdges","dummyEdge","r1s","target","nestGraph","maxRank","maxBand","nested","j$1","bandValues","Nb","band","total","positionHorizontally","width","nodeWidth","dx","defaultSeparation","positionNodesVertically","separation","layout","totalHeight","whitespace","layer","bandHeight","margin","height","gaps","space","kg","yy","prevGap","required$1","prepareNodePorts","sortPorts","ports","getOrSet","side","port","fromElsewhereDy","link","linkDirection","head","orderEdges","orderEdgesOne","compareDirection","da","db","findFirst","links","p","jmid","sweepCurvatureInwards","rr","Rmin","Rmax","i$1","layoutLinks","setEdgeEndpoints","setEdgeCurvatures","sy","ty","setEdgeEndCurvatures","maximumRadiusOfCurvature","Dx","Dy","links2","buildGraph","nodeId","nodeBackwards","sourceId","targetId","linkType","linkValue","idAndPort","defaultNodes","defaultLinks","defaultNodeId","defaultNodeBackwards","defaultSourceId","defaultTargetId","defaultLinkType","defaultSortPorts","sankeyLayout","ordering","nodePosition","x0","y0","x1","y1","verticalLayout","sankey","setNodeValues","pos","setWidths","applyOrdering","maybeScaleToFit","addLinkEndpoints","copyResultsToGraph","doOrderLinks","required","maxValue","incoming","outgoing","defaultMinWidth","sankeyLink","minWidth","radiusBounds","toOrFromElsewherePath","path","seg","segmentPath","dir","selfLink","fbLink","fdLink","dfLink","bfLink","assign$1","fx","Rlim","defaultRadius","r0","r1","dcx","dcy","D","phi","psi","theta","hs","hc","x2","x3","y2","y3","arc","required$2","sankeyNode","nodeTitle","nodeVisible","context","nodeTransform","title","text","line","body","clickTarget","layoutData","titlePosition","separateValue","titleText","textTransform","dy","required$3","titleAbove","lines","lineHeight","positionGroup","rect","linkTitleGenerator","typeTitle","fmt","parts","sourceTitle","targetTitle","matTitle","sankeyDiagram","selectedEdge","linkColor","linkTitle","linkLabel","defaultLinkLabel","listeners","exports","svg","sankeyEnter","nodeMap","groupsPositioned","updateNodes","updateLinks","updateGroups","nodeSel","selectNode","linkSel","linkEnter","selectLink","linkOrder","interpolateLink","interp","linkGeom","el","_x","i18n","MyComponent","defineComponent","globalStore","HTTPFileSystem","svnProject","_a","config","filename","yaml","rawText","Papa","err","fromNodes","toNodes","cols","fromOrder","toOrder","answer","fromLookup","toLookup","offset","numColors","colors","interpolator","box","labelWidth","diagram","render","_vm","_h","_c","$$v","staticRenderFns"],"mappings":"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"}