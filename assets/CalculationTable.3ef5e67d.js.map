{"version":3,"file":"CalculationTable.3ef5e67d.js","sources":["../../src/plugins/calculation-table/CalculationTable.vue","../../src/plugins/calculation-table/assets/table.png","../../src/plugins/calculation-table/CalculationTable.vue?vue&type=template&lang.js"],"sourcesContent":["<template lang=\"pug\">\r\n.my-component(:class=\"{'hide-thumbnail': !thumbnail}\" oncontextmenu=\"return false\")\r\n\r\n  img.thumb(v-if=\"thumbnail\" src=\"./assets/table.png\" :width=\"128\")\r\n\r\n\r\n  .topsheet(v-if=\"!thumbnail && isLoaded\")\r\n      p.header {{ subfolder }}\r\n\r\n      h2 {{ vizDetails.title }}\r\n      p {{ vizDetails.description}}\r\n\r\n      hr\r\n\r\n      component.dash-card(\r\n        is=\"TopSheet\"\r\n        :fileSystemConfig=\"fileSystem\"\r\n        :subfolder=\"subfolder\"\r\n        :config=\"vizDetails\"\r\n        :yaml=\"yamlConfig\"\r\n        :files=\"files\"\r\n        :cardTitle=\"vizDetails.title\"\r\n        :cardId=\"'table1'\"\r\n        :allConfigFiles=\"allConfigFiles\"\r\n      )\r\n\r\n      //- @isLoaded=\"handleCardIsLoaded(card)\"\r\n      //- @dimension-resizer=\"setDimensionResizer\"\r\n      //- @titles=\"setCardTitles(card, $event)\"\r\n\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nimport YAML from 'yaml'\r\n\r\nimport util from '@/js/util'\r\nimport globalStore from '@/store'\r\n\r\nimport { ColorScheme, FileSystemConfig, VisualizationPlugin, Status, YamlConfigs } from '@/Globals'\r\n\r\nimport HTTPFileSystem from '@/js/HTTPFileSystem'\r\nimport TopSheet from '@/components/TopSheet/TopSheet.vue'\r\n\r\nconst thumbnailUrl = \"url('assets/thumbnail.jpg') no-repeat;\"\r\n\r\nconst Component = defineComponent({\r\n  name: 'CalculationTable',\r\n  components: { TopSheet },\r\n  props: {\r\n    root: { type: String, required: true },\r\n    subfolder: { type: String, required: true },\r\n    yamlConfig: String,\r\n    config: Object,\r\n    thumbnail: Boolean,\r\n  },\r\n  data: () => {\r\n    return {\r\n      globalState: globalStore.state,\r\n      allConfigFiles: { dashboards: {}, topsheets: {}, vizes: {}, configs: {} } as YamlConfigs,\r\n      files: [] as string[],\r\n      isLoaded: false,\r\n      vizDetails: {\r\n        title: '',\r\n        description: '',\r\n        thumbnail: '',\r\n      },\r\n    }\r\n  },\r\n  computed: {\r\n    fileApi(): HTTPFileSystem {\r\n      return new HTTPFileSystem(this.fileSystem, globalStore)\r\n    },\r\n    fileSystem(): FileSystemConfig {\r\n      const svnProject: FileSystemConfig[] = this.$store.state.svnProjects.filter(\r\n        (a: FileSystemConfig) => a.slug === this.root\r\n      )\r\n      if (svnProject.length === 0) {\r\n        console.log('no such project')\r\n        throw Error\r\n      }\r\n      return svnProject[0]\r\n    },\r\n\r\n    urlThumbnail(): any {\r\n      return thumbnailUrl\r\n    },\r\n  },\r\n  methods: {\r\n    async getVizDetails() {\r\n      if (!this.fileApi) return\r\n\r\n      console.log(this.yamlConfig)\r\n      // first get config\r\n      try {\r\n        const text = await this.fileApi.getFileText(this.subfolder + '/' + this.yamlConfig)\r\n        this.vizDetails = YAML.parse(text)\r\n      } catch (e) {\r\n        console.error('failed')\r\n      }\r\n      const t = this.vizDetails.title ? this.vizDetails.title : 'Table'\r\n      this.$emit('title', t)\r\n    },\r\n  },\r\n  async mounted() {\r\n    await this.getVizDetails()\r\n    this.allConfigFiles = await this.fileApi.findAllYamlConfigs(this.subfolder)\r\n    const { files } = await this.fileApi.getDirectory(this.subfolder)\r\n    this.files = files\r\n\r\n    this.isLoaded = true\r\n\r\n    if (this.thumbnail) return\r\n  },\r\n})\r\n\r\nexport default Component\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '@/styles.scss';\r\n\r\n.my-component {\r\n  margin: 0 0;\r\n  padding: 0 2rem;\r\n  background-color: var(--bgMapPanel);\r\n}\r\n\r\n.header {\r\n  margin-top: 0.5rem;\r\n  margin-bottom: 2rem;\r\n  color: var(--text);\r\n}\r\n\r\n.topsheet {\r\n  max-width: 55rem;\r\n  margin: 0rem auto;\r\n}\r\n\r\n@media only screen and (max-width: 640px) {\r\n}\r\n</style>\r\n","export default \"__VITE_ASSET__439da6cc__\"","\r\n.my-component(:class=\"{'hide-thumbnail': !thumbnail}\" oncontextmenu=\"return false\")\r\n\r\n  img.thumb(v-if=\"thumbnail\" src=\"./assets/table.png\" :width=\"128\")\r\n\r\n\r\n  .topsheet(v-if=\"!thumbnail && isLoaded\")\r\n      p.header {{ subfolder }}\r\n\r\n      h2 {{ vizDetails.title }}\r\n      p {{ vizDetails.description}}\r\n\r\n      hr\r\n\r\n      component.dash-card(\r\n        is=\"TopSheet\"\r\n        :fileSystemConfig=\"fileSystem\"\r\n        :subfolder=\"subfolder\"\r\n        :config=\"vizDetails\"\r\n        :yaml=\"yamlConfig\"\r\n        :files=\"files\"\r\n        :cardTitle=\"vizDetails.title\"\r\n        :cardId=\"'table1'\"\r\n        :allConfigFiles=\"allConfigFiles\"\r\n      )\r\n\r\n      //- @isLoaded=\"handleCardIsLoaded(card)\"\r\n      //- @dimension-resizer=\"setDimensionResizer\"\r\n      //- @titles=\"setCardTitles(card, $event)\"\r\n\r\n"],"names":["thumbnailUrl","Component","defineComponent","TopSheet","globalStore","HTTPFileSystem","svnProject","a","text","YAML","files","__$_require_44916138__","render","_vm","_h","_c","staticRenderFns"],"mappings":"0LA4CA,MAAAA,EAAA,yCAEAC,EAAAC,EAAA,CACA,KAAA,mBACA,WAAA,CAAA,SAAAC,CAAA,EACA,MAAA,CACA,KAAA,CAAA,KAAA,OAAA,SAAA,EAAA,EACA,UAAA,CAAA,KAAA,OAAA,SAAA,EAAA,EACA,WAAA,OACA,OAAA,OACA,UAAA,OACA,EACA,KAAA,KACA,CACA,YAAAC,EAAA,MACA,eAAA,CAAA,WAAA,CAAA,EAAA,UAAA,CAAA,EAAA,MAAA,CAAA,EAAA,QAAA,EAAA,EACA,MAAA,CAAA,EACA,SAAA,GACA,WAAA,CACA,MAAA,GACA,YAAA,GACA,UAAA,EACA,CAAA,GAGA,SAAA,CACA,SAAA,CACA,OAAA,IAAAC,EAAA,KAAA,WAAAD,CAAA,CACA,EACA,YAAA,CACA,MAAAE,EAAA,KAAA,OAAA,MAAA,YAAA,OACAC,GAAAA,EAAA,OAAA,KAAA,IAAA,EAEA,GAAAD,EAAA,SAAA,EACA,cAAA,IAAA,iBAAA,EACA,MAEA,OAAAA,EAAA,EACA,EAEA,cAAA,CACA,OAAAN,CACA,CACA,EACA,QAAA,CACA,MAAA,eAAA,CACA,GAAA,CAAA,KAAA,QAAA,OAEA,QAAA,IAAA,KAAA,UAAA,EAEA,GAAA,CACA,MAAAQ,EAAA,MAAA,KAAA,QAAA,YAAA,KAAA,UAAA,IAAA,KAAA,UAAA,EACA,KAAA,WAAAC,EAAA,MAAAD,CAAA,QAEA,QAAA,MAAA,QAAA,CACA,CACA,MAAA,EAAA,KAAA,WAAA,MAAA,KAAA,WAAA,MAAA,QACA,KAAA,MAAA,QAAA,CAAA,CACA,CACA,EACA,MAAA,SAAA,CACA,MAAA,KAAA,gBACA,KAAA,eAAA,MAAA,KAAA,QAAA,mBAAA,KAAA,SAAA,EACA,KAAA,CAAA,MAAAE,CAAA,EAAA,MAAA,KAAA,QAAA,aAAA,KAAA,SAAA,EACA,KAAA,MAAAA,EAEA,KAAA,SAAA,GAEA,KAAA,SACA,CACA,CAAA,EClHA,IAAeC,EAAA,6BCCXC,EAAS,UAAY,CACvB,IAAIC,EAAI,KACJC,EAAGD,EAAI,eACPE,EAAGF,EAAI,MAAM,IAAIC,EAErB,OAAOC,EAAG,MAAO,CACf,YAAa,eACb,MAAO,CACL,iBAAkB,CAACF,EAAI,SACxB,EACD,MAAO,CACL,cAAiB,cAClB,CACF,EAAE,CAACA,EAAI,UAAYE,EAAG,MAAO,CAC5B,YAAa,QACb,MAAO,CACL,IAAOJ,EACP,MAAS,GACV,CACL,CAAG,EAAIE,EAAI,GAAE,EAAI,CAACA,EAAI,WAAaA,EAAI,SAAWE,EAAG,MAAO,CACxD,YAAa,UACjB,EAAK,CAACA,EAAG,IAAK,CACV,YAAa,QACjB,EAAK,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,SAAS,CAAC,CAAC,CAAC,EAAGE,EAAG,KAAM,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,WAAW,KAAK,CAAC,CAAC,CAAC,EAAGE,EAAG,IAAK,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,WAAW,WAAW,CAAC,CAAC,CAAC,EAAGE,EAAG,IAAI,EAAGA,EAAG,WAAY,CACrK,IAAK,YACL,YAAa,YACb,MAAO,CACL,iBAAoBF,EAAI,WACxB,UAAaA,EAAI,UACjB,OAAUA,EAAI,WACd,KAAQA,EAAI,WACZ,MAASA,EAAI,MACb,UAAaA,EAAI,WAAW,MAC5B,OAAU,SACV,eAAkBA,EAAI,cACvB,CACL,CAAG,CAAC,EAAG,CAAC,EAAIA,EAAI,GAAE,CAAE,CAAC,CACrB,EACIG,EAAkB,CAAE"}