import{e as ge,b as Zt,R as K,d as yt,n as bt,r as ft,g as ee,M as Kt,h as ve,C as ne,L as pt}from"./index.1d7144b8.js";import{d as gt}from"./index.86d5d5c9.js";import{r as Xt}from"./index.a906c0e7.js";import{b as Qt}from"./index.d10190c4.js";import{c as se}from"./index.0d83a8f9.js";import{d as de,b as er,p as tr}from"./index.409e4208.js";import{C as rr}from"./CollapsiblePanel.c7402232.js";import{P as nr,a as ar,I as sr,b as ir}from"./PathTraceLayer.c8ec5390.js";import{Z as or}from"./ZoomButtons.6b3cc4d8.js";import{H as vt}from"./HTTPFileSystem.33aea9ff.js";import{W as ur,I as cr}from"./moving-icons-vehicles-layer.dcedca1c.js";import{D as lr}from"./DashboardDataManager.6cb84912.js";import{W as fr}from"./GzipFetcher.worker.6a400caf.js";import{a as pr}from"./util.5fe75924.js";import{D as dr,S as hr}from"./deckgl.8395df4c.js";import{A as mr,L as yr}from"./layer.0cd20467.js";import{A as br}from"./arc-layer.c708f4b2.js";import"./index.01e94811.js";import"./index.84f8ccb6.js";import"./icon-manager.44d6d2bd.js";import"./line-layer.ca4a1987.js";import"./RoadNetworkLoader.worker.655695af.js";import"./index.5877f313.js";import"./extends.946277fc.js";var te={},W={exports:{}};(function(e){function s(n){return n&&n.__esModule?n:{default:n}}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports})(W);var kt={exports:{}},_t={exports:{}},ke={exports:{}};(function(e){function s(n,a){(a==null||a>n.length)&&(a=n.length);for(var g=0,h=new Array(a);g<a;g++)h[g]=n[g];return h}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports})(ke);(function(e){var s=ke.exports;function n(a){if(Array.isArray(a))return s(a)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(_t);var At={exports:{}};(function(e){function s(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports})(At);var xt={exports:{}};(function(e){var s=ke.exports;function n(a,g){if(!!a){if(typeof a=="string")return s(a,g);var h=Object.prototype.toString.call(a).slice(8,-1);if(h==="Object"&&a.constructor&&(h=a.constructor.name),h==="Map"||h==="Set")return Array.from(a);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return s(a,g)}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(xt);var wt={exports:{}};(function(e){function s(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports})(wt);(function(e){var s=_t.exports,n=At.exports,a=xt.exports,g=wt.exports;function h(v){return s(v)||n(v)||a(v)||g()}e.exports=h,e.exports.__esModule=!0,e.exports.default=e.exports})(kt);var Tt={exports:{}},oe={exports:{}};(function(e){function s(n){return e.exports=s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e.exports.__esModule=!0,e.exports.default=e.exports,s(n)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports})(oe);(function(e){var s=oe.exports.default;function n(){e.exports=n=function(){return a},e.exports.__esModule=!0,e.exports.default=e.exports;var a={},g=Object.prototype,h=g.hasOwnProperty,v=Object.defineProperty||function(w,x,A){w[x]=A.value},b=typeof Symbol=="function"?Symbol:{},d=b.iterator||"@@iterator",i=b.asyncIterator||"@@asyncIterator",u=b.toStringTag||"@@toStringTag";function r(w,x,A){return Object.defineProperty(w,x,{value:A,enumerable:!0,configurable:!0,writable:!0}),w[x]}try{r({},"")}catch{r=function(A,I,O){return A[I]=O}}function o(w,x,A,I){var O=x&&x.prototype instanceof m?x:m,_=Object.create(O.prototype),q=new p(I||[]);return v(_,"_invoke",{value:U(w,A,q)}),_}function t(w,x,A){try{return{type:"normal",arg:w.call(x,A)}}catch(I){return{type:"throw",arg:I}}}a.wrap=o;var c={};function m(){}function l(){}function f(){}var T={};r(T,d,function(){return this});var S=Object.getPrototypeOf,k=S&&S(S(C([])));k&&k!==g&&h.call(k,d)&&(T=k);var P=f.prototype=m.prototype=Object.create(T);function y(w){["next","throw","return"].forEach(function(x){r(w,x,function(A){return this._invoke(x,A)})})}function E(w,x){function A(O,_,q,F){var M=t(w[O],w,_);if(M.type!=="throw"){var $=M.arg,G=$.value;return G&&s(G)=="object"&&h.call(G,"__await")?x.resolve(G.__await).then(function(V){A("next",V,q,F)},function(V){A("throw",V,q,F)}):x.resolve(G).then(function(V){$.value=V,q($)},function(V){return A("throw",V,q,F)})}F(M.arg)}var I;v(this,"_invoke",{value:function(_,q){function F(){return new x(function(M,$){A(_,q,M,$)})}return I=I?I.then(F,F):F()}})}function U(w,x,A){var I="suspendedStart";return function(O,_){if(I==="executing")throw new Error("Generator is already running");if(I==="completed"){if(O==="throw")throw _;return R()}for(A.method=O,A.arg=_;;){var q=A.delegate;if(q){var F=j(q,A);if(F){if(F===c)continue;return F}}if(A.method==="next")A.sent=A._sent=A.arg;else if(A.method==="throw"){if(I==="suspendedStart")throw I="completed",A.arg;A.dispatchException(A.arg)}else A.method==="return"&&A.abrupt("return",A.arg);I="executing";var M=t(w,x,A);if(M.type==="normal"){if(I=A.done?"completed":"suspendedYield",M.arg===c)continue;return{value:M.arg,done:A.done}}M.type==="throw"&&(I="completed",A.method="throw",A.arg=M.arg)}}}function j(w,x){var A=x.method,I=w.iterator[A];if(I===void 0)return x.delegate=null,A==="throw"&&w.iterator.return&&(x.method="return",x.arg=void 0,j(w,x),x.method==="throw")||A!=="return"&&(x.method="throw",x.arg=new TypeError("The iterator does not provide a '"+A+"' method")),c;var O=t(I,w.iterator,x.arg);if(O.type==="throw")return x.method="throw",x.arg=O.arg,x.delegate=null,c;var _=O.arg;return _?_.done?(x[w.resultName]=_.value,x.next=w.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,c):_:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,c)}function D(w){var x={tryLoc:w[0]};1 in w&&(x.catchLoc=w[1]),2 in w&&(x.finallyLoc=w[2],x.afterLoc=w[3]),this.tryEntries.push(x)}function B(w){var x=w.completion||{};x.type="normal",delete x.arg,w.completion=x}function p(w){this.tryEntries=[{tryLoc:"root"}],w.forEach(D,this),this.reset(!0)}function C(w){if(w){var x=w[d];if(x)return x.call(w);if(typeof w.next=="function")return w;if(!isNaN(w.length)){var A=-1,I=function O(){for(;++A<w.length;)if(h.call(w,A))return O.value=w[A],O.done=!1,O;return O.value=void 0,O.done=!0,O};return I.next=I}}return{next:R}}function R(){return{value:void 0,done:!0}}return l.prototype=f,v(P,"constructor",{value:f,configurable:!0}),v(f,"constructor",{value:l,configurable:!0}),l.displayName=r(f,u,"GeneratorFunction"),a.isGeneratorFunction=function(w){var x=typeof w=="function"&&w.constructor;return!!x&&(x===l||(x.displayName||x.name)==="GeneratorFunction")},a.mark=function(w){return Object.setPrototypeOf?Object.setPrototypeOf(w,f):(w.__proto__=f,r(w,u,"GeneratorFunction")),w.prototype=Object.create(P),w},a.awrap=function(w){return{__await:w}},y(E.prototype),r(E.prototype,i,function(){return this}),a.AsyncIterator=E,a.async=function(w,x,A,I,O){O===void 0&&(O=Promise);var _=new E(o(w,x,A,I),O);return a.isGeneratorFunction(x)?_:_.next().then(function(q){return q.done?q.value:_.next()})},y(P),r(P,u,"Generator"),r(P,d,function(){return this}),r(P,"toString",function(){return"[object Generator]"}),a.keys=function(w){var x=Object(w),A=[];for(var I in x)A.push(I);return A.reverse(),function O(){for(;A.length;){var _=A.pop();if(_ in x)return O.value=_,O.done=!1,O}return O.done=!0,O}},a.values=C,p.prototype={constructor:p,reset:function(x){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!x)for(var A in this)A.charAt(0)==="t"&&h.call(this,A)&&!isNaN(+A.slice(1))&&(this[A]=void 0)},stop:function(){this.done=!0;var x=this.tryEntries[0].completion;if(x.type==="throw")throw x.arg;return this.rval},dispatchException:function(x){if(this.done)throw x;var A=this;function I($,G){return q.type="throw",q.arg=x,A.next=$,G&&(A.method="next",A.arg=void 0),!!G}for(var O=this.tryEntries.length-1;O>=0;--O){var _=this.tryEntries[O],q=_.completion;if(_.tryLoc==="root")return I("end");if(_.tryLoc<=this.prev){var F=h.call(_,"catchLoc"),M=h.call(_,"finallyLoc");if(F&&M){if(this.prev<_.catchLoc)return I(_.catchLoc,!0);if(this.prev<_.finallyLoc)return I(_.finallyLoc)}else if(F){if(this.prev<_.catchLoc)return I(_.catchLoc,!0)}else{if(!M)throw new Error("try statement without catch or finally");if(this.prev<_.finallyLoc)return I(_.finallyLoc)}}}},abrupt:function(x,A){for(var I=this.tryEntries.length-1;I>=0;--I){var O=this.tryEntries[I];if(O.tryLoc<=this.prev&&h.call(O,"finallyLoc")&&this.prev<O.finallyLoc){var _=O;break}}_&&(x==="break"||x==="continue")&&_.tryLoc<=A&&A<=_.finallyLoc&&(_=null);var q=_?_.completion:{};return q.type=x,q.arg=A,_?(this.method="next",this.next=_.finallyLoc,c):this.complete(q)},complete:function(x,A){if(x.type==="throw")throw x.arg;return x.type==="break"||x.type==="continue"?this.next=x.arg:x.type==="return"?(this.rval=this.arg=x.arg,this.method="return",this.next="end"):x.type==="normal"&&A&&(this.next=A),c},finish:function(x){for(var A=this.tryEntries.length-1;A>=0;--A){var I=this.tryEntries[A];if(I.finallyLoc===x)return this.complete(I.completion,I.afterLoc),B(I),c}},catch:function(x){for(var A=this.tryEntries.length-1;A>=0;--A){var I=this.tryEntries[A];if(I.tryLoc===x){var O=I.completion;if(O.type==="throw"){var _=O.arg;B(I)}return _}}throw new Error("illegal catch attempt")},delegateYield:function(x,A,I){return this.delegate={iterator:C(x),resultName:A,nextLoc:I},this.method==="next"&&(this.arg=void 0),c}},a}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(Tt);var he=Tt.exports(),z=he;try{regeneratorRuntime=he}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=he:Function("r","regeneratorRuntime = r")(he)}var re={},ue={exports:{}};(function(e){function s(a,g,h,v,b,d,i){try{var u=a[d](i),r=u.value}catch(o){h(o);return}u.done?g(r):Promise.resolve(r).then(v,b)}function n(a){return function(){var g=this,h=arguments;return new Promise(function(v,b){var d=a.apply(g,h);function i(r){s(d,v,b,i,u,"next",r)}function u(r){s(d,v,b,i,u,"throw",r)}i(void 0)})}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(ue);var _e={},St={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getCallback=b,e.getNodeCallback=u;var s=!1;if(typeof navigator!="undefined"&&navigator.product==="ReactNative")try{if(!s&&ge&&!ge.requestIdleCallback){s=!0;var n=15,a=[];ge.requestIdleCallback=function(o){a.push(o)},function(){function o(){var c=Date.now();setImmediate(function(){return t(c)})}function t(){for(var c,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:100,l={timeRemaining:function(){return n-(Date.now()-m)}};0<a.length&&1<l.timeRemaining();){c=a.pop();try{c(l)}catch(f){console.error(f)}}requestAnimationFrame(o)}requestAnimationFrame(o)}()}}catch{}try{if(!s&&typeof window!="undefined"&&!window.requestIdleCallback){s=!0;var g=14,h=[];window.requestIdleCallback=function(o){h.push(o)},function(){function o(){var c=Date.now();setTimeout(function(){return t(c)})}function t(){for(var c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:100,m={timeRemaining:function(){return g-(Date.now()-c)}};0<h.length&&1<m.timeRemaining();){var l=h.pop();try{l(m)}catch(f){console.error(f)}}requestAnimationFrame(o)}requestAnimationFrame(o)}()}}catch(o){console.error(o)}var v=null;function b(){if(v)return v;if(typeof window=="undefined")return u();var o=[],t=function(c){o.push(c)};return function(){function c(){var l=Date.now();setTimeout(function(){return m(l)})}function m(){var l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:100;requestAnimationFrame(c);for(var f,T={timeRemaining:function(){return 14-(Date.now()-l)}};0<o.length&&1<T.timeRemaining();){f=o.pop();try{f(T)}catch(S){console.error(S)}}}requestAnimationFrame(c)}(),v=t,t}var d=[],i=20;function u(){if(v)return v;var o=function(t){d.push(t)};return setTimeout(r),v=o,o}function r(){for(var o=Date.now(),t={timeRemaining:function(){return i-(Date.now()-o)}};0<d.length&&1<t.timeRemaining();){var c=d.pop();try{c(t)}catch(m){console.error(m)}}d.length?setImmediate(r):setTimeout(r,50)}})(St);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.useInternalEngine=a,e.request=void 0;var s=St,n=typeof window=="undefined"?(0,s.getNodeCallback)():window.requestIdleCallback;e.request=n;function a(g){e.request=n=g?(0,s.getCallback)():n}})(_e);(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.run=v,e.default=void 0;var n=s(z),a=s(ue.exports),g=_e,h=1.75;function v(d){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,u=2<arguments.length?arguments[2]:void 0,r=!1,o=null,t=new Promise(function(c,m){function l(){return f.apply(this,arguments)}function f(){return f=(0,a.default)(n.default.mark(function E(U){var j,D,B,p;return n.default.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!y){C.next=2;break}return C.abrupt("return");case 2:if(C.prev=2,y=!0,clearTimeout(k),!r){C.next=8;break}return S.return(),C.abrupt("return");case 8:j=Math.max(h,i),C.prev=9;case 10:if(!(U.timeRemaining()>j)){C.next=29;break}return C.t0=S,C.next=14,P;case 14:if(C.t1=C.sent,D=C.t0.next.call(C.t0,C.t1),B=D.value,p=D.done,P=void 0,!p){C.next=22;break}return c(B),C.abrupt("return");case 22:if(B!==!0){C.next=26;break}return C.abrupt("break",29);case 26:typeof B=="number"?(j=+B,isNaN(j)&&(j=h)):B&&B.then&&(P=B);case 27:C.next=10;break;case 29:C.next=36;break;case 31:return C.prev=31,C.t2=C.catch(9),console.error(C.t2),m(C.t2),C.abrupt("return");case 36:(0,g.request)(l),u&&(k=setTimeout(T,u));case 38:return C.prev=38,y=!1,C.finish(38);case 41:case"end":return C.stop()}},E,null,[[2,,38,41],[9,31]])})),f.apply(this,arguments)}function T(){var E=Date.now();l({timeout:!0,timeRemaining:function(){return 12.5-(Date.now()-E)}})}o=c;var S=d.next?d:d();(0,g.request)(l);var k=0,P=void 0,y=!1});return t.terminate=function(c){r=!0,o&&o(c)},t}var b=v;e.default=b})(re);var me={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.call=s;function s(n){for(var a=arguments.length,g=Array(1<a?a-1:0),h=1;h<a;h++)g[h-1]=arguments[h];return function(){for(var v=arguments.length,b=Array(v),d=0;d<v;d++)b[d]=arguments[d];return n.apply(this,[].concat(b,g))}}})(me);(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.yielding=v,e.wrapAsPromise=b,e.curryRight=d;var n=s(kt.exports),a=s(z),g=s(re),h=me;function v(i){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:16,r=0;if(i._yielding)return i;var o=a.default.mark(function(){var t,c=arguments;return a.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(t=i.apply(void 0,c),!(t&&t.then)){m.next=5;break}return m.next=4,t;case 4:t=m.sent;case 5:if(r++%u!=0){m.next=8;break}return void(m.next=8);case 8:return m.abrupt("return",t);case 9:case"end":return m.stop()}},t)});return o._yielding=!0,o}function b(i){var u=function(){return(0,g.default)(i.apply(void 0,arguments))};return u.with=function(){for(var r=arguments.length,o=Array(r),t=0;t<r;t++)o[t]=arguments[t];return h.call.apply(void 0,[u].concat(o))},u}function d(i,u,r){return i.length>u.length?function(){for(var o=arguments.length,t=Array(o),c=0;c<o;c++)t[c]=arguments[c];return d.call(this,i,[].concat(t,(0,n.default)(u)),r)}:r.apply(this,u)}})(te);var gr=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),vr=Zt(gr),Ot={},Ae={},J={};(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.wrapAsPromiseAndYieldFn=h;var n=te,a=s(re),g=me;function h(v){var b=function(d,i){for(var u=arguments.length,r=Array(2<u?u-2:0),o=2;o<u;o++)r[o-2]=arguments[o];return(0,a.default)(v.apply(void 0,[d,(0,n.yielding)(i)].concat(r)))};return b.with=function(){for(var d=arguments.length,i=Array(d),u=0;u<d;u++)i[u]=arguments[u];return g.call.apply(void 0,[b].concat(i))},b}})(J);var xe={},X={},le={};(function(e){var s=W.exports,n=s(oe.exports);Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=a;function a(g){return(0,n.default)(g)==="object"&&!Array.isArray(g)}})(le);var ae={},we={exports:{}},Te={exports:{}},Et={exports:{}};(function(e){var s=oe.exports.default;function n(a,g){if(s(a)!=="object"||a===null)return a;var h=a[Symbol.toPrimitive];if(h!==void 0){var v=h.call(a,g||"default");if(s(v)!=="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(a)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(Et);(function(e){var s=oe.exports.default,n=Et.exports;function a(g){var h=n(g,"string");return s(h)==="symbol"?h:String(h)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports})(Te);(function(e){var s=Te.exports;function n(a,g,h){return g=s(g),g in a?Object.defineProperty(a,g,{value:h,enumerable:!0,configurable:!0,writable:!0}):a[g]=h,a}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(we);(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.exitWith=g,e.doReturn=void 0;var n=s(we.exports),a=Symbol("return");e.doReturn=a;function g(h){var v;return v={},(0,n.default)(v,a,!0),(0,n.default)(v,"value",h),v}})(ae);(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=v;var n=s(z),a=le,g=ae,h=n.default.mark(v);function v(b,d,i){var u,r,o,t,c,m;return n.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(0,a.isObject)(b)){l.next=16;break}u=!i,l.t0=n.default.keys(b);case 3:if((l.t1=l.t0()).done){l.next=14;break}if(r=l.t1.value,u||(u=r===i),!u){l.next=12;break}if(!Object.prototype.hasOwnProperty.call(b,r)){l.next=12;break}return l.delegateYield(d(b[r],r,b),"t2",9);case 9:if(o=l.t2,!(o&&o[g.doReturn])){l.next=12;break}return l.abrupt("return",o.value);case 12:l.next=3;break;case 14:l.next=25;break;case 16:t=i||0,c=b.length;case 17:if(!(t<c)){l.next=25;break}return l.delegateYield(d(b[t],t,b),"t3",19);case 19:if(m=l.t3,!(m&&m[g.doReturn])){l.next=22;break}return l.abrupt("return",m.value);case 22:t++,l.next=17;break;case 25:case"end":return l.stop()}},h)}})(X);(function(e){var s=z,n=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.every=b;var a=n(z),g=X,h=ae,v=s.mark(b);function b(d,i){var u;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=!0,r.delegateYield((0,g.forEach)(d,a.default.mark(function o(t,c){return a.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.delegateYield(i(t,c,d),"t0",1);case 1:if(m.t0){m.next=4;break}return u=!1,m.abrupt("return",(0,h.exitWith)(!1));case 4:case"end":return m.stop()}},o)})),"t0",2);case 2:return r.abrupt("return",u);case 3:case"end":return r.stop()}},v)}})(xe);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.everyAsync=void 0;var s=J,n=xe,a=(0,s.wrapAsPromiseAndYieldFn)(n.every);e.everyAsync=a})(Ae);var Se={},Oe={};(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.Base64StringGenerator=void 0;var n=s(z),a=String.fromCharCode,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h={compressToUTF16:n.default.mark(function v(b){var d,i,u,r,o;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d=[],o=0,t.delegateYield(this.compress(b),"t0",2);case 2:b=t.t0,i=0;case 4:if(!(i<b.length)){t.next=61;break}if((511&i)!=0){t.next=8;break}return void(t.next=8);case 8:u=b.charCodeAt(i),t.t1=o++,t.next=t.t1===0?12:t.t1===1?15:t.t1===2?18:t.t1===3?21:t.t1===4?24:t.t1===5?27:t.t1===6?30:t.t1===7?33:t.t1===8?36:t.t1===9?39:t.t1===10?42:t.t1===11?45:t.t1===12?48:t.t1===13?51:t.t1===14?54:57;break;case 12:return d.push(a((u>>1)+32)),r=(1&u)<<14,t.abrupt("break",58);case 15:return d.push(a(r+(u>>2)+32)),r=(3&u)<<13,t.abrupt("break",58);case 18:return d.push(a(r+(u>>3)+32)),r=(7&u)<<12,t.abrupt("break",58);case 21:return d.push(a(r+(u>>4)+32)),r=(15&u)<<11,t.abrupt("break",58);case 24:return d.push(a(r+(u>>5)+32)),r=(31&u)<<10,t.abrupt("break",58);case 27:return d.push(a(r+(u>>6)+32)),r=(63&u)<<9,t.abrupt("break",58);case 30:return d.push(a(r+(u>>7)+32)),r=(127&u)<<8,t.abrupt("break",58);case 33:return d.push(a(r+(u>>8)+32)),r=(255&u)<<7,t.abrupt("break",58);case 36:return d.push(a(r+(u>>9)+32)),r=(511&u)<<6,t.abrupt("break",58);case 39:return d.push(a(r+(u>>10)+32)),r=(1023&u)<<5,t.abrupt("break",58);case 42:return d.push(a(r+(u>>11)+32)),r=(2047&u)<<4,t.abrupt("break",58);case 45:return d.push(a(r+(u>>12)+32)),r=(4095&u)<<3,t.abrupt("break",58);case 48:return d.push(a(r+(u>>13)+32)),r=(8191&u)<<2,t.abrupt("break",58);case 51:return d.push(a(r+(u>>14)+32)),r=(16383&u)<<1,t.abrupt("break",58);case 54:return d.push(a(r+(u>>15)+32,(32767&u)+32)),o=0,t.abrupt("break",58);case 57:return t.abrupt("break",58);case 58:i++,t.next=4;break;case 61:return d.push(a(r+32)),t.abrupt("return",d.join(""));case 63:case"end":return t.stop()}},v,this)}),decompressFromUTF16:n.default.mark(function v(b){var d,i,u,r,o;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:d=[],r=0,o=0;case 1:if(!(o<b.length)){t.next=60;break}if((o&&511)!==0){t.next=5;break}return void(t.next=5);case 5:u=b.charCodeAt(o)-32,t.t0=r++,t.next=t.t0===0?9:t.t0===1?11:t.t0===2?14:t.t0===3?17:t.t0===4?20:t.t0===5?23:t.t0===6?26:t.t0===7?29:t.t0===8?32:t.t0===9?35:t.t0===10?38:t.t0===11?41:t.t0===12?44:t.t0===13?47:t.t0===14?50:t.t0===15?53:56;break;case 9:return i=u<<1,t.abrupt("break",57);case 11:return d.push(a(i|u>>14)),i=(16383&u)<<2,t.abrupt("break",57);case 14:return d.push(a(i|u>>13)),i=(8191&u)<<3,t.abrupt("break",57);case 17:return d.push(a(i|u>>12)),i=(4095&u)<<4,t.abrupt("break",57);case 20:return d.push(a(i|u>>11)),i=(2047&u)<<5,t.abrupt("break",57);case 23:return d.push(a(i|u>>10)),i=(1023&u)<<6,t.abrupt("break",57);case 26:return d.push(a(i|u>>9)),i=(511&u)<<7,t.abrupt("break",57);case 29:return d.push(a(i|u>>8)),i=(255&u)<<8,t.abrupt("break",57);case 32:return d.push(a(i|u>>7)),i=(127&u)<<9,t.abrupt("break",57);case 35:return d.push(a(i|u>>6)),i=(63&u)<<10,t.abrupt("break",57);case 38:return d.push(a(i|u>>5)),i=(31&u)<<11,t.abrupt("break",57);case 41:return d.push(a(i|u>>4)),i=(15&u)<<12,t.abrupt("break",57);case 44:return d.push(a(i|u>>3)),i=(7&u)<<13,t.abrupt("break",57);case 47:return d.push(a(i|u>>2)),i=(3&u)<<14,t.abrupt("break",57);case 50:return d.push(a(i|u>>1)),i=(1&u)<<15,t.abrupt("break",57);case 53:return d.push(a(i|u)),r=0,t.abrupt("break",57);case 56:return t.abrupt("break",57);case 57:o++,t.next=1;break;case 60:return t.delegateYield(this.decompress(d.join("")),"t1",61);case 61:return t.abrupt("return",t.t1);case 62:case"end":return t.stop()}},v,this)}),decompress:n.default.mark(function v(b){var d,i,u,r,o,t,c,m,l,f,T;return n.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:d=[],l=1,f=b.charCodeAt(0)>>8,T=0;case 4:if(!(l<2*b.length&&(l<2*b.length-1||f===0))){S.next=21;break}if((511&T++)!=0){S.next=8;break}return void(S.next=8);case 8:l%2==0?(i=b.charCodeAt(l/2)>>8,u=255&b.charCodeAt(l/2),r=l/2+1<b.length?b.charCodeAt(l/2+1)>>8:NaN):(i=255&b.charCodeAt((l-1)/2),(l+1)/2<b.length?(u=b.charCodeAt((l+1)/2)>>8,r=255&b.charCodeAt((l+1)/2)):u=r=NaN),l+=3,o=i>>2,t=(3&i)<<4|u>>4,c=(15&u)<<2|r>>6,m=63&r,isNaN(u)||l===2*b.length+1&&f?c=m=64:(isNaN(r)||l===2*b.length&&f)&&(m=64),d.push(g.charAt(o)),d.push(g.charAt(t)),d.push(g.charAt(c)),d.push(g.charAt(m)),S.next=4;break;case 21:return S.abrupt("return",d.join(""));case 22:case"end":return S.stop()}},v)}),compress:n.default.mark(function v(b){var d,i,u,r,o,t,c,m,l,f,T,S;return n.default.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:d=[],i=1,T=0,S=!1,b=b.replace(/[^A-Za-z0-9+/=]/g,"");case 2:if(!(T<b.length)){k.next=17;break}if((T&&1023)!==0){k.next=6;break}return void(k.next=6);case 6:c=g.indexOf(b.charAt(T++)),m=g.indexOf(b.charAt(T++)),l=g.indexOf(b.charAt(T++)),f=g.indexOf(b.charAt(T++)),r=c<<2|m>>4,o=(15&m)<<4|l>>2,t=(3&l)<<6|f,i%2==0?(u=r<<8,S=!0,l!==64&&(d.push(a(u|o)),S=!1),f!==64&&(u=t<<8,S=!0)):(d.push(a(u|r)),S=!1,l!==64&&(u=o<<8,S=!0),f!==64&&(d.push(a(u|t)),S=!1)),i+=3,k.next=2;break;case 17:return void(k.next=19);case 19:return S?(d.push(a(u)),d=d.join(""),d=a(256|d.charCodeAt(0))+d.substring(1)):d=d.join(""),k.abrupt("return",d);case 21:case"end":return k.stop()}},v)})};e.Base64StringGenerator=h})(Oe);var Ee={};(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.LZStringGenerator=void 0;var n=s(z),a=15,g=function(){function h(r,o){if(!i[r]){i[r]={};for(var t=0;t<r.length;t++)i[r][r.charAt(t)]=t}return i[r][o]}var v=String.fromCharCode,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={},u={compressToBase64:n.default.mark(function r(o){var t;return n.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(o!==null){c.next=2;break}return c.abrupt("return","");case 2:return c.delegateYield(u._compress(o,6,function(m){return b.charAt(m)}),"t0",3);case 3:t=c.t0,c.t1=t.length%4,c.next=c.t1===0?7:c.t1===1?8:c.t1===2?9:c.t1===3?10:7;break;case 7:return c.abrupt("return",t);case 8:return c.abrupt("return",t+"===");case 9:return c.abrupt("return",t+"==");case 10:return c.abrupt("return",t+"=");case 11:case"end":return c.stop()}},r)}),decompressFromBase64:n.default.mark(function r(o){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o!==null){t.next=2;break}return t.abrupt("return","");case 2:if(o!==""){t.next=4;break}return t.abrupt("return",null);case 4:return t.delegateYield(u._decompress(o.length,32,function(c){return h(b,o.charAt(c))}),"t0",5);case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}},r)}),compressToUTF16:n.default.mark(function r(o){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o!==null){t.next=2;break}return t.abrupt("return","");case 2:return t.delegateYield(u._compress(o,15,function(c){return v(c+32)}),"t0",3);case 3:return t.t1=t.t0,t.abrupt("return",t.t1+" ");case 5:case"end":return t.stop()}},r)}),decompressFromUTF16:n.default.mark(function r(o){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o!==null){t.next=2;break}return t.abrupt("return","");case 2:if(o!==""){t.next=4;break}return t.abrupt("return",null);case 4:return t.delegateYield(u._decompress(o.length,16384,function(c){return o.charCodeAt(c)-32}),"t0",5);case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}},r)}),compressToUint8Array:n.default.mark(function r(o){var t,c,m,l,f;return n.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.delegateYield(u.compress(o),"t0",1);case 1:return t=T.t0,c=new Uint8Array(2*t.length),void(T.next=5);case 5:m=0,l=t.length;case 6:if(!(m<l)){T.next=16;break}if((m&a)!=0){T.next=10;break}return void(T.next=10);case 10:f=t.charCodeAt(m),c[2*m]=f>>>8,c[2*m+1]=f%256;case 13:m++,T.next=6;break;case 16:return T.abrupt("return",c);case 17:case"end":return T.stop()}},r)}),decompressFromUint8Array:n.default.mark(function r(o){var t,c,m;return n.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(o!=null){l.next=5;break}return l.delegateYield(u.decompress(o),"t0",2);case 2:return l.abrupt("return",l.t0);case 5:t=Array(o.length/2),c=0,m=t.length;case 7:if(!(c<m)){l.next=15;break}if((c&a)!=0){l.next=11;break}return void(l.next=11);case 11:t[c]=256*o[2*c]+o[2*c+1];case 12:c++,l.next=7;break;case 15:return void(l.next=17);case 17:return l.delegateYield(u.decompress(t.join("")),"t1",18);case 18:return l.abrupt("return",l.t1);case 19:case"end":return l.stop()}},r)}),compressToEncodedURIComponent:n.default.mark(function r(o){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o!==null){t.next=2;break}return t.abrupt("return","");case 2:return t.delegateYield(u._compress(o,6,function(c){return d.charAt(c)}),"t0",3);case 3:return t.abrupt("return",t.t0);case 4:case"end":return t.stop()}},r)}),decompressFromEncodedURIComponent:n.default.mark(function r(o){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o!==null){t.next=2;break}return t.abrupt("return","");case 2:if(o!==""){t.next=4;break}return t.abrupt("return",null);case 4:return o=o.replace(/ /g,"+"),t.delegateYield(u._decompress(o.length,32,function(c){return h(d,o.charAt(c))}),"t0",6);case 6:return t.abrupt("return",t.t0);case 7:case"end":return t.stop()}},r)}),compress:n.default.mark(function r(o){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(u._compress(o,16,function(c){return v(c)}),"t0",1);case 1:return t.abrupt("return",t.t0);case 2:case"end":return t.stop()}},r)}),_compress:n.default.mark(function r(o,t,c){var m,l,f,T,S,k,P,y,E,U,j,D,B,p;return n.default.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(o!==null){C.next=2;break}return C.abrupt("return","");case 2:f={},T={},S="",k="",P="",y=2,E=3,U=2,j=[],D=0,B=0,p=0;case 4:if(!(p<o.length)){C.next=44;break}if((p&a)!=0){C.next=8;break}return void(C.next=8);case 8:if(S=o.charAt(p),Object.prototype.hasOwnProperty.call(f,S)||(f[S]=E++,T[S]=!0),k=P+S,!Object.prototype.hasOwnProperty.call(f,k)){C.next=15;break}P=k,C.next=41;break;case 15:if(!Object.prototype.hasOwnProperty.call(T,P)){C.next=35;break}if(!(256>P.charCodeAt(0))){C.next=24;break}for(m=0;m<U;m++)D<<=1,B===t-1?(B=0,j.push(c(D)),D=0):B++;return l=P.charCodeAt(0),void(C.next=21);case 21:for(m=0;8>m;m++)D=D<<1|1&l,B===t-1?(B=0,j.push(c(D)),D=0):B++,l>>=1;C.next=30;break;case 24:for(l=1,m=0;m<U;m++)D=D<<1|l,B===t-1?(B=0,j.push(c(D)),D=0):B++,l=0;return l=P.charCodeAt(0),void(C.next=29);case 29:for(m=0;16>m;m++)D=D<<1|1&l,B===t-1?(B=0,j.push(c(D)),D=0):B++,l>>=1;case 30:y--,y===0&&(y=Math.pow(2,U),U++),delete T[P],C.next=37;break;case 35:for(l=f[P],m=0;m<U;m++)D=D<<1|1&l,B===t-1?(B=0,j.push(c(D)),D=0):B++,l>>=1;case 37:y--,y===0&&(y=Math.pow(2,U),U++),f[k]=E++,P=S+"";case 41:p+=1,C.next=4;break;case 44:if(P===""){C.next=71;break}if(!Object.prototype.hasOwnProperty.call(T,P)){C.next=67;break}if(!(256>P.charCodeAt(0))){C.next=54;break}for(m=0;m<U;m++)D<<=1,B===t-1?(B=0,j.push(c(D)),D=0):B++;return l=P.charCodeAt(0),void(C.next=51);case 51:for(m=0;8>m;m++)D=D<<1|1&l,B===t-1?(B=0,j.push(c(D)),D=0):B++,l>>=1;C.next=62;break;case 54:return l=1,void(C.next=57);case 57:for(m=0;m<U;m++)D=D<<1|l,B===t-1?(B=0,j.push(c(D)),D=0):B++,l=0;return l=P.charCodeAt(0),void(C.next=61);case 61:for(m=0;16>m;m++)D=D<<1|1&l,B===t-1?(B=0,j.push(c(D)),D=0):B++,l>>=1;case 62:y--,y===0&&(y=Math.pow(2,U),U++),delete T[P],C.next=69;break;case 67:for(l=f[P],m=0;m<U;m++)D=D<<1|1&l,B===t-1?(B=0,j.push(c(D)),D=0):B++,l>>=1;case 69:y--,y===0&&(y=Math.pow(2,U),U++);case 71:return l=2,void(C.next=74);case 74:for(m=0;m<U;m++)D=D<<1|1&l,B===t-1?(B=0,j.push(c(D)),D=0):B++,l>>=1;return void(C.next=77);case 77:if(D<<=1,B!==t-1){C.next=84;break}return j.push(c(D)),C.abrupt("break",87);case 84:B++;case 85:C.next=77;break;case 87:return C.next=89,!0;case 89:return C.abrupt("return",j.join(""));case 90:case"end":return C.stop()}},r)}),decompress:n.default.mark(function r(o){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o!==null){t.next=2;break}return t.abrupt("return","");case 2:if(o!==""){t.next=4;break}return t.abrupt("return",null);case 4:return t.delegateYield(u._decompress(o.length,32768,function(c){return o.charCodeAt(c)}),"t0",5);case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}},r)}),_decompress:n.default.mark(function r(o,t,c){var m,l,f,T,S,k,P,y,E,U,j,D,B,p,C;return n.default.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:for(m=[],l=4,f=4,T=3,S="",k=[],p={val:c(0),position:t,index:1},P=0;3>P;P+=1)m[P]=P;for(E=0,j=Math.pow(2,2),D=1;D!==j;)U=p.val&p.position,p.position>>=1,p.position===0&&(p.position=t,p.val=c(p.index++)),E|=(0<U?1:0)*D,D<<=1;R.t0=E,R.next=R.t0===0?9:R.t0===1?15:R.t0===2?21:22;break;case 9:for(E=0,j=Math.pow(2,8),D=1;D!==j;)U=p.val&p.position,p.position>>=1,p.position===0&&(p.position=t,p.val=c(p.index++)),E|=(0<U?1:0)*D,D<<=1;return B=v(E),R.abrupt("break",23);case 15:for(E=0,j=Math.pow(2,16),D=1;D!==j;)U=p.val&p.position,p.position>>=1,p.position===0&&(p.position=t,p.val=c(p.index++)),E|=(0<U?1:0)*D,D<<=1;return B=v(E),R.abrupt("break",23);case 21:return R.abrupt("return","");case 22:return R.abrupt("break",23);case 23:m[3]=B,y=B,k.push(B),C=0;case 27:if((C++&a)!=0){R.next=31;break}return void(R.next=31);case 31:if(!(p.index>o)){R.next=33;break}return R.abrupt("return","");case 33:E=0,j=Math.pow(2,T),D=1;case 36:if(D===j){R.next=47;break}if((C++&a)!=0){R.next=40;break}return void(R.next=40);case 40:U=p.val&p.position,p.position>>=1,p.position===0&&(p.position=t,p.val=c(p.index++)),E|=(0<U?1:0)*D,D<<=1,R.next=36;break;case 47:R.t1=B=E,R.next=R.t1===0?50:R.t1===1?68:R.t1===2?86:87;break;case 50:E=0,j=Math.pow(2,8),D=1;case 53:if(D===j){R.next=64;break}if((C++&a)!=0){R.next=57;break}return void(R.next=57);case 57:U=p.val&p.position,p.position>>=1,p.position===0&&(p.position=t,p.val=c(p.index++)),E|=(0<U?1:0)*D,D<<=1,R.next=53;break;case 64:return m[f++]=v(E),B=f-1,l--,R.abrupt("break",88);case 68:E=0,j=Math.pow(2,16),D=1;case 71:if(D===j){R.next=82;break}if((C++&a)!=0){R.next=75;break}return void(R.next=75);case 75:U=p.val&p.position,p.position>>=1,p.position===0&&(p.position=t,p.val=c(p.index++)),E|=(0<U?1:0)*D,D<<=1,R.next=71;break;case 82:return m[f++]=v(E),B=f-1,l--,R.abrupt("break",88);case 86:return R.abrupt("return",k.join(""));case 87:return R.abrupt("break",88);case 88:if(l===0&&(l=Math.pow(2,T),T++),!m[B]){R.next=93;break}S=m[B],R.next=98;break;case 93:if(B!==f){R.next=97;break}S=y+y.charAt(0),R.next=98;break;case 97:return R.abrupt("return",null);case 98:k.push(S),m[f++]=y+S.charAt(0),l--,y=S,l===0&&(l=Math.pow(2,T),T++),R.next=27;break;case 105:case"end":return R.stop()}},r)})};return u}();e.LZStringGenerator=g})(Ee);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.base64Decompress=e.base64decompressFromUTF16Async=e.decompressAsync=e.decompressFromEncodedURIComponentAsync=e.decompressFromUint8ArrayAsync=e.decompressFromUTF16Async=e.decompressFromBase64Async=e.base64Compress=e.base64CompressToUTF16Async=e.compressAsync=e.compressToEncodedURIComponentAsync=e.compressToUint8ArrayAsync=e.compressToUTF16Async=e.compressToBase64Async=void 0;var s=te,n=Oe,a=Ee,g=(0,s.wrapAsPromise)(a.LZStringGenerator.compressToBase64);e.compressToBase64Async=g;var h=(0,s.wrapAsPromise)(a.LZStringGenerator.compressToUTF16);e.compressToUTF16Async=h;var v=(0,s.wrapAsPromise)(a.LZStringGenerator.compressToUint8Array);e.compressToUint8ArrayAsync=v;var b=(0,s.wrapAsPromise)(a.LZStringGenerator.compressToEncodedURIComponent);e.compressToEncodedURIComponentAsync=b;var d=(0,s.wrapAsPromise)(a.LZStringGenerator.compress);e.compressAsync=d;var i=(0,s.wrapAsPromise)(n.Base64StringGenerator.compressToUTF16);e.base64CompressToUTF16Async=i;var u=(0,s.wrapAsPromise)(n.Base64StringGenerator.compress);e.base64Compress=u;var r=(0,s.wrapAsPromise)(a.LZStringGenerator.decompressFromBase64);e.decompressFromBase64Async=r;var o=(0,s.wrapAsPromise)(a.LZStringGenerator.decompressFromUTF16);e.decompressFromUTF16Async=o;var t=(0,s.wrapAsPromise)(a.LZStringGenerator.decompressFromUint8Array);e.decompressFromUint8ArrayAsync=t;var c=(0,s.wrapAsPromise)(a.LZStringGenerator.decompressFromURIComponent);e.decompressFromEncodedURIComponentAsync=c;var m=(0,s.wrapAsPromise)(a.LZStringGenerator.decompress);e.decompressAsync=m;var l=(0,s.wrapAsPromise)(n.Base64StringGenerator.decompressFromUTF16);e.base64decompressFromUTF16Async=l;var f=(0,s.wrapAsPromise)(n.Base64StringGenerator.decompress);e.base64Decompress=f})(Se);var Pe={},Ce={},fe={exports:{}};(function(e){function s(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports})(fe);var pe={exports:{}};(function(e){var s=Te.exports;function n(g,h){for(var v=0;v<h.length;v++){var b=h[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,s(b.key),b)}}function a(g,h,v){return h&&n(g.prototype,h),v&&n(g,v),Object.defineProperty(g,"prototype",{writable:!1}),g}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports})(pe);var Pt={},ye={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TokenType=void 0;var s={LeftBrace:"{",RightBrace:"}",LeftBracket:"l",RightBracket:"r",Comma:"c",Colon:"n",Null:"0",Boolean:"t",Number:"n",String:"s"};e.TokenType=s})(ye);var be={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.yielder=n;var s=0;function n(){return 100<s++&&(s=0,!0)}})(be);(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.Tokenizer=void 0;var n=s(z),a=s(fe.exports),g=s(pe.exports),h=ye,v=be,b=[10,13,32],d="init",i="null",u="boolean_true",r="boolean_false",o="number",t="string",c="escape",m={"[":h.TokenType.LeftBracket,"]":h.TokenType.RightBracket,"{":h.TokenType.LeftBrace,"}":h.TokenType.RightBrace,":":h.TokenType.Colon,",":h.TokenType.Comma},l={"[":d,"]":d,"{":d,"}":d,":":d,",":d,n:i,t:u,f:r,0:o,1:o,2:o,3:o,4:o,5:o,6:o,7:o,8:o,9:o,"-":o,'"':t},f=function(){function T(){(0,a.default)(this,T),this.state=d,this.pos=0,this.sourceCode="",this.tokens=[],this.curToken=""}return(0,g.default)(T,[{key:"tokenizeArray",value:n.default.mark(function S(k){var P,y;return n.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:this.sourceCode=k,this.type="uint8",P=k.length;case 3:if(!(this.pos<P)){E.next=28;break}if(!((15&this.pos)==0&&(0,v.yielder)())){E.next=7;break}return void(E.next=7);case 7:y=this.readCharacter(),E.t0=this.state,E.next=E.t0===d?11:E.t0===i?13:E.t0===u?15:E.t0===r?17:E.t0===o?19:E.t0===t?21:E.t0===c?23:25;break;case 11:return this.initToken(y),E.abrupt("break",26);case 13:return this.handleTokenNull(y),E.abrupt("break",26);case 15:return this.handleTokenTrue(y),E.abrupt("break",26);case 17:return this.handleTokenFalse(y),E.abrupt("break",26);case 19:return this.handleTokenNumber(y),E.abrupt("break",26);case 21:return this.handleTokenString(y),E.abrupt("break",26);case 23:return this.handleTokenStringEscape(y),E.abrupt("break",26);case 25:throw new Error("finite state machine get an unexpected state: ".concat(this.state));case 26:E.next=3;break;case 28:return E.abrupt("return",this.tokens);case 29:case"end":return E.stop()}},S,this)})},{key:"tokenize",value:n.default.mark(function S(k){var P,y;return n.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(k instanceof Uint8Array)){E.next=3;break}return E.delegateYield(this.tokenizeArray(k),"t0",2);case 2:return E.abrupt("return",E.t0);case 3:this.type="char",this.sourceCode=k,P=k.length;case 6:if(!(this.pos<P)){E.next=31;break}if(!((7&this.pos)==0&&(0,v.yielder)())){E.next=10;break}return void(E.next=10);case 10:y=this.read(),E.t1=this.state,E.next=E.t1===d?14:E.t1===i?16:E.t1===u?18:E.t1===r?20:E.t1===o?22:E.t1===t?24:E.t1===c?26:28;break;case 14:return this.initToken(y),E.abrupt("break",29);case 16:return this.handleTokenNull(y),E.abrupt("break",29);case 18:return this.handleTokenTrue(y),E.abrupt("break",29);case 20:return this.handleTokenFalse(y),E.abrupt("break",29);case 22:return this.handleTokenNumber(y),E.abrupt("break",29);case 24:return this.handleTokenString(y),E.abrupt("break",29);case 26:return this.handleTokenStringEscape(y),E.abrupt("break",29);case 28:throw new Error("finite state machine get an unexpected state: ".concat(this.state));case 29:E.next=6;break;case 31:return E.abrupt("return",this.tokens);case 32:case"end":return E.stop()}},S,this)})},{key:"read",value:function(){var k;do k=this.sourceCode[this.pos++];while(k&&32>k.charCodeAt(0));return k}},{key:"readCharacter",value:function(){var k=this.sourceCode[this.pos++];switch(k>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:return String.fromCharCode(k);case 12:case 13:return String.fromCharCode((31&k)<<6|63&this.sourceCode[this.pos++]);case 14:return String.fromCharCode((15&k)<<12|(63&this.sourceCode[this.pos++])<<6|63&this.sourceCode[this.pos++]);default:throw new Error("Bad encoding")}}},{key:"peek",value:function(){var k=this.pos;if(this.type==="char"){for(;this.sourceCode[k]&&32>this.sourceCode[k].charCodeAt(0);)k++;return this.sourceCode[k]}for(var P=function(){var U=y[k++];switch(U>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:return String.fromCharCode(U);case 12:case 13:return String.fromCharCode((31&U)<<6|63&y[k++]);case 14:return String.fromCharCode((15&U)<<12|(63&y[k++])<<6|63&y[k++]);default:throw new Error("Bad encoding")}},y=this.sourceCode,E=P();32>E.charCodeAt(0)&&k<y.length;)E=P();return E.charCodeAt(0)===0?void 0:E}},{key:"initToken",value:function(k){for(;k&&32>=k.charCodeAt(0);)k=this.sourceCode[this.pos++];var P=m[k];if(!P&&!b.includes(k.charCodeAt(0)))throw new Error("state INIT, unexpected token ".concat(k));for(this.tokens.push({text:k,type:P});this.peek()===" ";)this.pos++;var y=this.peek();if(y!==void 0&&(this.state=l[y],!this.state))throw new Error("Unexpected character [".concat(P,":").concat(y.charCodeAt(0),"] '").concat(k,"' @ ").concat(this.pos," - ").concat(this.sourceCode.slice(Math.max(0,this.pos-16),this.pos+16)))}},{key:"handleTokenNull",value:function(k){switch(k){case"n":case"u":this.curToken+=k;break;case"l":if(this.curToken+=k,this.curToken==="null"){var P={text:this.curToken,type:h.TokenType.Null};this.tokens.push(P),this.curToken="",this.state=d}else if(this.curToken!=="nul")throw new Error("state NULL, unexpected token ".concat(k));break;default:throw new Error("state NULL, unexpected token ".concat(k))}}},{key:"handleTokenTrue",value:function(k){switch(k){case"t":case"r":case"u":this.curToken+=k;break;case"e":if(this.curToken!=="tru")throw new Error("state TRUE, unexpected token ".concat(k));this.curToken+=k;var P={text:this.curToken,type:h.TokenType.Boolean};this.tokens.push(P),this.curToken="",this.state=d;break;default:throw new Error("state TRUE, unexpected token ".concat(k))}}},{key:"handleTokenFalse",value:function(k){switch(k){case"f":case"a":case"l":case"s":this.curToken+=k;break;case"e":this.curToken+=k;var P={text:this.curToken,type:h.TokenType.Boolean};this.tokens.push(P),this.curToken="",this.state=d;break;default:throw new Error("state FALSE, unexpected token ".concat(k))}}},{key:"handleTokenNumber",value:function(k){switch(k){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(this.curToken+=k,!/[0-9]|\.|-/.test(this.peek())){var P={text:this.curToken,type:h.TokenType.Number};this.tokens.push(P),this.curToken="",this.state=d}break;case"-":case".":this.curToken+=k;break;default:throw new Error("state NUMBER, unexpected token ".concat(k))}}},{key:"handleTokenStringEscape",value:function(k){return k==="u"?(this.curToken+=JSON.parse('"\\u'.concat(this.read()).concat(this.read()).concat(this.read()).concat(this.read(),'"')),void(this.state=t)):(this.curToken+=JSON.parse('"\\'.concat(k,'"')),void(this.state=t))}},{key:"handleTokenString",value:function(k){switch(k){case"\\":this.state=c;break;case'"':if(this.curToken==="")this.curToken=k;else{this.curToken+=k;var P={text:this.curToken,type:h.TokenType.String};this.tokens.push(P),this.curToken="",this.state=d}break;default:this.curToken+=k}}}]),T}();e.Tokenizer=f})(Pt);var Ct={},Re={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ExprType=void 0;var s={Json:"j",Array:"a",Object:"o",Prop:"p",Value:"v"};e.ExprType=s})(Re);(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.AST=e.ASTNode=void 0;var n=s(z),a=s(fe.exports),g=s(pe.exports),h=ye,v=Re,b=be,d=function(){function u(r,o){(0,a.default)(this,u),this.type=o,this.tokens=r,this.childNodeList=[]}return(0,g.default)(u,[{key:"addChild",value:function(o){this.childNodeList.push(o)}}]),u}();e.ASTNode=d;var i=function(){function u(r){(0,a.default)(this,u),this.tokens=r}return(0,g.default)(u,[{key:"buildTree",value:n.default.mark(function r(){return n.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.delegateYield(this.handleExprJson(this.tokens),"t0",1);case 1:return o.abrupt("return",o.t0);case 2:case"end":return o.stop()}},r,this)})},{key:"handleExprJson",value:n.default.mark(function r(o){var t,c,m,l;return n.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(0,b.yielder)()){f.next=3;break}return void(f.next=3);case 3:if(t=new d(o,v.ExprType.Json),c=o[0],c.type!==h.TokenType.LeftBracket){f.next=11;break}return f.delegateYield(this.handleExprArray(o),"t0",7);case 7:m=f.t0,t.addChild(m),f.next=18;break;case 11:if(c.type!==h.TokenType.LeftBrace){f.next=17;break}return f.delegateYield(this.handleExprObject(o),"t1",13);case 13:l=f.t1,t.addChild(l),f.next=18;break;case 17:throw new Error("[json expression error] unexpected token ".concat(c.text));case 18:return f.abrupt("return",t);case 19:case"end":return f.stop()}},r,this)})},{key:"handleExprArray",value:n.default.mark(function r(o){var t,c,m,l,f,T,S,k,P;return n.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(o.length!==2||o[0].type!==h.TokenType.LeftBracket||o[1].type!==h.TokenType.RightBracket){y.next=2;break}return y.abrupt("return",new d(o,v.ExprType.Array));case 2:t=new d(o,v.ExprType.Array),c=[],m=0,l=0,f=1,T=o.length-1;case 7:if(!(f<T)){y.next=40;break}if(!(0,b.yielder)()){y.next=11;break}return void(y.next=11);case 11:if(S=o[f],S.type!==h.TokenType.Comma||m!==0||l!==0){y.next=24;break}if(c.length!==1){y.next=17;break}y.t0=this.handleExprValueDirect(c),y.next=19;break;case 17:return y.delegateYield(this.handleExprValue(c),"t1",18);case 18:y.t0=y.t1;case 19:k=y.t0,c=[],t.addChild(k),y.next=37;break;case 24:y.t2=S.type,y.next=y.t2===h.TokenType.RightBrace?27:y.t2===h.TokenType.RightBracket?29:y.t2===h.TokenType.LeftBrace?31:y.t2===h.TokenType.LeftBracket?33:35;break;case 27:return m--,y.abrupt("break",36);case 29:return l--,y.abrupt("break",36);case 31:return m++,y.abrupt("break",36);case 33:return l++,y.abrupt("break",36);case 35:return y.abrupt("break",36);case 36:c.push(S);case 37:f++,y.next=7;break;case 40:if(c.length!==1){y.next=44;break}y.t3=this.handleExprValueDirect(c),y.next=46;break;case 44:return y.delegateYield(this.handleExprValue(c),"t4",45);case 45:y.t3=y.t4;case 46:return P=y.t3,t.addChild(P),y.abrupt("return",t);case 49:case"end":return y.stop()}},r,this)})},{key:"handleExprObject",value:n.default.mark(function r(o){var t,c,m,l,f,T,S,k,P,y,E,U;return n.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(o.length!==2||o[0].type!==h.TokenType.LeftBrace||o[1].type!==h.TokenType.RightBrace){j.next=2;break}return j.abrupt("return",new d(o,v.ExprType.Object));case 2:t=new d(o,v.ExprType.Object),m=[],l=[],f=0,T=0,S="prop",k=1,P=o.length-1;case 9:if(!(k<P)){j.next=58;break}if(!(0,b.yielder)()){j.next=13;break}return void(j.next=13);case 13:if(y=o[k],y.type!==h.TokenType.Colon||S!=="prop"){j.next=21;break}return j.delegateYield(this.handleExprProp(m),"t0",16);case 16:c=j.t0,m=[],S="value",j.next=55;break;case 21:if(y.type!==h.TokenType.Comma||S!=="prop"||f!==0||T!==0){j.next=34;break}if(l.length!==1){j.next=26;break}j.t1=this.handleExprValueDirect(l),j.next=28;break;case 26:return j.delegateYield(this.handleExprValue(l),"t2",27);case 27:j.t1=j.t2;case 28:E=j.t1,l=[],c.addChild(E),t.addChild(c),j.next=55;break;case 34:j.t3=S,j.next=j.t3==="prop"?37:j.t3==="value"?39:54;break;case 37:return m.push(y),j.abrupt("break",55);case 39:j.t4=y.type,j.next=j.t4===h.TokenType.RightBrace?42:j.t4===h.TokenType.RightBracket?44:j.t4===h.TokenType.LeftBrace?46:j.t4===h.TokenType.LeftBracket?48:50;break;case 42:return f--,j.abrupt("break",51);case 44:return T--,j.abrupt("break",51);case 46:return f++,j.abrupt("break",51);case 48:return T++,j.abrupt("break",51);case 50:return j.abrupt("break",51);case 51:return l.push(y),f===0&&T===0&&(S="prop"),j.abrupt("break",55);case 54:throw new Error("[object expression error] unexpected state");case 55:k++,j.next=9;break;case 58:if(l.length!==1){j.next=62;break}j.t5=this.handleExprValueDirect(l),j.next=64;break;case 62:return j.delegateYield(this.handleExprValue(l),"t6",63);case 63:j.t5=j.t6;case 64:return U=j.t5,c.addChild(U),t.addChild(c),j.abrupt("return",t);case 68:case"end":return j.stop()}},r,this)})},{key:"handleExprProp",value:n.default.mark(function r(o){var t;return n.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(0,b.yielder)()){c.next=3;break}return void(c.next=3);case 3:return t=new d(o,v.ExprType.Prop),t.propName=o[0].text.slice(1,-1),c.abrupt("return",t);case 6:case"end":return c.stop()}},r)})},{key:"handleExprValueDirect",value:function(o){var t=new d(o,v.ExprType.Value),c=o[0].type;switch(c){case h.TokenType.Null:case h.TokenType.Boolean:case h.TokenType.Number:case h.TokenType.String:t.value=new d(o,c);break;default:throw new Error("[value expression error] unknown single token type")}return t}},{key:"handleExprValue",value:n.default.mark(function r(o){var t;return n.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(0,b.yielder)()){c.next=3;break}return void(c.next=3);case 3:return t=new d(o,v.ExprType.Value),c.delegateYield(this.handleExprJson(o),"t0",5);case 5:return t.value=c.t0,c.abrupt("return",t);case 7:case"end":return c.stop()}},r,this)})}]),u}();e.AST=i})(Ct);(function(e){var s=z,n=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.parse=l,e.ASTParser=void 0;var a=n(z),g=n(fe.exports),h=n(pe.exports),v=Pt,b=Ct,d=Re,i=ye,u=be,r=s.mark(l);function o(f,T){var S;if(typeof Symbol=="undefined"||f[Symbol.iterator]==null){if(Array.isArray(f)||(S=t(f))||T&&f&&typeof f.length=="number"){S&&(f=S);var k=0,P=function(){};return{s:P,n:function(){return k>=f.length?{done:!0}:{done:!1,value:f[k++]}},e:function(j){throw j},f:P}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y,E=!1;return{s:function(){S=f[Symbol.iterator]()},n:function(){var j=S.next();return j.done,j},e:function U(j){E=!0,U=j},f:function U(){try{U||S.return==null||S.return()}finally{if(E)throw y}}}}function t(f,T){if(f){if(typeof f=="string")return c(f,T);var S=Object.prototype.toString.call(f).slice(8,-1);return S==="Object"&&f.constructor&&(S=f.constructor.name),S==="Map"||S==="Set"?Array.from(f):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?c(f,T):void 0}}function c(f,T){(T==null||T>f.length)&&(T=f.length);for(var S=0,k=Array(T);S<T;S++)k[S]=f[S];return k}var m=function(){function f(T){(0,g.default)(this,f),this.ast=T}return(0,h.default)(f,[{key:"getJson",value:a.default.mark(function T(){return a.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.delegateYield(this.handleValue(this.ast),"t0",1);case 1:return S.abrupt("return",S.t0);case 2:case"end":return S.stop()}},T,this)})},{key:"handleJson",value:a.default.mark(function T(S){var k,P,y,E,U,j,D,B;return a.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(S.type===d.ExprType.Json){p.next=2;break}throw new Error("[parse AST error] unexpected node type, expect Json");case 2:if(P=S.childNodeList[0],P.type!==d.ExprType.Array){p.next=26;break}k=[],y=o(P.childNodeList),p.prev=6,y.s();case 8:if((E=y.n()).done){p.next=16;break}return U=E.value,p.t0=k,p.delegateYield(this.handleValue(U.value),"t1",12);case 12:p.t2=p.t1,p.t0.push.call(p.t0,p.t2);case 14:p.next=8;break;case 16:p.next=21;break;case 18:p.prev=18,p.t3=p.catch(6),y.e(p.t3);case 21:return p.prev=21,y.f(),p.finish(21);case 24:p.next=48;break;case 26:if(P.type!==d.ExprType.Object){p.next=47;break}k={},j=o(P.childNodeList),p.prev=29,j.s();case 31:if((D=j.n()).done){p.next=37;break}return B=D.value,p.delegateYield(this.handleValue(B.childNodeList[0].value),"t4",34);case 34:k[B.propName]=p.t4;case 35:p.next=31;break;case 37:p.next=42;break;case 39:p.prev=39,p.t5=p.catch(29),j.e(p.t5);case 42:return p.prev=42,j.f(),p.finish(42);case 45:p.next=48;break;case 47:throw new Error("[parse AST error] unexpected second node type");case 48:return p.abrupt("return",k);case 49:case"end":return p.stop()}},T,this,[[6,18,21,24],[29,39,42,45]])})},{key:"handleValue",value:a.default.mark(function T(S){var k,P;return a.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(0,u.yielder)()){y.next=3;break}return void(y.next=3);case 3:y.t0=S.type,y.next=y.t0===i.TokenType.Null?6:y.t0===i.TokenType.Boolean?7:y.t0===i.TokenType.Number?9:y.t0===i.TokenType.String?11:y.t0===d.ExprType.Json?12:14;break;case 6:return y.abrupt("return",null);case 7:return k=S.tokens[0].text,y.abrupt("return",k==="true");case 9:return P=+S.tokens[0].text,y.abrupt("return",P);case 11:return y.abrupt("return",S.tokens[0].text.slice(1,-1));case 12:return y.delegateYield(this.handleJson(S),"t1",13);case 13:return y.abrupt("return",y.t1);case 14:throw new Error("[parse AST error] unexpected node type, expect a valid Value node");case 15:case"end":return y.stop()}},T,this)})}]),f}();e.ASTParser=m;function l(f){var T,S,k,P,y;return a.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return T=new v.Tokenizer,E.delegateYield(T.tokenize(f),"t0",2);case 2:return S=E.t0,k=new b.AST(S),E.delegateYield(k.buildTree(),"t1",5);case 5:return P=E.t1,y=new m(P),E.delegateYield(y.getJson(),"t2",8);case 8:return E.abrupt("return",E.t2);case 9:case"end":return E.stop()}},r)}})(Ce);var Ie={};(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=l;var n,a,g,h=s(oe.exports),v=s(z),b=v.default.mark(c),d=v.default.mark(m),i=v.default.mark(l),u=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=0;function t(){return o++,256<o&&(o=0,!0)}function c(f){var T,S,k,P,y;return v.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:T=['"'],S=0,k=f.length;case 2:if(!(S<k)){E.next=11;break}if(!((7&S)==0&&t())){E.next=6;break}return void(E.next=6);case 6:P=f[S],P==='"'||u.test(P)?(y=g[P],typeof y=="string"?T.push(y):T.push("\\u"+("0000"+P.charCodeAt(0).toString(16)).slice(-4))):!r.test(P)&&T.push(P);case 8:S++,E.next=2;break;case 11:return T.push('"'),E.abrupt("return",T.join(""));case 13:case"end":return E.stop()}},b)}function m(f,T,S){var k,P,y,E,U,j,D,B;return v.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(k=S.rep,!t()){p.next=4;break}return void(p.next=4);case 4:j=n,B=T[f],B&&(0,h.default)(B)==="object"&&typeof B.toJSON=="function"&&(B=B.toJSON(f)),typeof k=="function"&&(B=k.call(T,f,B)),p.t0=(0,h.default)(B),p.next=p.t0==="string"?11:p.t0==="number"?13:p.t0==="boolean"||p.t0==="null"?14:15;break;case 11:return p.delegateYield(c(B),"t1",12);case 12:return p.abrupt("return",p.t1);case 13:return p.abrupt("return",isFinite(B)?B+"":"null");case 14:return p.abrupt("return",B+"");case 15:if(B){p.next=17;break}return p.abrupt("return","null");case 17:if(n+=a,D=[],Object.prototype.toString.apply(B)!=="[object Array]"){p.next=34;break}U=B.length,E="[",P=0;case 23:if(!(P<U)){p.next=33;break}return p.t2=E,p.delegateYield(m(P,B,S)||"null","t3",26);case 26:p.t4=p.t3,p.t5=p.t2+p.t4,p.t6=P===U-1?"":",",E=p.t5+p.t6;case 30:P+=1,p.next=23;break;case 33:return p.abrupt("return",E+"]");case 34:p.t7=v.default.keys(B);case 35:if((p.t8=p.t7()).done){p.next=51;break}if(y=p.t8.value,!Object.prototype.hasOwnProperty.call(B,y)){p.next=49;break}return p.delegateYield(m(y,B,S),"t9",39);case 39:if(E=p.t9,!E){p.next=49;break}return p.t10=D,p.delegateYield(c(y),"t11",43);case 43:p.t12=p.t11,p.t13=n?": ":":",p.t14=p.t12+p.t13,p.t15=E,p.t16=p.t14+p.t15,p.t10.push.call(p.t10,p.t16);case 49:p.next=35;break;case 51:return E=D.length===0?"{}":n?`{
`+n+D.join(`,
`+n)+`
`+j+"}":"{"+D.join(",")+"}",n=j,p.abrupt("return",E);case 54:case"end":return p.stop()}},d)}g={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function l(f,T){return v.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(n="",a="",!(T&&typeof T!="function"&&((0,h.default)(T)!=="object"||typeof T.length!="number"))){S.next=4;break}throw new Error("JSON.stringify");case 4:return S.delegateYield(m("",{"":f},{rep:T}),"t0",5);case 5:return S.abrupt("return",S.t0);case 6:case"end":return S.stop()}},i)}})(Ie);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseAsync=e.stringifyAsync=void 0;var s=te,n=Ce,a=Ie,g=(0,s.wrapAsPromise)(a.stringify);e.stringifyAsync=g;var h=(0,s.wrapAsPromise)(n.parse);e.parseAsync=h})(Pe);var Le={},je={};(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.sort=B;var n=s(fe.exports),a=s(pe.exports),g=s(we.exports),h=s(z),v=h.default.mark(l),b=h.default.mark(T),d=h.default.mark(S),i=h.default.mark(E),u=h.default.mark(U),r=h.default.mark(B),o=32,t=127,c=7,m=256;function l(p,C,R){var w,x,A,I,O,_,q,F=arguments;return h.default.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:w=3<F.length&&F[3]!==void 0?F[3]:0,x=4<F.length&&F[4]!==void 0?F[4]:0,A=7&R,I=(-8&R)+w,O=w,_=x;case 6:if(!(O<I)){M.next=21;break}if(p[O]=C[_],p[O+1]=C[_+1],p[O+2]=C[_+2],p[O+3]=C[_+3],p[O+4]=C[_+4],p[O+5]=C[_+5],p[O+6]=C[_+6],p[O+7]=C[_+7],!y()){M.next=18;break}return void(M.next=18);case 18:O+=8,_+=8,M.next=6;break;case 21:for(q=A+O;O<q;O++,_++)p[O]=C[_];case 23:case"end":return M.stop()}},v)}function f(p){for(var C=0;p>=o;)C|=1&p,p>>=1;return p+C}function T(p,C,R,w){var x;return h.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(x=C+1,x!==R){A.next=3;break}return A.abrupt("return",1);case 3:if(!(0>w(p[x++],p[C]))){A.next=14;break}case 4:if(!(x<R&&0>w(p[x],p[x-1]))){A.next=11;break}if(x++,(x&t)!=0){A.next=9;break}return void(A.next=9);case 9:A.next=4;break;case 11:return A.delegateYield(S(p,C,x),"t0",12);case 12:A.next=21;break;case 14:if(!(x<R&&0<=w(p[x],p[x-1]))){A.next=21;break}if(x++,(x&t)!=0){A.next=19;break}return void(A.next=19);case 19:A.next=14;break;case 21:return A.abrupt("return",x-C);case 22:case"end":return A.stop()}},b)}function S(p,C,R){var w;return h.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:R--;case 1:if(!(C<R)){x.next=10;break}if(w=p[C],p[C++]=p[R],p[R--]=w,(127&R)!=0){x.next=8;break}return void(x.next=8);case 8:x.next=1;break;case 10:case"end":return x.stop()}},d)}function k(p,C,R,w,x){for(w===C&&w++;w<R;w++){for(var A=p[w],I=C,O=w;I<O;){var _=I+O>>>1;0>x(A,p[_])?O=_:I=_+1}var q=w-I;switch(q){case 3:p[I+3]=p[I+2];case 2:p[I+2]=p[I+1];case 1:p[I+1]=p[I];break;default:for(;0<q;)p[I+q]=p[I+q-1],q--}p[I]=A}}var P=0;function y(){return(P++&t)==0}function E(p,C,R,w,x,A){var I,O,_,q,F;return h.default.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return void(M.next=2);case 2:if(I=0,O=0,_=1,!(0<A(p,C[R+x]))){M.next=21;break}O=w-x;case 7:if(!(_<O&&0<A(p,C[R+x+_]))){M.next=16;break}if(!y()){M.next=11;break}return void(M.next=11);case 11:I=_,_=(_<<1)+1,0>=_&&(_=O),M.next=7;break;case 16:_>O&&(_=O),I+=x,_+=x,M.next=35;break;case 21:O=x+1;case 22:if(!(_<O&&0>=A(p,C[R+x-_]))){M.next=31;break}if(!y()){M.next=26;break}return void(M.next=26);case 26:I=_,_=(_<<1)+1,0>=_&&(_=O),M.next=22;break;case 31:_>O&&(_=O),q=I,I=x-_,_=x-q;case 35:I++;case 36:if(!(I<_)){M.next=44;break}if(F=I+(_-I>>>1),!y()){M.next=41;break}return void(M.next=41);case 41:0<A(p,C[R+F])?I=F+1:_=F,M.next=36;break;case 44:return M.abrupt("return",_);case 45:case"end":return M.stop()}},i)}function U(p,C,R,w,x,A){var I,O,_,q,F;return h.default.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return void(M.next=2);case 2:if(I=0,O=0,_=1,!(0>A(p,C[R+x]))){M.next=22;break}O=x+1;case 7:if(!(_<O&&0>A(p,C[R+x-_]))){M.next=16;break}if(!y()){M.next=11;break}return void(M.next=11);case 11:I=_,_=(_<<1)+1,0>=_&&(_=O),M.next=7;break;case 16:_>O&&(_=O),q=I,I=x-_,_=x-q,M.next=35;break;case 22:O=w-x;case 23:if(!(_<O&&0<=A(p,C[R+x+_]))){M.next=32;break}if(!y()){M.next=27;break}return void(M.next=27);case 27:I=_,_=(_<<1)+1,0>=_&&(_=O),M.next=23;break;case 32:_>O&&(_=O),I+=x,_+=x;case 35:I++;case 36:if(!(I<_)){M.next=44;break}if(F=I+(_-I>>>1),!y()){M.next=41;break}return void(M.next=41);case 41:0>A(p,C[R+F])?_=F:I=F+1,M.next=36;break;case 44:return M.abrupt("return",_);case 45:case"end":return M.stop()}},u)}var j=function(){function p(C,R){(0,n.default)(this,p),(0,g.default)(this,"array",null),(0,g.default)(this,"compare",null),(0,g.default)(this,"minGallop",c),(0,g.default)(this,"length",0),(0,g.default)(this,"tmpStorageLength",m),(0,g.default)(this,"stackLength",0),(0,g.default)(this,"runStart",null),(0,g.default)(this,"runLength",null),(0,g.default)(this,"stackSize",0),this.array=C,this.compare=R,this.length=C.length,this.length<2*m&&(this.tmpStorageLength=this.length>>>1),this.tmp=Array(this.tmpStorageLength),this.stackLength=120>this.length?5:1542>this.length?10:119151>this.length?19:40,this.runStart=Array(this.stackLength),this.runLength=Array(this.stackLength)}return(0,a.default)(p,[{key:"pushRun",value:function(R,w){this.runStart[this.stackSize]=R,this.runLength[this.stackSize]=w,this.stackSize+=1}},{key:"mergeRuns",value:h.default.mark(function C(){var R;return h.default.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!(1<this.stackSize)){w.next=11;break}if(R=this.stackSize-2,!(1<=R&&this.runLength[R-1]<=this.runLength[R]+this.runLength[R+1]||2<=R&&this.runLength[R-2]<=this.runLength[R]+this.runLength[R-1])){w.next=6;break}this.runLength[R-1]<this.runLength[R+1]&&R--,w.next=8;break;case 6:if(!(this.runLength[R]>this.runLength[R+1])){w.next=8;break}return w.abrupt("break",11);case 8:return w.delegateYield(this.mergeAt(R),"t0",9);case 9:w.next=0;break;case 11:case"end":return w.stop()}},C,this)})},{key:"forceMergeRuns",value:h.default.mark(function C(){var R;return h.default.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!(1<this.stackSize)){w.next=6;break}return R=this.stackSize-2,0<R&&this.runLength[R-1]<this.runLength[R+1]&&R--,w.delegateYield(this.mergeAt(R),"t0",4);case 4:w.next=0;break;case 6:case"end":return w.stop()}},C,this)})},{key:"mergeAt",value:h.default.mark(function C(R){var w,x,A,I,O,_,q;return h.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return void(F.next=2);case 2:return w=this.compare,x=this.array,A=this.runStart[R],I=this.runLength[R],O=this.runStart[R+1],_=this.runLength[R+1],this.runLength[R]=I+_,R===this.stackSize-3&&(this.runStart[R+1]=this.runStart[R+2],this.runLength[R+1]=this.runLength[R+2]),this.stackSize--,F.delegateYield(U(x[O],x,A,I,0,w),"t0",12);case 12:if(q=F.t0,A+=q,I-=q,I!==0){F.next=17;break}return F.abrupt("return");case 17:return F.delegateYield(E(x[A+I-1],x,O,_,_-1,w),"t1",18);case 18:if(_=F.t1,_!==0){F.next=21;break}return F.abrupt("return");case 21:if(!(I<=_)){F.next=25;break}return F.delegateYield(this.mergeLow(A,I,O,_),"t2",23);case 23:F.next=26;break;case 25:return F.delegateYield(this.mergeHigh(A,I,O,_),"t3",26);case 26:case"end":return F.stop()}},C,this)})},{key:"mergeLow",value:h.default.mark(function C(R,w,x,A){var I,O,_,q,F,M,$,G,V,H;return h.default.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return I=this.compare,O=this.array,_=this.tmp,Y.delegateYield(l(_,O,w,0,R),"t0",4);case 4:if(q=0,F=x,M=R,O[M++]=O[F++],--A!=0){Y.next=11;break}return Y.delegateYield(l(O,_,w,M,q),"t1",10);case 10:return Y.abrupt("return");case 11:if(w!==1){Y.next=15;break}return Y.delegateYield(l(O,O,A,M,F),"t2",13);case 13:return O[M+A]=_[q],Y.abrupt("return");case 15:$=this.minGallop;case 16:G=0,V=0,H=!1;case 20:if(!y()){Y.next=23;break}return void(Y.next=23);case 23:if(!(0>I(O[F],_[q]))){Y.next=32;break}if(O[M++]=O[F++],V++,G=0,--A!=0){Y.next=30;break}return H=!0,Y.abrupt("break",39);case 30:Y.next=38;break;case 32:if(O[M++]=_[q++],G++,V=0,--w!=1){Y.next=38;break}return H=!0,Y.abrupt("break",39);case 38:if((G|V)<$){Y.next=20;break}case 39:if(!H){Y.next=41;break}return Y.abrupt("break",80);case 41:if(!y()){Y.next=44;break}return void(Y.next=44);case 44:return Y.delegateYield(U(O[F],_,q,w,0,I),"t3",45);case 45:if(G=Y.t3,G===0){Y.next=54;break}return Y.delegateYield(l(O,_,G,M,q),"t4",48);case 48:if(M+=G,q+=G,w-=G,!(1>=w)){Y.next=54;break}return H=!0,Y.abrupt("break",74);case 54:if(O[M++]=O[F++],--A!=0){Y.next=58;break}return H=!0,Y.abrupt("break",74);case 58:return Y.delegateYield(E(_[q],O,F,A,0,I),"t5",59);case 59:if(V=Y.t5,V===0){Y.next=68;break}return Y.delegateYield(l(O,O,V,M,F),"t6",62);case 62:if(M+=V,F+=V,A-=V,A!==0){Y.next=68;break}return H=!0,Y.abrupt("break",74);case 68:if(O[M++]=_[q++],--w!=1){Y.next=72;break}return H=!0,Y.abrupt("break",74);case 72:$--;case 73:if(G>=c||V>=c){Y.next=41;break}case 74:if(!H){Y.next=76;break}return Y.abrupt("break",80);case 76:0>$&&($=0),$+=2,Y.next=16;break;case 80:if(this.minGallop=$,1>$&&(this.minGallop=1),w!==1){Y.next=87;break}return Y.delegateYield(l(O,O,A,M,F),"t7",84);case 84:O[M+A]=_[q],Y.next=92;break;case 87:if(w!==0){Y.next=91;break}throw new Error("mergeLow preconditions were not respected");case 91:return Y.delegateYield(l(O,_,w,M,q),"t8",92);case 92:case"end":return Y.stop()}},C,this)})},{key:"mergeHigh",value:h.default.mark(function C(R,w,x,A){var I,O,_,q,F,M,$,G,V,H,Y,Z,Q;return h.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return I=this.compare,O=this.array,_=this.tmp,q=0,N.delegateYield(l(_,O,A,0,x),"t0",5);case 5:if(F=R+w-1,M=A-1,$=x+A-1,G=0,V=0,O[$--]=O[F--],--w!=0){N.next=15;break}return G=$-(A-1),N.delegateYield(l(O,_,A,G,0),"t1",14);case 14:return N.abrupt("return");case 15:if(A!==1){N.next=31;break}$-=w,F-=w,V=$+1,G=F+1,q=w-1;case 21:if(!(0<=q)){N.next=29;break}if(!y()){N.next=25;break}return void(N.next=25);case 25:O[V+q]=O[G+q];case 26:q--,N.next=21;break;case 29:return O[$]=_[M],N.abrupt("return");case 31:H=this.minGallop;case 32:Y=0,Z=0,Q=!1;case 36:if(!y()){N.next=39;break}return void(N.next=39);case 39:if(!(0>I(_[M],O[F]))){N.next=48;break}if(O[$--]=O[F--],Y++,Z=0,--w!=0){N.next=46;break}return Q=!0,N.abrupt("break",55);case 46:N.next=54;break;case 48:if(O[$--]=_[M--],Z++,Y=0,--A!=1){N.next=54;break}return Q=!0,N.abrupt("break",55);case 54:if((Y|Z)<H){N.next=36;break}case 55:if(!Q){N.next=57;break}return N.abrupt("break",109);case 57:return N.t2=w,N.delegateYield(U(_[M],O,R,w,w-1,I),"t3",59);case 59:if(N.t4=N.t3,Y=N.t2-N.t4,Y===0){N.next=79;break}$-=Y,F-=Y,w-=Y,V=$+1,G=F+1,q=Y-1;case 68:if(!(0<=q)){N.next=76;break}if(!y()){N.next=72;break}return void(N.next=72);case 72:O[V+q]=O[G+q];case 73:q--,N.next=68;break;case 76:if(w!==0){N.next=79;break}return Q=!0,N.abrupt("break",103);case 79:if(O[$--]=_[M--],--A!=1){N.next=83;break}return Q=!0,N.abrupt("break",103);case 83:return N.t5=A,N.delegateYield(E(O[F],_,0,A,A-1,I),"t6",85);case 85:if(N.t7=N.t6,Z=N.t5-N.t7,Z===0){N.next=97;break}return $-=Z,M-=Z,A-=Z,V=$+1,G=M+1,N.delegateYield(l(O,_,Z,V,G),"t8",94);case 94:if(!(1>=A)){N.next=97;break}return Q=!0,N.abrupt("break",103);case 97:if(O[$--]=O[F--],--w!=0){N.next=101;break}return Q=!0,N.abrupt("break",103);case 101:H--;case 102:if(Y>=c||Z>=c){N.next=57;break}case 103:if(!Q){N.next=105;break}return N.abrupt("break",109);case 105:0>H&&(H=0),H+=2,N.next=32;break;case 109:if(this.minGallop=H,1>H&&(this.minGallop=1),A!==1){N.next=128;break}$-=w,F-=w,V=$+1,G=F+1,q=w-1;case 117:if(!(0<=q)){N.next=125;break}if(!y()){N.next=121;break}return void(N.next=121);case 121:O[V+q]=O[G+q];case 122:q--,N.next=117;break;case 125:O[$]=_[M],N.next=134;break;case 128:if(A!==0){N.next=132;break}throw new Error("mergeHigh preconditions were not respected");case 132:return G=$-(A-1),N.delegateYield(l(O,_,A,G,0),"t9",134);case 134:case"end":return N.stop()}},C,this)})}]),p}();function D(p,C){return p===C?0:p>C?1:-1}function B(p,C,R,w){var x,A,I,O,_,q;return h.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(Array.isArray(p)){F.next=2;break}throw new TypeError("Can only sort arrays");case 2:if(C?typeof C=="function"?C.length===1&&(x=C,C=function(M,$){var G=x(M),V=x($);return G===V?0:V>G?-1:1}):(w=R,R=C,C=D):C=D,R||(R=0),w||(w=p.length),A=w-R,!(2>A)){F.next=8;break}return F.abrupt("return",p);case 8:if(I=0,!(A<o)){F.next=16;break}return F.delegateYield(T(p,R,w,C),"t0",11);case 11:return I=F.t0,k(p,R,w,R+I,C),void(F.next=15);case 15:return F.abrupt("return",p);case 16:O=new j(p,C),_=f(A);case 18:return F.delegateYield(T(p,R,w,C),"t1",19);case 19:if(I=F.t1,!(I<_)){F.next=27;break}return q=A,q>_&&(q=_),k(p,R,R+q,R+I,C),void(F.next=26);case 26:I=q;case 27:return O.pushRun(R,I),F.delegateYield(O.mergeRuns(),"t2",29);case 29:A-=I,R+=I;case 31:if(A!==0){F.next=18;break}case 32:return F.delegateYield(O.forceMergeRuns(),"t3",33);case 33:return F.abrupt("return",p);case 34:case"end":return F.stop()}},r)}})(je);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sortAsync=void 0;var s=te,n=je,a=(0,s.wrapAsPromise)(n.sort);e.sortAsync=a})(Le);var Fe={},Me={};(function(e){var s=z,n=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.find=b;var a=n(z),g=X,h=ae,v=s.mark(b);function b(d,i,u){var r;return a.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r=void 0,o.delegateYield((0,g.forEach)(d,a.default.mark(function t(c,m){var l;return a.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.delegateYield(i(c,m,d),"t0",1);case 1:if(l=f.t0,!l){f.next=5;break}return r=c,f.abrupt("return",(0,h.exitWith)(c));case 5:case"end":return f.stop()}},t)}),u),"t0",2);case 2:return o.abrupt("return",r);case 3:case"end":return o.stop()}},v)}})(Me);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.findAsync=void 0;var s=J,n=Me,a=(0,s.wrapAsPromiseAndYieldFn)(n.find);e.findAsync=a})(Fe);var De={},Be={};(function(e){var s=z,n=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.findIndex=b;var a=n(z),g=X,h=ae,v=s.mark(b);function b(d,i,u){var r;return a.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r=-1,o.delegateYield((0,g.forEach)(d,a.default.mark(function t(c,m){var l;return a.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.delegateYield(i(c,m,d),"t0",1);case 1:if(l=f.t0,!l){f.next=5;break}return r=m,f.abrupt("return",(0,h.exitWith)(m));case 5:case"end":return f.stop()}},t)}),u),"t0",2);case 2:return o.abrupt("return",r);case 3:case"end":return o.stop()}},v)}})(Be);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.findIndexAsync=void 0;var s=J,n=Be,a=(0,s.wrapAsPromiseAndYieldFn)(n.findIndex);e.findIndexAsync=a})(De);var qe={},Ue={};(function(e){var s=z,n=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.map=b;var a=n(z),g=le,h=X,v=s.mark(b);function b(d,i){var u;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,g.isObject)(d)?{}:[],r.delegateYield((0,h.forEach)(d,a.default.mark(function o(t,c){return a.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.delegateYield(i(t,c,d),"t0",1);case 1:u[c]=m.t0;case 2:case"end":return m.stop()}},o)})),"t0",2);case 2:return r.abrupt("return",u);case 3:case"end":return r.stop()}},v)}})(Ue);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mapAsync=void 0;var s=J,n=Ue,a=(0,s.wrapAsPromiseAndYieldFn)(n.map);e.mapAsync=a})(qe);var Ne={},Ye={};(function(e){var s=z,n=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.filter=b;var a=n(z),g=le,h=X,v=s.mark(b);function b(d,i){var u,r;return a.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(0,g.isObject)(d)){o.next=6;break}return u={},o.delegateYield((0,h.forEach)(d,a.default.mark(function t(c,m,l){return a.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.delegateYield(i(c,m,l),"t0",1);case 1:if(!f.t0){f.next=3;break}u[m]=c;case 3:case"end":return f.stop()}},t)})),"t0",3);case 3:return o.abrupt("return",u);case 6:return r=[],o.delegateYield((0,h.forEach)(d,a.default.mark(function t(c,m,l){return a.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.delegateYield(i(c,m,l),"t0",1);case 1:if(!f.t0){f.next=3;break}r.push(c);case 3:case"end":return f.stop()}},t)})),"t1",8);case 8:return o.abrupt("return",r);case 9:case"end":return o.stop()}},v)}})(Ye);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.filterAsync=void 0;var s=J,n=Ye,a=(0,s.wrapAsPromiseAndYieldFn)(n.filter);e.filterAsync=a})(Ne);var ze={},$e={};(function(e){var s=z,n=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.reduce=v;var a=n(z),g=X,h=s.mark(v);function v(b,d,i){var u,r;return a.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return u=i===void 0?b[0]:i,r=!0,o.delegateYield((0,g.forEach)(b,a.default.mark(function t(c,m){return a.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!r||i){l.next=5;break}u=c,r=!1,l.next=7;break;case 5:return l.delegateYield(d(u,c,m,b),"t0",6);case 6:u=l.t0;case 7:case"end":return l.stop()}},t)})),"t0",3);case 3:return o.abrupt("return",u);case 4:case"end":return o.stop()}},h)}})($e);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reduceAsync=void 0;var s=J,n=$e,a=(0,s.wrapAsPromiseAndYieldFn)(n.reduce);e.reduceAsync=a})(ze);var Ge={},We={};(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.append=v;var n=s(z),a=X,g=te,h=n.default.mark(v);function v(b,d){var i;return n.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=b.length,u.next=3,!0;case 3:return b.length+=d.length,void(u.next=6);case 6:return u.delegateYield((0,a.forEach)(d,(0,g.yielding)(function(r,o){return b[o+i]=r})),"t0",7);case 7:return u.abrupt("return",b);case 8:case"end":return u.stop()}},h)}})(We);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.appendAsync=void 0;var s=te,n=We,a=(0,s.wrapAsPromise)(n.append);e.appendAsync=a})(Ge);var Ve={},He={};(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.concat=v;var n=s(z),a=X,g=te,h=n.default.mark(v);function v(b,d){var i,u;return n.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,!0;case 2:return i=Array(b.length+d.length),void(r.next=5);case 5:return u=b.length,r.delegateYield((0,a.forEach)(b,(0,g.yielding)(function(o,t){return i[t]=o})),"t0",7);case 7:return r.delegateYield((0,a.forEach)(d,(0,g.yielding)(function(o,t){return i[t+u]=o})),"t1",8);case 8:return r.abrupt("return",i);case 9:case"end":return r.stop()}},h)}})(He);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.concatAsync=void 0;var s=te,n=He,a=(0,s.wrapAsPromise)(n.concat);e.concatAsync=a})(Ve);var Je={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.forEachAsync=void 0;var s=J,n=X,a=(0,s.wrapAsPromiseAndYieldFn)(n.forEach);e.forEachAsync=a})(Je);var Ze={},Ke={};(function(e){var s=z,n=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.some=b;var a=n(z),g=X,h=ae,v=s.mark(b);function b(d,i){var u;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=!1,r.delegateYield((0,g.forEach)(d,a.default.mark(function o(t,c){return a.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.delegateYield(i(t,c,d),"t0",1);case 1:if(!m.t0){m.next=4;break}return u=!0,m.abrupt("return",(0,h.exitWith)(!0));case 4:case"end":return m.stop()}},o)})),"t0",2);case 2:return r.abrupt("return",u);case 3:case"end":return r.stop()}},v)}})(Ke);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.someAsync=void 0;var s=J,n=Ke,a=(0,s.wrapAsPromiseAndYieldFn)(n.some);e.someAsync=a})(Ze);var Xe={},Qe={};(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.includes=g;var n=s(z),a=n.default.mark(g);function g(h,v){var b,d;return n.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:b=0,d=h.length;case 1:if(!(b<d)){i.next=10;break}if(h[b]!==v){i.next=4;break}return i.abrupt("return",!0);case 4:if((63&b)!=0){i.next=7;break}return void(i.next=7);case 7:b++,i.next=1;break;case 10:return i.abrupt("return",!1);case 11:case"end":return i.stop()}},a)}})(Qe);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.includesAsync=void 0;var s=J,n=Qe,a=(0,s.wrapAsPromiseAndYieldFn)(n.includes);e.includesAsync=a})(Xe);var et={},tt={};(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.indexOf=g;var n=s(z),a=n.default.mark(g);function g(h,v){var b,d;return n.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:b=0,d=h.length;case 1:if(!(b<d)){i.next=10;break}if(h[b]!==v){i.next=4;break}return i.abrupt("return",b);case 4:if((63&b)!=0){i.next=7;break}return void(i.next=7);case 7:b++,i.next=1;break;case 10:return i.abrupt("return",-1);case 11:case"end":return i.stop()}},a)}})(tt);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.indexOfAsync=void 0;var s=J,n=tt,a=(0,s.wrapAsPromiseAndYieldFn)(n.indexOf);e.indexOfAsync=a})(et);var rt={},nt={};(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.lastIndexOf=g;var n=s(z),a=n.default.mark(g);function g(h,v){var b;return n.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:b=h.length-1;case 1:if(!(0<=b)){d.next=10;break}if(h[b]!==v){d.next=4;break}return d.abrupt("return",b);case 4:if((63&b)!=0){d.next=7;break}return void(d.next=7);case 7:b--,d.next=1;break;case 10:return d.abrupt("return",-1);case 11:case"end":return d.stop()}},a)}})(nt);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.lastIndexOfAsync=void 0;var s=J,n=nt,a=(0,s.wrapAsPromiseAndYieldFn)(n.lastIndexOf);e.lastIndexOfAsync=a})(rt);var at={},st={};(function(e){var s=z,n=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.keyBy=v;var a=n(z),g=X,h=s.mark(v);function v(b,d){var i;return a.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i={},u.delegateYield((0,g.forEach)(b,a.default.mark(function r(o,t){var c;return a.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.delegateYield(d(o,t,b),"t0",1);case 1:c=m.t0,i[c]=o;case 3:case"end":return m.stop()}},r)})),"t0",2);case 2:return u.abrupt("return",i);case 3:case"end":return u.stop()}},h)}})(st);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.keyByAsync=void 0;var s=J,n=st,a=(0,s.wrapAsPromiseAndYieldFn)(n.keyBy);e.keyByAsync=a})(at);var it={},ot={};(function(e){var s=z,n=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.groupBy=d;var a=n(z),g=s.mark(d);function h(i,u){var r;if(typeof Symbol=="undefined"||i[Symbol.iterator]==null){if(Array.isArray(i)||(r=v(i))||u&&i&&typeof i.length=="number"){r&&(i=r);var o=0,t=function(){};return{s:t,n:function(){return o>=i.length?{done:!0}:{done:!1,value:i[o++]}},e:function(f){throw f},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,m=!1;return{s:function(){r=i[Symbol.iterator]()},n:function(){var f=r.next();return f.done,f},e:function l(f){m=!0,l=f},f:function l(){try{l||r.return==null||r.return()}finally{if(m)throw c}}}}function v(i,u){if(i){if(typeof i=="string")return b(i,u);var r=Object.prototype.toString.call(i).slice(8,-1);return r==="Object"&&i.constructor&&(r=i.constructor.name),r==="Map"||r==="Set"?Array.from(i):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(i,u):void 0}}function b(i,u){(u==null||u>i.length)&&(u=i.length);for(var r=0,o=Array(u);r<u;r++)o[r]=i[r];return o}function d(i,u){var r,o,t,c,m,l,f;return a.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:r={},o=0,t=h(i),T.prev=3,t.s();case 5:if((c=t.n()).done){T.next=13;break}return m=c.value,T.delegateYield(u(m,o++,i),"t0",8);case 8:l=T.t0,f=r[l]=r[l]||[],f.push(m);case 11:T.next=5;break;case 13:T.next=18;break;case 15:T.prev=15,T.t1=T.catch(3),t.e(T.t1);case 18:return T.prev=18,t.f(),T.finish(18);case 21:return T.abrupt("return",r);case 22:case"end":return T.stop()}},g,null,[[3,15,18,21]])}})(ot);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.groupByAsync=void 0;var s=J,n=ot,a=(0,s.wrapAsPromiseAndYieldFn)(n.groupBy);e.groupByAsync=a})(it);var ut={},ct={};(function(e){var s=z,n=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueBy=d;var a=n(z),g=s.mark(d);function h(i,u){var r;if(typeof Symbol=="undefined"||i[Symbol.iterator]==null){if(Array.isArray(i)||(r=v(i))||u&&i&&typeof i.length=="number"){r&&(i=r);var o=0,t=function(){};return{s:t,n:function(){return o>=i.length?{done:!0}:{done:!1,value:i[o++]}},e:function(f){throw f},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,m=!1;return{s:function(){r=i[Symbol.iterator]()},n:function(){var f=r.next();return f.done,f},e:function l(f){m=!0,l=f},f:function l(){try{l||r.return==null||r.return()}finally{if(m)throw c}}}}function v(i,u){if(i){if(typeof i=="string")return b(i,u);var r=Object.prototype.toString.call(i).slice(8,-1);return r==="Object"&&i.constructor&&(r=i.constructor.name),r==="Map"||r==="Set"?Array.from(i):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(i,u):void 0}}function b(i,u){(u==null||u>i.length)&&(u=i.length);for(var r=0,o=Array(u);r<u;r++)o[r]=i[r];return o}function d(i,u){var r,o,t,c,m,l,f;return a.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:r=new Set,o=[],t=0,c=h(i),T.prev=4,c.s();case 6:if((m=c.n()).done){T.next=17;break}if(l=m.value,!u){T.next=14;break}return T.delegateYield(u(l,t++,i),"t0",10);case 10:f=T.t0,r.has(f)||(o.push(l),r.add(f)),T.next=15;break;case 14:r.has(l)||(o.push(l),r.add(l));case 15:T.next=6;break;case 17:T.next=22;break;case 19:T.prev=19,T.t1=T.catch(4),c.e(T.t1);case 22:return T.prev=22,c.f(),T.finish(22);case 25:return T.abrupt("return",o);case 26:case"end":return T.stop()}},g,null,[[4,19,22,25]])}})(ct);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueByAsync=void 0;var s=J,n=ct,a=(0,s.wrapAsPromiseAndYieldFn)(n.uniqueBy);e.uniqueByAsync=a})(ut);(function(e){var s={sortAsync:!0,findAsync:!0,findIndexAsync:!0,mapAsync:!0,filterAsync:!0,reduceAsync:!0,appendAsync:!0,concatAsync:!0,forEachAsync:!0,someAsync:!0,includesAsync:!0,indexOfAsync:!0,lastIndexOfAsync:!0,keyByAsync:!0,groupByAsync:!0,uniqueByAsync:!0},n=Ae,a=Se,g=Pe;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"sortAsync",{enumerable:!0,get:function(){return h.sortAsync}}),Object.defineProperty(e,"findAsync",{enumerable:!0,get:function(){return v.findAsync}}),Object.defineProperty(e,"findIndexAsync",{enumerable:!0,get:function(){return b.findIndexAsync}}),Object.defineProperty(e,"mapAsync",{enumerable:!0,get:function(){return d.mapAsync}}),Object.defineProperty(e,"filterAsync",{enumerable:!0,get:function(){return i.filterAsync}}),Object.defineProperty(e,"reduceAsync",{enumerable:!0,get:function(){return u.reduceAsync}}),Object.defineProperty(e,"appendAsync",{enumerable:!0,get:function(){return r.appendAsync}}),Object.defineProperty(e,"concatAsync",{enumerable:!0,get:function(){return o.concatAsync}}),Object.defineProperty(e,"forEachAsync",{enumerable:!0,get:function(){return t.forEachAsync}}),Object.defineProperty(e,"someAsync",{enumerable:!0,get:function(){return c.someAsync}}),Object.defineProperty(e,"includesAsync",{enumerable:!0,get:function(){return m.includesAsync}}),Object.defineProperty(e,"indexOfAsync",{enumerable:!0,get:function(){return l.indexOfAsync}}),Object.defineProperty(e,"lastIndexOfAsync",{enumerable:!0,get:function(){return f.lastIndexOfAsync}}),Object.defineProperty(e,"keyByAsync",{enumerable:!0,get:function(){return T.keyByAsync}}),Object.defineProperty(e,"groupByAsync",{enumerable:!0,get:function(){return S.groupByAsync}}),Object.defineProperty(e,"uniqueByAsync",{enumerable:!0,get:function(){return k.uniqueByAsync}}),Object.keys(n).forEach(function(P){P==="default"||P==="__esModule"||Object.prototype.hasOwnProperty.call(s,P)||P in e&&e[P]===n[P]||Object.defineProperty(e,P,{enumerable:!0,get:function(){return n[P]}})}),Object.keys(a).forEach(function(P){P==="default"||P==="__esModule"||Object.prototype.hasOwnProperty.call(s,P)||P in e&&e[P]===a[P]||Object.defineProperty(e,P,{enumerable:!0,get:function(){return a[P]}})}),Object.keys(g).forEach(function(P){P==="default"||P==="__esModule"||Object.prototype.hasOwnProperty.call(s,P)||P in e&&e[P]===g[P]||Object.defineProperty(e,P,{enumerable:!0,get:function(){return g[P]}})});var h=Le,v=Fe,b=De,d=qe,i=Ne,u=ze,r=Ge,o=Ve,t=Je,c=Ze,m=Xe,l=et,f=rt,T=at,S=it,k=ut})(Ot);var Rt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.update=d;function s(i,u){var r;if(typeof Symbol=="undefined"||i[Symbol.iterator]==null){if(Array.isArray(i)||(r=n(i))||u&&i&&typeof i.length=="number"){r&&(i=r);var o=0,t=function(){};return{s:t,n:function(){return o>=i.length?{done:!0}:{done:!1,value:i[o++]}},e:function(f){throw f},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,m=!1;return{s:function(){r=i[Symbol.iterator]()},n:function(){var f=r.next();return f.done,f},e:function l(f){m=!0,l=f},f:function l(){try{l||r.return==null||r.return()}finally{if(m)throw c}}}}function n(i,u){if(i){if(typeof i=="string")return a(i,u);var r=Object.prototype.toString.call(i).slice(8,-1);return r==="Object"&&i.constructor&&(r=i.constructor.name),r==="Map"||r==="Set"?Array.from(i):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(i,u):void 0}}function a(i,u){(u==null||u>i.length)&&(u=i.length);for(var r=0,o=Array(u);r<u;r++)o[r]=i[r];return o}var g=!1,h=[];function v(i){if(typeof window=="undefined")throw new Error("Cannot run without a browser");h.length!==0||g||(g=!0,requestAnimationFrame(b)),h.push(i),1e4<h.length&&(h=h.slice(-9e3))}function b(){var i=h;i.length?requestAnimationFrame(b):g=!1,h=[];var u,r=s(i);try{for(r.s();!(u=r.n()).done;){var o=u.value;o()}}catch(t){r.e(t)}finally{r.f()}}function d(i){for(var u=arguments.length,r=Array(1<u?u-1:0),o=1;o<u;o++)r[o-1]=arguments[o];if(typeof window=="undefined")throw new Error("Requires a browser to run");var t=!1,c=null,m=new Promise(function(l,f){function T(){if(t)return void S.return();try{var k=S.next(),P=k.value,y=k.done;if(y)return void l(P)}catch(E){return void f(E)}v(T)}c=l;var S=i.next?i:i.apply(void 0,r);v(T)});return m.terminate=function(l){t=!0,c&&c(l)},m}})(Rt);var It={};(function(e){var s=W.exports,n=s(re);Object.defineProperty(e,"__esModule",{value:!0}),e.singleton=a;function a(g,h){var v=null,b=[],d=function(){return v&&(b.forEach(function(i){return i.terminate()}),b=[],v.terminate(h)),v=d._promise=(0,n.default)(g.apply(void 0,arguments))};return d.join=function(i){return b.push(i),i},d}})(It);var Lt={};(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.pipe=d;var n=s(z),a=s(ue.exports),g=s(re);function h(i,u){var r;if(typeof Symbol=="undefined"||i[Symbol.iterator]==null){if(Array.isArray(i)||(r=v(i))||u&&i&&typeof i.length=="number"){r&&(i=r);var o=0,t=function(){};return{s:t,n:function(){return o>=i.length?{done:!0}:{done:!1,value:i[o++]}},e:function(f){throw f},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,m=!1;return{s:function(){r=i[Symbol.iterator]()},n:function(){var f=r.next();return f.done,f},e:function l(f){m=!0,l=f},f:function l(){try{l||r.return==null||r.return()}finally{if(m)throw c}}}}function v(i,u){if(i){if(typeof i=="string")return b(i,u);var r=Object.prototype.toString.call(i).slice(8,-1);return r==="Object"&&i.constructor&&(r=i.constructor.name),r==="Map"||r==="Set"?Array.from(i):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(i,u):void 0}}function b(i,u){(u==null||u>i.length)&&(u=i.length);for(var r=0,o=Array(u);r<u;r++)o[r]=i[r];return o}function d(){for(var i=arguments.length,u=Array(i),r=0;r<i;r++)u[r]=arguments[r];return function(){var o=(0,a.default)(n.default.mark(function t(c){var m,l,f,T,S;return n.default.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:m=c,l=h(u.flat(1/0)),k.prev=2,l.s();case 4:if((f=l.n()).done){k.next=25;break}if(T=f.value,T){k.next=8;break}return k.abrupt("continue",23);case 8:if(S=T.call(this,m),!S){k.next=23;break}if(!S.next){k.next=16;break}return k.next=13,(0,g.default)(S);case 13:m=k.sent,k.next=23;break;case 16:if(!S.then){k.next=22;break}return k.next=19,S;case 19:m=k.sent,k.next=23;break;case 22:m=S;case 23:k.next=4;break;case 25:k.next=30;break;case 27:k.prev=27,k.t0=k.catch(2),l.e(k.t0);case 30:return k.prev=30,l.f(),k.finish(30);case 33:return k.abrupt("return",m);case 34:case"end":return k.stop()}},t,this,[[2,27,30,33]])}));return function(){return o.apply(this,arguments)}}()}})(Lt);var jt={};(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.compose=h;var n=s(z),a=s(ue.exports),g=s(re);function h(){for(var v=arguments.length,b=Array(v),d=0;d<v;d++)b[d]=arguments[d];return function(){var i=(0,a.default)(n.default.mark(function u(r){var o,t,c,m,l;return n.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:o=r,t=b.flat(1/0),c=t.length-1;case 3:if(!(0<=c)){f.next=25;break}if(m=t[c],m){f.next=7;break}return f.abrupt("continue",22);case 7:if(l=m.call(this,o),!l){f.next=22;break}if(!l.next){f.next=15;break}return f.next=12,(0,g.default)(l);case 12:o=f.sent,f.next=22;break;case 15:if(!l.then){f.next=21;break}return f.next=18,l;case 18:o=f.sent,f.next=22;break;case 21:o=l;case 22:c--,f.next=3;break;case 25:return f.abrupt("return",o);case 26:case"end":return f.stop()}},u,this)}));return function(){return i.apply(this,arguments)}}()}})(jt);var Ft={};(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.tap=h;var n=s(z),a=s(ue.exports),g=s(re);function h(v){return function(){var b=(0,a.default)(n.default.mark(function d(i){var u;return n.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(u=v.call(this,i),!u){r.next=10;break}if(!u.next){r.next=7;break}return r.next=5,(0,g.default)(u);case 5:r.next=10;break;case 7:if(!u.then){r.next=10;break}return r.next=10,u;case 10:return r.abrupt("return",i);case 11:case"end":return r.stop()}},d,this)}));return function(){return b.apply(this,arguments)}}()}})(Ft);var Mt={};(function(e){var s=W.exports,n=s(re);Object.defineProperty(e,"__esModule",{value:!0}),e.branch=a;function a(g){return function(h){var v=g.call(this,h);return v&&(v.next?(0,n.default)(v).catch(console.error):v.then&&v.catch(console.error)),h}}})(Mt);var Dt={};(function(e){var s=W.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.repeat=h;var n=s(z),a=s(ue.exports),g=s(re);function h(v,b){return function(){var d=(0,a.default)(n.default.mark(function i(u){var r,o;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=u,o=0;case 2:if(!(o<b)){t.next=17;break}if(r=v.call(this,r),!r.next){t.next=10;break}return t.next=7,(0,g.default)(r);case 7:r=t.sent,t.next=14;break;case 10:if(!r.then){t.next=14;break}return t.next=13,r;case 13:r=t.sent;case 14:o++,t.next=2;break;case 17:return t.abrupt("return",r);case 18:case"end":return t.stop()}},i,this)}));return function(){return d.apply(this,arguments)}}()}})(Dt);(function(e){var s={compress:!0,decompress:!0,stringify:!0,parse:!0,sort:!0,parseAsync:!0,stringifyAsync:!0,wrapAsPromiseAndYieldFn:!0,everyAsync:!0,base64Decompress:!0,base64decompressFromUTF16Async:!0,decompressAsync:!0,decompressFromEncodedURIComponentAsync:!0,decompressFromUint8ArrayAsync:!0,decompressFromUTF16Async:!0,decompressFromBase64Async:!0,base64Compress:!0,base64CompressToUTF16Async:!0,compressAsync:!0,compressToEncodedURIComponentAsync:!0,compressToUint8ArrayAsync:!0,compressToUTF16Async:!0,compressToBase64Async:!0,isObject:!0,forEach:!0,filter:!0,reduce:!0,concat:!0,append:!0,map:!0,find:!0,findIndex:!0,some:!0,every:!0,includes:!0,indexOf:!0,lastIndexOf:!0,keyBy:!0,groupBy:!0,uniqueBy:!0,sortAsync:!0,findAsync:!0,findIndexAsync:!0,mapAsync:!0,filterAsync:!0,reduceAsync:!0,appendAsync:!0,concatAsync:!0,forEachAsync:!0,someAsync:!0,includesAsync:!0,indexOfAsync:!0,lastIndexOfAsync:!0,keyByAsync:!0,groupByAsync:!0,uniqueByAsync:!0,useInternalEngine:!0,update:!0,run:!0,singleton:!0,call:!0,pipe:!0,compose:!0,tap:!0,branch:!0,repeat:!0},n=te,a=vr,g=Ot,h=Oe;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return v.stringify}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return b.parse}}),Object.defineProperty(e,"sort",{enumerable:!0,get:function(){return i.sort}}),Object.defineProperty(e,"parseAsync",{enumerable:!0,get:function(){return r.parseAsync}}),Object.defineProperty(e,"stringifyAsync",{enumerable:!0,get:function(){return r.stringifyAsync}}),Object.defineProperty(e,"wrapAsPromiseAndYieldFn",{enumerable:!0,get:function(){return o.wrapAsPromiseAndYieldFn}}),Object.defineProperty(e,"everyAsync",{enumerable:!0,get:function(){return t.everyAsync}}),Object.defineProperty(e,"base64Decompress",{enumerable:!0,get:function(){return c.base64Decompress}}),Object.defineProperty(e,"base64decompressFromUTF16Async",{enumerable:!0,get:function(){return c.base64decompressFromUTF16Async}}),Object.defineProperty(e,"decompressAsync",{enumerable:!0,get:function(){return c.decompressAsync}}),Object.defineProperty(e,"decompressFromEncodedURIComponentAsync",{enumerable:!0,get:function(){return c.decompressFromEncodedURIComponentAsync}}),Object.defineProperty(e,"decompressFromUint8ArrayAsync",{enumerable:!0,get:function(){return c.decompressFromUint8ArrayAsync}}),Object.defineProperty(e,"decompressFromUTF16Async",{enumerable:!0,get:function(){return c.decompressFromUTF16Async}}),Object.defineProperty(e,"decompressFromBase64Async",{enumerable:!0,get:function(){return c.decompressFromBase64Async}}),Object.defineProperty(e,"base64Compress",{enumerable:!0,get:function(){return c.base64Compress}}),Object.defineProperty(e,"base64CompressToUTF16Async",{enumerable:!0,get:function(){return c.base64CompressToUTF16Async}}),Object.defineProperty(e,"compressAsync",{enumerable:!0,get:function(){return c.compressAsync}}),Object.defineProperty(e,"compressToEncodedURIComponentAsync",{enumerable:!0,get:function(){return c.compressToEncodedURIComponentAsync}}),Object.defineProperty(e,"compressToUint8ArrayAsync",{enumerable:!0,get:function(){return c.compressToUint8ArrayAsync}}),Object.defineProperty(e,"compressToUTF16Async",{enumerable:!0,get:function(){return c.compressToUTF16Async}}),Object.defineProperty(e,"compressToBase64Async",{enumerable:!0,get:function(){return c.compressToBase64Async}}),Object.defineProperty(e,"isObject",{enumerable:!0,get:function(){return m.isObject}}),Object.defineProperty(e,"forEach",{enumerable:!0,get:function(){return l.forEach}}),Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return f.filter}}),Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return T.reduce}}),Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return S.concat}}),Object.defineProperty(e,"append",{enumerable:!0,get:function(){return k.append}}),Object.defineProperty(e,"map",{enumerable:!0,get:function(){return P.map}}),Object.defineProperty(e,"find",{enumerable:!0,get:function(){return y.find}}),Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return E.findIndex}}),Object.defineProperty(e,"some",{enumerable:!0,get:function(){return U.some}}),Object.defineProperty(e,"every",{enumerable:!0,get:function(){return j.every}}),Object.defineProperty(e,"includes",{enumerable:!0,get:function(){return D.includes}}),Object.defineProperty(e,"indexOf",{enumerable:!0,get:function(){return B.indexOf}}),Object.defineProperty(e,"lastIndexOf",{enumerable:!0,get:function(){return p.lastIndexOf}}),Object.defineProperty(e,"keyBy",{enumerable:!0,get:function(){return C.keyBy}}),Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return R.groupBy}}),Object.defineProperty(e,"uniqueBy",{enumerable:!0,get:function(){return w.uniqueBy}}),Object.defineProperty(e,"sortAsync",{enumerable:!0,get:function(){return x.sortAsync}}),Object.defineProperty(e,"findAsync",{enumerable:!0,get:function(){return A.findAsync}}),Object.defineProperty(e,"findIndexAsync",{enumerable:!0,get:function(){return I.findIndexAsync}}),Object.defineProperty(e,"mapAsync",{enumerable:!0,get:function(){return O.mapAsync}}),Object.defineProperty(e,"filterAsync",{enumerable:!0,get:function(){return _.filterAsync}}),Object.defineProperty(e,"reduceAsync",{enumerable:!0,get:function(){return q.reduceAsync}}),Object.defineProperty(e,"appendAsync",{enumerable:!0,get:function(){return F.appendAsync}}),Object.defineProperty(e,"concatAsync",{enumerable:!0,get:function(){return M.concatAsync}}),Object.defineProperty(e,"forEachAsync",{enumerable:!0,get:function(){return $.forEachAsync}}),Object.defineProperty(e,"someAsync",{enumerable:!0,get:function(){return G.someAsync}}),Object.defineProperty(e,"includesAsync",{enumerable:!0,get:function(){return V.includesAsync}}),Object.defineProperty(e,"indexOfAsync",{enumerable:!0,get:function(){return H.indexOfAsync}}),Object.defineProperty(e,"lastIndexOfAsync",{enumerable:!0,get:function(){return Y.lastIndexOfAsync}}),Object.defineProperty(e,"keyByAsync",{enumerable:!0,get:function(){return Z.keyByAsync}}),Object.defineProperty(e,"groupByAsync",{enumerable:!0,get:function(){return Q.groupByAsync}}),Object.defineProperty(e,"uniqueByAsync",{enumerable:!0,get:function(){return N.uniqueByAsync}}),Object.defineProperty(e,"useInternalEngine",{enumerable:!0,get:function(){return Bt.useInternalEngine}}),Object.defineProperty(e,"update",{enumerable:!0,get:function(){return qt.update}}),Object.defineProperty(e,"run",{enumerable:!0,get:function(){return Ut.run}}),Object.defineProperty(e,"singleton",{enumerable:!0,get:function(){return Nt.singleton}}),Object.defineProperty(e,"call",{enumerable:!0,get:function(){return Yt.call}}),Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return zt.pipe}}),Object.defineProperty(e,"compose",{enumerable:!0,get:function(){return $t.compose}}),Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return Gt.tap}}),Object.defineProperty(e,"branch",{enumerable:!0,get:function(){return Wt.branch}}),Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return Vt.repeat}}),e.decompress=e.compress=void 0;var v=Ie,b=Ce,d=Ee;Object.keys(d).forEach(function(L){L==="default"||L==="__esModule"||Object.prototype.hasOwnProperty.call(s,L)||L in e&&e[L]===d[L]||Object.defineProperty(e,L,{enumerable:!0,get:function(){return d[L]}})});var i=je,u=ae;Object.keys(u).forEach(function(L){L==="default"||L==="__esModule"||Object.prototype.hasOwnProperty.call(s,L)||L in e&&e[L]===u[L]||Object.defineProperty(e,L,{enumerable:!0,get:function(){return u[L]}})}),Object.keys(n).forEach(function(L){L==="default"||L==="__esModule"||Object.prototype.hasOwnProperty.call(s,L)||L in e&&e[L]===n[L]||Object.defineProperty(e,L,{enumerable:!0,get:function(){return n[L]}})}),Object.keys(a).forEach(function(L){L==="default"||L==="__esModule"||Object.prototype.hasOwnProperty.call(s,L)||L in e&&e[L]===a[L]||Object.defineProperty(e,L,{enumerable:!0,get:function(){return a[L]}})}),Object.keys(g).forEach(function(L){L==="default"||L==="__esModule"||Object.prototype.hasOwnProperty.call(s,L)||L in e&&e[L]===g[L]||Object.defineProperty(e,L,{enumerable:!0,get:function(){return g[L]}})}),Object.keys(h).forEach(function(L){L==="default"||L==="__esModule"||Object.prototype.hasOwnProperty.call(s,L)||L in e&&e[L]===h[L]||Object.defineProperty(e,L,{enumerable:!0,get:function(){return h[L]}})});var r=Pe,o=J,t=Ae,c=Se,m=le,l=X,f=Ye,T=$e,S=He,k=We,P=Ue,y=Me,E=Be,U=Ke,j=xe,D=Qe,B=tt,p=nt,C=st,R=ot,w=ct,x=Le,A=Fe,I=De,O=qe,_=Ne,q=ze,F=Ge,M=Ve,$=Je,G=Ze,V=Xe,H=et,Y=rt,Z=at,Q=it,N=ut,Bt=_e,qt=Rt,Ut=re,Nt=It,Yt=me,zt=Lt,$t=jt,Gt=Ft,Wt=Mt,Vt=Dt,Ht=d.LZStringGenerator.compress;e.compress=Ht;var Jt=d.LZStringGenerator.decompress;e.decompress=Jt})(de);function kr(e){const s={display:"flex"},n={boxSizing:"border-box",float:"left",marginRight:"0.5rem"},a=e.items.map(g=>K.createElement("li",{key:g.value+g.value[0],style:e.mobile?n:s},g.label&&K.createElement("div",{style:{margin:"0 0.5rem 0.0rem 0",fontWeight:"bold"}},g.label),K.createElement("div",{style:{width:e.mobile?"3rem":"100%",height:"3px",marginTop:"0.5rem",backgroundColor:`rgb(${g.color})`}})));return K.createElement("div",null,K.createElement("h4",{style:{textAlign:"left",fontWeight:"bold",margin:"1rem 0 0.25rem 0",fontSize:"0.8rem"}},e.title),K.createElement("p",null,e.description),K.createElement("ul",{style:{listStyle:"none",padding:0,margin:0}},a))}const _r={messages:{en:{requests:"DRT&nbsp;Requests",passengers:"Passengers",search:"Search",showhide:"Show/Hide",vehicles:"DRT Vehicles",routes:"Routes",speed:"Speed",backgroundTraffic:"All Traffic"},de:{requests:"DRT&nbsp;Anfragen",passengers:"Passagiere",search:"Suche",showhide:"Ein-/Ausblenden",vehicles:"DRT Fahrzeuge",routes:"Routen",speed:"Geschwindigkeit",backgroundTraffic:"Alle Fahrzeuge"}}};var Ar=yt({name:"XmasSettingsPanel",i18n:_r,components:{ToggleButton:gt.exports.ToggleButton},props:{items:{type:Object,required:!0}}}),xr=function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("div",{staticClass:"settings-panel-content"},[n("h4",[e._v(e._s(e.$t("showhide")))]),n("div",{staticClass:"items"},e._l(Object.keys(e.items),function(a){return n("div",{key:a,staticClass:"row"},[n("toggle-button",{staticClass:"toggle",attrs:{width:40,value:e.items[a],labels:!1,color:{checked:"#4b7cc4",unchecked:"#222"}},on:{change:function(g){return e.$emit("click",a)}}}),n("label",{domProps:{innerHTML:e._s(e.$t(a))}})],1)}),0)])},wr=[];const dt={};var Tr=bt(Ar,xr,wr,!1,Sr,"7d83036b",null,null);function Sr(e){for(let s in dt)this[s]=dt[s]}var Or=function(){return Tr.exports}();class Er{constructor(s){this.linkIdLookup={},this.eventLayers=[],this.range=[1/0,-1/0],this.timeRange=[1/0,-1/0],this.$emit=()=>{},this.boundBox=[],this.params={...s},this.fileApi=new vt(s.fileSystem),s.$emit&&(this.$emit=s.$emit),s.boundBox&&(this.boundBox=s.boundBox)}async loadFiles(){const{network:s,linkIdLookup:n}=await this.loadNetwork();this.network=s,this.linkIdLookup=n;try{let a=`${this.params.subfolder}/${this.params.vizDetails.events}`;return await this.streamEventFile(a)}catch(a){throw console.error(a),Error(""+a)}return[]}async loadNetwork(){let s=this.params.vizDetails.events.replace("events.xml","network.xml");const n=await this.params.dataManager.getRoadNetwork(s,this.params.subfolder,Object.assign({projection:"25833"},this.params.vizDetails)),a={};return n.linkIds.forEach((g,h)=>{a[`${g}`]=h}),{network:n,linkIdLookup:a}}streamEventFile(s){return new Promise((a,g)=>{const h=(d,i)=>{console.log("FINAL time",this.timeRange),this.$emit("finished"),this.eventWorker.terminate(),console.log("DONE: layers",this.eventLayers.length),console.log("ALL DONE",{totalRows:d,data:i.range,time:this.timeRange}),this.range=i.range,a(this.eventLayers)};this.$emit("status","Loading file...");let v=0;this.range=[1/0,-1/0],this.timeRange=[1/0,-1/0],this.eventWorker&&this.eventWorker.terminate(),this.eventLayers=[],this.eventWorker=new ur;const b=Intl.NumberFormat();this.eventWorker.onmessage=async d=>{const i=d.data;if(i.status)this.$emit("status",i.status);else{if(i.error)throw Error(i.error);if(i.finished){h(v,i);return}else{const u=i.events;console.log(u.length),v+=u.length,this.$emit("status","Loading "+b.format(v)+" events..."),this.timeRange=[Math.min(this.timeRange[0],u[0].time),Math.max(this.timeRange[1],u[u.length-1].time)],this.timeRange=[Math.min(this.timeRange[0],i.vehicleTrips[0].t0),Math.max(this.timeRange[1],i.vehicleTrips[i.vehicleTrips.length-1].t1)];let r=i.vehicleTrips;if(console.log("ROIGINAL LENGHT",r.length),this.boundBox.length){const c=this.network.source,m=this.network.dest;r=i.vehicleTrips.filter(l=>{const f=2*this.linkIdLookup[l.link];return c[f]>this.boundBox[0][0]&&c[f]<this.boundBox[1][0]&&c[f+1]>this.boundBox[0][1]&&c[f+1]<this.boundBox[1][1]&&m[f]>this.boundBox[0][0]&&m[f]<this.boundBox[1][0]&&m[f+1]>this.boundBox[0][1]&&m[f+1]<this.boundBox[1][1]}),console.log("FILTERED LENGTH:",r.length)}const o=r.length,t={locO:new Float32Array(2*o).fill(NaN),locD:new Float32Array(2*o).fill(NaN),t0:new Float32Array(o).fill(NaN),t1:new Float32Array(o).fill(NaN)};for(let c=0;c<o;c++){const m=r[c],l=2*this.linkIdLookup[m.link];t.locO[c*2+0]=this.network.source[0+l],t.locO[c*2+1]=this.network.source[1+l],t.locD[c*2+0]=this.network.dest[0+l],t.locD[c*2+1]=this.network.dest[1+l],c==0?(t.locO[c*2+0]=.5*(t.locO[c*2+0]+t.locD[c*2+0]),t.locO[c*2+1]=.5*(t.locO[c*2+1]+t.locD[c*2+1])):c==o-1&&(t.locD[c*2+0]=.5*(t.locO[c*2+0]+t.locD[c*2+0]),t.locD[c*2+1]=.5*(t.locO[c*2+1]+t.locD[c*2+1])),t.t0[c]=m.t0,t.t1[c]=m.t1}this.eventLayers.push({vehicles:t})}}},this.eventWorker.postMessage({filePath:s,fileSystem:this.params.fileSystem,projection:this.params.vizDetails.projection,boundBox:this.boundBox})})}}const Pr={currentTime:{type:"number",value:0,min:0},getTimeStart:{type:"accessor",value:null},getTimeEnd:{type:"accessor",value:null},searchFlag:{type:"number",value:0}};class lt extends br{getShaders(){const s=super.getShaders();return s.inject={"vs:#decl":`        attribute float timeStart;
        attribute float timeEnd;
        uniform float currentTime;
        uniform float searchFlag;
        varying float vTime;
      `,"vs:#main-start":`        if (searchFlag == 1.0) {
          vTime = 999.0;
        } else if (timeEnd == -1.0 || timeStart > currentTime || timeEnd < currentTime ) {
          vTime = -1.0;
          return;
        } else {
          float nearBeginning = currentTime - timeStart;
          float nearEnd = timeEnd - currentTime;
          vTime = min(nearBeginning, nearEnd);
        }
      `,"fs:#decl":`        uniform float currentTime;
        uniform float searchFlag;
        varying float vTime;
      `,"fs:#main-start":`      if (searchFlag == 0.0 && vTime == -1.0 ) discard;
      `,"fs:DECKGL_FILTER_COLOR":`        if (vTime <= 10.0) color.a *= (vTime / 10.0);
      `},s}initializeState(s){super.initializeState(s),this.getAttributeManager().addInstanced({timeStart:{size:1,accessor:"getTimeStart"},timeEnd:{size:1,accessor:"getTimeEnd"}})}draw(s){const{currentTime:n}=this.props;s.uniforms=Object.assign({},s.uniforms,{currentTime:n}),super.draw(s)}}lt.layerName="DrtRequestArcLayer";lt.defaultProps=Pr;const ht={marker:{x:0,y:0,width:128,height:128,mask:!0},info:{x:128,y:0,width:128,height:128,mask:!0},vehicle:{x:128,y:128,width:128,height:128,mask:!0},diamond:{x:0,y:128,width:128,height:128,mask:!1}},Cr=new mr({color:[255,255,255],intensity:1}),Rr=new nr({color:[255,255,255],intensity:2,position:[-74.05,40.7,8e3]}),Ir=new yr({ambientLight:Cr,pointLight:Rr}),Lr={vehicleColor:[200,130,250],trailColor0:[235,235,25],trailColor1:[23,184,190],effects:[Ir]},ie={time:0,fromX:1,fromY:2,toX:3,toY:4,veh:5,arrival:6};function jr(e){const{simulationTime:s,paths:n,traces:a,drtRequests:g,settingsShowLayers:h,center:v,dark:b,vehicleLookup:d,searchEnabled:i,onClick:u,viewId:r,trafficLayers:o}=e,t=Lr,[c,m]=ft.exports.useState(v?{center:[16,42],longitude:v[0],latitude:v[1],pitch:0,bearing:0,zoom:10}:Object.assign({},ee.state.viewState));ve[r]=()=>{m(ee.state.viewState)};const l=2,[f,T]=ft.exports.useState({}),S=[];function k(){console.log(f),f.object?u(f.object.v):u(null)}function P({hoverInfo:y}){const{object:E,x:U,y:j}=y;if(!E)return null;const D=d[E.v];return K.createElement("div",{className:"tooltip",style:{fontSize:"0.8rem",backgroundColor:"#ddddeedd",borderLeft:"6px solid green",boxShadow:"2.5px 2px 4px rgba(0,0,0,0.25)",color:"#223",padding:"1rem 1rem",position:"absolute",left:U+40,top:j-30}},K.createElement("big",null,K.createElement("b",null,D)),K.createElement("div",null,"Passagiere: ",E.occ," "))}return h.backgroundTraffic&&o.forEach((y,E)=>{const U=y.vehicles.t0[0]>s||y.vehicles.t1[y.vehicles.t1.length-1]<s;S.push(new cr({data:{length:y.vehicles.t0.length,attributes:{getTimeStart:{value:y.vehicles.t0,size:1},getTimeEnd:{value:y.vehicles.t1,size:1},getPathStart:{value:y.vehicles.locO,size:2},getPathEnd:{value:y.vehicles.locD,size:2}}},id:"vehicles"+E,getColor:[255,32,32],iconMoving:"vehicle",iconStill:"diamond",getSize:20,opacity:1,currentTime:s,shadowEnabled:!0,iconAtlas:"/icon-atlas.png",iconMapping:ht,sizeScale:1,billboard:!1,pickable:!0,depthTest:!0,autoHighlight:!1,highlightColor:[255,0,255],parameters:{depthTest:!1},visible:!U}))}),h.routes&&S.push(new ar({id:"Routen",data:a,currentTime:s,getSourcePosition:y=>y.p0,getTargetPosition:y=>y.p1,getTimeStart:y=>y.t0,getTimeEnd:y=>y.t1,getColor:y=>e.colors[y.occ],getWidth:3,opacity:.8,widthMinPixels:1,rounded:!1,shadowEnabled:!1,searchFlag:i?1:0,pickable:!0,autoHighlight:!0,highlightColor:[255,0,255],onHover:T})),h.vehicles&&S.push(new sr({id:"Vehicles",data:n,getPathStart:y=>y.p0,getPathEnd:y=>y.p1,getTimeStart:y=>y.t0,getTimeEnd:y=>y.t1,getIcon:y=>"vehicle",getColor:y=>e.colors[y.occ],iconMoving:"vehicle",iconStill:"diamond",getSize:128,opacity:1,currentTime:s,shadowEnabled:!1,noAlloc:!0,iconAtlas:"/simwrapper/icon-atlas.png",iconMapping:ht,sizeScale:.5,billboard:!1,pickable:!0,depthTest:!0,autoHighlight:!1,highlightColor:[255,0,255],onHover:T,parameters:{depthTest:!1}})),h.requests&&S.push(new lt({id:"DRT Requests",data:g,currentTime:s,getSourcePosition:y=>[y[ie.fromX],y[ie.fromY]],getTargetPosition:y=>[y[ie.toX],y[ie.toY]],getTimeStart:y=>y[ie.time],getTimeEnd:y=>y[ie.arrival],getSourceColor:[0,255,64],getTargetColor:[0,255,64],getWidth:l,opacity:.5,searchFlag:i?1:0})),K.createElement(dr,{layers:S,effects:t.effects,pickingRadius:5,viewState:c,controller:!0,getCursor:()=>"pointer",onClick:k,onViewStateChange:y=>{ee.commit("setMapCamera",y.viewState)}},K.createElement(hr,{mapStyle:ee.getters.mapStyle,mapboxApiAccessToken:Kt}),P({hoverInfo:f}))}const Fr={messages:{en:{requests:"DRT Requests",passengers:"Passengers",search:"Search",showhide:"Show/Hide",vehicles:"Vehicles",routes:"Routes",speed:"Speed"},de:{requests:"DRT Anfragen",passengers:"Passagiere",search:"Suche",showhide:"Ein-/Ausblenden",vehicles:"DRT Fahrzeuge",routes:"DRT Routen",speed:"Geschwindigkeit"}}},Mr=yt({name:"XmasVehicleAnimation",i18n:Fr,components:{CollapsiblePanel:rr,SettingsPanel:Or,LegendColors:kr,TripViz:jr,PlaybackControls:ir,ToggleButton:gt.exports.ToggleButton,ZoomButtons:or},props:{root:{type:String,required:!0},subfolder:{type:String,required:!0},yamlConfig:String,config:Object,thumbnail:Boolean},computed:{fileApi(){return new vt(this.fileSystem,ee)},fileSystem(){const e=this.$store.state.svnProjects.filter(s=>s.slug===this.root);if(e.length===0)throw console.log("no such project"),Error;return e[0]},urlThumbnail(){return this.thumbnailUrl},textColor(){const e={text:"#3498db",bg:"#eeeef480"},s={text:"white",bg:"#181518aa"};return this.myState.colorScheme===ne.DarkMode?s:e}},data:()=>{const e={0:[140,140,160],1:[20,224,224],2:[240,240,40],3:[240,110,30]};return{viewId:Math.floor(1e12*Math.random()),COLOR_OCCUPANCY:e,SETTINGS:{vehicles:!0,backgroundTraffic:!0,routes:!0,requests:!0},legendItems:Object.keys(e).map(s=>({type:pt.line,color:e[s],value:s,label:s})),legendRequests:[{type:pt.line,color:[255,0,255],value:0,label:""}],vizDetails:{network:"",drtTrips:"",projection:"",title:"",description:"",thumbnail:"",center:[13.45,52.5],zoom:12,bearing:0,pitch:20,mapIsIndependent:!1,events:"",eventBlobs:[],theme:""},myState:{statusMessage:"",clock:"00:00",colorScheme:ne.DarkMode,isRunning:!1,isShowingHelp:!1,subfolder:"",yamlConfig:"",thumbnail:!1,data:[]},timeStart:0,timeEnd:86400,traces:se([]),traceStart:null,traceEnd:null,traceVehicle:null,paths:se([]),pathStart:null,pathEnd:null,pathVehicle:null,requests:se([]),requestStart:null,requestEnd:null,requestVehicle:null,simulationTime:6*3600,timeElapsedSinceLastFrame:0,searchTerm:"",searchEnabled:!1,globalState:ee.state,isDarkMode:ee.state.colorScheme===ne.DarkMode,isLoaded:!1,showHelp:!1,speedStops:[-10,-5,-2,-1,-.5,-.25,0,.25,.5,1,2,5,10],speed:1,trafficLayers:[],legendBits:[],isEmbedded:!1,thumbnailUrl:"url('assets/thumbnail.jpg') no-repeat;",vehicleLookup:[],vehicleLookupString:{},isPausedDueToHiding:!1}},watch:{"$store.state.viewState"(){this.vizDetails.mapIsIndependent||!ve[this.viewId]||ve[this.viewId]()},async"globalState.authAttempts"(){console.log("AUTH CHANGED - Reload"),this.yamlConfig||this.buildRouteFromUrl(),await this.getVizDetails()},"globalState.colorScheme"(){this.isDarkMode=this.globalState.colorScheme===ne.DarkMode,this.updateLegendColors()},searchTerm(){var s,n,a,g,h,v,b,d;const e=this.vehicleLookupString[this.searchTerm];e>-1?(console.log("vehicle",e),(s=this.pathVehicle)==null||s.filterExact(e),(n=this.traceVehicle)==null||n.filterExact(e),(a=this.requestVehicle)==null||a.filterExact(e),(g=this.requestStart)==null||g.filterAll(),(h=this.requestEnd)==null||h.filterAll(),this.searchEnabled=!0):(console.log("nope"),(v=this.pathVehicle)==null||v.filterAll(),(b=this.traceVehicle)==null||b.filterAll(),(d=this.requestVehicle)==null||d.filterAll(),this.searchEnabled=!1),this.updateDatasetFilters()}},async mounted(){if(ee.commit("setFullScreen",!this.thumbnail),this.myState.thumbnail=this.thumbnail,this.myState.yamlConfig=this.yamlConfig||"",this.myState.subfolder=this.subfolder,this.setEmbeddedMode(),await this.getVizDetails(),this.thumbnail)return;this.showHelp=!1,this.updateLegendColors(),this.setWallClock(),this.myState.statusMessage="/ Dateien laden...",console.log("loading files");const{trips:e,drtRequests:s}=await this.loadFiles();console.log("parsing vehicle motion"),this.myState.statusMessage=`${this.$t("vehicles")}...`,this.paths=await this.parseVehicles(e),this.pathStart=this.paths.dimension(n=>n.t0),this.pathEnd=this.paths.dimension(n=>n.t1),this.pathVehicle=this.paths.dimension(n=>n.v),console.log("Routes..."),this.myState.statusMessage=`${this.$t("routes")}...`,this.traces=await this.parseRouteTraces(e),this.traceStart=this.traces.dimension(n=>n.t0),this.traceEnd=this.traces.dimension(n=>n.t1),this.traceVehicle=this.traces.dimension(n=>n.v),console.log("Requests..."),this.myState.statusMessage=`${this.$t("requests")}...`,this.requests=await this.parseDrtRequests(s),this.requestStart=this.requests.dimension(n=>n[0]),this.requestEnd=this.requests.dimension(n=>n[6]),this.requestVehicle=this.requests.dimension(n=>n[5]),this.loadBackgroundTraffic(),console.log("GO!"),this.myState.statusMessage="",document.addEventListener("visibilitychange",this.handleVisibilityChange,!1),this.myState.isRunning=!0,this.timeElapsedSinceLastFrame=Date.now(),this.animate()},beforeDestroy(){document.removeEventListener("visibilityChange",this.handleVisibilityChange),ee.commit("setFullScreen",!1),this.$store.commit("setFullScreen",!1),this.myState.isRunning=!1},methods:{handleClick(e){if(e===null){this.searchTerm="";return}const s=this.vehicleLookup[e];console.log(s),this.searchTerm===s?this.searchTerm="":this.searchTerm=s},updateLegendColors(){},setWallClock(){const e=Math.floor(this.simulationTime/3600),s=Math.floor(this.simulationTime/60)%60;this.myState.clock=`${e<10?"0":""}${e}${s<10?":0":":"}${s}`},setTime(e){var s,n,a;this.simulationTime=e,this.setWallClock(),this.traceStart&&this.pathStart&&this.requestStart&&(this.pathStart.filter([0,this.simulationTime]),(s=this.pathEnd)==null||s.filter([this.simulationTime,1/0]),this.searchEnabled||(this.traceStart.filter([0,this.simulationTime]),(n=this.traceEnd)==null||n.filter([this.simulationTime,1/0]),this.requestStart.filter([0,this.simulationTime]),(a=this.requestEnd)==null||a.filter([this.simulationTime,1/0]))),this.$options.paths=this.paths.allFiltered(),this.$options.traces=this.traces.allFiltered(),this.$options.drtRequests=this.requests.allFiltered()},toggleSimulation(){console.log("CLICK !!!"),this.myState.isRunning=!this.myState.isRunning,this.timeElapsedSinceLastFrame=Date.now(),this.myState.isRunning&&this.speed===0&&(this.speed=1),this.myState.isRunning&&this.animate()},async loadBackgroundTraffic(){if(this.vizDetails.eventBlobs)for(const e of this.vizDetails.eventBlobs){const s=await this.loadBackgroundChunk(e);this.trafficLayers.push(s)}else if(this.vizDetails.events){const s=await new Er({fileSystem:this.fileSystem,dataManager:new lr(this.root,this.subfolder),vizDetails:this.vizDetails,subfolder:this.subfolder}).loadFiles();this.trafficLayers=s,this.exportJSON(s)}},async loadBackgroundChunk(e){return new Promise((s,n)=>{console.log("load chunk:",e);const a=new fr;a.onmessage=g=>{const v=new Float32Array(g.data.buffer).length/6,b=4,d={vehicles:{locO:new Float32Array(g.data.buffer,0,v*2),locD:new Float32Array(g.data.buffer,b*v*2,v*2),t0:new Float32Array(g.data.buffer,b*v*4,v),t1:new Float32Array(g.data.buffer,b*v*5,v)}};s(d)},a.postMessage({filePath:this.myState.subfolder+"/"+e,fileSystem:this.fileSystem})})},exportJSON(e){for(const s of e){const n=new Blob([s.vehicles.locO,s.vehicles.locD,s.vehicles.t0,s.vehicles.t1],{type:"octet/stream"}),a=URL.createObjectURL(n);let g=document.createElement("a");g.setAttribute("href",a),g.setAttribute("download","events.blob"),g.style.display="none",document.body.appendChild(g),g.click(),document.body.removeChild(g)}},setEmbeddedMode(){"embed"in this.$route.query&&(console.log("EMBEDDED MODE"),this.isEmbedded=!0,this.$store.commit("setShowLeftBar",!1),this.$store.commit("setFullWidth",!0))},async handleSettingChange(e){console.log(e),this.SETTINGS[e]=!this.SETTINGS[e],this.updateDatasetFilters(),this.simulationTime+=1},buildRouteFromUrl(){const e=this.$route.params;if(!e.project||!e.pathMatch){console.log("I CANT EVEN: NO PROJECT/PARHMATCH");return}const s=1+e.pathMatch.lastIndexOf("/"),n=e.pathMatch.substring(0,s),a=e.pathMatch.substring(s);this.myState.subfolder=n,this.myState.yamlConfig=a},async getVizDetails(){console.log("GETVIZ");try{const s=this.myState.yamlConfig.indexOf("/")>-1?this.myState.yamlConfig:this.myState.subfolder+"/"+this.myState.yamlConfig,n=await this.fileApi.getFileText(s);this.vizDetails=Qt.parse(n)}catch(s){console.log("failed");const n=s;this.fileSystem.needPassword&&n.status===401&&ee.commit("requestLogin",this.fileSystem.slug)}this.vizDetails.theme&&this.$store.commit("setTheme",this.vizDetails.theme),this.vizDetails.center&&this.$store.commit("setMapCamera",{longitude:this.vizDetails.center[0],latitude:this.vizDetails.center[1],zoom:this.vizDetails.zoom||11,pitch:this.vizDetails.pitch||20,bearing:this.vizDetails.bearing||0,jump:!0});const e=this.vizDetails.title?this.vizDetails.title:"Agent Animation";this.$emit("title",e),this.buildThumbnail(),this.isLoaded=!0},async buildThumbnail(){if(this.thumbnail&&this.vizDetails.thumbnail)try{const e=await this.fileApi.getFileBlob(this.myState.subfolder+"/"+this.vizDetails.thumbnail),s=await Xt.arraybuffer(e),n=pr(s);n&&(this.thumbnailUrl=`center / cover no-repeat url(data:image/png;base64,${n})`)}catch(e){console.error(e)}},async parseDrtRequests(e){if(this.vehicleLookup.length)for(const s of e)try{s[5]=this.vehicleLookupString[s[5]]}catch{}return se(e)},async parseVehicles(e){const s=[];let n=-1;return await de.forEachAsync(e,a=>{const g=a.path,h=a.timestamps,v=a.passengers;n++,this.vehicleLookup[n]=a.id,this.vehicleLookupString[a.id]=n;for(let b=0;b<a.path.length-1;b++)s.push({t0:h[b],t1:h[b+1],p0:g[b],p1:g[b+1],v:n,occ:v[b]})}),se(s)},updateDatasetFilters(){var e,s,n,a,g;!this.traceStart||!this.pathStart||!this.requestStart||(this.SETTINGS.routes&&(this.searchEnabled?(this.traceStart.filterAll(),(e=this.traceEnd)==null||e.filterAll()):(this.traceStart.filter([0,this.simulationTime]),(s=this.traceEnd)==null||s.filter([this.simulationTime,1/0])),this.$options.traces=this.traces.allFiltered()),this.SETTINGS.vehicles&&(this.pathStart.filter([0,this.simulationTime]),(n=this.pathEnd)==null||n.filter([this.simulationTime,1/0]),this.$options.paths=this.paths.allFiltered()),this.SETTINGS.requests&&(this.searchEnabled?(this.requestStart.filterAll(),(a=this.requestEnd)==null||a.filterAll()):(this.requestStart.filter([0,this.simulationTime]),(g=this.requestEnd)==null||g.filter([this.simulationTime,1/0])),this.$options.drtRequests=this.requests.allFiltered()))},animate(){if(this.myState.isRunning){const e=Date.now()-this.timeElapsedSinceLastFrame;this.timeElapsedSinceLastFrame+=e,this.simulationTime+=e*this.speed*.05,this.updateDatasetFilters(),this.setWallClock(),window.requestAnimationFrame(this.animate)}},handleVisibilityChange(){this.isPausedDueToHiding&&!document.hidden?(console.log("unpausing"),this.isPausedDueToHiding=!1,this.toggleSimulation()):this.myState.isRunning&&document.hidden&&(console.log("pausing"),this.isPausedDueToHiding=!0,this.toggleSimulation())},async parseRouteTraces(e){let s=-1;const n=[];return await de.forEachAsync(e,a=>{s++;let g=a.timestamps[0],h=a.timestamps[0],v=[];for(let b=1;b<a.path.length;b++)h=a.timestamps[b],a.path[b][0]===a.path[b-1][0]&&a.path[b][1]===a.path[b-1][1]?(v.forEach(d=>{d.t1=a.timestamps[b-1]}),n.push(...v),v=[],g=h):v.push({t0:g,p0:a.path[b-1],p1:a.path[b],v:s,occ:a.passengers[b-1]});v.forEach(b=>{b.t1=h}),n.push(...v)}),se(n)},async loadFiles(){if(!this.fileApi)return{trips:[],drtRequests:{}};let e=[],s=[];try{if(this.vizDetails.drtTrips.endsWith("json")){const n=await this.fileApi.getFileJson(this.myState.subfolder+"/"+this.vizDetails.drtTrips);e=n.trips,s=n.drtRequests}else if(this.vizDetails.drtTrips.endsWith("gz")){const n=await this.fileApi.getFileBlob(this.myState.subfolder+"/"+this.vizDetails.drtTrips),a=n?await er(n):null;let g=await de.run(tr.inflateAsync(a,{to:"string"}));const h=JSON.parse(g);e=h.trips,s=h.drtRequests}}catch(n){console.error(n),this.myState.statusMessage=""+n}return{trips:e,drtRequests:s}},toggleLoaded(e){this.isLoaded=e},rotateColors(){this.myState.colorScheme=this.myState.colorScheme===ne.DarkMode?ne.LightMode:ne.DarkMode,localStorage.setItem("plugin/agent-animation/colorscheme",this.myState.colorScheme)}}});var Dr=function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("div",{staticClass:"gl-app",class:{"hide-thumbnail":!e.thumbnail},style:{background:e.urlThumbnail},attrs:{oncontextmenu:"return false"}},[e.thumbnail?e._e():n("trip-viz",{staticClass:"anim",attrs:{center:e.vizDetails.center,colors:e.COLOR_OCCUPANCY,drtRequests:e.$options.drtRequests,dark:e.globalState.isDarkMode,paths:e.$options.paths,settingsShowLayers:e.SETTINGS,searchEnabled:e.searchEnabled,simulationTime:e.simulationTime,traces:e.$options.traces,vehicleLookup:e.vehicleLookup,viewId:e.viewId,onClick:e.handleClick,trafficLayers:e.trafficLayers}}),e.thumbnail?e._e():n("zoom-buttons"),n("div",{staticClass:"bottom-controls-mobile"},[n("div",{staticClass:"big clock"},[n("p",[e._v(e._s(e.myState.clock))])]),e.legendItems.length?n("legend-colors",{staticClass:"legend-block",attrs:{mobile:!0,title:`${e.$t("passengers")}:`,items:e.legendItems}}):e._e(),n("settings-panel",{staticClass:"settings-area",attrs:{items:e.SETTINGS},on:{click:e.handleSettingChange}})],1),e.isLoaded&&!e.thumbnail?n("div",{staticClass:"right-side"},[n("collapsible-panel",{attrs:{direction:"right"}},[n("div",{staticClass:"big clock"},[n("p",[e._v(e._s(e.myState.clock))])]),n("div",{staticClass:"panel-items"},[e.legendItems.length?n("legend-colors",{staticClass:"legend-block",attrs:{title:`${e.$t("passengers")}:`,items:e.legendItems}}):e._e(),n("legend-colors",{staticClass:"legend-block",attrs:{title:`${e.$t("requests")}:`,items:e.legendRequests,mobile:!1}}),n("settings-panel",{staticClass:"settings-area",attrs:{items:e.SETTINGS},on:{click:e.handleSettingChange}}),n("div",{staticClass:"speed-block"},[n("p",{staticClass:"speed-label"},[e._v(e._s(e.$t("speed"))+":"),n("br"),e._v(e._s(e.speed)+"x")]),n("b-slider",{staticClass:"speed-slider",attrs:{min:e.speedStops[0],max:e.speedStops[e.speedStops.length-1],duration:0,dotSize:20,tooltip:!0,"tooltip-placement":"bottom","tooltip-formatter":function(a){return a+"x"}},model:{value:e.speed,callback:function(a){e.speed=a},expression:"speed"}},[e._l(e.speedStops,function(a){return[n("b-slider-tick",{key:a,attrs:{value:a}})]})],2)],1)],1)])],1):e._e(),!e.thumbnail&&e.isLoaded?n("playback-controls",{staticClass:"bottom-area",attrs:{timeStart:e.timeStart,timeEnd:e.timeEnd,isRunning:e.myState.isRunning,currentTime:e.simulationTime},on:{click:e.toggleSimulation,time:e.setTime}}):e._e()],1)},Br=[];const mt={};var qr=bt(Mr,Dr,Br,!1,Ur,"9e127374",null,null);function Ur(e){for(let s in mt)this[s]=mt[s]}var pn=function(){return qr.exports}();export{pn as default};
//# sourceMappingURL=VehicleAnimation.95b4c8ad.js.map
