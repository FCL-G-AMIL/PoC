{"version":3,"file":"text-layer.c8c59efd.js","sources":["../../node_modules/@deck.gl/core/dist/esm/lib/composite-layer.js","../../node_modules/@deck.gl/layers/dist/esm/icon-layer/icon-layer-vertex.glsl.js","../../node_modules/@deck.gl/layers/dist/esm/icon-layer/icon-layer-fragment.glsl.js","../../node_modules/@deck.gl/layers/dist/esm/icon-layer/icon-manager.js","../../node_modules/@deck.gl/layers/dist/esm/icon-layer/icon-layer.js","../../node_modules/@deck.gl/layers/dist/esm/scatterplot-layer/scatterplot-layer-vertex.glsl.js","../../node_modules/@deck.gl/layers/dist/esm/scatterplot-layer/scatterplot-layer-fragment.glsl.js","../../node_modules/@deck.gl/layers/dist/esm/scatterplot-layer/scatterplot-layer.js","../../node_modules/@deck.gl/layers/dist/esm/text-layer/multi-icon-layer/multi-icon-layer-fragment.glsl.js","../../node_modules/@deck.gl/layers/dist/esm/text-layer/multi-icon-layer/multi-icon-layer.js","../../node_modules/@mapbox/tiny-sdf/index.js","../../node_modules/@deck.gl/layers/dist/esm/text-layer/utils.js","../../node_modules/@deck.gl/layers/dist/esm/text-layer/lru-cache.js","../../node_modules/@deck.gl/layers/dist/esm/text-layer/font-atlas-manager.js","../../node_modules/@deck.gl/layers/dist/esm/text-layer/text-background-layer/text-background-layer-vertex.glsl.js","../../node_modules/@deck.gl/layers/dist/esm/text-layer/text-background-layer/text-background-layer-fragment.glsl.js","../../node_modules/@deck.gl/layers/dist/esm/text-layer/text-background-layer/text-background-layer.js","../../node_modules/@deck.gl/layers/dist/esm/text-layer/text-layer.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Layer from './layer';\nimport debug from '../debug';\nimport { flatten } from '../utils/flatten';\nimport { PROP_TYPES_SYMBOL } from '../lifecycle/constants';\nconst TRACE_RENDER_LAYERS = 'compositeLayer.renderLayers';\nexport default class CompositeLayer extends Layer {\n  get isComposite() {\n    return true;\n  }\n\n  get isLoaded() {\n    return super.isLoaded && this.getSubLayers().every(layer => layer.isLoaded);\n  }\n\n  getSubLayers() {\n    return this.internalState && this.internalState.subLayers || [];\n  }\n\n  initializeState(context) {}\n\n  setState(updateObject) {\n    super.setState(updateObject);\n    this.setNeedsUpdate();\n  }\n\n  getPickingInfo({\n    info\n  }) {\n    const {\n      object\n    } = info;\n    const isDataWrapped = object && object.__source && object.__source.parent && object.__source.parent.id === this.id;\n\n    if (!isDataWrapped) {\n      return info;\n    }\n\n    info.object = object.__source.object;\n    info.index = object.__source.index;\n    return info;\n  }\n\n  filterSubLayer(context) {\n    return true;\n  }\n\n  shouldRenderSubLayer(subLayerId, data) {\n    return data && data.length;\n  }\n\n  getSubLayerClass(subLayerId, DefaultLayerClass) {\n    const {\n      _subLayerProps: overridingProps\n    } = this.props;\n    return overridingProps && overridingProps[subLayerId] && overridingProps[subLayerId].type || DefaultLayerClass;\n  }\n\n  getSubLayerRow(row, sourceObject, sourceObjectIndex) {\n    row.__source = {\n      parent: this,\n      object: sourceObject,\n      index: sourceObjectIndex\n    };\n    return row;\n  }\n\n  getSubLayerAccessor(accessor) {\n    if (typeof accessor === 'function') {\n      const objectInfo = {\n        index: -1,\n        data: this.props.data,\n        target: []\n      };\n      return (x, i) => {\n        if (x && x.__source) {\n          objectInfo.index = x.__source.index;\n          return accessor(x.__source.object, objectInfo);\n        }\n\n        return accessor(x, i);\n      };\n    }\n\n    return accessor;\n  }\n\n  getSubLayerProps(sublayerProps = {}) {\n    var _this$props$updateTri;\n\n    const {\n      opacity,\n      pickable,\n      visible,\n      parameters,\n      getPolygonOffset,\n      highlightedObjectIndex,\n      autoHighlight,\n      highlightColor,\n      coordinateSystem,\n      coordinateOrigin,\n      wrapLongitude,\n      positionFormat,\n      modelMatrix,\n      extensions,\n      fetch,\n      operation,\n      _subLayerProps: overridingProps\n    } = this.props;\n    const newProps = {\n      id: '',\n      updateTriggers: {},\n      opacity,\n      pickable,\n      visible,\n      parameters,\n      getPolygonOffset,\n      highlightedObjectIndex,\n      autoHighlight,\n      highlightColor,\n      coordinateSystem,\n      coordinateOrigin,\n      wrapLongitude,\n      positionFormat,\n      modelMatrix,\n      extensions,\n      fetch,\n      operation\n    };\n    const overridingSublayerProps = overridingProps && sublayerProps.id && overridingProps[sublayerProps.id];\n    const overridingSublayerTriggers = overridingSublayerProps && overridingSublayerProps.updateTriggers;\n    const sublayerId = sublayerProps.id || 'sublayer';\n\n    if (overridingSublayerProps) {\n      const propTypes = this.props[PROP_TYPES_SYMBOL];\n      const subLayerPropTypes = sublayerProps.type ? sublayerProps.type._propTypes : {};\n\n      for (const key in overridingSublayerProps) {\n        const propType = subLayerPropTypes[key] || propTypes[key];\n\n        if (propType && propType.type === 'accessor') {\n          overridingSublayerProps[key] = this.getSubLayerAccessor(overridingSublayerProps[key]);\n        }\n      }\n    }\n\n    Object.assign(newProps, sublayerProps, overridingSublayerProps);\n    newProps.id = \"\".concat(this.props.id, \"-\").concat(sublayerId);\n    newProps.updateTriggers = {\n      all: (_this$props$updateTri = this.props.updateTriggers) === null || _this$props$updateTri === void 0 ? void 0 : _this$props$updateTri.all,\n      ...sublayerProps.updateTriggers,\n      ...overridingSublayerTriggers\n    };\n\n    for (const extension of extensions) {\n      const passThroughProps = extension.getSubLayerProps.call(this, extension);\n\n      if (passThroughProps) {\n        Object.assign(newProps, passThroughProps, {\n          updateTriggers: Object.assign(newProps.updateTriggers, passThroughProps.updateTriggers)\n        });\n      }\n    }\n\n    return newProps;\n  }\n\n  _updateAutoHighlight(info) {\n    for (const layer of this.getSubLayers()) {\n      layer.updateAutoHighlight(info);\n    }\n  }\n\n  _getAttributeManager() {\n    return null;\n  }\n\n  _postUpdate(updateParams, forceUpdate) {\n    let subLayers = this.internalState.subLayers;\n    const shouldUpdate = !subLayers || this.needsUpdate();\n\n    if (shouldUpdate) {\n      const subLayersList = this.renderLayers();\n      subLayers = flatten(subLayersList, Boolean);\n      this.internalState.subLayers = subLayers;\n    }\n\n    debug(TRACE_RENDER_LAYERS, this, shouldUpdate, subLayers);\n\n    for (const layer of subLayers) {\n      layer.parent = this;\n    }\n  }\n\n}\n\n_defineProperty(CompositeLayer, \"layerName\", 'CompositeLayer');\n//# sourceMappingURL=composite-layer.js.map","export default \"#define SHADER_NAME icon-layer-vertex-shader\\n\\nattribute vec2 positions;\\n\\nattribute vec3 instancePositions;\\nattribute vec3 instancePositions64Low;\\nattribute float instanceSizes;\\nattribute float instanceAngles;\\nattribute vec4 instanceColors;\\nattribute vec3 instancePickingColors;\\nattribute vec4 instanceIconFrames;\\nattribute float instanceColorModes;\\nattribute vec2 instanceOffsets;\\nattribute vec2 instancePixelOffset;\\n\\nuniform float sizeScale;\\nuniform vec2 iconsTextureDim;\\nuniform float sizeMinPixels;\\nuniform float sizeMaxPixels;\\nuniform bool billboard;\\nuniform int sizeUnits;\\n\\nvarying float vColorMode;\\nvarying vec4 vColor;\\nvarying vec2 vTextureCoords;\\nvarying vec2 uv;\\n\\nvec2 rotate_by_angle(vec2 vertex, float angle) {\\n  float angle_radian = angle * PI / 180.0;\\n  float cos_angle = cos(angle_radian);\\n  float sin_angle = sin(angle_radian);\\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\\n  return rotationMatrix * vertex;\\n}\\n\\nvoid main(void) {\\n  geometry.worldPosition = instancePositions;\\n  geometry.uv = positions;\\n  geometry.pickingColor = instancePickingColors;\\n  uv = positions;\\n\\n  vec2 iconSize = instanceIconFrames.zw;\\n  float sizePixels = clamp(\\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \\n    sizeMinPixels, sizeMaxPixels\\n  );\\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\\n  pixelOffset += instancePixelOffset;\\n  pixelOffset.y *= -1.0;\\n\\n  if (billboard)  {\\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n    vec3 offset = vec3(pixelOffset, 0.0);\\n    DECKGL_FILTER_SIZE(offset, geometry);\\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\\n\\n  } else {\\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\\n    DECKGL_FILTER_SIZE(offset_common, geometry);\\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n  }\\n\\n  vTextureCoords = mix(\\n    instanceIconFrames.xy,\\n    instanceIconFrames.xy + iconSize,\\n    (positions.xy + 1.0) / 2.0\\n  ) / iconsTextureDim;\\n\\n  vColor = instanceColors;\\n  DECKGL_FILTER_COLOR(vColor, geometry);\\n\\n  vColorMode = instanceColorModes;\\n}\\n\";\n//# sourceMappingURL=icon-layer-vertex.glsl.js.map","export default \"#define SHADER_NAME icon-layer-fragment-shader\\n\\nprecision highp float;\\n\\nuniform float opacity;\\nuniform sampler2D iconsTexture;\\nuniform float alphaCutoff;\\n\\nvarying float vColorMode;\\nvarying vec4 vColor;\\nvarying vec2 vTextureCoords;\\nvarying vec2 uv;\\n\\nvoid main(void) {\\n  geometry.uv = uv;\\n\\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\\n  float a = texColor.a * opacity * vColor.a;\\n\\n  if (a < alphaCutoff) {\\n    discard;\\n  }\\n\\n  gl_FragColor = vec4(color, a);\\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\\n}\\n\";\n//# sourceMappingURL=icon-layer-fragment.glsl.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Texture2D, copyToTexture } from '@luma.gl/core';\nimport { load } from '@loaders.gl/core';\nimport { createIterable } from '@deck.gl/core';\nconst DEFAULT_CANVAS_WIDTH = 1024;\nconst DEFAULT_BUFFER = 4;\n\nconst noop = () => {};\n\nconst DEFAULT_TEXTURE_PARAMETERS = {\n  [10241]: 9987,\n  [10240]: 9729,\n  [10242]: 33071,\n  [10243]: 33071\n};\n\nfunction nextPowOfTwo(number) {\n  return Math.pow(2, Math.ceil(Math.log2(number)));\n}\n\nfunction resizeImage(ctx, imageData, maxWidth, maxHeight) {\n  const resizeRatio = Math.min(maxWidth / imageData.width, maxHeight / imageData.height);\n  const width = Math.floor(imageData.width * resizeRatio);\n  const height = Math.floor(imageData.height * resizeRatio);\n\n  if (resizeRatio === 1) {\n    return {\n      data: imageData,\n      width,\n      height\n    };\n  }\n\n  ctx.canvas.height = height;\n  ctx.canvas.width = width;\n  ctx.clearRect(0, 0, width, height);\n  ctx.drawImage(imageData, 0, 0, imageData.width, imageData.height, 0, 0, width, height);\n  return {\n    data: ctx.canvas,\n    width,\n    height\n  };\n}\n\nfunction getIconId(icon) {\n  return icon && (icon.id || icon.url);\n}\n\nfunction resizeTexture(texture, width, height, parameters) {\n  const oldWidth = texture.width;\n  const oldHeight = texture.height;\n  const newTexture = new Texture2D(texture.gl, {\n    width,\n    height,\n    parameters\n  });\n  copyToTexture(texture, newTexture, {\n    targetY: 0,\n    width: oldWidth,\n    height: oldHeight\n  });\n  texture.delete();\n  return newTexture;\n}\n\nfunction buildRowMapping(mapping, columns, yOffset) {\n  for (let i = 0; i < columns.length; i++) {\n    const {\n      icon,\n      xOffset\n    } = columns[i];\n    const id = getIconId(icon);\n    mapping[id] = { ...icon,\n      x: xOffset,\n      y: yOffset\n    };\n  }\n}\n\nexport function buildMapping({\n  icons,\n  buffer,\n  mapping = {},\n  xOffset = 0,\n  yOffset = 0,\n  rowHeight = 0,\n  canvasWidth\n}) {\n  let columns = [];\n\n  for (let i = 0; i < icons.length; i++) {\n    const icon = icons[i];\n    const id = getIconId(icon);\n\n    if (!mapping[id]) {\n      const {\n        height,\n        width\n      } = icon;\n\n      if (xOffset + width + buffer > canvasWidth) {\n        buildRowMapping(mapping, columns, yOffset);\n        xOffset = 0;\n        yOffset = rowHeight + yOffset + buffer;\n        rowHeight = 0;\n        columns = [];\n      }\n\n      columns.push({\n        icon,\n        xOffset\n      });\n      xOffset = xOffset + width + buffer;\n      rowHeight = Math.max(rowHeight, height);\n    }\n  }\n\n  if (columns.length > 0) {\n    buildRowMapping(mapping, columns, yOffset);\n  }\n\n  return {\n    mapping,\n    rowHeight,\n    xOffset,\n    yOffset,\n    canvasWidth,\n    canvasHeight: nextPowOfTwo(rowHeight + yOffset + buffer)\n  };\n}\nexport function getDiffIcons(data, getIcon, cachedIcons) {\n  if (!data || !getIcon) {\n    return null;\n  }\n\n  cachedIcons = cachedIcons || {};\n  const icons = {};\n  const {\n    iterable,\n    objectInfo\n  } = createIterable(data);\n\n  for (const object of iterable) {\n    objectInfo.index++;\n    const icon = getIcon(object, objectInfo);\n    const id = getIconId(icon);\n\n    if (!icon) {\n      throw new Error('Icon is missing.');\n    }\n\n    if (!icon.url) {\n      throw new Error('Icon url is missing.');\n    }\n\n    if (!icons[id] && (!cachedIcons[id] || icon.url !== cachedIcons[id].url)) {\n      icons[id] = { ...icon,\n        source: object,\n        sourceIndex: objectInfo.index\n      };\n    }\n  }\n\n  return icons;\n}\nexport default class IconManager {\n  constructor(gl, {\n    onUpdate = noop,\n    onError = noop\n  }) {\n    _defineProperty(this, \"gl\", void 0);\n\n    _defineProperty(this, \"onUpdate\", void 0);\n\n    _defineProperty(this, \"onError\", void 0);\n\n    _defineProperty(this, \"_loadOptions\", null);\n\n    _defineProperty(this, \"_texture\", null);\n\n    _defineProperty(this, \"_externalTexture\", null);\n\n    _defineProperty(this, \"_mapping\", {});\n\n    _defineProperty(this, \"_textureParameters\", null);\n\n    _defineProperty(this, \"_pendingCount\", 0);\n\n    _defineProperty(this, \"_autoPacking\", false);\n\n    _defineProperty(this, \"_xOffset\", 0);\n\n    _defineProperty(this, \"_yOffset\", 0);\n\n    _defineProperty(this, \"_rowHeight\", 0);\n\n    _defineProperty(this, \"_buffer\", DEFAULT_BUFFER);\n\n    _defineProperty(this, \"_canvasWidth\", DEFAULT_CANVAS_WIDTH);\n\n    _defineProperty(this, \"_canvasHeight\", 0);\n\n    _defineProperty(this, \"_canvas\", null);\n\n    this.gl = gl;\n    this.onUpdate = onUpdate;\n    this.onError = onError;\n  }\n\n  finalize() {\n    var _this$_texture;\n\n    (_this$_texture = this._texture) === null || _this$_texture === void 0 ? void 0 : _this$_texture.delete();\n  }\n\n  getTexture() {\n    return this._texture || this._externalTexture;\n  }\n\n  getIconMapping(icon) {\n    const id = this._autoPacking ? getIconId(icon) : icon;\n    return this._mapping[id] || {};\n  }\n\n  setProps({\n    loadOptions,\n    autoPacking,\n    iconAtlas,\n    iconMapping,\n    textureParameters\n  }) {\n    if (loadOptions) {\n      this._loadOptions = loadOptions;\n    }\n\n    if (autoPacking !== undefined) {\n      this._autoPacking = autoPacking;\n    }\n\n    if (iconMapping) {\n      this._mapping = iconMapping;\n    }\n\n    if (iconAtlas) {\n      var _this$_texture2;\n\n      (_this$_texture2 = this._texture) === null || _this$_texture2 === void 0 ? void 0 : _this$_texture2.delete();\n      this._texture = null;\n      this._externalTexture = iconAtlas;\n    }\n\n    if (textureParameters) {\n      this._textureParameters = textureParameters;\n    }\n  }\n\n  get isLoaded() {\n    return this._pendingCount === 0;\n  }\n\n  packIcons(data, getIcon) {\n    if (!this._autoPacking || typeof document === 'undefined') {\n      return;\n    }\n\n    const icons = Object.values(getDiffIcons(data, getIcon, this._mapping) || {});\n\n    if (icons.length > 0) {\n      const {\n        mapping,\n        xOffset,\n        yOffset,\n        rowHeight,\n        canvasHeight\n      } = buildMapping({\n        icons,\n        buffer: this._buffer,\n        canvasWidth: this._canvasWidth,\n        mapping: this._mapping,\n        rowHeight: this._rowHeight,\n        xOffset: this._xOffset,\n        yOffset: this._yOffset\n      });\n      this._rowHeight = rowHeight;\n      this._mapping = mapping;\n      this._xOffset = xOffset;\n      this._yOffset = yOffset;\n      this._canvasHeight = canvasHeight;\n\n      if (!this._texture) {\n        this._texture = new Texture2D(this.gl, {\n          width: this._canvasWidth,\n          height: this._canvasHeight,\n          parameters: this._textureParameters || DEFAULT_TEXTURE_PARAMETERS\n        });\n      }\n\n      if (this._texture.height !== this._canvasHeight) {\n        this._texture = resizeTexture(this._texture, this._canvasWidth, this._canvasHeight, this._textureParameters || DEFAULT_TEXTURE_PARAMETERS);\n      }\n\n      this.onUpdate();\n      this._canvas = this._canvas || document.createElement('canvas');\n\n      this._loadIcons(icons);\n    }\n  }\n\n  _loadIcons(icons) {\n    const ctx = this._canvas.getContext('2d', {\n      willReadFrequently: true\n    });\n\n    for (const icon of icons) {\n      this._pendingCount++;\n      load(icon.url, this._loadOptions).then(imageData => {\n        const id = getIconId(icon);\n        const iconDef = this._mapping[id];\n        const {\n          x,\n          y,\n          width: maxWidth,\n          height: maxHeight\n        } = iconDef;\n        const {\n          data,\n          width,\n          height\n        } = resizeImage(ctx, imageData, maxWidth, maxHeight);\n\n        this._texture.setSubImageData({\n          data,\n          x: x + (maxWidth - width) / 2,\n          y: y + (maxHeight - height) / 2,\n          width,\n          height\n        });\n\n        iconDef.width = width;\n        iconDef.height = height;\n\n        this._texture.generateMipmap();\n\n        this.onUpdate();\n      }).catch(error => {\n        this.onError({\n          url: icon.url,\n          source: icon.source,\n          sourceIndex: icon.sourceIndex,\n          loadOptions: this._loadOptions,\n          error\n        });\n      }).finally(() => {\n        this._pendingCount--;\n      });\n    }\n  }\n\n}\n//# sourceMappingURL=icon-manager.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Layer, project32, picking, log, UNIT } from '@deck.gl/core';\nimport { Model, Geometry } from '@luma.gl/core';\nimport vs from './icon-layer-vertex.glsl';\nimport fs from './icon-layer-fragment.glsl';\nimport IconManager from './icon-manager';\nconst DEFAULT_COLOR = [0, 0, 0, 255];\nconst defaultProps = {\n  iconAtlas: {\n    type: 'image',\n    value: null,\n    async: true\n  },\n  iconMapping: {\n    type: 'object',\n    value: {},\n    async: true\n  },\n  sizeScale: {\n    type: 'number',\n    value: 1,\n    min: 0\n  },\n  billboard: true,\n  sizeUnits: 'pixels',\n  sizeMinPixels: {\n    type: 'number',\n    min: 0,\n    value: 0\n  },\n  sizeMaxPixels: {\n    type: 'number',\n    min: 0,\n    value: Number.MAX_SAFE_INTEGER\n  },\n  alphaCutoff: {\n    type: 'number',\n    value: 0.05,\n    min: 0,\n    max: 1\n  },\n  getPosition: {\n    type: 'accessor',\n    value: x => x.position\n  },\n  getIcon: {\n    type: 'accessor',\n    value: x => x.icon\n  },\n  getColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getSize: {\n    type: 'accessor',\n    value: 1\n  },\n  getAngle: {\n    type: 'accessor',\n    value: 0\n  },\n  getPixelOffset: {\n    type: 'accessor',\n    value: [0, 0]\n  },\n  onIconError: {\n    type: 'function',\n    value: null,\n    optional: true\n  },\n  textureParameters: {\n    type: 'object',\n    ignore: true\n  }\n};\nexport default class IconLayer extends Layer {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", void 0);\n  }\n\n  getShaders() {\n    return super.getShaders({\n      vs,\n      fs,\n      modules: [project32, picking]\n    });\n  }\n\n  initializeState() {\n    this.state = {\n      iconManager: new IconManager(this.context.gl, {\n        onUpdate: this._onUpdate.bind(this),\n        onError: this._onError.bind(this)\n      })\n    };\n    const attributeManager = this.getAttributeManager();\n    attributeManager.addInstanced({\n      instancePositions: {\n        size: 3,\n        type: 5130,\n        fp64: this.use64bitPositions(),\n        transition: true,\n        accessor: 'getPosition'\n      },\n      instanceSizes: {\n        size: 1,\n        transition: true,\n        accessor: 'getSize',\n        defaultValue: 1\n      },\n      instanceOffsets: {\n        size: 2,\n        accessor: 'getIcon',\n        transform: this.getInstanceOffset\n      },\n      instanceIconFrames: {\n        size: 4,\n        accessor: 'getIcon',\n        transform: this.getInstanceIconFrame\n      },\n      instanceColorModes: {\n        size: 1,\n        type: 5121,\n        accessor: 'getIcon',\n        transform: this.getInstanceColorMode\n      },\n      instanceColors: {\n        size: this.props.colorFormat.length,\n        type: 5121,\n        normalized: true,\n        transition: true,\n        accessor: 'getColor',\n        defaultValue: DEFAULT_COLOR\n      },\n      instanceAngles: {\n        size: 1,\n        transition: true,\n        accessor: 'getAngle'\n      },\n      instancePixelOffset: {\n        size: 2,\n        transition: true,\n        accessor: 'getPixelOffset'\n      }\n    });\n  }\n\n  updateState(params) {\n    super.updateState(params);\n    const {\n      props,\n      oldProps,\n      changeFlags\n    } = params;\n    const attributeManager = this.getAttributeManager();\n    const {\n      iconAtlas,\n      iconMapping,\n      data,\n      getIcon,\n      textureParameters\n    } = props;\n    const {\n      iconManager\n    } = this.state;\n    const prePacked = iconAtlas || this.internalState.isAsyncPropLoading('iconAtlas');\n    iconManager.setProps({\n      loadOptions: props.loadOptions,\n      autoPacking: !prePacked,\n      iconAtlas,\n      iconMapping: prePacked ? iconMapping : null,\n      textureParameters\n    });\n\n    if (prePacked) {\n      if (oldProps.iconMapping !== props.iconMapping) {\n        attributeManager.invalidate('getIcon');\n      }\n    } else if (changeFlags.dataChanged || changeFlags.updateTriggersChanged && (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged.getIcon)) {\n      iconManager.packIcons(data, getIcon);\n    }\n\n    if (changeFlags.extensionsChanged) {\n      var _this$state$model;\n\n      const {\n        gl\n      } = this.context;\n      (_this$state$model = this.state.model) === null || _this$state$model === void 0 ? void 0 : _this$state$model.delete();\n      this.state.model = this._getModel(gl);\n      attributeManager.invalidateAll();\n    }\n  }\n\n  get isLoaded() {\n    return super.isLoaded && this.state.iconManager.isLoaded;\n  }\n\n  finalizeState(context) {\n    super.finalizeState(context);\n    this.state.iconManager.finalize();\n  }\n\n  draw({\n    uniforms\n  }) {\n    const {\n      sizeScale,\n      sizeMinPixels,\n      sizeMaxPixels,\n      sizeUnits,\n      billboard,\n      alphaCutoff\n    } = this.props;\n    const {\n      iconManager\n    } = this.state;\n    const iconsTexture = iconManager.getTexture();\n\n    if (iconsTexture) {\n      this.state.model.setUniforms(uniforms).setUniforms({\n        iconsTexture,\n        iconsTextureDim: [iconsTexture.width, iconsTexture.height],\n        sizeUnits: UNIT[sizeUnits],\n        sizeScale,\n        sizeMinPixels,\n        sizeMaxPixels,\n        billboard,\n        alphaCutoff\n      }).draw();\n    }\n  }\n\n  _getModel(gl) {\n    const positions = [-1, -1, -1, 1, 1, 1, 1, -1];\n    return new Model(gl, { ...this.getShaders(),\n      id: this.props.id,\n      geometry: new Geometry({\n        drawMode: 6,\n        attributes: {\n          positions: {\n            size: 2,\n            value: new Float32Array(positions)\n          }\n        }\n      }),\n      isInstanced: true\n    });\n  }\n\n  _onUpdate() {\n    this.setNeedsRedraw();\n  }\n\n  _onError(evt) {\n    var _this$getCurrentLayer;\n\n    const onIconError = (_this$getCurrentLayer = this.getCurrentLayer()) === null || _this$getCurrentLayer === void 0 ? void 0 : _this$getCurrentLayer.props.onIconError;\n\n    if (onIconError) {\n      onIconError(evt);\n    } else {\n      log.error(evt.error.message)();\n    }\n  }\n\n  getInstanceOffset(icon) {\n    const {\n      width,\n      height,\n      anchorX = width / 2,\n      anchorY = height / 2\n    } = this.state.iconManager.getIconMapping(icon);\n    return [width / 2 - anchorX, height / 2 - anchorY];\n  }\n\n  getInstanceColorMode(icon) {\n    const mapping = this.state.iconManager.getIconMapping(icon);\n    return mapping.mask ? 1 : 0;\n  }\n\n  getInstanceIconFrame(icon) {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.state.iconManager.getIconMapping(icon);\n    return [x, y, width, height];\n  }\n\n}\n\n_defineProperty(IconLayer, \"defaultProps\", defaultProps);\n\n_defineProperty(IconLayer, \"layerName\", 'IconLayer');\n//# sourceMappingURL=icon-layer.js.map","export default \"#define SHADER_NAME scatterplot-layer-vertex-shader\\n\\nattribute vec3 positions;\\n\\nattribute vec3 instancePositions;\\nattribute vec3 instancePositions64Low;\\nattribute float instanceRadius;\\nattribute float instanceLineWidths;\\nattribute vec4 instanceFillColors;\\nattribute vec4 instanceLineColors;\\nattribute vec3 instancePickingColors;\\n\\nuniform float opacity;\\nuniform float radiusScale;\\nuniform float radiusMinPixels;\\nuniform float radiusMaxPixels;\\nuniform float lineWidthScale;\\nuniform float lineWidthMinPixels;\\nuniform float lineWidthMaxPixels;\\nuniform float stroked;\\nuniform bool filled;\\nuniform bool antialiasing;\\nuniform bool billboard;\\nuniform int radiusUnits;\\nuniform int lineWidthUnits;\\n\\nvarying vec4 vFillColor;\\nvarying vec4 vLineColor;\\nvarying vec2 unitPosition;\\nvarying float innerUnitRadius;\\nvarying float outerRadiusPixels;\\n\\n\\nvoid main(void) {\\n  geometry.worldPosition = instancePositions;\\n  outerRadiusPixels = clamp(\\n    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\\n    radiusMinPixels, radiusMaxPixels\\n  );\\n  float lineWidthPixels = clamp(\\n    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\\n    lineWidthMinPixels, lineWidthMaxPixels\\n  );\\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\\n  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\\n  unitPosition = edgePadding * positions.xy;\\n  geometry.uv = unitPosition;\\n  geometry.pickingColor = instancePickingColors;\\n\\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\\n  \\n  if (billboard) {\\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n    vec3 offset = edgePadding * positions * outerRadiusPixels;\\n    DECKGL_FILTER_SIZE(offset, geometry);\\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\\n  } else {\\n    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\\n    DECKGL_FILTER_SIZE(offset, geometry);\\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n  }\\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\\n}\\n\";\n//# sourceMappingURL=scatterplot-layer-vertex.glsl.js.map","export default \"#define SHADER_NAME scatterplot-layer-fragment-shader\\n\\nprecision highp float;\\n\\nuniform bool filled;\\nuniform float stroked;\\nuniform bool antialiasing;\\n\\nvarying vec4 vFillColor;\\nvarying vec4 vLineColor;\\nvarying vec2 unitPosition;\\nvarying float innerUnitRadius;\\nvarying float outerRadiusPixels;\\n\\nvoid main(void) {\\n  geometry.uv = unitPosition;\\n\\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\\n  float inCircle = antialiasing ? \\n    smoothedge(distToCenter, outerRadiusPixels) : \\n    step(distToCenter, outerRadiusPixels);\\n\\n  if (inCircle == 0.0) {\\n    discard;\\n  }\\n\\n  if (stroked > 0.5) {\\n    float isLine = antialiasing ? \\n      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\\n      step(innerUnitRadius * outerRadiusPixels, distToCenter);\\n\\n    if (filled) {\\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\\n    } else {\\n      if (isLine == 0.0) {\\n        discard;\\n      }\\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\\n    }\\n  } else if (filled) {\\n    gl_FragColor = vFillColor;\\n  } else {\\n    discard;\\n  }\\n\\n  gl_FragColor.a *= inCircle;\\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\\n}\\n\";\n//# sourceMappingURL=scatterplot-layer-fragment.glsl.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Layer, project32, picking, UNIT } from '@deck.gl/core';\nimport { Model, Geometry } from '@luma.gl/core';\nimport vs from './scatterplot-layer-vertex.glsl';\nimport fs from './scatterplot-layer-fragment.glsl';\nconst DEFAULT_COLOR = [0, 0, 0, 255];\nconst defaultProps = {\n  radiusUnits: 'meters',\n  radiusScale: {\n    type: 'number',\n    min: 0,\n    value: 1\n  },\n  radiusMinPixels: {\n    type: 'number',\n    min: 0,\n    value: 0\n  },\n  radiusMaxPixels: {\n    type: 'number',\n    min: 0,\n    value: Number.MAX_SAFE_INTEGER\n  },\n  lineWidthUnits: 'meters',\n  lineWidthScale: {\n    type: 'number',\n    min: 0,\n    value: 1\n  },\n  lineWidthMinPixels: {\n    type: 'number',\n    min: 0,\n    value: 0\n  },\n  lineWidthMaxPixels: {\n    type: 'number',\n    min: 0,\n    value: Number.MAX_SAFE_INTEGER\n  },\n  stroked: false,\n  filled: true,\n  billboard: false,\n  antialiasing: true,\n  getPosition: {\n    type: 'accessor',\n    value: x => x.position\n  },\n  getRadius: {\n    type: 'accessor',\n    value: 1\n  },\n  getFillColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getLineColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getLineWidth: {\n    type: 'accessor',\n    value: 1\n  },\n  strokeWidth: {\n    deprecatedFor: 'getLineWidth'\n  },\n  outline: {\n    deprecatedFor: 'stroked'\n  },\n  getColor: {\n    deprecatedFor: ['getFillColor', 'getLineColor']\n  }\n};\nexport default class ScatterplotLayer extends Layer {\n  getShaders() {\n    return super.getShaders({\n      vs,\n      fs,\n      modules: [project32, picking]\n    });\n  }\n\n  initializeState() {\n    this.getAttributeManager().addInstanced({\n      instancePositions: {\n        size: 3,\n        type: 5130,\n        fp64: this.use64bitPositions(),\n        transition: true,\n        accessor: 'getPosition'\n      },\n      instanceRadius: {\n        size: 1,\n        transition: true,\n        accessor: 'getRadius',\n        defaultValue: 1\n      },\n      instanceFillColors: {\n        size: this.props.colorFormat.length,\n        transition: true,\n        normalized: true,\n        type: 5121,\n        accessor: 'getFillColor',\n        defaultValue: [0, 0, 0, 255]\n      },\n      instanceLineColors: {\n        size: this.props.colorFormat.length,\n        transition: true,\n        normalized: true,\n        type: 5121,\n        accessor: 'getLineColor',\n        defaultValue: [0, 0, 0, 255]\n      },\n      instanceLineWidths: {\n        size: 1,\n        transition: true,\n        accessor: 'getLineWidth',\n        defaultValue: 1\n      }\n    });\n  }\n\n  updateState(params) {\n    super.updateState(params);\n\n    if (params.changeFlags.extensionsChanged) {\n      var _this$state$model;\n\n      const {\n        gl\n      } = this.context;\n      (_this$state$model = this.state.model) === null || _this$state$model === void 0 ? void 0 : _this$state$model.delete();\n      this.state.model = this._getModel(gl);\n      this.getAttributeManager().invalidateAll();\n    }\n  }\n\n  draw({\n    uniforms\n  }) {\n    const {\n      radiusUnits,\n      radiusScale,\n      radiusMinPixels,\n      radiusMaxPixels,\n      stroked,\n      filled,\n      billboard,\n      antialiasing,\n      lineWidthUnits,\n      lineWidthScale,\n      lineWidthMinPixels,\n      lineWidthMaxPixels\n    } = this.props;\n    this.state.model.setUniforms(uniforms).setUniforms({\n      stroked: stroked ? 1 : 0,\n      filled,\n      billboard,\n      antialiasing,\n      radiusUnits: UNIT[radiusUnits],\n      radiusScale,\n      radiusMinPixels,\n      radiusMaxPixels,\n      lineWidthUnits: UNIT[lineWidthUnits],\n      lineWidthScale,\n      lineWidthMinPixels,\n      lineWidthMaxPixels\n    }).draw();\n  }\n\n  _getModel(gl) {\n    const positions = [-1, -1, 0, 1, -1, 0, 1, 1, 0, -1, 1, 0];\n    return new Model(gl, { ...this.getShaders(),\n      id: this.props.id,\n      geometry: new Geometry({\n        drawMode: 6,\n        vertexCount: 4,\n        attributes: {\n          positions: {\n            size: 3,\n            value: new Float32Array(positions)\n          }\n        }\n      }),\n      isInstanced: true\n    });\n  }\n\n}\n\n_defineProperty(ScatterplotLayer, \"defaultProps\", defaultProps);\n\n_defineProperty(ScatterplotLayer, \"layerName\", 'ScatterplotLayer');\n//# sourceMappingURL=scatterplot-layer.js.map","export default \"#define SHADER_NAME multi-icon-layer-fragment-shader\\n\\nprecision highp float;\\n\\nuniform float opacity;\\nuniform sampler2D iconsTexture;\\nuniform float gamma;\\nuniform bool sdf;\\nuniform float alphaCutoff;\\nuniform float sdfBuffer;\\nuniform float outlineBuffer;\\nuniform vec4 outlineColor;\\n\\nvarying vec4 vColor;\\nvarying vec2 vTextureCoords;\\nvarying vec2 uv;\\n\\nvoid main(void) {\\n  geometry.uv = uv;\\n\\n  if (!picking_uActive) {\\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\\n    vec4 color = vColor;\\n    if (sdf) {\\n      float distance = alpha;\\n      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\\n\\n      if (outlineBuffer > 0.0) {\\n        float inFill = alpha;\\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\\n        color = mix(outlineColor, vColor, inFill);\\n        alpha = inBorder;\\n      }\\n    }\\n    float a = alpha * color.a;\\n    \\n    if (a < alphaCutoff) {\\n      discard;\\n    }\\n\\n    gl_FragColor = vec4(color.rgb, a * opacity);\\n  }\\n\\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\\n}\\n\";\n//# sourceMappingURL=multi-icon-layer-fragment.glsl.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { log } from '@deck.gl/core';\nimport IconLayer from '../../icon-layer/icon-layer';\nimport fs from './multi-icon-layer-fragment.glsl';\nconst DEFAULT_BUFFER = 192.0 / 256;\nconst EMPTY_ARRAY = [];\nconst defaultProps = {\n  getIconOffsets: {\n    type: 'accessor',\n    value: x => x.offsets\n  },\n  alphaCutoff: 0.001,\n  smoothing: 0.1,\n  outlineWidth: 0,\n  outlineColor: {\n    type: 'color',\n    value: [0, 0, 0, 255]\n  }\n};\nexport default class MultiIconLayer extends IconLayer {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", void 0);\n  }\n\n  getShaders() {\n    return { ...super.getShaders(),\n      fs\n    };\n  }\n\n  initializeState() {\n    super.initializeState();\n    const attributeManager = this.getAttributeManager();\n    attributeManager.addInstanced({\n      instanceOffsets: {\n        size: 2,\n        accessor: 'getIconOffsets'\n      },\n      instancePickingColors: {\n        type: 5121,\n        size: 3,\n        accessor: (object, {\n          index,\n          target: value\n        }) => this.encodePickingColor(index, value)\n      }\n    });\n  }\n\n  updateState(params) {\n    super.updateState(params);\n    const {\n      props,\n      oldProps\n    } = params;\n    let {\n      outlineColor\n    } = props;\n\n    if (outlineColor !== oldProps.outlineColor) {\n      outlineColor = outlineColor.map(x => x / 255);\n      outlineColor[3] = Number.isFinite(outlineColor[3]) ? outlineColor[3] : 1;\n      this.setState({\n        outlineColor\n      });\n    }\n\n    if (!props.sdf && props.outlineWidth) {\n      log.warn(\"\".concat(this.id, \": fontSettings.sdf is required to render outline\"))();\n    }\n  }\n\n  draw(params) {\n    const {\n      sdf,\n      smoothing,\n      outlineWidth\n    } = this.props;\n    const {\n      outlineColor\n    } = this.state;\n    const outlineBuffer = outlineWidth ? Math.max(smoothing, DEFAULT_BUFFER * (1 - outlineWidth)) : -1;\n    params.uniforms = { ...params.uniforms,\n      sdfBuffer: DEFAULT_BUFFER,\n      outlineBuffer,\n      gamma: smoothing,\n      sdf: Boolean(sdf),\n      outlineColor\n    };\n    super.draw(params);\n\n    if (sdf && outlineWidth) {\n      const {\n        iconManager\n      } = this.state;\n      const iconsTexture = iconManager.getTexture();\n\n      if (iconsTexture) {\n        this.state.model.draw({\n          uniforms: {\n            outlineBuffer: DEFAULT_BUFFER\n          }\n        });\n      }\n    }\n  }\n\n  getInstanceOffset(icons) {\n    return icons ? Array.from(icons).flatMap(icon => super.getInstanceOffset(icon)) : EMPTY_ARRAY;\n  }\n\n  getInstanceColorMode(icons) {\n    return 1;\n  }\n\n  getInstanceIconFrame(icons) {\n    return icons ? Array.from(icons).flatMap(icon => super.getInstanceIconFrame(icon)) : EMPTY_ARRAY;\n  }\n\n}\n\n_defineProperty(MultiIconLayer, \"defaultProps\", defaultProps);\n\n_defineProperty(MultiIconLayer, \"layerName\", 'MultiIconLayer');\n//# sourceMappingURL=multi-icon-layer.js.map","const INF = 1e20;\n\nexport default class TinySDF {\n    constructor({\n        fontSize = 24,\n        buffer = 3,\n        radius = 8,\n        cutoff = 0.25,\n        fontFamily = 'sans-serif',\n        fontWeight = 'normal',\n        fontStyle = 'normal'\n    } = {}) {\n        this.buffer = buffer;\n        this.cutoff = cutoff;\n        this.radius = radius;\n\n        // make the canvas size big enough to both have the specified buffer around the glyph\n        // for \"halo\", and account for some glyphs possibly being larger than their font size\n        const size = this.size = fontSize + buffer * 4;\n\n        const canvas = this._createCanvas(size);\n        const ctx = this.ctx = canvas.getContext('2d', {willReadFrequently: true});\n        ctx.font = `${fontStyle} ${fontWeight} ${fontSize}px ${fontFamily}`;\n\n        ctx.textBaseline = 'alphabetic';\n        ctx.textAlign = 'left'; // Necessary so that RTL text doesn't have different alignment\n        ctx.fillStyle = 'black';\n\n        // temporary arrays for the distance transform\n        this.gridOuter = new Float64Array(size * size);\n        this.gridInner = new Float64Array(size * size);\n        this.f = new Float64Array(size);\n        this.z = new Float64Array(size + 1);\n        this.v = new Uint16Array(size);\n    }\n\n    _createCanvas(size) {\n        const canvas = document.createElement('canvas');\n        canvas.width = canvas.height = size;\n        return canvas;\n    }\n\n    draw(char) {\n        const {\n            width: glyphAdvance,\n            actualBoundingBoxAscent,\n            actualBoundingBoxDescent,\n            actualBoundingBoxLeft,\n            actualBoundingBoxRight\n        } = this.ctx.measureText(char);\n\n        // The integer/pixel part of the top alignment is encoded in metrics.glyphTop\n        // The remainder is implicitly encoded in the rasterization\n        const glyphTop = Math.ceil(actualBoundingBoxAscent);\n        const glyphLeft = 0;\n\n        // If the glyph overflows the canvas size, it will be clipped at the bottom/right\n        const glyphWidth = Math.max(0, Math.min(this.size - this.buffer, Math.ceil(actualBoundingBoxRight - actualBoundingBoxLeft)));\n        const glyphHeight = Math.min(this.size - this.buffer, glyphTop + Math.ceil(actualBoundingBoxDescent));\n\n        const width = glyphWidth + 2 * this.buffer;\n        const height = glyphHeight + 2 * this.buffer;\n\n        const len = Math.max(width * height, 0);\n        const data = new Uint8ClampedArray(len);\n        const glyph = {data, width, height, glyphWidth, glyphHeight, glyphTop, glyphLeft, glyphAdvance};\n        if (glyphWidth === 0 || glyphHeight === 0) return glyph;\n\n        const {ctx, buffer, gridInner, gridOuter} = this;\n        ctx.clearRect(buffer, buffer, glyphWidth, glyphHeight);\n        ctx.fillText(char, buffer, buffer + glyphTop);\n        const imgData = ctx.getImageData(buffer, buffer, glyphWidth, glyphHeight);\n\n        // Initialize grids outside the glyph range to alpha 0\n        gridOuter.fill(INF, 0, len);\n        gridInner.fill(0, 0, len);\n\n        for (let y = 0; y < glyphHeight; y++) {\n            for (let x = 0; x < glyphWidth; x++) {\n                const a = imgData.data[4 * (y * glyphWidth + x) + 3] / 255; // alpha value\n                if (a === 0) continue; // empty pixels\n\n                const j = (y + buffer) * width + x + buffer;\n\n                if (a === 1) { // fully drawn pixels\n                    gridOuter[j] = 0;\n                    gridInner[j] = INF;\n\n                } else { // aliased pixels\n                    const d = 0.5 - a;\n                    gridOuter[j] = d > 0 ? d * d : 0;\n                    gridInner[j] = d < 0 ? d * d : 0;\n                }\n            }\n        }\n\n        edt(gridOuter, 0, 0, width, height, width, this.f, this.v, this.z);\n        edt(gridInner, buffer, buffer, glyphWidth, glyphHeight, width, this.f, this.v, this.z);\n\n        for (let i = 0; i < len; i++) {\n            const d = Math.sqrt(gridOuter[i]) - Math.sqrt(gridInner[i]);\n            data[i] = Math.round(255 - 255 * (d / this.radius + this.cutoff));\n        }\n\n        return glyph;\n    }\n}\n\n// 2D Euclidean squared distance transform by Felzenszwalb & Huttenlocher https://cs.brown.edu/~pff/papers/dt-final.pdf\nfunction edt(data, x0, y0, width, height, gridSize, f, v, z) {\n    for (let x = x0; x < x0 + width; x++) edt1d(data, y0 * gridSize + x, gridSize, height, f, v, z);\n    for (let y = y0; y < y0 + height; y++) edt1d(data, y * gridSize + x0, 1, width, f, v, z);\n}\n\n// 1D squared distance transform\nfunction edt1d(grid, offset, stride, length, f, v, z) {\n    v[0] = 0;\n    z[0] = -INF;\n    z[1] = INF;\n    f[0] = grid[offset];\n\n    for (let q = 1, k = 0, s = 0; q < length; q++) {\n        f[q] = grid[offset + q * stride];\n        const q2 = q * q;\n        do {\n            const r = v[k];\n            s = (f[q] - f[r] + q2 - r * r) / (q - r) / 2;\n        } while (s <= z[k] && --k > -1);\n\n        k++;\n        v[k] = q;\n        z[k] = s;\n        z[k + 1] = INF;\n    }\n\n    for (let q = 0, k = 0; q < length; q++) {\n        while (z[k + 1] < q) k++;\n        const r = v[k];\n        const qr = q - r;\n        grid[offset + q * stride] = f[r] + qr * qr;\n    }\n}\n","import { log } from '@deck.gl/core';\nconst MISSING_CHAR_WIDTH = 32;\nconst SINGLE_LINE = [];\nexport function nextPowOfTwo(number) {\n  return Math.pow(2, Math.ceil(Math.log2(number)));\n}\nexport function buildMapping({\n  characterSet,\n  getFontWidth,\n  fontHeight,\n  buffer,\n  maxCanvasWidth,\n  mapping = {},\n  xOffset = 0,\n  yOffset = 0\n}) {\n  let row = 0;\n  let x = xOffset;\n  const rowHeight = fontHeight + buffer * 2;\n\n  for (const char of characterSet) {\n    if (!mapping[char]) {\n      const width = getFontWidth(char);\n\n      if (x + width + buffer * 2 > maxCanvasWidth) {\n        x = 0;\n        row++;\n      }\n\n      mapping[char] = {\n        x: x + buffer,\n        y: yOffset + row * rowHeight + buffer,\n        width,\n        height: rowHeight,\n        layoutWidth: width,\n        layoutHeight: fontHeight\n      };\n      x += width + buffer * 2;\n    }\n  }\n\n  return {\n    mapping,\n    xOffset: x,\n    yOffset: yOffset + row * rowHeight,\n    canvasHeight: nextPowOfTwo(yOffset + (row + 1) * rowHeight)\n  };\n}\n\nfunction getTextWidth(text, startIndex, endIndex, mapping) {\n  let width = 0;\n\n  for (let i = startIndex; i < endIndex; i++) {\n    var _mapping$character;\n\n    const character = text[i];\n    width += ((_mapping$character = mapping[character]) === null || _mapping$character === void 0 ? void 0 : _mapping$character.layoutWidth) || 0;\n  }\n\n  return width;\n}\n\nfunction breakAll(text, startIndex, endIndex, maxWidth, iconMapping, target) {\n  let rowStartCharIndex = startIndex;\n  let rowOffsetLeft = 0;\n\n  for (let i = startIndex; i < endIndex; i++) {\n    const textWidth = getTextWidth(text, i, i + 1, iconMapping);\n\n    if (rowOffsetLeft + textWidth > maxWidth) {\n      if (rowStartCharIndex < i) {\n        target.push(i);\n      }\n\n      rowStartCharIndex = i;\n      rowOffsetLeft = 0;\n    }\n\n    rowOffsetLeft += textWidth;\n  }\n\n  return rowOffsetLeft;\n}\n\nfunction breakWord(text, startIndex, endIndex, maxWidth, iconMapping, target) {\n  let rowStartCharIndex = startIndex;\n  let groupStartCharIndex = startIndex;\n  let groupEndCharIndex = startIndex;\n  let rowOffsetLeft = 0;\n\n  for (let i = startIndex; i < endIndex; i++) {\n    if (text[i] === ' ') {\n      groupEndCharIndex = i + 1;\n    } else if (text[i + 1] === ' ' || i + 1 === endIndex) {\n      groupEndCharIndex = i + 1;\n    }\n\n    if (groupEndCharIndex > groupStartCharIndex) {\n      let groupWidth = getTextWidth(text, groupStartCharIndex, groupEndCharIndex, iconMapping);\n\n      if (rowOffsetLeft + groupWidth > maxWidth) {\n        if (rowStartCharIndex < groupStartCharIndex) {\n          target.push(groupStartCharIndex);\n          rowStartCharIndex = groupStartCharIndex;\n          rowOffsetLeft = 0;\n        }\n\n        if (groupWidth > maxWidth) {\n          groupWidth = breakAll(text, groupStartCharIndex, groupEndCharIndex, maxWidth, iconMapping, target);\n          rowStartCharIndex = target[target.length - 1];\n        }\n      }\n\n      groupStartCharIndex = groupEndCharIndex;\n      rowOffsetLeft += groupWidth;\n    }\n  }\n\n  return rowOffsetLeft;\n}\n\nexport function autoWrapping(text, wordBreak, maxWidth, iconMapping, startIndex = 0, endIndex) {\n  if (endIndex === undefined) {\n    endIndex = text.length;\n  }\n\n  const result = [];\n\n  if (wordBreak === 'break-all') {\n    breakAll(text, startIndex, endIndex, maxWidth, iconMapping, result);\n  } else {\n    breakWord(text, startIndex, endIndex, maxWidth, iconMapping, result);\n  }\n\n  return result;\n}\n\nfunction transformRow(line, startIndex, endIndex, iconMapping, leftOffsets, rowSize) {\n  let x = 0;\n  let rowHeight = 0;\n\n  for (let i = startIndex; i < endIndex; i++) {\n    const character = line[i];\n    const frame = iconMapping[character];\n\n    if (frame) {\n      if (!rowHeight) {\n        rowHeight = frame.layoutHeight;\n      }\n\n      leftOffsets[i] = x + frame.layoutWidth / 2;\n      x += frame.layoutWidth;\n    } else {\n      log.warn(\"Missing character: \".concat(character, \" (\").concat(character.codePointAt(0), \")\"))();\n      leftOffsets[i] = x;\n      x += MISSING_CHAR_WIDTH;\n    }\n  }\n\n  rowSize[0] = x;\n  rowSize[1] = rowHeight;\n}\n\nexport function transformParagraph(paragraph, lineHeight, wordBreak, maxWidth, iconMapping) {\n  const characters = Array.from(paragraph);\n  const numCharacters = characters.length;\n  const x = new Array(numCharacters);\n  const y = new Array(numCharacters);\n  const rowWidth = new Array(numCharacters);\n  const autoWrappingEnabled = (wordBreak === 'break-word' || wordBreak === 'break-all') && isFinite(maxWidth) && maxWidth > 0;\n  const size = [0, 0];\n  const rowSize = [0, 0];\n  let rowOffsetTop = 0;\n  let lineStartIndex = 0;\n  let lineEndIndex = 0;\n\n  for (let i = 0; i <= numCharacters; i++) {\n    const char = characters[i];\n\n    if (char === '\\n' || i === numCharacters) {\n      lineEndIndex = i;\n    }\n\n    if (lineEndIndex > lineStartIndex) {\n      const rows = autoWrappingEnabled ? autoWrapping(characters, wordBreak, maxWidth, iconMapping, lineStartIndex, lineEndIndex) : SINGLE_LINE;\n\n      for (let rowIndex = 0; rowIndex <= rows.length; rowIndex++) {\n        const rowStart = rowIndex === 0 ? lineStartIndex : rows[rowIndex - 1];\n        const rowEnd = rowIndex < rows.length ? rows[rowIndex] : lineEndIndex;\n        transformRow(characters, rowStart, rowEnd, iconMapping, x, rowSize);\n\n        for (let j = rowStart; j < rowEnd; j++) {\n          var _iconMapping$char;\n\n          const char = characters[j];\n          const layoutOffsetY = ((_iconMapping$char = iconMapping[char]) === null || _iconMapping$char === void 0 ? void 0 : _iconMapping$char.layoutOffsetY) || 0;\n          y[j] = rowOffsetTop + rowSize[1] / 2 + layoutOffsetY;\n          rowWidth[j] = rowSize[0];\n        }\n\n        rowOffsetTop = rowOffsetTop + rowSize[1] * lineHeight;\n        size[0] = Math.max(size[0], rowSize[0]);\n      }\n\n      lineStartIndex = lineEndIndex;\n    }\n\n    if (char === '\\n') {\n      x[lineStartIndex] = 0;\n      y[lineStartIndex] = 0;\n      rowWidth[lineStartIndex] = 0;\n      lineStartIndex++;\n    }\n  }\n\n  size[1] = rowOffsetTop;\n  return {\n    x,\n    y,\n    rowWidth,\n    size\n  };\n}\nexport function getTextFromBuffer({\n  value,\n  length,\n  stride,\n  offset,\n  startIndices,\n  characterSet\n}) {\n  const bytesPerElement = value.BYTES_PER_ELEMENT;\n  const elementStride = stride ? stride / bytesPerElement : 1;\n  const elementOffset = offset ? offset / bytesPerElement : 0;\n  const characterCount = startIndices[length] || Math.ceil((value.length - elementOffset) / elementStride);\n  const autoCharacterSet = characterSet && new Set();\n  const texts = new Array(length);\n  let codes = value;\n\n  if (elementStride > 1 || elementOffset > 0) {\n    const ArrayType = value.constructor;\n    codes = new ArrayType(characterCount);\n\n    for (let i = 0; i < characterCount; i++) {\n      codes[i] = value[i * elementStride + elementOffset];\n    }\n  }\n\n  for (let index = 0; index < length; index++) {\n    const startIndex = startIndices[index];\n    const endIndex = startIndices[index + 1] || characterCount;\n    const codesAtIndex = codes.subarray(startIndex, endIndex);\n    texts[index] = String.fromCodePoint.apply(null, codesAtIndex);\n\n    if (autoCharacterSet) {\n      codesAtIndex.forEach(autoCharacterSet.add, autoCharacterSet);\n    }\n  }\n\n  if (autoCharacterSet) {\n    for (const charCode of autoCharacterSet) {\n      characterSet.add(String.fromCodePoint(charCode));\n    }\n  }\n\n  return {\n    texts,\n    characterCount\n  };\n}\n//# sourceMappingURL=utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport default class LRUCache {\n  constructor(limit = 5) {\n    _defineProperty(this, \"limit\", void 0);\n\n    _defineProperty(this, \"_cache\", {});\n\n    _defineProperty(this, \"_order\", []);\n\n    this.limit = limit;\n  }\n\n  get(key) {\n    const value = this._cache[key];\n\n    if (value) {\n      this._deleteOrder(key);\n\n      this._appendOrder(key);\n    }\n\n    return value;\n  }\n\n  set(key, value) {\n    if (!this._cache[key]) {\n      if (Object.keys(this._cache).length === this.limit) {\n        this.delete(this._order[0]);\n      }\n\n      this._cache[key] = value;\n\n      this._appendOrder(key);\n    } else {\n      this.delete(key);\n      this._cache[key] = value;\n\n      this._appendOrder(key);\n    }\n  }\n\n  delete(key) {\n    const value = this._cache[key];\n\n    if (value) {\n      delete this._cache[key];\n\n      this._deleteOrder(key);\n    }\n  }\n\n  _deleteOrder(key) {\n    const index = this._order.indexOf(key);\n\n    if (index >= 0) {\n      this._order.splice(index, 1);\n    }\n  }\n\n  _appendOrder(key) {\n    this._order.push(key);\n  }\n\n}\n//# sourceMappingURL=lru-cache.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport TinySDF from '@mapbox/tiny-sdf';\nimport { log } from '@deck.gl/core';\nimport { buildMapping } from './utils';\nimport LRUCache from './lru-cache';\n\nfunction getDefaultCharacterSet() {\n  const charSet = [];\n\n  for (let i = 32; i < 128; i++) {\n    charSet.push(String.fromCharCode(i));\n  }\n\n  return charSet;\n}\n\nexport const DEFAULT_FONT_SETTINGS = {\n  fontFamily: 'Monaco, monospace',\n  fontWeight: 'normal',\n  characterSet: getDefaultCharacterSet(),\n  fontSize: 64,\n  buffer: 4,\n  sdf: false,\n  cutoff: 0.25,\n  radius: 12,\n  smoothing: 0.1\n};\nconst MAX_CANVAS_WIDTH = 1024;\nconst BASELINE_SCALE = 0.9;\nconst HEIGHT_SCALE = 1.2;\nconst CACHE_LIMIT = 3;\nlet cache = new LRUCache(CACHE_LIMIT);\n\nfunction getNewChars(cacheKey, characterSet) {\n  let newCharSet;\n\n  if (typeof characterSet === 'string') {\n    newCharSet = new Set(Array.from(characterSet));\n  } else {\n    newCharSet = new Set(characterSet);\n  }\n\n  const cachedFontAtlas = cache.get(cacheKey);\n\n  if (!cachedFontAtlas) {\n    return newCharSet;\n  }\n\n  for (const char in cachedFontAtlas.mapping) {\n    if (newCharSet.has(char)) {\n      newCharSet.delete(char);\n    }\n  }\n\n  return newCharSet;\n}\n\nfunction populateAlphaChannel(alphaChannel, imageData) {\n  for (let i = 0; i < alphaChannel.length; i++) {\n    imageData.data[4 * i + 3] = alphaChannel[i];\n  }\n}\n\nfunction setTextStyle(ctx, fontFamily, fontSize, fontWeight) {\n  ctx.font = \"\".concat(fontWeight, \" \").concat(fontSize, \"px \").concat(fontFamily);\n  ctx.fillStyle = '#000';\n  ctx.textBaseline = 'alphabetic';\n  ctx.textAlign = 'left';\n}\n\nexport function setFontAtlasCacheLimit(limit) {\n  log.assert(Number.isFinite(limit) && limit >= CACHE_LIMIT, 'Invalid cache limit');\n  cache = new LRUCache(limit);\n}\nexport default class FontAtlasManager {\n  constructor() {\n    _defineProperty(this, \"props\", { ...DEFAULT_FONT_SETTINGS\n    });\n\n    _defineProperty(this, \"_key\", void 0);\n\n    _defineProperty(this, \"_atlas\", void 0);\n  }\n\n  get texture() {\n    return this._atlas;\n  }\n\n  get mapping() {\n    return this._atlas && this._atlas.mapping;\n  }\n\n  get scale() {\n    const {\n      fontSize,\n      buffer\n    } = this.props;\n    return (fontSize * HEIGHT_SCALE + buffer * 2) / fontSize;\n  }\n\n  setProps(props = {}) {\n    Object.assign(this.props, props);\n    this._key = this._getKey();\n    const charSet = getNewChars(this._key, this.props.characterSet);\n    const cachedFontAtlas = cache.get(this._key);\n\n    if (cachedFontAtlas && charSet.size === 0) {\n      if (this._atlas !== cachedFontAtlas) {\n        this._atlas = cachedFontAtlas;\n      }\n\n      return;\n    }\n\n    const fontAtlas = this._generateFontAtlas(charSet, cachedFontAtlas);\n\n    this._atlas = fontAtlas;\n    cache.set(this._key, fontAtlas);\n  }\n\n  _generateFontAtlas(characterSet, cachedFontAtlas) {\n    const {\n      fontFamily,\n      fontWeight,\n      fontSize,\n      buffer,\n      sdf,\n      radius,\n      cutoff\n    } = this.props;\n    let canvas = cachedFontAtlas && cachedFontAtlas.data;\n\n    if (!canvas) {\n      canvas = document.createElement('canvas');\n      canvas.width = MAX_CANVAS_WIDTH;\n    }\n\n    const ctx = canvas.getContext('2d', {\n      willReadFrequently: true\n    });\n    setTextStyle(ctx, fontFamily, fontSize, fontWeight);\n    const {\n      mapping,\n      canvasHeight,\n      xOffset,\n      yOffset\n    } = buildMapping({\n      getFontWidth: char => ctx.measureText(char).width,\n      fontHeight: fontSize * HEIGHT_SCALE,\n      buffer,\n      characterSet,\n      maxCanvasWidth: MAX_CANVAS_WIDTH,\n      ...(cachedFontAtlas && {\n        mapping: cachedFontAtlas.mapping,\n        xOffset: cachedFontAtlas.xOffset,\n        yOffset: cachedFontAtlas.yOffset\n      })\n    });\n\n    if (canvas.height !== canvasHeight) {\n      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      canvas.height = canvasHeight;\n      ctx.putImageData(imageData, 0, 0);\n    }\n\n    setTextStyle(ctx, fontFamily, fontSize, fontWeight);\n\n    if (sdf) {\n      const tinySDF = new TinySDF({\n        fontSize,\n        buffer,\n        radius,\n        cutoff,\n        fontFamily,\n        fontWeight: \"\".concat(fontWeight)\n      });\n\n      for (const char of characterSet) {\n        const {\n          data,\n          width,\n          height,\n          glyphTop\n        } = tinySDF.draw(char);\n        mapping[char].width = width;\n        mapping[char].layoutOffsetY = fontSize * BASELINE_SCALE - glyphTop;\n        const imageData = ctx.createImageData(width, height);\n        populateAlphaChannel(data, imageData);\n        ctx.putImageData(imageData, mapping[char].x, mapping[char].y);\n      }\n    } else {\n      for (const char of characterSet) {\n        ctx.fillText(char, mapping[char].x, mapping[char].y + buffer + fontSize * BASELINE_SCALE);\n      }\n    }\n\n    return {\n      xOffset,\n      yOffset,\n      mapping,\n      data: canvas,\n      width: canvas.width,\n      height: canvas.height\n    };\n  }\n\n  _getKey() {\n    const {\n      fontFamily,\n      fontWeight,\n      fontSize,\n      buffer,\n      sdf,\n      radius,\n      cutoff\n    } = this.props;\n\n    if (sdf) {\n      return \"\".concat(fontFamily, \" \").concat(fontWeight, \" \").concat(fontSize, \" \").concat(buffer, \" \").concat(radius, \" \").concat(cutoff);\n    }\n\n    return \"\".concat(fontFamily, \" \").concat(fontWeight, \" \").concat(fontSize, \" \").concat(buffer);\n  }\n\n}\n//# sourceMappingURL=font-atlas-manager.js.map","export default \"#define SHADER_NAME text-background-layer-vertex-shader\\n\\nattribute vec2 positions;\\n\\nattribute vec3 instancePositions;\\nattribute vec3 instancePositions64Low;\\nattribute vec4 instanceRects;\\nattribute float instanceSizes;\\nattribute float instanceAngles;\\nattribute vec2 instancePixelOffsets;\\nattribute float instanceLineWidths;\\nattribute vec4 instanceFillColors;\\nattribute vec4 instanceLineColors;\\nattribute vec3 instancePickingColors;\\n\\nuniform bool billboard;\\nuniform float opacity;\\nuniform float sizeScale;\\nuniform float sizeMinPixels;\\nuniform float sizeMaxPixels;\\nuniform vec4 padding;\\nuniform int sizeUnits;\\n\\nvarying vec4 vFillColor;\\nvarying vec4 vLineColor;\\nvarying float vLineWidth;\\nvarying vec2 uv;\\nvarying vec2 dimensions;\\n\\nvec2 rotate_by_angle(vec2 vertex, float angle) {\\n  float angle_radian = radians(angle);\\n  float cos_angle = cos(angle_radian);\\n  float sin_angle = sin(angle_radian);\\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\\n  return rotationMatrix * vertex;\\n}\\n\\nvoid main(void) {\\n  geometry.worldPosition = instancePositions;\\n  geometry.uv = positions;\\n  geometry.pickingColor = instancePickingColors;\\n  uv = positions;\\n  vLineWidth = instanceLineWidths;\\n  float sizePixels = clamp(\\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\\n    sizeMinPixels, sizeMaxPixels\\n  );\\n\\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\\n\\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\\n  pixelOffset += instancePixelOffsets;\\n  pixelOffset.y *= -1.0;\\n\\n  if (billboard)  {\\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n    vec3 offset = vec3(pixelOffset, 0.0);\\n    DECKGL_FILTER_SIZE(offset, geometry);\\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\\n  } else {\\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\\n    DECKGL_FILTER_SIZE(offset_common, geometry);\\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n  }\\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\\n}\\n\";\n//# sourceMappingURL=text-background-layer-vertex.glsl.js.map","export default \"#define SHADER_NAME text-background-layer-fragment-shader\\n\\nprecision highp float;\\n\\nuniform bool stroked;\\n\\nvarying vec4 vFillColor;\\nvarying vec4 vLineColor;\\nvarying float vLineWidth;\\nvarying vec2 uv;\\nvarying vec2 dimensions;\\n\\nvoid main(void) {\\n  geometry.uv = uv;\\n\\n  vec2 pixelPosition = uv * dimensions;\\n  if (stroked) {\\n    float distToEdge = min(\\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\\n    );\\n    float isBorder = smoothedge(distToEdge, vLineWidth);\\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\\n  } else {\\n    gl_FragColor = vFillColor;\\n  }\\n\\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\\n}\\n\";\n//# sourceMappingURL=text-background-layer-fragment.glsl.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Layer, project32, picking, UNIT } from '@deck.gl/core';\nimport { Model, Geometry } from '@luma.gl/core';\nimport vs from './text-background-layer-vertex.glsl';\nimport fs from './text-background-layer-fragment.glsl';\nconst defaultProps = {\n  billboard: true,\n  sizeScale: 1,\n  sizeUnits: 'pixels',\n  sizeMinPixels: 0,\n  sizeMaxPixels: Number.MAX_SAFE_INTEGER,\n  padding: {\n    type: 'array',\n    value: [0, 0, 0, 0]\n  },\n  getPosition: {\n    type: 'accessor',\n    value: x => x.position\n  },\n  getSize: {\n    type: 'accessor',\n    value: 1\n  },\n  getAngle: {\n    type: 'accessor',\n    value: 0\n  },\n  getPixelOffset: {\n    type: 'accessor',\n    value: [0, 0]\n  },\n  getBoundingRect: {\n    type: 'accessor',\n    value: [0, 0, 0, 0]\n  },\n  getFillColor: {\n    type: 'accessor',\n    value: [0, 0, 0, 255]\n  },\n  getLineColor: {\n    type: 'accessor',\n    value: [0, 0, 0, 255]\n  },\n  getLineWidth: {\n    type: 'accessor',\n    value: 1\n  }\n};\nexport default class TextBackgroundLayer extends Layer {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", void 0);\n  }\n\n  getShaders() {\n    return super.getShaders({\n      vs,\n      fs,\n      modules: [project32, picking]\n    });\n  }\n\n  initializeState() {\n    this.getAttributeManager().addInstanced({\n      instancePositions: {\n        size: 3,\n        type: 5130,\n        fp64: this.use64bitPositions(),\n        transition: true,\n        accessor: 'getPosition'\n      },\n      instanceSizes: {\n        size: 1,\n        transition: true,\n        accessor: 'getSize',\n        defaultValue: 1\n      },\n      instanceAngles: {\n        size: 1,\n        transition: true,\n        accessor: 'getAngle'\n      },\n      instanceRects: {\n        size: 4,\n        accessor: 'getBoundingRect'\n      },\n      instancePixelOffsets: {\n        size: 2,\n        transition: true,\n        accessor: 'getPixelOffset'\n      },\n      instanceFillColors: {\n        size: 4,\n        transition: true,\n        normalized: true,\n        type: 5121,\n        accessor: 'getFillColor',\n        defaultValue: [0, 0, 0, 255]\n      },\n      instanceLineColors: {\n        size: 4,\n        transition: true,\n        normalized: true,\n        type: 5121,\n        accessor: 'getLineColor',\n        defaultValue: [0, 0, 0, 255]\n      },\n      instanceLineWidths: {\n        size: 1,\n        transition: true,\n        accessor: 'getLineWidth',\n        defaultValue: 1\n      }\n    });\n  }\n\n  updateState(params) {\n    super.updateState(params);\n    const {\n      changeFlags\n    } = params;\n\n    if (changeFlags.extensionsChanged) {\n      var _this$state$model;\n\n      const {\n        gl\n      } = this.context;\n      (_this$state$model = this.state.model) === null || _this$state$model === void 0 ? void 0 : _this$state$model.delete();\n      this.state.model = this._getModel(gl);\n      this.getAttributeManager().invalidateAll();\n    }\n  }\n\n  draw({\n    uniforms\n  }) {\n    const {\n      billboard,\n      sizeScale,\n      sizeUnits,\n      sizeMinPixels,\n      sizeMaxPixels,\n      getLineWidth\n    } = this.props;\n    let {\n      padding\n    } = this.props;\n\n    if (padding.length < 4) {\n      padding = [padding[0], padding[1], padding[0], padding[1]];\n    }\n\n    this.state.model.setUniforms(uniforms).setUniforms({\n      billboard,\n      stroked: Boolean(getLineWidth),\n      padding,\n      sizeUnits: UNIT[sizeUnits],\n      sizeScale,\n      sizeMinPixels,\n      sizeMaxPixels\n    }).draw();\n  }\n\n  _getModel(gl) {\n    const positions = [0, 0, 1, 0, 1, 1, 0, 1];\n    return new Model(gl, { ...this.getShaders(),\n      id: this.props.id,\n      geometry: new Geometry({\n        drawMode: 6,\n        vertexCount: 4,\n        attributes: {\n          positions: {\n            size: 2,\n            value: new Float32Array(positions)\n          }\n        }\n      }),\n      isInstanced: true\n    });\n  }\n\n}\n\n_defineProperty(TextBackgroundLayer, \"defaultProps\", defaultProps);\n\n_defineProperty(TextBackgroundLayer, \"layerName\", 'TextBackgroundLayer');\n//# sourceMappingURL=text-background-layer.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { CompositeLayer, createIterable, log } from '@deck.gl/core';\nimport MultiIconLayer from './multi-icon-layer/multi-icon-layer';\nimport FontAtlasManager, { DEFAULT_FONT_SETTINGS, setFontAtlasCacheLimit } from './font-atlas-manager';\nimport { transformParagraph, getTextFromBuffer } from './utils';\nimport TextBackgroundLayer from './text-background-layer/text-background-layer';\nconst TEXT_ANCHOR = {\n  start: 1,\n  middle: 0,\n  end: -1\n};\nconst ALIGNMENT_BASELINE = {\n  top: 1,\n  center: 0,\n  bottom: -1\n};\nconst DEFAULT_COLOR = [0, 0, 0, 255];\nconst DEFAULT_LINE_HEIGHT = 1.0;\nconst defaultProps = {\n  billboard: true,\n  sizeScale: 1,\n  sizeUnits: 'pixels',\n  sizeMinPixels: 0,\n  sizeMaxPixels: Number.MAX_SAFE_INTEGER,\n  background: false,\n  getBackgroundColor: {\n    type: 'accessor',\n    value: [255, 255, 255, 255]\n  },\n  getBorderColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getBorderWidth: {\n    type: 'accessor',\n    value: 0\n  },\n  backgroundPadding: {\n    type: 'array',\n    value: [0, 0, 0, 0]\n  },\n  characterSet: {\n    type: 'object',\n    value: DEFAULT_FONT_SETTINGS.characterSet\n  },\n  fontFamily: DEFAULT_FONT_SETTINGS.fontFamily,\n  fontWeight: DEFAULT_FONT_SETTINGS.fontWeight,\n  lineHeight: DEFAULT_LINE_HEIGHT,\n  outlineWidth: {\n    type: 'number',\n    value: 0,\n    min: 0\n  },\n  outlineColor: {\n    type: 'color',\n    value: DEFAULT_COLOR\n  },\n  fontSettings: {\n    type: 'object',\n    value: {},\n    compare: 1\n  },\n  wordBreak: 'break-word',\n  maxWidth: {\n    type: 'number',\n    value: -1\n  },\n  getText: {\n    type: 'accessor',\n    value: x => x.text\n  },\n  getPosition: {\n    type: 'accessor',\n    value: x => x.position\n  },\n  getColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getSize: {\n    type: 'accessor',\n    value: 32\n  },\n  getAngle: {\n    type: 'accessor',\n    value: 0\n  },\n  getTextAnchor: {\n    type: 'accessor',\n    value: 'middle'\n  },\n  getAlignmentBaseline: {\n    type: 'accessor',\n    value: 'center'\n  },\n  getPixelOffset: {\n    type: 'accessor',\n    value: [0, 0]\n  },\n  backgroundColor: {\n    deprecatedFor: ['background', 'getBackgroundColor']\n  }\n};\nexport default class TextLayer extends CompositeLayer {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", void 0);\n\n    _defineProperty(this, \"getBoundingRect\", (object, objectInfo) => {\n      let {\n        size: [width, height]\n      } = this.transformParagraph(object, objectInfo);\n      const {\n        fontSize\n      } = this.state.fontAtlasManager.props;\n      width /= fontSize;\n      height /= fontSize;\n      const {\n        getTextAnchor,\n        getAlignmentBaseline\n      } = this.props;\n      const anchorX = TEXT_ANCHOR[typeof getTextAnchor === 'function' ? getTextAnchor(object, objectInfo) : getTextAnchor];\n      const anchorY = ALIGNMENT_BASELINE[typeof getAlignmentBaseline === 'function' ? getAlignmentBaseline(object, objectInfo) : getAlignmentBaseline];\n      return [(anchorX - 1) * width / 2, (anchorY - 1) * height / 2, width, height];\n    });\n\n    _defineProperty(this, \"getIconOffsets\", (object, objectInfo) => {\n      const {\n        getTextAnchor,\n        getAlignmentBaseline\n      } = this.props;\n      const {\n        x,\n        y,\n        rowWidth,\n        size: [width, height]\n      } = this.transformParagraph(object, objectInfo);\n      const anchorX = TEXT_ANCHOR[typeof getTextAnchor === 'function' ? getTextAnchor(object, objectInfo) : getTextAnchor];\n      const anchorY = ALIGNMENT_BASELINE[typeof getAlignmentBaseline === 'function' ? getAlignmentBaseline(object, objectInfo) : getAlignmentBaseline];\n      const numCharacters = x.length;\n      const offsets = new Array(numCharacters * 2);\n      let index = 0;\n\n      for (let i = 0; i < numCharacters; i++) {\n        const rowOffset = (1 - anchorX) * (width - rowWidth[i]) / 2;\n        offsets[index++] = (anchorX - 1) * width / 2 + rowOffset + x[i];\n        offsets[index++] = (anchorY - 1) * height / 2 + y[i];\n      }\n\n      return offsets;\n    });\n  }\n\n  initializeState() {\n    this.state = {\n      styleVersion: 0,\n      fontAtlasManager: new FontAtlasManager()\n    };\n\n    if (this.props.maxWidth > 0) {\n      log.warn('v8.9 breaking change: TextLayer maxWidth is now relative to text size')();\n    }\n  }\n\n  updateState(params) {\n    const {\n      props,\n      oldProps,\n      changeFlags\n    } = params;\n    const textChanged = changeFlags.dataChanged || changeFlags.updateTriggersChanged && (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged.getText);\n\n    if (textChanged) {\n      this._updateText();\n    }\n\n    const fontChanged = this._updateFontAtlas();\n\n    const styleChanged = fontChanged || props.lineHeight !== oldProps.lineHeight || props.wordBreak !== oldProps.wordBreak || props.maxWidth !== oldProps.maxWidth;\n\n    if (styleChanged) {\n      this.setState({\n        styleVersion: this.state.styleVersion + 1\n      });\n    }\n  }\n\n  getPickingInfo({\n    info\n  }) {\n    info.object = info.index >= 0 ? this.props.data[info.index] : null;\n    return info;\n  }\n\n  _updateFontAtlas() {\n    const {\n      fontSettings,\n      fontFamily,\n      fontWeight\n    } = this.props;\n    const {\n      fontAtlasManager,\n      characterSet\n    } = this.state;\n    const fontProps = { ...fontSettings,\n      characterSet,\n      fontFamily,\n      fontWeight\n    };\n\n    if (!fontAtlasManager.mapping) {\n      fontAtlasManager.setProps(fontProps);\n      return true;\n    }\n\n    for (const key in fontProps) {\n      if (fontProps[key] !== fontAtlasManager.props[key]) {\n        fontAtlasManager.setProps(fontProps);\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  _updateText() {\n    var _attributes;\n\n    const {\n      data,\n      characterSet\n    } = this.props;\n    const textBuffer = (_attributes = data.attributes) === null || _attributes === void 0 ? void 0 : _attributes.getText;\n    let {\n      getText\n    } = this.props;\n    let startIndices = data.startIndices;\n    let numInstances;\n    const autoCharacterSet = characterSet === 'auto' && new Set();\n\n    if (textBuffer && startIndices) {\n      const {\n        texts,\n        characterCount\n      } = getTextFromBuffer({ ...(ArrayBuffer.isView(textBuffer) ? {\n          value: textBuffer\n        } : textBuffer),\n        length: data.length,\n        startIndices,\n        characterSet: autoCharacterSet\n      });\n      numInstances = characterCount;\n\n      getText = (_, {\n        index\n      }) => texts[index];\n    } else {\n      const {\n        iterable,\n        objectInfo\n      } = createIterable(data);\n      startIndices = [0];\n      numInstances = 0;\n\n      for (const object of iterable) {\n        objectInfo.index++;\n        const text = Array.from(getText(object, objectInfo) || '');\n\n        if (autoCharacterSet) {\n          text.forEach(autoCharacterSet.add, autoCharacterSet);\n        }\n\n        numInstances += text.length;\n        startIndices.push(numInstances);\n      }\n    }\n\n    this.setState({\n      getText,\n      startIndices,\n      numInstances,\n      characterSet: autoCharacterSet || characterSet\n    });\n  }\n\n  transformParagraph(object, objectInfo) {\n    const {\n      fontAtlasManager\n    } = this.state;\n    const iconMapping = fontAtlasManager.mapping;\n    const getText = this.state.getText;\n    const {\n      wordBreak,\n      lineHeight,\n      maxWidth\n    } = this.props;\n    const paragraph = getText(object, objectInfo) || '';\n    return transformParagraph(paragraph, lineHeight, wordBreak, maxWidth * fontAtlasManager.props.fontSize, iconMapping);\n  }\n\n  renderLayers() {\n    const {\n      startIndices,\n      numInstances,\n      getText,\n      fontAtlasManager: {\n        scale,\n        texture,\n        mapping\n      },\n      styleVersion\n    } = this.state;\n    const {\n      data,\n      _dataDiff,\n      getPosition,\n      getColor,\n      getSize,\n      getAngle,\n      getPixelOffset,\n      getBackgroundColor,\n      getBorderColor,\n      getBorderWidth,\n      backgroundPadding,\n      background,\n      billboard,\n      fontSettings,\n      outlineWidth,\n      outlineColor,\n      sizeScale,\n      sizeUnits,\n      sizeMinPixels,\n      sizeMaxPixels,\n      transitions,\n      updateTriggers\n    } = this.props;\n    const CharactersLayerClass = this.getSubLayerClass('characters', MultiIconLayer);\n    const BackgroundLayerClass = this.getSubLayerClass('background', TextBackgroundLayer);\n    return [background && new BackgroundLayerClass({\n      getFillColor: getBackgroundColor,\n      getLineColor: getBorderColor,\n      getLineWidth: getBorderWidth,\n      padding: backgroundPadding,\n      getPosition,\n      getSize,\n      getAngle,\n      getPixelOffset,\n      billboard,\n      sizeScale,\n      sizeUnits,\n      sizeMinPixels,\n      sizeMaxPixels,\n      transitions: transitions && {\n        getPosition: transitions.getPosition,\n        getAngle: transitions.getAngle,\n        getSize: transitions.getSize,\n        getFillColor: transitions.getBackgroundColor,\n        getLineColor: transitions.getBorderColor,\n        getLineWidth: transitions.getBorderWidth,\n        getPixelOffset: transitions.getPixelOffset\n      }\n    }, this.getSubLayerProps({\n      id: 'background',\n      updateTriggers: {\n        getPosition: updateTriggers.getPosition,\n        getAngle: updateTriggers.getAngle,\n        getSize: updateTriggers.getSize,\n        getFillColor: updateTriggers.getBackgroundColor,\n        getLineColor: updateTriggers.getBorderColor,\n        getLineWidth: updateTriggers.getBorderWidth,\n        getPixelOffset: updateTriggers.getPixelOffset,\n        getBoundingRect: {\n          getText: updateTriggers.getText,\n          getTextAnchor: updateTriggers.getTextAnchor,\n          getAlignmentBaseline: updateTriggers.getAlignmentBaseline,\n          styleVersion\n        }\n      }\n    }), {\n      data: data.attributes && data.attributes.background ? {\n        length: data.length,\n        attributes: data.attributes.background\n      } : data,\n      _dataDiff,\n      autoHighlight: false,\n      getBoundingRect: this.getBoundingRect\n    }), new CharactersLayerClass({\n      sdf: fontSettings.sdf,\n      smoothing: Number.isFinite(fontSettings.smoothing) ? fontSettings.smoothing : DEFAULT_FONT_SETTINGS.smoothing,\n      outlineWidth: outlineWidth / (fontSettings.radius || DEFAULT_FONT_SETTINGS.radius),\n      outlineColor,\n      iconAtlas: texture,\n      iconMapping: mapping,\n      getPosition,\n      getColor,\n      getSize,\n      getAngle,\n      getPixelOffset,\n      billboard,\n      sizeScale: sizeScale * scale,\n      sizeUnits,\n      sizeMinPixels: sizeMinPixels * scale,\n      sizeMaxPixels: sizeMaxPixels * scale,\n      transitions: transitions && {\n        getPosition: transitions.getPosition,\n        getAngle: transitions.getAngle,\n        getColor: transitions.getColor,\n        getSize: transitions.getSize,\n        getPixelOffset: transitions.getPixelOffset\n      }\n    }, this.getSubLayerProps({\n      id: 'characters',\n      updateTriggers: {\n        all: updateTriggers.getText,\n        getPosition: updateTriggers.getPosition,\n        getAngle: updateTriggers.getAngle,\n        getColor: updateTriggers.getColor,\n        getSize: updateTriggers.getSize,\n        getPixelOffset: updateTriggers.getPixelOffset,\n        getIconOffsets: {\n          getTextAnchor: updateTriggers.getTextAnchor,\n          getAlignmentBaseline: updateTriggers.getAlignmentBaseline,\n          styleVersion\n        }\n      }\n    }), {\n      data,\n      _dataDiff,\n      startIndices,\n      numInstances,\n      getIconOffsets: this.getIconOffsets,\n      getIcon: getText\n    })];\n  }\n\n  static set fontAtlasCacheLimit(limit) {\n    setFontAtlasCacheLimit(limit);\n  }\n\n}\n\n_defineProperty(TextLayer, \"defaultProps\", defaultProps);\n\n_defineProperty(TextLayer, \"layerName\", 'TextLayer');\n//# sourceMappingURL=text-layer.js.map"],"names":["TRACE_RENDER_LAYERS","CompositeLayer","Layer","layer","context","updateObject","info","object","subLayerId","data","DefaultLayerClass","overridingProps","row","sourceObject","sourceObjectIndex","accessor","objectInfo","x","sublayerProps","_this$props$updateTri","opacity","pickable","visible","parameters","getPolygonOffset","highlightedObjectIndex","autoHighlight","highlightColor","coordinateSystem","coordinateOrigin","wrapLongitude","positionFormat","modelMatrix","extensions","fetch","operation","newProps","overridingSublayerProps","overridingSublayerTriggers","sublayerId","propTypes","PROP_TYPES_SYMBOL","subLayerPropTypes","key","propType","extension","passThroughProps","updateParams","forceUpdate","subLayers","shouldUpdate","subLayersList","flatten","debug","_defineProperty","vs$2","fs$3","DEFAULT_CANVAS_WIDTH","DEFAULT_BUFFER","noop","DEFAULT_TEXTURE_PARAMETERS","nextPowOfTwo","number","resizeImage","ctx","imageData","maxWidth","maxHeight","resizeRatio","width","height","getIconId","icon","resizeTexture","texture","oldWidth","oldHeight","newTexture","Texture2D","copyToTexture","buildRowMapping","mapping","columns","yOffset","i","xOffset","id","buildMapping","icons","buffer","rowHeight","canvasWidth","getDiffIcons","getIcon","cachedIcons","iterable","createIterable","IconManager","gl","onUpdate","onError","_this$_texture","loadOptions","autoPacking","iconAtlas","iconMapping","textureParameters","_this$_texture2","canvasHeight","load","iconDef","y","error","DEFAULT_COLOR","defaultProps","IconLayer","args","vs","fs","project32","picking","params","props","oldProps","changeFlags","attributeManager","iconManager","prePacked","_this$state$model","uniforms","sizeScale","sizeMinPixels","sizeMaxPixels","sizeUnits","billboard","alphaCutoff","iconsTexture","UNIT","positions","Model","Geometry","evt","_this$getCurrentLayer","onIconError","log","anchorX","anchorY","vs$1","fs$2","ScatterplotLayer","radiusUnits","radiusScale","radiusMinPixels","radiusMaxPixels","stroked","filled","antialiasing","lineWidthUnits","lineWidthScale","lineWidthMinPixels","lineWidthMaxPixels","fs$1","EMPTY_ARRAY","MultiIconLayer","index","value","outlineColor","sdf","smoothing","outlineWidth","outlineBuffer","INF","TinySDF","fontSize","radius","cutoff","fontFamily","fontWeight","fontStyle","size","canvas","char","glyphAdvance","actualBoundingBoxAscent","actualBoundingBoxDescent","actualBoundingBoxLeft","actualBoundingBoxRight","glyphTop","glyphLeft","glyphWidth","glyphHeight","len","glyph","gridInner","gridOuter","imgData","a","j","d","edt","x0","y0","gridSize","f","v","z","edt1d","grid","offset","stride","length","q","k","s","q2","r","qr","MISSING_CHAR_WIDTH","SINGLE_LINE","characterSet","getFontWidth","fontHeight","maxCanvasWidth","getTextWidth","text","startIndex","endIndex","_mapping$character","character","breakAll","target","rowStartCharIndex","rowOffsetLeft","textWidth","breakWord","groupStartCharIndex","groupEndCharIndex","groupWidth","autoWrapping","wordBreak","result","transformRow","line","leftOffsets","rowSize","frame","transformParagraph","paragraph","lineHeight","characters","numCharacters","rowWidth","autoWrappingEnabled","rowOffsetTop","lineStartIndex","lineEndIndex","rows","rowIndex","rowStart","rowEnd","_iconMapping$char","layoutOffsetY","getTextFromBuffer","startIndices","bytesPerElement","elementStride","elementOffset","characterCount","autoCharacterSet","texts","codes","ArrayType","codesAtIndex","charCode","LRUCache","limit","getDefaultCharacterSet","charSet","DEFAULT_FONT_SETTINGS","MAX_CANVAS_WIDTH","BASELINE_SCALE","HEIGHT_SCALE","CACHE_LIMIT","cache","getNewChars","cacheKey","newCharSet","cachedFontAtlas","populateAlphaChannel","alphaChannel","setTextStyle","setFontAtlasCacheLimit","FontAtlasManager","fontAtlas","tinySDF","TextBackgroundLayer","getLineWidth","padding","TEXT_ANCHOR","ALIGNMENT_BASELINE","DEFAULT_LINE_HEIGHT","TextLayer","getTextAnchor","getAlignmentBaseline","offsets","rowOffset","fontSettings","fontAtlasManager","fontProps","_attributes","textBuffer","getText","numInstances","_","scale","styleVersion","_dataDiff","getPosition","getColor","getSize","getAngle","getPixelOffset","getBackgroundColor","getBorderColor","getBorderWidth","backgroundPadding","background","transitions","updateTriggers","CharactersLayerClass","BackgroundLayerClass"],"mappings":"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"}