{"version":3,"file":"PathOffsetLayer.49496748.js","sources":["../../src/layers/PathOffsetLayer.ts"],"sourcesContent":["import { PathLayer } from '@deck.gl/layers'\r\n\r\nconst OFFSET_TYPE = {\r\n  NONE: 0,\r\n  LEFT: 1,\r\n  RIGHT: 2,\r\n}\r\n\r\nexport default class PathOffsetLayer extends PathLayer {\r\n  initializeState(context: any) {\r\n    super.initializeState(context)\r\n\r\n    this.getAttributeManager().addInstanced({\r\n      instanceOffset: {\r\n        size: 1,\r\n        accessor: 'getOffset',\r\n      },\r\n    })\r\n  }\r\n\r\n  getShaders() {\r\n    return {\r\n      ...super.getShaders(),\r\n      inject: {\r\n        'vs:#decl': `\r\n            attribute float instanceOffset;\r\n            varying float offset;\r\n            `,\r\n        'vs:#main-start': `\r\n            offset = instanceOffset;\r\n            `,\r\n        'fs:#decl': `\r\n            varying float offset;\r\n            `,\r\n        'fs:#main-start': `\r\n            if (offset == 1.0 && vPathPosition.x < 0.0) {\r\n                discard;\r\n            }\r\n            if (offset == 2.0 && vPathPosition.x > 0.0) {\r\n                discard;\r\n            }\r\n            if (offset == 0.0 && abs(vPathPosition.x) > 0.5) {\r\n                discard;\r\n            }\r\n        `,\r\n      },\r\n    }\r\n  }\r\n}\r\n\r\nPathOffsetLayer.layerName = 'PathOffsetLayer'\r\nPathOffsetLayer.defaultProps = {\r\n  getOffset: { type: 'accessor', value: OFFSET_TYPE.RIGHT },\r\n}\r\n\r\n// /** DeckGL **/\r\n// new deck.DeckGL({\r\n//   container: 'container',\r\n//   mapboxApiAccessToken: '',\r\n//   longitude: -122.408,\r\n//   latitude: 37.785,\r\n//   zoom: 16,\r\n//   pitch: 0,\r\n//   layers: [\r\n//     new deck.PathLayer({\r\n//       data:\r\n//         'https://raw.githubusercontent.com/uber-common/deck.gl-data/master/website/bart-lines.json',\r\n//       getPath: d => d.path,\r\n//       getColor: [0, 0, 0],\r\n//       getWidth: 50,\r\n//     }),\r\n//     new MyPathLayer({\r\n//       data:\r\n//         'https://raw.githubusercontent.com/uber-common/deck.gl-data/master/website/bart-lines.json',\r\n//       getPath: d => d.path,\r\n//       getColor: [255, 0, 0],\r\n//       getOffset: (d, { index }) => index % 3,\r\n//       getWidth: 50,\r\n//       pickable: true,\r\n//       autoHighlight: true,\r\n//     }),\r\n//   ],\r\n// })\r\n"],"names":["OFFSET_TYPE","PathOffsetLayer","PathLayer","context"],"mappings":"6CAEA,MAAMA,EAAc,CAClB,KAAM,EACN,KAAM,EACN,MAAO,CACT,EAEA,MAAqBC,UAAwBC,CAAU,CACrD,gBAAgBC,EAAc,CAC5B,MAAM,gBAAgBA,CAAO,EAExB,KAAA,sBAAsB,aAAa,CACtC,eAAgB,CACd,KAAM,EACN,SAAU,WACZ,CAAA,CACD,CACH,CAEA,YAAa,CACJ,MAAA,CACL,GAAG,MAAM,WAAW,EACpB,OAAQ,CACN,WAAY;AAAA;AAAA;AAAA,cAIZ,iBAAkB;AAAA;AAAA,cAGlB,WAAY;AAAA;AAAA,cAGZ,iBAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAWpB,CAAA,CAEJ,CACF,CAEAF,EAAgB,UAAY,kBAC5BA,EAAgB,aAAe,CAC7B,UAAW,CAAE,KAAM,WAAY,MAAOD,EAAY,KAAM,CAC1D"}