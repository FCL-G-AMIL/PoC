import{t as pr,d as gr,g as Wt,n as vr}from"./index.1d7144b8.js";import{b as yr}from"./index.d10190c4.js";import{T as xr,d as $n,t as mr,n as In}from"./timer.8d793420.js";import{b as wr}from"./defaultLocale.52699303.js";import{P as _r}from"./papaparse.min.61fc48be.js";import{H as br}from"./HTTPFileSystem.33aea9ff.js";import{i as Er}from"./rainbow.d98e4227.js";import"./cubehelix.15b78c18.js";function Le(t,e,n){var r=new xr;return e=e==null?0:+e,r.restart(function(i){r.stop(),t(i+e)},e,n),r}function Sn(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Nr(t){return t.length===1&&(t=Mr(t)),{left:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}function Mr(t){return function(e,n){return Sn(t(e),n)}}Nr(Sn);function ie(t,e){var n=t.length,r=-1,i,a;if(e==null){for(;++r<n;)if((i=t[r])!=null&&i>=i)for(a=i;++r<n;)(i=t[r])!=null&&i>a&&(a=i)}else for(;++r<n;)if((i=e(t[r],r,t))!=null&&i>=i)for(a=i;++r<n;)(i=e(t[r],r,t))!=null&&i>a&&(a=i);return a}function kr(t,e){var n=t.length,r=-1,i,a;if(e==null){for(;++r<n;)if((i=t[r])!=null&&i>=i)for(a=i;++r<n;)(i=t[r])!=null&&a>i&&(a=i)}else for(;++r<n;)if((i=e(t[r],r,t))!=null&&i>=i)for(a=i;++r<n;)(i=e(t[r],r,t))!=null&&a>i&&(a=i);return a}function O(t,e){var n=t.length,r=-1,i,a=0;if(e==null)for(;++r<n;)(i=+t[r])&&(a+=i);else for(;++r<n;)(i=+e(t[r],r,t))&&(a+=i);return a}var Lt;if(typeof pr=="function")try{Lt={clone:require("lodash/clone"),constant:require("lodash/constant"),each:require("lodash/each"),filter:require("lodash/filter"),has:require("lodash/has"),isArray:require("lodash/isArray"),isEmpty:require("lodash/isEmpty"),isFunction:require("lodash/isFunction"),isUndefined:require("lodash/isUndefined"),keys:require("lodash/keys"),map:require("lodash/map"),reduce:require("lodash/reduce"),size:require("lodash/size"),transform:require("lodash/transform"),union:require("lodash/union"),values:require("lodash/values")}}catch{}Lt||(Lt=window._);var F=Lt,M=F,xe=C,Cr="\0",nt="\0",$e="";function C(t){this._isDirected=M.has(t,"directed")?t.directed:!0,this._isMultigraph=M.has(t,"multigraph")?t.multigraph:!1,this._isCompound=M.has(t,"compound")?t.compound:!1,this._label=void 0,this._defaultNodeLabelFn=M.constant(void 0),this._defaultEdgeLabelFn=M.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[nt]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}C.prototype._nodeCount=0;C.prototype._edgeCount=0;C.prototype.isDirected=function(){return this._isDirected};C.prototype.isMultigraph=function(){return this._isMultigraph};C.prototype.isCompound=function(){return this._isCompound};C.prototype.setGraph=function(t){return this._label=t,this};C.prototype.graph=function(){return this._label};C.prototype.setDefaultNodeLabel=function(t){return M.isFunction(t)||(t=M.constant(t)),this._defaultNodeLabelFn=t,this};C.prototype.nodeCount=function(){return this._nodeCount};C.prototype.nodes=function(){return M.keys(this._nodes)};C.prototype.sources=function(){var t=this;return M.filter(this.nodes(),function(e){return M.isEmpty(t._in[e])})};C.prototype.sinks=function(){var t=this;return M.filter(this.nodes(),function(e){return M.isEmpty(t._out[e])})};C.prototype.setNodes=function(t,e){var n=arguments,r=this;return M.each(t,function(i){n.length>1?r.setNode(i,e):r.setNode(i)}),this};C.prototype.setNode=function(t,e){return M.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=nt,this._children[t]={},this._children[nt][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)};C.prototype.node=function(t){return this._nodes[t]};C.prototype.hasNode=function(t){return M.has(this._nodes,t)};C.prototype.removeNode=function(t){var e=this;if(M.has(this._nodes,t)){var n=function(r){e.removeEdge(e._edgeObjs[r])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],M.each(this.children(t),function(r){e.setParent(r)}),delete this._children[t]),M.each(M.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],M.each(M.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this};C.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(M.isUndefined(e))e=nt;else{e+="";for(var n=e;!M.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this};C.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]};C.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==nt)return e}};C.prototype.children=function(t){if(M.isUndefined(t)&&(t=nt),this._isCompound){var e=this._children[t];if(e)return M.keys(e)}else{if(t===nt)return this.nodes();if(this.hasNode(t))return[]}};C.prototype.predecessors=function(t){var e=this._preds[t];if(e)return M.keys(e)};C.prototype.successors=function(t){var e=this._sucs[t];if(e)return M.keys(e)};C.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return M.union(e,this.successors(t))};C.prototype.isLeaf=function(t){var e;return this.isDirected()?e=this.successors(t):e=this.neighbors(t),e.length===0};C.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;M.each(this._nodes,function(a,o){t(o)&&e.setNode(o,a)}),M.each(this._edgeObjs,function(a){e.hasNode(a.v)&&e.hasNode(a.w)&&e.setEdge(a,n.edge(a))});var r={};function i(a){var o=n.parent(a);return o===void 0||e.hasNode(o)?(r[a]=o,o):o in r?r[o]:i(o)}return this._isCompound&&M.each(e.nodes(),function(a){e.setParent(a,i(a))}),e};C.prototype.setDefaultEdgeLabel=function(t){return M.isFunction(t)||(t=M.constant(t)),this._defaultEdgeLabelFn=t,this};C.prototype.edgeCount=function(){return this._edgeCount};C.prototype.edges=function(){return M.values(this._edgeObjs)};C.prototype.setPath=function(t,e){var n=this,r=arguments;return M.reduce(t,function(i,a){return r.length>1?n.setEdge(i,a,e):n.setEdge(i,a),a}),this};C.prototype.setEdge=function(){var t,e,n,r,i=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(t=a.v,e=a.w,n=a.name,arguments.length===2&&(r=arguments[1],i=!0)):(t=a,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,e=""+e,M.isUndefined(n)||(n=""+n);var o=yt(this._isDirected,t,e,n);if(M.has(this._edgeLabels,o))return i&&(this._edgeLabels[o]=r),this;if(!M.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[o]=i?r:this._defaultEdgeLabelFn(t,e,n);var s=Ar(this._isDirected,t,e,n);return t=s.v,e=s.w,Object.freeze(s),this._edgeObjs[o]=s,Ie(this._preds[e],t),Ie(this._sucs[t],e),this._in[e][o]=s,this._out[t][o]=s,this._edgeCount++,this};C.prototype.edge=function(t,e,n){var r=arguments.length===1?me(this._isDirected,arguments[0]):yt(this._isDirected,t,e,n);return this._edgeLabels[r]};C.prototype.hasEdge=function(t,e,n){var r=arguments.length===1?me(this._isDirected,arguments[0]):yt(this._isDirected,t,e,n);return M.has(this._edgeLabels,r)};C.prototype.removeEdge=function(t,e,n){var r=arguments.length===1?me(this._isDirected,arguments[0]):yt(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],Se(this._preds[e],t),Se(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this};C.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=M.values(n);return e?M.filter(r,function(i){return i.v===e}):r}};C.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=M.values(n);return e?M.filter(r,function(i){return i.w===e}):r}};C.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))};function Ie(t,e){t[e]?t[e]++:t[e]=1}function Se(t,e){--t[e]||delete t[e]}function yt(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var o=i;i=a,a=o}return i+$e+a+$e+(M.isUndefined(r)?Cr:r)}function Ar(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return r&&(s.name=r),s}function me(t,e){return yt(t,e.v,e.w,e.name)}var Lr="2.1.8",$r={Graph:xe,version:Lr},W=F,Ir=xe,Sr={write:Tr,read:Dr};function Tr(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:Pr(t),edges:Rr(t)};return W.isUndefined(t.graph())||(e.value=W.clone(t.graph())),e}function Pr(t){return W.map(t.nodes(),function(e){var n=t.node(e),r=t.parent(e),i={v:e};return W.isUndefined(n)||(i.value=n),W.isUndefined(r)||(i.parent=r),i})}function Rr(t){return W.map(t.edges(),function(e){var n=t.edge(e),r={v:e.v,w:e.w};return W.isUndefined(e.name)||(r.name=e.name),W.isUndefined(n)||(r.value=n),r})}function Dr(t){var e=new Ir(t.options).setGraph(t.value);return W.each(t.nodes,function(n){e.setNode(n.v,n.value),n.parent&&e.setParent(n.v,n.parent)}),W.each(t.edges,function(n){e.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),e}var bt=F,qr=Vr;function Vr(t){var e={},n=[],r;function i(a){bt.has(e,a)||(e[a]=!0,r.push(a),bt.each(t.successors(a),i),bt.each(t.predecessors(a),i))}return bt.each(t.nodes(),function(a){r=[],i(a),r.length&&n.push(r)}),n}var Tn=F,Pn=z;function z(){this._arr=[],this._keyIndices={}}z.prototype.size=function(){return this._arr.length};z.prototype.keys=function(){return this._arr.map(function(t){return t.key})};z.prototype.has=function(t){return Tn.has(this._keyIndices,t)};z.prototype.priority=function(t){var e=this._keyIndices[t];if(e!==void 0)return this._arr[e].priority};z.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key};z.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!Tn.has(n,t)){var r=this._arr,i=r.length;return n[t]=i,r.push({key:t,priority:e}),this._decrease(i),!0}return!1};z.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key};z.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)};z.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))};z.prototype._decrease=function(t){for(var e=this._arr,n=e[t].priority,r;t!==0&&(r=t>>1,!(e[r].priority<n));)this._swap(t,r),t=r};z.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],a=n[e];n[t]=a,n[e]=i,r[a.key]=t,r[i.key]=e};var Or=F,Fr=Pn,Rn=Hr,zr=Or.constant(1);function Hr(t,e,n,r){return Br(t,String(e),n||zr,r||function(i){return t.outEdges(i)})}function Br(t,e,n,r){var i={},a=new Fr,o,s,f=function(c){var u=c.v!==o?c.v:c.w,l=i[u],h=n(c),d=s.distance+h;if(h<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+c+" Weight: "+h);d<l.distance&&(l.distance=d,l.predecessor=o,a.decrease(u,d))};for(t.nodes().forEach(function(c){var u=c===e?0:Number.POSITIVE_INFINITY;i[c]={distance:u},a.add(c,u)});a.size()>0&&(o=a.removeMin(),s=i[o],s.distance!==Number.POSITIVE_INFINITY);)r(o).forEach(f);return i}var Ur=Rn,Xr=F,Wr=Yr;function Yr(t,e,n){return Xr.transform(t.nodes(),function(r,i){r[i]=Ur(t,i,e,n)},{})}var Te=F,Dn=Kr;function Kr(t){var e=0,n=[],r={},i=[];function a(o){var s=r[o]={onStack:!0,lowlink:e,index:e++};if(n.push(o),t.successors(o).forEach(function(u){Te.has(r,u)?r[u].onStack&&(s.lowlink=Math.min(s.lowlink,r[u].index)):(a(u),s.lowlink=Math.min(s.lowlink,r[u].lowlink))}),s.lowlink===s.index){var f=[],c;do c=n.pop(),r[c].onStack=!1,f.push(c);while(o!==c);i.push(f)}}return t.nodes().forEach(function(o){Te.has(r,o)||a(o)}),i}var Zr=F,Qr=Dn,Jr=jr;function jr(t){return Zr.filter(Qr(t),function(e){return e.length>1||e.length===1&&t.hasEdge(e[0],e[0])})}var Gr=F,ti=ni,ei=Gr.constant(1);function ni(t,e,n){return ri(t,e||ei,n||function(r){return t.outEdges(r)})}function ri(t,e,n){var r={},i=t.nodes();return i.forEach(function(a){r[a]={},r[a][a]={distance:0},i.forEach(function(o){a!==o&&(r[a][o]={distance:Number.POSITIVE_INFINITY})}),n(a).forEach(function(o){var s=o.v===a?o.w:o.v,f=e(o);r[a][s]={distance:f,predecessor:a}})}),i.forEach(function(a){var o=r[a];i.forEach(function(s){var f=r[s];i.forEach(function(c){var u=f[a],l=o[c],h=f[c],d=u.distance+l.distance;d<h.distance&&(h.distance=d,h.predecessor=l.predecessor)})})}),r}var ut=F,qn=Vn;Vn.CycleException=$t;function Vn(t){var e={},n={},r=[];function i(a){if(ut.has(n,a))throw new $t;ut.has(e,a)||(n[a]=!0,e[a]=!0,ut.each(t.predecessors(a),i),delete n[a],r.push(a))}if(ut.each(t.sinks(),i),ut.size(e)!==t.nodeCount())throw new $t;return r}function $t(){}$t.prototype=new Error;var Pe=qn,ii=ai;function ai(t){try{Pe(t)}catch(e){if(e instanceof Pe.CycleException)return!1;throw e}return!0}var It=F,On=oi;function oi(t,e,n){It.isArray(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],a={};return It.each(e,function(o){if(!t.hasNode(o))throw new Error("Graph does not have node: "+o);Fn(t,o,n==="post",a,r,i)}),i}function Fn(t,e,n,r,i,a){It.has(r,e)||(r[e]=!0,n||a.push(e),It.each(i(e),function(o){Fn(t,o,n,r,i,a)}),n&&a.push(e))}var si=On,ui=fi;function fi(t,e){return si(t,e,"post")}var ci=On,li=hi;function hi(t,e){return ci(t,e,"pre")}var Re=F,di=xe,pi=Pn,gi=vi;function vi(t,e){var n=new di,r={},i=new pi,a;function o(f){var c=f.v===a?f.w:f.v,u=i.priority(c);if(u!==void 0){var l=e(f);l<u&&(r[c]=a,i.decrease(c,l))}}if(t.nodeCount()===0)return n;Re.each(t.nodes(),function(f){i.add(f,Number.POSITIVE_INFINITY),n.setNode(f)}),i.decrease(t.nodes()[0],0);for(var s=!1;i.size()>0;){if(a=i.removeMin(),Re.has(r,a))n.setEdge(a,r[a]);else{if(s)throw new Error("Input graph is not connected: "+t);s=!0}t.nodeEdges(a).forEach(o)}return n}var yi={components:qr,dijkstra:Rn,dijkstraAll:Wr,findCycles:Jr,floydWarshall:ti,isAcyclic:ii,postorder:ui,preorder:li,prim:gi,tarjan:Dn,topsort:qn},De=$r,Vt={Graph:De.Graph,json:Sr,alg:yi,version:De.version},q="$";function St(){}St.prototype=H.prototype={constructor:St,has:function(t){return q+t in this},get:function(t){return this[q+t]},set:function(t,e){return this[q+t]=e,this},remove:function(t){var e=q+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===q&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===q&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===q&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===q&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===q&&++t;return t},empty:function(){for(var t in this)if(t[0]===q)return!1;return!0},each:function(t){for(var e in this)e[0]===q&&t(this[e],e.slice(1),this)}};function H(t,e){var n=new St;if(t instanceof St)t.each(function(s,f){n.set(f,s)});else if(Array.isArray(t)){var r=-1,i=t.length,a;if(e==null)for(;++r<i;)n.set(r,t[r]);else for(;++r<i;)n.set(e(a=t[r],r,t),a)}else if(t)for(var o in t)n.set(o,t[o]);return n}function xi(){var t=[],e=[],n,r,i;function a(s,f,c,u){if(f>=t.length)return n!=null&&s.sort(n),r!=null?r(s):s;for(var l=-1,h=s.length,d=t[f++],w,m,E=H(),x,b=c();++l<h;)(x=E.get(w=d(m=s[l])+""))?x.push(m):E.set(w,[m]);return E.each(function(p,y){u(b,y,a(p,f,c,u))}),b}function o(s,f){if(++f>t.length)return s;var c,u=e[f-1];return r!=null&&f>=t.length?c=s.entries():(c=[],s.each(function(l,h){c.push({key:h,values:o(l,f)})})),u!=null?c.sort(function(l,h){return u(l.key,h.key)}):c}return i={object:function(s){return a(s,0,mi,wi)},map:function(s){return a(s,0,qe,Ve)},entries:function(s){return o(a(s,0,qe,Ve),0)},key:function(s){return t.push(s),i},sortKeys:function(s){return e[t.length-1]=s,i},sortValues:function(s){return n=s,i},rollup:function(s){return r=s,i}}}function mi(){return{}}function wi(t,e,n){t[e]=n}function qe(){return H()}function Ve(t,e,n){t.set(e,n)}function Tt(){}var et=H.prototype;Tt.prototype=Pt.prototype={constructor:Tt,has:et.has,add:function(t){return t+="",this[q+t]=t,this},remove:et.remove,clear:et.clear,values:et.keys,size:et.size,empty:et.empty,each:et.each};function Pt(t,e){var n=new Tt;if(t instanceof Tt)t.each(function(a){n.add(a)});else if(t){var r=-1,i=t.length;if(e==null)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}function we(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function zn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function xt(){}var lt=.7,Rt=1/lt,it="\\s*([+-]?\\d+)\\s*",ht="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Y="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_i=/^#([0-9a-f]{3,8})$/,bi=new RegExp("^rgb\\("+[it,it,it]+"\\)$"),Ei=new RegExp("^rgb\\("+[Y,Y,Y]+"\\)$"),Ni=new RegExp("^rgba\\("+[it,it,it,ht]+"\\)$"),Mi=new RegExp("^rgba\\("+[Y,Y,Y,ht]+"\\)$"),ki=new RegExp("^hsl\\("+[ht,Y,Y]+"\\)$"),Ci=new RegExp("^hsla\\("+[ht,Y,Y,ht]+"\\)$"),Oe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};we(xt,dt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Fe,formatHex:Fe,formatHsl:Ai,formatRgb:ze,toString:ze});function Fe(){return this.rgb().formatHex()}function Ai(){return Hn(this).formatHsl()}function ze(){return this.rgb().formatRgb()}function dt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=_i.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?He(e):n===3?new P(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Et(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Et(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bi.exec(t))?new P(e[1],e[2],e[3],1):(e=Ei.exec(t))?new P(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ni.exec(t))?Et(e[1],e[2],e[3],e[4]):(e=Mi.exec(t))?Et(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ki.exec(t))?Xe(e[1],e[2]/100,e[3]/100,1):(e=Ci.exec(t))?Xe(e[1],e[2]/100,e[3]/100,e[4]):Oe.hasOwnProperty(t)?He(Oe[t]):t==="transparent"?new P(NaN,NaN,NaN,0):null}function He(t){return new P(t>>16&255,t>>8&255,t&255,1)}function Et(t,e,n,r){return r<=0&&(t=e=n=NaN),new P(t,e,n,r)}function Li(t){return t instanceof xt||(t=dt(t)),t?(t=t.rgb(),new P(t.r,t.g,t.b,t.opacity)):new P}function ae(t,e,n,r){return arguments.length===1?Li(t):new P(t,e,n,r==null?1:r)}function P(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}we(P,ae,zn(xt,{brighter:function(t){return t=t==null?Rt:Math.pow(Rt,t),new P(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?lt:Math.pow(lt,t),new P(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Be,formatHex:Be,formatRgb:Ue,toString:Ue}));function Be(){return"#"+Yt(this.r)+Yt(this.g)+Yt(this.b)}function Ue(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Yt(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function Xe(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new U(t,e,n,r)}function Hn(t){if(t instanceof U)return new U(t.h,t.s,t.l,t.opacity);if(t instanceof xt||(t=dt(t)),!t)return new U;if(t instanceof U)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,f=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=f<.5?a+i:2-a-i,o*=60):s=f>0&&f<1?0:o,new U(o,s,f,t.opacity)}function $i(t,e,n,r){return arguments.length===1?Hn(t):new U(t,e,n,r==null?1:r)}function U(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}we(U,$i,zn(xt,{brighter:function(t){return t=t==null?Rt:Math.pow(Rt,t),new U(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?lt:Math.pow(lt,t),new U(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new P(Kt(t>=240?t-240:t+120,i,r),Kt(t,i,r),Kt(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Kt(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function _e(t){return function(){return t}}function Ii(t,e){return function(n){return t+n*e}}function Si(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ti(t){return(t=+t)==1?Bn:function(e,n){return n-e?Si(e,n,t):_e(isNaN(e)?n:e)}}function Bn(t,e){var n=e-t;return n?Ii(t,n):_e(isNaN(t)?e:t)}var We=function t(e){var n=Ti(e);function r(i,a){var o=n((i=ae(i)).r,(a=ae(a)).r),s=n(i.g,a.g),f=n(i.b,a.b),c=Bn(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=s(u),i.b=f(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function Pi(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Ri(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Di(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=be(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function qi(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function oe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Vi(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=be(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var se=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zt=new RegExp(se.source,"g");function Oi(t){return function(){return t}}function Fi(t){return function(e){return t(e)+""}}function zi(t,e){var n=se.lastIndex=Zt.lastIndex=0,r,i,a,o=-1,s=[],f=[];for(t=t+"",e=e+"";(r=se.exec(t))&&(i=Zt.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,f.push({i:o,x:oe(r,i)})),n=Zt.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?f[0]?Fi(f[0].x):Oi(e):(e=f.length,function(c){for(var u=0,l;u<e;++u)s[(l=f[u]).i]=l.x(c);return s.join("")})}function be(t,e){var n=typeof e,r;return e==null||n==="boolean"?_e(e):(n==="number"?oe:n==="string"?(r=dt(e))?(e=r,We):zi:e instanceof dt?We:e instanceof Date?qi:Ri(e)?Pi:Array.isArray(e)?Di:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Vi:oe)(t,e)}var ue="http://www.w3.org/1999/xhtml",Ye={svg:"http://www.w3.org/2000/svg",xhtml:ue,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ot(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ye.hasOwnProperty(e)?{space:Ye[e],local:t}:t}function Hi(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ue&&e.documentElement.namespaceURI===ue?e.createElement(t):e.createElementNS(n,t)}}function Bi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Un(t){var e=Ot(t);return(e.local?Bi:Hi)(e)}function Ui(){}function Ee(t){return t==null?Ui:function(){return this.querySelector(t)}}function Xi(t){typeof t!="function"&&(t=Ee(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),f,c,u=0;u<o;++u)(f=a[u])&&(c=t.call(f,f.__data__,u,a))&&("__data__"in f&&(c.__data__=f.__data__),s[u]=c);return new D(r,this._parents)}function Wi(){return[]}function Xn(t){return t==null?Wi:function(){return this.querySelectorAll(t)}}function Yi(t){typeof t!="function"&&(t=Xn(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,f,c=0;c<s;++c)(f=o[c])&&(r.push(t.call(f,f.__data__,c,o)),i.push(f));return new D(r,i)}function Wn(t){return function(){return this.matches(t)}}function Ki(t){typeof t!="function"&&(t=Wn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],f,c=0;c<o;++c)(f=a[c])&&t.call(f,f.__data__,c,a)&&s.push(f);return new D(r,this._parents)}function Yn(t){return new Array(t.length)}function Zi(){return new D(this._enter||this._groups.map(Yn),this._parents)}function Dt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Dt.prototype={constructor:Dt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Qi(t){return function(){return t}}var Ke="$";function Ji(t,e,n,r,i,a){for(var o=0,s,f=e.length,c=a.length;o<c;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new Dt(t,a[o]);for(;o<f;++o)(s=e[o])&&(i[o]=s)}function ji(t,e,n,r,i,a,o){var s,f,c={},u=e.length,l=a.length,h=new Array(u),d;for(s=0;s<u;++s)(f=e[s])&&(h[s]=d=Ke+o.call(f,f.__data__,s,e),d in c?i[s]=f:c[d]=f);for(s=0;s<l;++s)d=Ke+o.call(t,a[s],s,a),(f=c[d])?(r[s]=f,f.__data__=a[s],c[d]=null):n[s]=new Dt(t,a[s]);for(s=0;s<u;++s)(f=e[s])&&c[h[s]]===f&&(i[s]=f)}function Gi(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(_){d[++c]=_}),d;var n=e?ji:Ji,r=this._parents,i=this._groups;typeof t!="function"&&(t=Qi(t));for(var a=i.length,o=new Array(a),s=new Array(a),f=new Array(a),c=0;c<a;++c){var u=r[c],l=i[c],h=l.length,d=t.call(u,u&&u.__data__,c,r),w=d.length,m=s[c]=new Array(w),E=o[c]=new Array(w),x=f[c]=new Array(h);n(u,l,m,E,x,d,e);for(var b=0,p=0,y,v;b<w;++b)if(y=m[b]){for(b>=p&&(p=b+1);!(v=E[p])&&++p<w;);y._next=v||null}}return o=new D(o,r),o._enter=s,o._exit=f,o}function ta(){return new D(this._exit||this._groups.map(Yn),this._parents)}function ea(t,e,n){var r=this.enter(),i=this,a=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function na(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var f=e[s],c=n[s],u=f.length,l=o[s]=new Array(u),h,d=0;d<u;++d)(h=f[d]||c[d])&&(l[d]=h);for(;s<r;++s)o[s]=e[s];return new D(o,this._parents)}function ra(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function ia(t){t||(t=aa);function e(l,h){return l&&h?t(l.__data__,h.__data__):!l-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,f=i[a]=new Array(s),c,u=0;u<s;++u)(c=o[u])&&(f[u]=c);f.sort(e)}return new D(i,this._parents).order()}function aa(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function oa(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function sa(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function ua(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function fa(){var t=0;return this.each(function(){++t}),t}function ca(){return!this.node()}function la(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function ha(t){return function(){this.removeAttribute(t)}}function da(t){return function(){this.removeAttributeNS(t.space,t.local)}}function pa(t,e){return function(){this.setAttribute(t,e)}}function ga(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function va(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ya(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function xa(t,e){var n=Ot(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?da:ha:typeof e=="function"?n.local?ya:va:n.local?ga:pa)(n,e))}function Kn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ma(t){return function(){this.style.removeProperty(t)}}function wa(t,e,n){return function(){this.style.setProperty(t,e,n)}}function _a(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ba(t,e,n){return arguments.length>1?this.each((e==null?ma:typeof e=="function"?_a:wa)(t,e,n==null?"":n)):ot(this.node(),t)}function ot(t,e){return t.style.getPropertyValue(e)||Kn(t).getComputedStyle(t,null).getPropertyValue(e)}function Ea(t){return function(){delete this[t]}}function Na(t,e){return function(){this[t]=e}}function Ma(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ka(t,e){return arguments.length>1?this.each((e==null?Ea:typeof e=="function"?Ma:Na)(t,e)):this.node()[t]}function Zn(t){return t.trim().split(/^|\s+/)}function Ne(t){return t.classList||new Qn(t)}function Qn(t){this._node=t,this._names=Zn(t.getAttribute("class")||"")}Qn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Jn(t,e){for(var n=Ne(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function jn(t,e){for(var n=Ne(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ca(t){return function(){Jn(this,t)}}function Aa(t){return function(){jn(this,t)}}function La(t,e){return function(){(e.apply(this,arguments)?Jn:jn)(this,t)}}function $a(t,e){var n=Zn(t+"");if(arguments.length<2){for(var r=Ne(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?La:e?Ca:Aa)(n,e))}function Ia(){this.textContent=""}function Sa(t){return function(){this.textContent=t}}function Ta(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function Pa(t){return arguments.length?this.each(t==null?Ia:(typeof t=="function"?Ta:Sa)(t)):this.node().textContent}function Ra(){this.innerHTML=""}function Da(t){return function(){this.innerHTML=t}}function qa(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function Va(t){return arguments.length?this.each(t==null?Ra:(typeof t=="function"?qa:Da)(t)):this.node().innerHTML}function Oa(){this.nextSibling&&this.parentNode.appendChild(this)}function Fa(){return this.each(Oa)}function za(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ha(){return this.each(za)}function Ba(t){var e=typeof t=="function"?t:Un(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ua(){return null}function Xa(t,e){var n=typeof t=="function"?t:Un(t),r=e==null?Ua:typeof e=="function"?e:Ee(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Wa(){var t=this.parentNode;t&&t.removeChild(this)}function Ya(){return this.each(Wa)}function Ka(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Za(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Qa(t){return this.select(t?Za:Ka)}function Ja(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Gn={},ct=null;if(typeof document!="undefined"){var ja=document.documentElement;"onmouseenter"in ja||(Gn={mouseenter:"mouseover",mouseleave:"mouseout"})}function Ga(t,e,n){return t=tr(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function tr(t,e,n){return function(r){var i=ct;ct=r;try{t.call(this,this.__data__,e,n)}finally{ct=i}}}function to(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function eo(t){return function(){var e=this.__on;if(!!e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.capture):e[++r]=a;++r?e.length=r:delete this.__on}}}function no(t,e,n){var r=Gn.hasOwnProperty(t.type)?Ga:tr;return function(i,a,o){var s=this.__on,f,c=r(e,a,o);if(s){for(var u=0,l=s.length;u<l;++u)if((f=s[u]).type===t.type&&f.name===t.name){this.removeEventListener(f.type,f.listener,f.capture),this.addEventListener(f.type,f.listener=c,f.capture=n),f.value=e;return}}this.addEventListener(t.type,c,n),f={type:t.type,name:t.name,value:e,listener:c,capture:n},s?s.push(f):this.__on=[f]}}function ro(t,e,n){var r=to(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var f=0,c=s.length,u;f<c;++f)for(i=0,u=s[f];i<a;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(s=e?no:eo,n==null&&(n=!1),i=0;i<a;++i)this.each(s(r[i],e,n));return this}function er(t,e,n){var r=Kn(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function io(t,e){return function(){return er(this,t,e)}}function ao(t,e){return function(){return er(this,t,e.apply(this,arguments))}}function oo(t,e){return this.each((typeof e=="function"?ao:io)(t,e))}var nr=[null];function D(t,e){this._groups=t,this._parents=e}function st(){return new D([[document.documentElement]],nr)}D.prototype=st.prototype={constructor:D,select:Xi,selectAll:Yi,filter:Ki,data:Gi,enter:Zi,exit:ta,join:ea,merge:na,order:ra,sort:ia,call:oa,nodes:sa,node:ua,size:fa,empty:ca,each:la,attr:xa,style:ba,property:ka,classed:$a,text:Pa,html:Va,raise:Fa,lower:Ha,append:Ba,insert:Xa,remove:Ya,clone:Qa,datum:Ja,on:ro,dispatch:oo};function V(t){return typeof t=="string"?new D([[document.querySelector(t)]],[document.documentElement]):new D([[t]],nr)}var so=$n("start","end","cancel","interrupt"),uo=[],rr=0,Ze=1,fe=2,Ct=3,Qe=4,ce=5,At=6;function Ft(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;fo(t,n,{name:e,index:r,group:i,on:so,tween:uo,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:rr})}function Me(t,e){var n=B(t,e);if(n.state>rr)throw new Error("too late; already scheduled");return n}function J(t,e){var n=B(t,e);if(n.state>Ct)throw new Error("too late; already running");return n}function B(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function fo(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=mr(a,0,n.time);function a(c){n.state=Ze,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,l,h,d;if(n.state!==Ze)return f();for(u in r)if(d=r[u],d.name===n.name){if(d.state===Ct)return Le(o);d.state===Qe?(d.state=At,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=At,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[u])}if(Le(function(){n.state===Ct&&(n.state=Qe,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=fe,n.on.call("start",t,t.__data__,n.index,n.group),n.state===fe){for(n.state=Ct,i=new Array(h=n.tween.length),u=0,l=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++l]=d);i.length=l+1}}function s(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(f),n.state=ce,1),l=-1,h=i.length;++l<h;)i[l].call(t,u);n.state===ce&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=At,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function co(t,e){var n=t.__transition,r,i,a=!0,o;if(!!n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>fe&&r.state<ce,r.state=At,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function lo(t){return this.each(function(){co(this,t)})}function ke(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ir(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function mt(){}var pt=.7,qt=1/pt,at="\\s*([+-]?\\d+)\\s*",gt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",K="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ho=/^#([0-9a-f]{3,8})$/,po=new RegExp("^rgb\\("+[at,at,at]+"\\)$"),go=new RegExp("^rgb\\("+[K,K,K]+"\\)$"),vo=new RegExp("^rgba\\("+[at,at,at,gt]+"\\)$"),yo=new RegExp("^rgba\\("+[K,K,K,gt]+"\\)$"),xo=new RegExp("^hsl\\("+[gt,K,K]+"\\)$"),mo=new RegExp("^hsla\\("+[gt,K,K,gt]+"\\)$"),Je={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ke(mt,vt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:je,formatHex:je,formatHsl:wo,formatRgb:Ge,toString:Ge});function je(){return this.rgb().formatHex()}function wo(){return ar(this).formatHsl()}function Ge(){return this.rgb().formatRgb()}function vt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ho.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?tn(e):n===3?new R(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Nt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Nt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=po.exec(t))?new R(e[1],e[2],e[3],1):(e=go.exec(t))?new R(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vo.exec(t))?Nt(e[1],e[2],e[3],e[4]):(e=yo.exec(t))?Nt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=xo.exec(t))?rn(e[1],e[2]/100,e[3]/100,1):(e=mo.exec(t))?rn(e[1],e[2]/100,e[3]/100,e[4]):Je.hasOwnProperty(t)?tn(Je[t]):t==="transparent"?new R(NaN,NaN,NaN,0):null}function tn(t){return new R(t>>16&255,t>>8&255,t&255,1)}function Nt(t,e,n,r){return r<=0&&(t=e=n=NaN),new R(t,e,n,r)}function _o(t){return t instanceof mt||(t=vt(t)),t?(t=t.rgb(),new R(t.r,t.g,t.b,t.opacity)):new R}function le(t,e,n,r){return arguments.length===1?_o(t):new R(t,e,n,r==null?1:r)}function R(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ke(R,le,ir(mt,{brighter:function(t){return t=t==null?qt:Math.pow(qt,t),new R(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?pt:Math.pow(pt,t),new R(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:en,formatHex:en,formatRgb:nn,toString:nn}));function en(){return"#"+Qt(this.r)+Qt(this.g)+Qt(this.b)}function nn(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Qt(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function rn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new X(t,e,n,r)}function ar(t){if(t instanceof X)return new X(t.h,t.s,t.l,t.opacity);if(t instanceof mt||(t=vt(t)),!t)return new X;if(t instanceof X)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,f=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=f<.5?a+i:2-a-i,o*=60):s=f>0&&f<1?0:o,new X(o,s,f,t.opacity)}function bo(t,e,n,r){return arguments.length===1?ar(t):new X(t,e,n,r==null?1:r)}function X(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ke(X,bo,ir(mt,{brighter:function(t){return t=t==null?qt:Math.pow(qt,t),new X(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?pt:Math.pow(pt,t),new X(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new R(Jt(t>=240?t-240:t+120,i,r),Jt(t,i,r),Jt(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Jt(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function or(t){return function(){return t}}function Eo(t,e){return function(n){return t+n*e}}function No(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Mo(t){return(t=+t)==1?sr:function(e,n){return n-e?No(e,n,t):or(isNaN(e)?n:e)}}function sr(t,e){var n=e-t;return n?Eo(t,n):or(isNaN(t)?e:t)}var an=function t(e){var n=Mo(e);function r(i,a){var o=n((i=le(i)).r,(a=le(a)).r),s=n(i.g,a.g),f=n(i.b,a.b),c=sr(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=s(u),i.b=f(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function G(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var he=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jt=new RegExp(he.source,"g");function ko(t){return function(){return t}}function Co(t){return function(e){return t(e)+""}}function Ao(t,e){var n=he.lastIndex=jt.lastIndex=0,r,i,a,o=-1,s=[],f=[];for(t=t+"",e=e+"";(r=he.exec(t))&&(i=jt.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,f.push({i:o,x:G(r,i)})),n=jt.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?f[0]?Co(f[0].x):ko(e):(e=f.length,function(c){for(var u=0,l;u<e;++u)s[(l=f[u]).i]=l.x(c);return s.join("")})}var on=180/Math.PI,de={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ur(t,e,n,r,i,a){var o,s,f;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(f=t*n+e*r)&&(n-=t*f,r-=e*f),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,f/=s),t*r<e*n&&(t=-t,e=-e,f=-f,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*on,skewX:Math.atan(f)*on,scaleX:o,scaleY:s}}var ft,Gt,sn,Mt;function Lo(t){return t==="none"?de:(ft||(ft=document.createElement("DIV"),Gt=document.documentElement,sn=document.defaultView),ft.style.transform=t,t=sn.getComputedStyle(Gt.appendChild(ft),null).getPropertyValue("transform"),Gt.removeChild(ft),t=t.slice(7,-1).split(","),ur(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function $o(t){return t==null||(Mt||(Mt=document.createElementNS("http://www.w3.org/2000/svg","g")),Mt.setAttribute("transform",t),!(t=Mt.transform.baseVal.consolidate()))?de:(t=t.matrix,ur(t.a,t.b,t.c,t.d,t.e,t.f))}function fr(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function a(c,u,l,h,d,w){if(c!==l||u!==h){var m=d.push("translate(",null,e,null,n);w.push({i:m-4,x:G(c,l)},{i:m-2,x:G(u,h)})}else(l||h)&&d.push("translate("+l+e+h+n)}function o(c,u,l,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:l.push(i(l)+"rotate(",null,r)-2,x:G(c,u)})):u&&l.push(i(l)+"rotate("+u+r)}function s(c,u,l,h){c!==u?h.push({i:l.push(i(l)+"skewX(",null,r)-2,x:G(c,u)}):u&&l.push(i(l)+"skewX("+u+r)}function f(c,u,l,h,d,w){if(c!==l||u!==h){var m=d.push(i(d)+"scale(",null,",",null,")");w.push({i:m-4,x:G(c,l)},{i:m-2,x:G(u,h)})}else(l!==1||h!==1)&&d.push(i(d)+"scale("+l+","+h+")")}return function(c,u){var l=[],h=[];return c=t(c),u=t(u),a(c.translateX,c.translateY,u.translateX,u.translateY,l,h),o(c.rotate,u.rotate,l,h),s(c.skewX,u.skewX,l,h),f(c.scaleX,c.scaleY,u.scaleX,u.scaleY,l,h),c=u=null,function(d){for(var w=-1,m=h.length,E;++w<m;)l[(E=h[w]).i]=E.x(d);return l.join("")}}}var Io=fr(Lo,"px, ","px)","deg)"),So=fr($o,", ",")",")");function To(t,e){var n,r;return function(){var i=J(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Po(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=J(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},f=0,c=i.length;f<c;++f)if(i[f].name===e){i[f]=s;break}f===c&&i.push(s)}a.tween=i}}function Ro(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=B(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?To:Po)(n,t,e))}function Ce(t,e,n){var r=t._id;return t.each(function(){var i=J(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return B(i,r).value[e]}}function cr(t,e){var n;return(typeof e=="number"?G:e instanceof vt?an:(n=vt(e))?(e=n,an):Ao)(t,e)}function Do(t){return function(){this.removeAttribute(t)}}function qo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Vo(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function Oo(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function Fo(t,e,n){var r,i,a;return function(){var o,s=n(this),f;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),f=s+"",o===f?null:o===r&&f===i?a:(i=f,a=e(r=o,s)))}}function zo(t,e,n){var r,i,a;return function(){var o,s=n(this),f;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),f=s+"",o===f?null:o===r&&f===i?a:(i=f,a=e(r=o,s)))}}function Ho(t,e){var n=Ot(t),r=n==="transform"?So:cr;return this.attrTween(t,typeof e=="function"?(n.local?zo:Fo)(n,r,Ce(this,"attr."+t,e)):e==null?(n.local?qo:Do)(n):(n.local?Oo:Vo)(n,r,e))}function Bo(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Uo(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Xo(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Uo(t,a)),n}return i._value=e,i}function Wo(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Bo(t,a)),n}return i._value=e,i}function Yo(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ot(t);return this.tween(n,(r.local?Xo:Wo)(r,e))}function Ko(t,e){return function(){Me(this,t).delay=+e.apply(this,arguments)}}function Zo(t,e){return e=+e,function(){Me(this,t).delay=e}}function Qo(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ko:Zo)(e,t)):B(this.node(),e).delay}function Jo(t,e){return function(){J(this,t).duration=+e.apply(this,arguments)}}function jo(t,e){return e=+e,function(){J(this,t).duration=e}}function Go(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Jo:jo)(e,t)):B(this.node(),e).duration}function ts(t,e){if(typeof e!="function")throw new Error;return function(){J(this,t).ease=e}}function es(t){var e=this._id;return arguments.length?this.each(ts(e,t)):B(this.node(),e).ease}function ns(t){typeof t!="function"&&(t=Wn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],f,c=0;c<o;++c)(f=a[c])&&t.call(f,f.__data__,c,a)&&s.push(f);return new Q(r,this._parents,this._name,this._id)}function rs(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var f=e[s],c=n[s],u=f.length,l=o[s]=new Array(u),h,d=0;d<u;++d)(h=f[d]||c[d])&&(l[d]=h);for(;s<r;++s)o[s]=e[s];return new Q(o,this._parents,this._name,this._id)}function is(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function as(t,e,n){var r,i,a=is(e)?Me:J;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function os(t,e){var n=this._id;return arguments.length<2?B(this.node(),n).on.on(t):this.each(as(n,t,e))}function ss(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function us(){return this.on("end.remove",ss(this._id))}function fs(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ee(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],f=s.length,c=a[o]=new Array(f),u,l,h=0;h<f;++h)(u=s[h])&&(l=t.call(u,u.__data__,h,s))&&("__data__"in u&&(l.__data__=u.__data__),c[h]=l,Ft(c[h],e,n,h,c,B(u,n)));return new Q(a,this._parents,e,n)}function cs(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Xn(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var f=r[s],c=f.length,u,l=0;l<c;++l)if(u=f[l]){for(var h=t.call(u,u.__data__,l,f),d,w=B(u,n),m=0,E=h.length;m<E;++m)(d=h[m])&&Ft(d,e,n,m,h,w);a.push(h),o.push(u)}return new Q(a,o,e,n)}var ls=st.prototype.constructor;function hs(){return new ls(this._groups,this._parents)}function ds(t,e){var n,r,i;return function(){var a=ot(this,t),o=(this.style.removeProperty(t),ot(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function lr(t){return function(){this.style.removeProperty(t)}}function ps(t,e,n){var r,i=n+"",a;return function(){var o=ot(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function gs(t,e,n){var r,i,a;return function(){var o=ot(this,t),s=n(this),f=s+"";return s==null&&(f=s=(this.style.removeProperty(t),ot(this,t))),o===f?null:o===r&&f===i?a:(i=f,a=e(r=o,s))}}function vs(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var f=J(this,t),c=f.on,u=f.value[a]==null?s||(s=lr(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(o,i=u),f.on=r}}function ys(t,e,n){var r=(t+="")=="transform"?Io:cr;return e==null?this.styleTween(t,ds(t,r)).on("end.style."+t,lr(t)):typeof e=="function"?this.styleTween(t,gs(t,r,Ce(this,"style."+t,e))).each(vs(this._id,t)):this.styleTween(t,ps(t,r,e),n).on("end.style."+t,null)}function xs(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function ms(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&xs(t,o,n)),r}return a._value=e,a}function ws(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,ms(t,e,n==null?"":n))}function _s(t){return function(){this.textContent=t}}function bs(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function Es(t){return this.tween("text",typeof t=="function"?bs(Ce(this,"text",t)):_s(t==null?"":t+""))}function Ns(t){return function(e){this.textContent=t.call(this,e)}}function Ms(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Ns(i)),e}return r._value=t,r}function ks(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ms(t))}function Cs(){for(var t=this._name,e=this._id,n=hr(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,f,c=0;c<s;++c)if(f=o[c]){var u=B(f,e);Ft(f,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Q(r,this._parents,t,n)}function As(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},f={value:function(){--i===0&&a()}};n.each(function(){var c=J(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(f)),c.on=e})})}var Ls=0;function Q(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function pe(t){return st().transition(t)}function hr(){return++Ls}var rt=st.prototype;Q.prototype=pe.prototype={constructor:Q,select:fs,selectAll:cs,filter:ns,merge:rs,selection:hs,transition:Cs,call:rt.call,nodes:rt.nodes,node:rt.node,size:rt.size,empty:rt.empty,each:rt.each,on:os,attr:Ho,attrTween:Yo,style:ys,styleTween:ws,text:Es,textTween:ks,remove:us,tween:Ro,delay:Qo,duration:Go,ease:es,end:As};function $s(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ge={time:null,delay:0,duration:250,ease:$s};function Is(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return ge.time=In(),ge;return n}function Ss(t){var e,n;t instanceof Q?(e=t._id,t=t._name):(e=hr(),(n=ge).time=In(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,f,c=0;c<s;++c)(f=o[c])&&Ft(f,t,e,c,o,n||Is(f,e));return new Q(r,this._parents,t,e)}st.prototype.interrupt=lo;st.prototype.transition=Ss;function Ts(t,e){e===void 0&&(e=[]);var n=new Vt.Graph({directed:!0});if(t.nodes().length===0)return n;e=Ps(t,e);var r=H(),i,a,o,s;for(o=0;o<e.length;++o)if(i=e[o],!(!i.nodes||i.nodes.length===0)){for(a=""+o,s=0;s<i.nodes.length;++s)r.set(i.nodes[s],a);n.setNode(a,{type:i.type,nodes:i.nodes})}return t.nodes(),t.nodes().forEach(function(f){t.node(f),r.has(f)||(a=""+o++,i={type:"same",nodes:[f]},r.set(f,a),n.setNode(a,i))}),t.edges().forEach(function(f){t.edge(f);var c=r.get(f.v),u=r.get(f.w),l=n.edge(c,u)||{delta:0};c===u?(l.delta=0,n.setEdge(c,u,l)):t.node(f.v).backwards?(l.delta=Math.max(l.delta,t.node(f.w).backwards?1:0),n.setEdge(u,c,l)):(l.delta=Math.max(l.delta,t.node(f.w).backwards?0:1),n.setEdge(c,u,l))}),n}function Ps(t,e){for(var n=0;n<e.length;++n)if(e[n].type==="min")return e;var r=t.sources(),i=r.length?r[0]:t.nodes()[0];return[{type:"min",nodes:[i]}].concat(e)}function Rs(t,e){var n=Ds(t,e);return t.edges().forEach(function(r){var i=qs(n,r.v,r.w);if(i<0){var a=t.edge(r)||{};a.reversed=!0,t.removeEdge(r),t.setEdge(r.w,r.v,a)}}),t}function Ds(t,e){var n=Pt(),r=new Vt.Graph({directed:!0}),i=[];if(!t.hasNode(e))throw Error("node not in graph");return ve(t,e,n,r,i),t.nodes().forEach(function(a){n.has(a)||ve(t,a,n,r,i)}),i.forEach(function(a,o){r.node(a).thread=o+1<i.length?i[o+1]:i[0]}),r}function qs(t,e,n){var r=t.node(e),i=t.node(n);if(r.depth<i.depth)for(var a=r.thread;t.node(a).depth>r.depth;){if(a===n)return 1;a=t.node(a).thread}else if(i.depth<r.depth)for(var o=i.thread;t.node(o).depth>i.depth;){if(o===e)return-1;o=t.node(o).thread}return 0}function ve(t,e,n,r,i,a){if(a===void 0&&(a=0),!n.has(e)){n.add(e),i.push(e),r.setNode(e,{depth:a});var o=t.outEdges(e).map(function(s){return s.w});o.forEach(function(s,f){n.has(s)||r.setEdge(e,s,{delta:1}),ve(t,s,n,r,i,a+1)})}}function Vs(t){var e=t.sources(),n=Pt(),r=Pt();t.edges().forEach(function(a){a.v===a.w&&r.add(te(a))}),t.nodes().forEach(function(a){t.node(a).rank=0});for(var i=function(){var a=e.shift();n.add(a);var o=t.node(a);o||t.setNode(a,o={}),o.rank=0,t.inEdges(a).forEach(function(s){var f=t.edge(s).delta===void 0?1:t.edge(s).delta;o.rank=Math.max(o.rank,t.node(s.v).rank+f)}),t.outEdges(a).forEach(function(s){r.add(te(s))}),t.nodes().forEach(function(s){e.indexOf(s)<0&&!n.has(s)&&!t.inEdges(s).some(function(f){return!r.has(te(f))})&&e.push(s)})};e.length>0;)i()}function te(t){return t.v+""+t.w+""+t.name}function Os(t,e){var n=Ts(t,e);n.nodeCount()!==0&&(Fs(n),Rs(n,"0"),Vs(n),zs(n),n.nodes().forEach(function(r){var i=n.node(r);i.nodes.forEach(function(a){t.node(a).rank=i.rank})}))}function Fs(t){t.sources().forEach(function(e){e!=="0"&&t.setEdge("0",e,{temp:!0,delta:0})})}function zs(t){t.edges().forEach(function(n){var r=t.edge(n);r.temp&&e(n.w)});function e(n){var r=t.node(n),i=kr(t.outEdges(n),function(a){return t.node(a.w).rank-t.edge(a).delta});i!==void 0&&(r.rank=i)}}function Hs(t,e){var n=[];if(e.length===0)return n;var r=t.sources(),i=H();return e.forEach(function(a,o){n.push([]),a.forEach(function(s){o===0&&r.indexOf(s)<0&&r.push(s),i.set(s,o)})}),Vt.alg.preorder(t,r).forEach(function(a){n[i.get(a)].push(a)}),n}function ye(t,e,n){return Bs(t,e,n)}function Bs(t,e,n){var r,i,a;e.length>n.length?(r=e,i=n):(r=n,i=e),a=i.length;var o=[];r.forEach(function(h){i.forEach(function(d,w){(t.hasEdge(h,d)||t.hasEdge(d,h))&&o.push(w)})});for(var s=1;s<a;)s*=2;var f=2*s-1;s-=1;for(var c=new Array(f),u=0;u<f;u++)c[u]=0;var l=0;return o.forEach(function(h){var d=h+s;for(c[d]++;d>0;)d%2&&(l+=c[d+1]),d=Math.floor((d-1)/2),c[d]++}),l}function Us(t,e){for(var n=!0;n;){n=!1;for(var r=0;r<e.length;++r)for(var i=0;i<e[r].length-1;++i){var a=un(t,e,r);fn(e[r],i,i+1);var o=un(t,e,r);o<a?n=!0:fn(e[r],i,i+1)}}}function un(t,e,n){var r=0;return n>0&&(r+=ye(t,e[n-1],e[n])),n+1<e.length&&(r+=ye(t,e[n],e[n+1])),r}function fn(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function cn(t){var e=Math.floor(t.length/2);if(t.length===0)return-1;if(t.length%2===1)return t[e];if(t.length===2)return(t[0]+t[1])/2;var n=t[e-1]-t[0],r=t[t.length-1]-t[e];return(t[e-1]*r+t[e]*n)/(n+r)}function ln(t,e,n,r,i,a){a===void 0&&(a=!1);var o=e[n],s=e[r],f=[];return s.forEach(function(c,u){t.nodeEdges(c,i).length>0&&f.push(u)}),f.length===0&&a&&o.forEach(function(c,u){t.nodeEdges(c,i).length>0&&f.push(u+.5)}),f.sort(function(c,u){return c-u}),f}function hn(t,e){for(var n=H(t.map(function(c,u){return[c,u]}),function(c){return c[0]}),r=1;r<t.length;++r)for(var i=r;i>0;--i){for(var a=i-1,o=e.get(t[a]),s=e.get(t[i]);(o=e.get(t[a]))===-1&&a>0;)a--;if(s===-1||o===-1||(o===s&&(o=n.get(t[a]),s=n.get(t[i])),s>=o))break;var f;f=[t[a],t[i]],t[i]=f[0],t[a]=f[1]}}function Xs(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r=!1),n>0)for(var i=function(f){var c=H();e[f].forEach(function(u){var l=cn(ln(t,e,f,f-1,u,r));c.set(u,l)}),hn(e[f],c)},a=1;a<e.length;++a)i(a);else for(var o=function(f){var c=H();e[f].forEach(function(u){var l=cn(ln(t,e,f,f+1,u,r));c.set(u,l)}),hn(e[f],c)},s=e.length-2;s>=0;--s)o(s)}function dn(t,e){e===void 0&&(e=25);for(var n=Ws(t),r=Hs(t,n),i=r,a=0;a++<e;)Xs(t,r,a%2===0),Us(t,r),pn(t,r)<pn(t,i)&&(i=Ys(r));i.forEach(function(o){o.forEach(function(s,f){t.node(s).depth=f})})}function Ws(t){var e=[];return t.nodes().forEach(function(n){for(var r=t.node(n).rank||0;r>=e.length;)e.push([]);e[r].push(n)}),e}function pn(t,e){for(var n=0,r=0;r<e.length-1;++r)n+=ye(t,e[r],e[r+1]);return n}function Ys(t){var e=[];return t.forEach(function(n){e.push(n.map(function(r){return r}))}),e}function Ks(t){typeof t.graph()!="object"&&t.setGraph({}),t.graph().dummyChains=[],t.edges().forEach(function(e){return Zs(t,e)})}function Zs(t,e){var n=t.edge(e),r=Js(t.node(e.v),t.node(e.w));if(r.length===0)return;t.removeEdge(e);var i=e.v;r.forEach(function(o,s){var f="__"+e.v+"_"+e.w+"_"+s;t.hasNode(f)||(o.dummy="edge",t.setNode(f,o),s===0&&t.graph().dummyChains.push(f)),a(i,i=f)}),a(i,e.w);function a(o,s){var f={points:[],value:n.value,origEdge:e,origLabel:n};t.setEdge(o,s,f,e.name)}}function Qs(t){var e=t.graph().dummyChains||[];e.forEach(function(n){var r=t.node(n),i=t.inEdges(n).map(function(s){return t.edge(s)});i.forEach(function(s){s.origLabel.dy=s.dy,s.origLabel.x0=s.x0,s.origLabel.y0=s.y0,s.origLabel.r0=s.r0,s.origLabel.d0=s.d0,t.setEdge(s.origEdge,s.origLabel)});for(var a=i.map(function(s){return s.r1}),o;r.dummy;)i=t.outEdges(n).map(function(s){return t.edge(s)}),i.forEach(function(s,f){s.origLabel.points.push({x:(r.x0+r.x1)/2,y:s.y0,d:s.d0,ro:s.r0,ri:a[f]})}),a=i.map(function(s){return s.r1}),o=t.successors(n)[0],t.removeNode(n),r=t.node(n=o);i.forEach(function(s){s.origLabel.x1=s.x1,s.origLabel.y1=s.y1,s.origLabel.r1=s.r1,s.origLabel.d1=s.d1})})}function Js(t,e){var n=[],r=t.rank;if(r+1<=e.rank){for(t.backwards&&n.push({rank:r,backwards:!1});++r<e.rank;)n.push({rank:r,backwards:!1});e.backwards&&n.push({rank:r,backwards:!1})}else if(r>e.rank){for(t.backwards||n.push({rank:r,backwards:!0});r-- >e.rank+1;)n.push({rank:r,backwards:!0});e.backwards||n.push({rank:r,backwards:!0})}return n}function gn(t){for(var e=ie(t,function(c){return c.rank||0})||0,n=ie(t,function(c){return c.band||0})||0,r=xi().key(function(c){return c.rank||0}).key(function(c){return c.band||0}).sortValues(function(c,u){return c.depth-u.depth}).map(t),i=new Array(e+1),a,o=0;o<=e;++o)if(i[o]=new Array(n+1),a=r.get(o),a)for(var s=0;s<=n;++s)i[o][s]=a.get(s)||[];else for(var f=0;f<=n;++f)i[o][f]=[];return i.bandValues=js(i),i}function js(t){if(t.length===0||t[0].length===0)return[];for(var e=t[0].length,n=new Array(e),r=0;r<e;r++)n[r]=0;return t.forEach(function(i){i.forEach(function(a,o){var s=O(a,function(f){return f.value});n[o]=Math.max(n[o],s)})}),n}function Gs(t,e,n){var r=ie(t.nodes(),function(a){return t.node(a).rank||0})||0,i=(e-n)/r;t.nodes().forEach(function(a){var o=t.node(a);o.x0=i*(o.rank||0),o.x1=o.x0+n})}function tu(t,e){return 1}function eu(){var t=tu;function e(n,r,i){n.forEach(function(a){var o=0;a.forEach(function(s,f){var c=n.bandValues[f]/O(n.bandValues)*r,u=i*c/5,l=c-2*u,h=O(s,function(b){return b.dy}),d=s.map(function(b,p){return b.value&&s[p+1]?t(s[p],s[p+1],e):0}),w=Math.max(0,l-h),m=O(d)?w/O(d):0,E=o+u;s.length===1&&(E+=(l-s[0].dy)/2);var x=Number.MAX_VALUE;s.forEach(function(b,p){b.y=E,b.spaceAbove=x,b.spaceBelow=d[p]*m,E+=b.dy+b.spaceBelow,x=b.spaceBelow,b.data&&b.data.forceY!==void 0&&(b.y=u+b.data.forceY*(l-b.dy))}),s.length>0&&(s[s.length-1].spaceBelow=Number.MAX_VALUE),o+=c})})}return e.separation=function(n){return arguments.length?(t=nu(n),e):t},e}function nu(t){if(typeof t!="function")throw new Error;return t}function vn(t,e){t.nodes().forEach(function(n){var r=t.node(n),i=H();function a(c,u){if(i.has(c))return i.get(c);var l={id:c,node:r.data,side:u,incoming:[],outgoing:[]};return i.set(c,l),l}t.inEdges(n).forEach(function(c){var u=t.edge(c),l=a(u.targetPortId||"in",r.direction!=="l"?"west":"east");l.incoming.push(c),u.targetPort=l}),t.outEdges(n).forEach(function(c){var u=t.edge(c),l=a(u.sourcePortId||"out",r.direction!=="l"?"east":"west");l.outgoing.push(c),u.sourcePort=l}),r.ports=i.values(),r.ports.sort(e),r.fromElsewhere=r.fromElsewhere||[],r.toElsewhere=r.toElsewhere||[];var o=0;r.fromElsewhere.forEach(function(c){c.x1=r.x0,o+=c.dy});var s={west:o,east:0},f={west:0,east:0};r.ports.forEach(function(c){c.y=s[c.side],c.index=f[c.side],c.dy=Math.max(O(c.incoming,function(l){return t.edge(l).dy}),O(c.outgoing,function(l){return t.edge(l).dy}));var u=c.side==="west"?r.x0:r.x1;c.outgoing.forEach(function(l){var h=t.edge(l);h.x0=u,h.y0=r.y+c.y+h.dy/2}),c.incoming.forEach(function(l){var h=t.edge(l);h.x1=u,h.y1=r.y+c.y+h.dy/2}),s[c.side]+=c.dy,f[c.side]+=1}),r.toElsewhere.forEach(function(c){c.x0=r.x1})})}function yn(t,e,n){if(n===void 0&&(n=!0),e.v===e.w)return Math.PI/2*(n?1:-1);var r=t.edge(e);return Math.atan2(r.y1-r.y0,r.x1-r.x0)}function xn(t,e){t.nodes().forEach(function(n){return ru(t,n)})}function ru(t,e){var n=t.node(e);n.ports.forEach(function(r){r.incoming.sort(mn(t,n,!1)),r.outgoing.sort(mn(t,n,!0))})}function mn(t,e,n){return n===void 0&&(n=!0),function(r,i){var a=yn(t,r,n),o=yn(t,i,n),s=n?1:-1;return r.v===i.v&&r.w===i.w&&Math.abs(a-o)<.001?typeof r.name=="number"&&typeof i.name=="number"?r.name-i.name:typeof r.name=="string"&&typeof i.name=="string"?r.name.localeCompare(i.name):0:Math.abs(a-o)<.001?r.w===i.w?t.node(i.v).y-t.node(r.v).y:r.v===i.v?t.node(i.w).y-t.node(r.w).y:0:s*(a-o)}}function wn(t,e){for(var n=null,r=0;r<t.length;++r)if(e(t[r])){n=r;break}return n}function _n(t,e){if(t.length!==0){for(var n=0,r,i=t.length-1;i>=0;--i)r=t[i].dy/2,t[i][e]-r<n&&(t[i][e]=Math.min(t[i].Rmax,n+r)),n=t[i][e]+r;for(var a=t[0].Rmax+t[0].dy/2,o=0;o<t.length;++o)r=t[o].dy/2,t[o][e]+r>a&&(t[o][e]=Math.max(r,a-r)),a=t[o][e]-r}}function bn(t){return iu(t),au(t),t}function iu(t){t.nodes().forEach(function(e){var n=t.node(e),r=n.y,i=n.y;n.fromElsewhere.forEach(function(a){a.y1=i+a.dy/2,a.d1=n.backwards?"l":"r",a.dy=a.dy,i+=a.dy}),n.ports.forEach(function(a){r=n.y+a.y,i=n.y+a.y,a.outgoing.forEach(function(o){var s=t.edge(o);s.y0=r+s.dy/2,s.d0=n.backwards?"l":"r",s.dy=s.dy,r+=s.dy}),a.incoming.forEach(function(o){var s=t.edge(o);s.y1=i+s.dy/2,s.d1=n.backwards?"l":"r",s.dy=s.dy,i+=s.dy})}),n.toElsewhere.forEach(function(a){a.y0=r+a.dy/2,a.d0=n.backwards?"l":"r",a.dy=a.dy,r+=a.dy})})}function au(t){t.nodes().forEach(function(e){var n=t.node(e);kt(n.toElsewhere,"r0"),kt(n.fromElsewhere,"r1"),n.ports.forEach(function(r){kt(r.outgoing.map(function(i){return t.edge(i)}),"r0"),kt(r.incoming.map(function(i){return t.edge(i)}),"r1")})})}function ou(t){var e=t.x1-t.x0,n=t.y1-t.y0;return t.d0!==t.d1?Math.abs(n)/2.1:n!==0?(e*e+n*n)/Math.abs(4*n):1/0}function kt(t,e){t.forEach(function(a){a.Rmax=ou(a),a[e]=Math.max(a.dy/2,a.d0===a.d1?a.Rmax*.6:5+a.dy/2)});var n=e==="r0"?wn(t,function(a){return a.y1>a.y0}):wn(t,function(a){return a.y0>a.y1});if(n===null&&(n=t.length),_n(t.slice(n),e),n>0){for(var r=[],i=n-1;i>=0;i--)r.push(t[i]);_n(r,e)}}function En(t,e,n,r,i,a,o){var s=new Vt.Graph({directed:!0,multigraph:!0});return t.nodes.forEach(function(f,c){var u=e(f,c);if(s.hasNode(u))throw new Error("duplicate: "+u);s.setNode(u,{data:f,index:c,backwards:n(f,c),fromElsewhere:f.fromElsewhere||[],toElsewhere:f.toElsewhere||[],x0:f.x0,x1:f.x1,y:f.y0})}),t.links.forEach(function(f,c){var u=Nn(r(f,c)),l=Nn(i(f,c)),h={data:f,sourcePortId:u.port,targetPortId:l.port,index:c,points:[],value:o(f,c),type:a(f,c)};if(!s.hasNode(u.id))throw new Error("missing: "+u.id);if(!s.hasNode(l.id))throw new Error("missing: "+l.id);s.setEdge(u.id,l.id,h,a(f,c))}),s.setGraph({}),s}function Nn(t){return typeof t=="object"?t:{id:t,port:void 0}}function su(t){return t.nodes}function uu(t){return t.links}function fu(t){return t.id}function cu(t){return t.direction&&t.direction.toLowerCase()==="l"}function lu(t){return{id:typeof t.source=="object"?t.source.id:t.source,port:typeof t.sourcePort=="object"?t.sourcePort.id:t.sourcePort}}function hu(t){return{id:typeof t.target=="object"?t.target.id:t.target,port:typeof t.targetPort=="object"?t.targetPort.id:t.targetPort}}function du(t){return t.type}function pu(t,e){return t.id.localeCompare(e.id)}function gu(){var t=su,e=uu,n=fu,r=cu,i=lu,a=hu,o=du,s=null,f=[],c=25,u=null,l=pu,h=0,d=0,w=1,m=1,E=1,x=null,b=function(g){return g.value},p=.5,y=eu();function v(){var g={nodes:t.apply(null,arguments),links:e.apply(null,arguments)},k=En(g,n,r,i,a,o,b);if(ee(k,b),u)k.nodes().forEach(function($){var A=k.node($),T=u(A.data);A.x0=T[0],A.x1=T[0]+E,A.y=T[1]}),ne(k,x);else{s!==null?N(k,s):(Os(k,f),dn(k,c)),Ks(k),ee(k,b),s===null&&dn(k,c);var L=gn(k.nodes().map(function($){return k.node($)}));_(k,L),ne(k,x),y(L,m-d,p),Gs(k,w-h,E),k.nodes().forEach(function($){var A=k.node($);A.x0+=h,A.x1+=h,A.y+=d})}return vn(k,l),xn(k),bn(k),Qs(k),Mn(k),kn(k),g}v.update=function(g,k){var L=En(g,n,r,i,a,o,b);ee(L,b);var $=gn(L.nodes().map(function(A){return L.node(A)}));return _(L,$),ne(L,x),vn(L,l),xn(L),bn(L),Mn(L),kn(L),g},v.nodes=function(g){return arguments.length?(t=Z(g),v):t},v.links=function(g){return arguments.length?(e=Z(g),v):e},v.nodeId=function(g){return arguments.length?(n=Z(g),v):n},v.nodeBackwards=function(g){return arguments.length?(r=Z(g),v):r},v.sourceId=function(g){return arguments.length?(i=Z(g),v):i},v.targetId=function(g){return arguments.length?(a=Z(g),v):a},v.linkType=function(g){return arguments.length?(o=Z(g),v):o},v.sortPorts=function(g){return arguments.length?(l=Z(g),v):l};function _(g,k){if(x===null){var L=O(k.bandValues);L<=0?x=1:(x=(m-d)/L,p!==1&&(x*=1-p))}}v.ordering=function(g){return arguments.length?(s=g,v):s},v.rankSets=function(g){return arguments.length?(f=g,v):f},v.nodeWidth=function(g){return arguments.length?(E=g,v):E},v.nodePosition=function(g){return arguments.length?(u=g,v):u},v.size=function(g){return arguments.length?(h=d=0,w=+g[0],m=+g[1],v):[w-h,m-d]},v.extent=function(g){return arguments.length?(h=+g[0][0],d=+g[0][1],w=+g[1][0],m=+g[1][1],v):[[h,d],[w,m]]},v.whitespace=function(g){return arguments.length?(p=g,v):p},v.scale=function(g){return arguments.length?(x=g,v):x},v.linkValue=function(g){return arguments.length?(b=g,v):b},v.verticalLayout=function(g){return arguments.length?(y=Z(g),v):y};function N(g,k){k.forEach(function(L,$){L.forEach(function(A,T){if(A.forEach)A.forEach(function(S,tt){var j=g.node(S);j&&(j.rank=$,j.band=T,j.depth=tt)});else{var I=g.node(A);I&&(I.rank=$,I.depth=T)}})})}return v}function ee(t,e){t.nodes().forEach(function(n){var r=t.node(n),i=O(t.inEdges(n),function(o){return t.edge(o).value}),a=O(t.outEdges(n),function(o){return t.edge(o).value});i+=O(r.fromElsewhere||[],function(o){return e(o)}),a+=O(r.toElsewhere|[],function(o){return e(o)}),r.value=Math.max(i,a)})}function ne(t,e){t.edges().forEach(function(n){var r=t.edge(n);r.dy=r.value*e}),t.nodes().forEach(function(n){var r=t.node(n);r.dy=r.value*e,r.fromElsewhere=r.fromElsewhere||[],r.toElsewhere=r.toElsewhere||[],r.fromElsewhere.forEach(function(i){i.dy=i.value*e,i.source={id:"__from_elsewhere_"+n},i.target=r.data}),r.toElsewhere.forEach(function(i){i.dy=i.value*e,i.source=r.data,i.target={id:"__to_elsewhere_"+n}})})}function Z(t){if(typeof t!="function")throw new Error;return t}function Mn(t){t.edges().forEach(function(e){var n=t.edge(e);n.points.unshift({x:n.x0,y:n.y0,ro:n.r0,d:n.d0}),n.points.push({x:n.x1,y:n.y1,ri:n.r1,d:n.d1})}),t.nodes().forEach(function(e){var n=t.node(e);n.fromElsewhere.forEach(function(r){r.points=[{x:r.x1,y:r.y1,ri:r.r1,d:r.d1,style:"down-right"}]}),n.toElsewhere.forEach(function(r){r.points=[{x:r.x0,y:r.y0,ri:r.r0,d:r.d0,style:"right-down"}]})})}function kn(t,e){t.nodes().forEach(function(n){var r=t.node(n);r.data.incoming=[],r.data.outgoing=[],r.data.ports=r.ports,r.data.ports.forEach(function(i){i.incoming=[],i.outgoing=[]}),r.data.dy=r.dy,r.data.x0=r.x0,r.data.x1=r.x1,r.data.y0=r.y,r.data.y1=r.y+r.dy,r.data.rank=r.rank,r.data.band=r.band,r.data.depth=r.depth,r.data.value=r.value,r.data.spaceAbove=r.spaceAbove,r.data.spaceBelow=r.spaceBelow}),t.edges().forEach(function(n){var r=t.edge(n);r.data.source=t.node(n.v).data,r.data.target=t.node(n.w).data,r.data.sourcePort=r.sourcePort,r.data.targetPort=r.targetPort,r.data.source.outgoing.push(r.data),r.data.target.incoming.push(r.data),r.data.sourcePort&&r.data.sourcePort.outgoing.push(r.data),r.data.targetPort&&r.data.targetPort.incoming.push(r.data),r.data.value=r.value,r.data.type=r.type,r.data.dy=r.dy,r.data.points=r.points||[]})}function vu(t){return t.dy===0?0:2}function yu(){var t=vu;function e(u){var l=u.x1-u.x0,h=u.y1-u.y0,d=u.dy/2,w=(l*l+h*h)/Math.abs(4*h);return[d,w]}function n(u){if(u.points.length===1)return c(u);for(var l="",h,d=0;d<u.points.length-1;++d)h={x0:u.points[d].x,y0:u.points[d].y,x1:u.points[d+1].x,y1:u.points[d+1].y,r0:u.points[d].ro,r1:u.points[d+1].ri,d0:u.points[d].d,d1:u.points[d+1].d,dy:u.dy},l+=r(h);return l}function r(u){var l=(u.d0||"r")+(u.d1||"r");if(u.source&&u.source===u.target)return i(u);if(l==="rl")return a(u);if(l==="rd")return o(u);if(l==="dr")return s(u);if(l==="lr")return f(u);var h=Math.max(t(u),u.dy)/2,d=u.x0,w=u.x1,m=u.y0,E=u.y1;if(w<d){var x;x=[w,d],d=x[0],w=x[1];var b;b=[E,m],m=b[0],E=b[1]}var p=E>m?1:-1,y=1,v=e(u),_=Math.max(v[0],Math.min(v[1],(w-d)/3)),N=Math.max(v[0],Math.min(v[1],u.r0||_)),g=Math.max(v[0],Math.min(v[1],u.r1||_)),k=w-d,L=E-m-p*(N+g),$=Math.sqrt(k*k+L*L),A=-p*Math.acos(Math.min(1,(N+g)/$)),T=Math.atan2(L,k),I=Math.PI/2+p*(T+A),S=h*p*Math.sin(I),tt=h*Math.cos(I),j=d+y*N*Math.sin(Math.abs(I)),zt=w-y*g*Math.sin(Math.abs(I)),Ht=m+N*p*(1-Math.cos(I)),Bt=E-g*p*(1-Math.cos(I));(isNaN(I)||Math.abs(I)<.001)&&(I=N=g=0,j=d,zt=w,Ht=m,Bt=E,S=0,tt=h);function wt(Ae,Ut){var dr=Ae*(E-m)>0?1:0,Xt=y*Ae*(E-m)>0?Ut+h:Ut-h;return I===0&&(Xt=Ut),"A"+Xt+" "+Xt+" "+Math.abs(I)+" 0 "+dr+" "}var _t;return _t="M"+[d,m-h]+" "+wt(1,N)+[j+S,Ht-tt]+" L"+[zt+S,Bt-tt]+" "+wt(-1,g)+[w,E-h]+" L"+[w,E+h]+" "+wt(1,g)+[zt-S,Bt+tt]+" L"+[j-S,Ht+tt]+" "+wt(-1,N)+[d,m+h]+" Z",/NaN/.test(_t)&&console.error("path NaN",u,_t),_t}function i(u){var l=Math.max(t(u),u.dy)/2,h=l*1.5,d=2*Math.PI,w=u.x0,m=u.y0;function E(x){var b=x>0?1:0,p=x>0?h+l:h-l;return"A"+p+" "+p+" "+Math.abs(d)+" 1 "+b+" "}return"M"+[w+.1,m-l]+" "+E(1)+[w-.1,m-l]+" L"+[w-.1,m+l]+" "+E(-1)+[w+.1,m+l]+" Z"}function a(u){var l=Math.max(t(u),u.dy)/2,h=u.x0,d=u.x1,w=u.y0,m=u.y1,E=u.x1-u.x0,x=u.y1-u.y0,b=(u.r0+u.r1)/2||5+l,p=Math.min(Math.abs(m-w)/2.1,b),y=Math.atan2(x-2*p,E),v=u.y1>u.y0?1:-1,_=l*Math.sin(y),N=l*Math.cos(y),g=u.x0+p*Math.sin(Math.abs(y)),k=u.x1+p*Math.sin(Math.abs(y)),L=u.y0+p*v*(1-Math.cos(y)),$=u.y1-p*v*(1-Math.cos(y));function A(T){var I=T*y>0?1:0,S=T*y>0?p+l:p-l;return y===0&&(S=p),"A"+S+" "+S+" "+Math.abs(y)+" 0 "+I+" "}return"M"+[h,w-l]+" "+A(1)+[g+_,L-N]+" L"+[k+_,$-N]+" "+A(1)+[d,m+l]+" L"+[d,m-l]+" "+A(-1)+[k-_,$+N]+" L"+[g-_,L+N]+" "+A(-1)+[h,w+l]+" Z"}function o(u){var l=Math.max(t(u),u.dy)/2,h=u.x0,d=u.x1,w=u.y0,m=u.y1;u.x1-u.x0,u.y1-u.y0;var E=Math.PI/2,x=Math.max(0,d-h);u.y1>u.y0;var b=w+x;function p(y){var v=y*E>0?1:0,_=y*E>0?x+l:x-l;return E===0&&(_=x),"A"+_+" "+_+" "+Math.abs(E)+" 0 "+v+" "}return"M"+[h,w-l]+" "+p(1)+[d+l,b]+" L"+[d+l,m]+" "+[d-l,m]+" "+[d-l,b]+" "+p(-1)+[h,w+l]+" Z"}function s(u){var l=Math.max(t(u),u.dy)/2,h=u.x0,d=u.x1,w=u.y0,m=u.y1;u.x1-u.x0,u.y1-u.y0;var E=Math.PI/2,x=Math.max(0,d-h);u.y1>u.y0;var b=m-x;function p(y){var v=y*E>0?1:0,_=y*E>0?x+l:x-l;return E===0&&(_=x),"A"+_+" "+_+" "+Math.abs(E)+" 0 "+v+" "}return"M"+[h-l,w]+" L"+[h+l,w]+" "+[h+l,b]+" "+p(-1)+[d,m-l]+" L"+[d,m+l]+" "+p(1)+[h-l,b]+" Z"}function f(u){var l=Math.max(t(u),u.dy)/2,h=u.x0,d=u.x1,w=u.y0,m=u.y1,E=u.x1-u.x0,x=u.y1-u.y0,b=(u.r0+u.r1)/2||5+l,p=Math.min(Math.abs(x)/2.1,b),y=Math.atan2(x-2*p,E),v=u.y1>u.y0?1:-1,_=l*Math.sin(y),N=l*Math.cos(y),g=u.x0-p*Math.sin(Math.abs(y)),k=u.x1-p*Math.sin(Math.abs(y)),L=u.y0+p*v*(1-Math.cos(y)),$=u.y1-p*v*(1-Math.cos(y));function A(T){var I=T*y>0?1:0,S=-T*y>0?p+l:p-l;return y===0&&(S=p),"A"+S+" "+S+" "+Math.abs(y)+" 0 "+I+" "}return"M"+[h,w-l]+" "+A(-1)+[g-_,L-N]+" L"+[k-_,$-N]+" "+A(-1)+[d,m+l]+" L"+[d,m-l]+" "+A(1)+[k+_,$-N]+" L"+[g+_,L-N]+" "+A(1)+[h,w+l]+" Z"}function c(u){var l=u.points[0],h=Math.max(t(u),u.dy)/2;if(l.style==="down-right")return"M"+[l.x-20,l.y-h]+" L"+[l.x,l.y-h]+" L"+[l.x,l.y+h]+" L"+[l.x-20,l.y+h]+" Z";if(l.style==="right-down")return"M"+[l.x,l.y-h]+" L"+[l.x+20,l.y-h]+" L"+[l.x+20,l.y+h]+" L"+[l.x,l.y+h]+" Z"}return n.minWidth=function(u){return arguments.length?(t=xu(u),n):t},n}function xu(t){if(typeof t!="function")throw new Error;return t}var mu=function(){var t=function(i){return i.title!==void 0?i.title:i.id},e=function(i){return null},n=function(i){return!!t(i)};function r(i){var a=i.selection?i.selection():i;a.select("text").empty()&&(a.append("title"),a.append("line").attr("x1",0).attr("x2",0),a.append("rect").attr("class","node-body"),a.append("text").attr("class","node-value").attr("dy",".35em").attr("text-anchor","middle"),a.append("text").attr("class","node-title").attr("dy",".35em"),a.append("rect").attr("class","node-click-target").attr("x",-5).attr("y",-5).attr("width",10).style("fill","none").style("visibility","hidden").style("pointer-events","all"),a.attr("transform",Cn)),a.each(function(o){var s=V(this).select("title"),f=V(this).select(".node-value"),c=V(this).select(".node-title"),u=V(this).select("line"),l=V(this).select(".node-body"),h=V(this).select(".node-click-target"),d=wu(o);d.dy=o.y0===o.y1?0:Math.max(1,o.y1-o.y0);var w=o.x1-o.x0>2,m=t(o)+(!w&&e(o)?" ("+e(o)+")":"");s.text(m),f.text(e).style("display",w?"inline":"none"),c.attr("text-anchor",d.right?"end":"start").text(m).each(_u,100),i!==a&&(c=c.transition(i),u=u.transition(i),l=l.transition(i),h=h.transition(i)),i.attr("transform",Cn),u.attr("y1",function(x){return d.titleAbove?-5:0}).attr("y2",function(x){return d.dy}).style("display",function(x){return x.y0===x.y1||!n(x)?"none":"inline"}),h.attr("height",function(x){return d.dy+5}),l.attr("width",function(x){return x.x1-x.x0}).attr("height",function(x){return d.dy}),c.attr("transform",E).style("display",function(x){return x.y0===x.y1||!n(x)?"none":"inline"}),f.style("font-size",function(x){return Math.min(x.x1-x.x0-4,x.y1-x.y0-4)+"px"}).attr("transform",function(x){var b=x.x1-x.x0,p=x.y1-x.y0,y=b>p?0:-90;return"translate("+b/2+","+p/2+") rotate("+y+")"});function E(x){var b=d,p=b.titleAbove?-10:(x.y1-x.y0)/2,y;return b.titleAbove?y=b.right?4:-4:y=b.right?-4:x.x1-x.x0+4,"translate("+y+","+p+")"}})}return r.nodeVisible=function(i){return arguments.length?(n=re(i),r):n},r.nodeTitle=function(i){return arguments.length?(t=re(i),r):t},r.nodeValue=function(i){return arguments.length?(e=re(i),r):e},r};function Cn(t){return"translate("+t.x0+","+t.y0+")"}function wu(t){var e=!1,n=!1;return t.spaceAbove>20&&t.style!=="type"?e=!0:e=!1,t.incoming.length===0?(n=!0,e=!1):t.outgoing.length===0&&(n=!1,e=!1),{titleAbove:e,right:n}}function _u(t,e){var n=V(this),r=n.text().split(/\n/),i=1.1;r.length!==1&&(n.text(null),r.forEach(function(a,o){n.append("tspan").attr("x",0).attr("dy",(o===0?.7-r.length/2:1)*i+"em").text(a)}))}function re(t){if(typeof t!="function")throw new Error;return t}function bu(t,e){var n={top:Number.MAX_VALUE,left:Number.MAX_VALUE,bottom:0,right:0};return e.nodes.forEach(function(r){var i=t.get(r);!i||(i.x0<n.left&&(n.left=i.x0),i.x1>n.right&&(n.right=i.x1),i.y0<n.top&&(n.top=i.y0),i.y1>n.bottom&&(n.bottom=i.y1))}),e.rect=n,e}function An(t,e,n){return function(r){var i=[],a=t(r.source),o=t(r.target),s=e(r);return i.push(a+" \u2192 "+o),s&&i.push(s),i.push(n(r.value)),i.join(`
`)}}function Eu(){var t={top:0,right:0,bottom:0,left:0},e=null,n=[],r=wr(".3s"),i=mu(),a=yu(),o=function(p){return null},s=An(i.nodeTitle(),function(p){return p.type},r),f=Nu,c=$n("selectNode","selectGroup","selectLink");function u(p){var y=p.selection?p.selection():p;y.each(function(v){var _=V(this),N=_.selectAll(".sankey").data([{type:"sankey"}]),g=N.enter().append("g").classed("sankey",!0);g.append("g").classed("groups",!0),g.append("g").classed("links",!0),g.append("g").classed("nodes",!0),g.append("g").classed("slice-titles",!0),N=N.merge(g),N.attr("transform","translate("+t.left+","+t.top+")");var k=H(v.nodes,function(A){return A.id}),L=(n||[]).map(function(A){return bu(k,A)}),$=Array.from(v.links);v.nodes.forEach(function(A){Array.prototype.push.apply($,A.fromElsewhere||[]),Array.prototype.push.apply($,A.toElsewhere||[])}),l(N,p,v.nodes),h(N,p,$),d(_,L),_.on("click",function(){c.call("selectNode",this,null),c.call("selectLink",this,null)})})}function l(p,y,v){var _=p.select(".nodes").selectAll(".node").data(v,function(N){return N.id});_.exit().remove(),_=_.merge(_.enter().append("g").attr("class","node").call(i).on("click",b)),y instanceof pe?_.transition(y).call(i):_.call(i)}function h(p,y,v){var _=p.select(".links").selectAll(".link").data(v,function(g){return g.source.id+"-"+g.target.id+"-"+g.type});_.exit().remove();var N=_.enter().append("g").attr("class","link").on("click",x);N.append("path").attr("d",a).style("fill","white").each(function(g){this._current=g}),N.append("title"),N.append("text").attr("class","label").attr("dy","0.35em").attr("x",function(g){return g.points[0].x+4}).attr("y",function(g){return g.points[0].y}),_=_.merge(N),_.classed("selected",function(g){return g.id===e}),_.sort(E),y instanceof pe?(_=_.transition(y),_.select("path").style("fill",o).each(function(g){V(this).transition(y).attrTween("d",w)})):_.select("path").style("fill",o).attr("d",a),_.select("title").text(s),_.select(".label").text(f).attr("x",function(g){return g.points[0].x+4}).attr("y",function(g){return g.points[0].y})}function d(p,y){var v=p.select(".groups").selectAll(".group").data(y);v.exit().remove();var _=v.enter().append("g").attr("class","group");_.append("rect"),_.append("text").attr("x",-10).attr("y",-25),v=v.merge(_),v.style("display",function(N){return N.title?"inline":"none"}).attr("transform",function(N){return"translate("+N.rect.left+","+N.rect.top+")"}).select("rect").attr("x",-10).attr("y",-20).attr("width",function(N){return N.rect.right-N.rect.left+20}).attr("height",function(N){return N.rect.bottom-N.rect.top+30}),v.select("text").text(function(N){return N.title})}function w(p){p.points.forEach(function(_){_.ri>1e3&&(_.ri=1e3),_.ro>1e3&&(_.ro=1e3)});var y=be(m(this._current),p),v=this;return function(_){return v._current=y(_),a(v._current)}}function m(p){return{points:p.points,dy:p.dy}}function E(p,y){return p.id===e?1:y.id===e||!p.source||p.target&&p.target.direction==="d"?-1:!y.source||y.target&&y.target.direction==="d"?1:!p.target||p.source&&p.source.direction==="d"?-1:!y.target||y.source&&y.source.direction==="d"?1:p.dy-y.dy}function x(p){ct.stopPropagation();var y=V(this).node();c.call("selectLink",y,p)}function b(p){ct.stopPropagation();var y=V(this).node();c.call("selectNode",y,p)}return u.margins=function(p){return arguments.length?(t={top:p.top===void 0?t.top:p.top,left:p.left===void 0?t.left:p.left,bottom:p.bottom===void 0?t.bottom:p.bottom,right:p.right===void 0?t.right:p.right},this):t},u.groups=function(p){return arguments.length?(n=p,this):n},u.nodeTitle=function(p){return arguments.length?(i.nodeTitle(p),s=An(p,function(y){return y.type},r),this):i.nodeTitle()},u.nodeValue=function(p){return arguments.length?(i.nodeValue(p),this):i.nodeValue()},u.linkTitle=function(p){return arguments.length?(s=p,this):s},u.linkLabel=function(p){return arguments.length?(f=p,this):f},u.linkColor=function(p){return arguments.length?(o=p,this):o},u.linkMinWidth=function(p){return arguments.length?(a.minWidth(p),this):a.minWidth()},u.selectNode=function(p){return this},u.selectLink=function(p){return e=p,this},u.on=function(){var p=c.on.apply(c,arguments);return p===c?u:p},u}function Nu(t){return null}const Mu={messages:{en:{total:"total",showChanges:"Only show changes"},de:{total:"Insgesamt",showChanges:"Nur \xC4nderungen zeigen"}}},ku=gr({name:"SankeyPlugin",i18n:Mu,props:{root:{type:String,required:!0},subfolder:{type:String,required:!0},yamlConfig:String,thumbnail:Boolean,config:Object},data(){return{globalState:Wt.state,vizDetails:{csv:"",title:"",description:""},loadingText:"",jsonChart:{},totalTrips:0,cleanConfigId:`sankey-${Math.floor(1e12*Math.random())}`,onlyShowChanges:!1,csvData:[],colorRamp:[]}},computed:{fileApi(){return new br(this.fileSystem,Wt)},fileSystem(){const t=this.$store.state.svnProjects.filter(e=>e.slug===this.root);if(t.length===0)throw console.log("no such project"),Error;return t[0]}},watch:{"globalState.resizeEvents"(){this.changeDimensions()},yamlConfig(){this.getVizDetails()},subfolder(){this.getVizDetails()},onlyShowChanges(){this.jsonChart=this.processInputs(),this.doD3()}},methods:{changeDimensions(){var t;(t=this.jsonChart)!=null&&t.nodes&&this.doD3()},async getVizDetails(){var r;if(this.config){this.vizDetails=Object.assign({},this.config),this.$emit("title",this.vizDetails.title);return}this.loadingText="Loading config...";const t=(r=this.yamlConfig)!=null?r:"",e=t.indexOf("/")>-1?t:this.subfolder+"/"+t,n=await this.fileApi.getFileText(e);this.vizDetails=yr.parse(n),this.$emit("title",this.vizDetails.title)},async loadFiles(){this.loadingText="Loading files...";try{const t=await this.fileApi.getFileText(this.subfolder+"/"+this.vizDetails.csv);return _r.parse(t,{header:!1,dynamicTyping:!0,skipEmptyLines:!0}).data}catch(t){const e=t;console.error({e}),this.loadingText=""+e,this.fileSystem&&this.fileSystem.needPassword&&e.status===401&&Wt.commit("requestLogin",this.fileSystem.slug)}return[]},processInputs(){this.loadingText="Building node graph...";const t=[],e=[],n=[];this.totalTrips=0;try{for(const u of this.csvData.slice(1)){t.includes(u[0])||t.push(u[0]),e.includes(u[1])||e.push(u[1]);const l=u[2];if(l!==0){if(l<0){console.warn("Data contains NEGATIVE numbers!!!");continue}this.onlyShowChanges&&u[0]===u[1]||(n.push([u[0],u[1],l]),this.totalTrips+=l)}}}catch(u){console.error(u)}const r=[],i=[],a={nodes:[],links:[],ordering:[[r],[i]]},o={},s={};t.forEach((u,l)=>{a.nodes.push({id:l,title:u}),o[u]=l,r.push(l)}),e.forEach((u,l)=>{const h=l+t.length;a.nodes.push({id:h,title:u}),s[u]=h,i.push(h)});for(const u of n)a.links.push({source:o[u[0]],target:s[u[1]],value:u[2]});const f=t.length,c=[...Array(f).keys()].map(u=>Er(u/f).replace(/rgb(.*)\)/,"rgba$1, 0.7)"));return this.colorRamp=c,a},getMaxLabelWidth(){const e=document.createElement("canvas").getContext("2d");if(!e)return 120;e.font="16px Arial";let n=0;for(const r of this.jsonChart.nodes){const i=r.title,a=e.measureText(i).width;n=Math.max(n,a)}return n},doD3(){const t=this.jsonChart;let e=document.querySelector(`#${this.cleanConfigId}`),n=e?e.clientWidth:100,r=e?e.clientHeight:100,i=5+this.getMaxLabelWidth();const a=gu().nodeWidth(8).ordering(t.ordering).extent([[i,0],[n-i,r]]),o=Eu().linkColor(s=>this.colorRamp[s.source.id]);V("#"+this.cleanConfigId).datum(a(t)).call(o).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${n} ${r}`)}},async mounted(){await this.getVizDetails(),this.csvData=await this.loadFiles(),this.jsonChart=this.processInputs(),window.addEventListener("resize",this.changeDimensions),this.doD3()},beforeDestroy(){window.removeEventListener("resize",this.changeDimensions)}});var Cu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sankey-container",class:{"is-thumbnail":t.thumbnail}},[n("svg",{staticClass:"chart-area",class:{"is-thumbnail":t.thumbnail},attrs:{id:t.cleanConfigId}}),t.thumbnail?t._e():n("div",{staticClass:"labels"},[n("p",{staticClass:"center"},[n("b",[t._v(t._s(t.totalTrips.toLocaleString())+" "+t._s(t.$t("total")))])])]),t.thumbnail?t._e():n("b-switch",{staticClass:"switcher",model:{value:t.onlyShowChanges,callback:function(r){t.onlyShowChanges=r},expression:"onlyShowChanges"}},[t._v(t._s(t.$t("showChanges")))])],1)},Au=[];const Ln={};var Lu=vr(ku,Cu,Au,!1,$u,"6dbe8eb6",null,null);function $u(t){for(let e in Ln)this[e]=Ln[e]}var Ou=function(){return Lu.exports}();export{Ou as default};
//# sourceMappingURL=SankeyDiagram.a063b044.js.map
