import{e as gn,n as Wt,d as jt,g as Er,D as Nt}from"./index.1d7144b8.js";import{b as wv}from"./index.d10190c4.js";import{g as Sv}from"./util.5fe75924.js";import{H as Av}from"./HTTPFileSystem.33aea9ff.js";import{W as hl}from"./DashboardDataManager.6cb84912.js";import{d as Lv,a as Ov,S as H,c as Al}from"./ColorsAndWidths.b0ff51a4.js";import{d as Tr}from"./index.39efad9c.js";import{L as Rv}from"./LegendBox.9918cd96.js";var Fr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(r,a){(function(){var s,l="4.17.21",d=200,y="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",E="Expected a function",ft="Invalid `variable` option passed into `_.template`",ct="__lodash_hash_undefined__",Mt=500,gt="__lodash_placeholder__",tt=1,$t=2,st=4,Yt=1,_e=2,at=1,Ut=2,J=4,z=8,Zt=16,Bt=32,Re=64,Jt=128,Ke=256,fi=512,Ll=30,Ol="...",Rl=800,Il=16,Pr=1,Dl=2,$l=3,me=1/0,le=9007199254740991,Fl=17976931348623157e292,_n=0/0,qt=4294967295,El=qt-1,Tl=qt>>>1,Pl=[["ary",Jt],["bind",at],["bindKey",Ut],["curry",z],["curryRight",Zt],["flip",fi],["partial",Bt],["partialRight",Re],["rearg",Ke]],Ie="[object Arguments]",mn="[object Array]",kl="[object AsyncFunction]",je="[object Boolean]",Ye="[object Date]",zl="[object DOMException]",Cn="[object Error]",bn="[object Function]",kr="[object GeneratorFunction]",Ft="[object Map]",Ze="[object Number]",Nl="[object Null]",Xt="[object Object]",zr="[object Promise]",Wl="[object Proxy]",Je="[object RegExp]",Et="[object Set]",Xe="[object String]",yn="[object Symbol]",Ml="[object Undefined]",Qe="[object WeakMap]",Ul="[object WeakSet]",Ve="[object ArrayBuffer]",De="[object DataView]",ci="[object Float32Array]",di="[object Float64Array]",hi="[object Int8Array]",pi="[object Int16Array]",vi="[object Int32Array]",gi="[object Uint8Array]",_i="[object Uint8ClampedArray]",mi="[object Uint16Array]",Ci="[object Uint32Array]",Bl=/\b__p \+= '';/g,ql=/\b(__p \+=) '' \+/g,Hl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Nr=/&(?:amp|lt|gt|quot|#39);/g,Wr=/[&<>"']/g,Gl=RegExp(Nr.source),Kl=RegExp(Wr.source),jl=/<%-([\s\S]+?)%>/g,Yl=/<%([\s\S]+?)%>/g,Mr=/<%=([\s\S]+?)%>/g,Zl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jl=/^\w*$/,Xl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bi=/[\\^$.*+?()[\]{}|]/g,Ql=RegExp(bi.source),yi=/^\s+/,Vl=/\s/,to=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eo=/\{\n\/\* \[wrapped with (.+)\] \*/,no=/,? & /,io=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ro=/[()=,{}\[\]\/\s]/,so=/\\(\\)?/g,ao=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ur=/\w*$/,lo=/^[-+]0x[0-9a-f]+$/i,oo=/^0b[01]+$/i,uo=/^\[object .+?Constructor\]$/,fo=/^0o[0-7]+$/i,co=/^(?:0|[1-9]\d*)$/,ho=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xn=/($^)/,po=/['\n\r\u2028\u2029\\]/g,wn="\\ud800-\\udfff",vo="\\u0300-\\u036f",go="\\ufe20-\\ufe2f",_o="\\u20d0-\\u20ff",Br=vo+go+_o,qr="\\u2700-\\u27bf",Hr="a-z\\xdf-\\xf6\\xf8-\\xff",mo="\\xac\\xb1\\xd7\\xf7",Co="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",bo="\\u2000-\\u206f",yo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Gr="A-Z\\xc0-\\xd6\\xd8-\\xde",Kr="\\ufe0e\\ufe0f",jr=mo+Co+bo+yo,xi="['\u2019]",xo="["+wn+"]",Yr="["+jr+"]",Sn="["+Br+"]",Zr="\\d+",wo="["+qr+"]",Jr="["+Hr+"]",Xr="[^"+wn+jr+Zr+qr+Hr+Gr+"]",wi="\\ud83c[\\udffb-\\udfff]",So="(?:"+Sn+"|"+wi+")",Qr="[^"+wn+"]",Si="(?:\\ud83c[\\udde6-\\uddff]){2}",Ai="[\\ud800-\\udbff][\\udc00-\\udfff]",$e="["+Gr+"]",Vr="\\u200d",ts="(?:"+Jr+"|"+Xr+")",Ao="(?:"+$e+"|"+Xr+")",es="(?:"+xi+"(?:d|ll|m|re|s|t|ve))?",ns="(?:"+xi+"(?:D|LL|M|RE|S|T|VE))?",is=So+"?",rs="["+Kr+"]?",Lo="(?:"+Vr+"(?:"+[Qr,Si,Ai].join("|")+")"+rs+is+")*",Oo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ro="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ss=rs+is+Lo,Io="(?:"+[wo,Si,Ai].join("|")+")"+ss,Do="(?:"+[Qr+Sn+"?",Sn,Si,Ai,xo].join("|")+")",$o=RegExp(xi,"g"),Fo=RegExp(Sn,"g"),Li=RegExp(wi+"(?="+wi+")|"+Do+ss,"g"),Eo=RegExp([$e+"?"+Jr+"+"+es+"(?="+[Yr,$e,"$"].join("|")+")",Ao+"+"+ns+"(?="+[Yr,$e+ts,"$"].join("|")+")",$e+"?"+ts+"+"+es,$e+"+"+ns,Ro,Oo,Zr,Io].join("|"),"g"),To=RegExp("["+Vr+wn+Br+Kr+"]"),Po=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ko=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zo=-1,q={};q[ci]=q[di]=q[hi]=q[pi]=q[vi]=q[gi]=q[_i]=q[mi]=q[Ci]=!0,q[Ie]=q[mn]=q[Ve]=q[je]=q[De]=q[Ye]=q[Cn]=q[bn]=q[Ft]=q[Ze]=q[Xt]=q[Je]=q[Et]=q[Xe]=q[Qe]=!1;var B={};B[Ie]=B[mn]=B[Ve]=B[De]=B[je]=B[Ye]=B[ci]=B[di]=B[hi]=B[pi]=B[vi]=B[Ft]=B[Ze]=B[Xt]=B[Je]=B[Et]=B[Xe]=B[yn]=B[gi]=B[_i]=B[mi]=B[Ci]=!0,B[Cn]=B[bn]=B[Qe]=!1;var No={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Wo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Mo={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Uo={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bo=parseFloat,qo=parseInt,as=typeof gn=="object"&&gn&&gn.Object===Object&&gn,Ho=typeof self=="object"&&self&&self.Object===Object&&self,et=as||Ho||Function("return this")(),Oi=a&&!a.nodeType&&a,Ce=Oi&&!0&&r&&!r.nodeType&&r,ls=Ce&&Ce.exports===Oi,Ri=ls&&as.process,wt=function(){try{var p=Ce&&Ce.require&&Ce.require("util").types;return p||Ri&&Ri.binding&&Ri.binding("util")}catch{}}(),os=wt&&wt.isArrayBuffer,us=wt&&wt.isDate,fs=wt&&wt.isMap,cs=wt&&wt.isRegExp,ds=wt&&wt.isSet,hs=wt&&wt.isTypedArray;function _t(p,_,g){switch(g.length){case 0:return p.call(_);case 1:return p.call(_,g[0]);case 2:return p.call(_,g[0],g[1]);case 3:return p.call(_,g[0],g[1],g[2])}return p.apply(_,g)}function Go(p,_,g,w){for(var R=-1,N=p==null?0:p.length;++R<N;){var X=p[R];_(w,X,g(X),p)}return w}function St(p,_){for(var g=-1,w=p==null?0:p.length;++g<w&&_(p[g],g,p)!==!1;);return p}function Ko(p,_){for(var g=p==null?0:p.length;g--&&_(p[g],g,p)!==!1;);return p}function ps(p,_){for(var g=-1,w=p==null?0:p.length;++g<w;)if(!_(p[g],g,p))return!1;return!0}function oe(p,_){for(var g=-1,w=p==null?0:p.length,R=0,N=[];++g<w;){var X=p[g];_(X,g,p)&&(N[R++]=X)}return N}function An(p,_){var g=p==null?0:p.length;return!!g&&Fe(p,_,0)>-1}function Ii(p,_,g){for(var w=-1,R=p==null?0:p.length;++w<R;)if(g(_,p[w]))return!0;return!1}function G(p,_){for(var g=-1,w=p==null?0:p.length,R=Array(w);++g<w;)R[g]=_(p[g],g,p);return R}function ue(p,_){for(var g=-1,w=_.length,R=p.length;++g<w;)p[R+g]=_[g];return p}function Di(p,_,g,w){var R=-1,N=p==null?0:p.length;for(w&&N&&(g=p[++R]);++R<N;)g=_(g,p[R],R,p);return g}function jo(p,_,g,w){var R=p==null?0:p.length;for(w&&R&&(g=p[--R]);R--;)g=_(g,p[R],R,p);return g}function $i(p,_){for(var g=-1,w=p==null?0:p.length;++g<w;)if(_(p[g],g,p))return!0;return!1}var Yo=Fi("length");function Zo(p){return p.split("")}function Jo(p){return p.match(io)||[]}function vs(p,_,g){var w;return g(p,function(R,N,X){if(_(R,N,X))return w=N,!1}),w}function Ln(p,_,g,w){for(var R=p.length,N=g+(w?1:-1);w?N--:++N<R;)if(_(p[N],N,p))return N;return-1}function Fe(p,_,g){return _===_?ou(p,_,g):Ln(p,gs,g)}function Xo(p,_,g,w){for(var R=g-1,N=p.length;++R<N;)if(w(p[R],_))return R;return-1}function gs(p){return p!==p}function _s(p,_){var g=p==null?0:p.length;return g?Ti(p,_)/g:_n}function Fi(p){return function(_){return _==null?s:_[p]}}function Ei(p){return function(_){return p==null?s:p[_]}}function ms(p,_,g,w,R){return R(p,function(N,X,U){g=w?(w=!1,N):_(g,N,X,U)}),g}function Qo(p,_){var g=p.length;for(p.sort(_);g--;)p[g]=p[g].value;return p}function Ti(p,_){for(var g,w=-1,R=p.length;++w<R;){var N=_(p[w]);N!==s&&(g=g===s?N:g+N)}return g}function Pi(p,_){for(var g=-1,w=Array(p);++g<p;)w[g]=_(g);return w}function Vo(p,_){return G(_,function(g){return[g,p[g]]})}function Cs(p){return p&&p.slice(0,ws(p)+1).replace(yi,"")}function mt(p){return function(_){return p(_)}}function ki(p,_){return G(_,function(g){return p[g]})}function tn(p,_){return p.has(_)}function bs(p,_){for(var g=-1,w=p.length;++g<w&&Fe(_,p[g],0)>-1;);return g}function ys(p,_){for(var g=p.length;g--&&Fe(_,p[g],0)>-1;);return g}function tu(p,_){for(var g=p.length,w=0;g--;)p[g]===_&&++w;return w}var eu=Ei(No),nu=Ei(Wo);function iu(p){return"\\"+Uo[p]}function ru(p,_){return p==null?s:p[_]}function Ee(p){return To.test(p)}function su(p){return Po.test(p)}function au(p){for(var _,g=[];!(_=p.next()).done;)g.push(_.value);return g}function zi(p){var _=-1,g=Array(p.size);return p.forEach(function(w,R){g[++_]=[R,w]}),g}function xs(p,_){return function(g){return p(_(g))}}function fe(p,_){for(var g=-1,w=p.length,R=0,N=[];++g<w;){var X=p[g];(X===_||X===gt)&&(p[g]=gt,N[R++]=g)}return N}function On(p){var _=-1,g=Array(p.size);return p.forEach(function(w){g[++_]=w}),g}function lu(p){var _=-1,g=Array(p.size);return p.forEach(function(w){g[++_]=[w,w]}),g}function ou(p,_,g){for(var w=g-1,R=p.length;++w<R;)if(p[w]===_)return w;return-1}function uu(p,_,g){for(var w=g+1;w--;)if(p[w]===_)return w;return w}function Te(p){return Ee(p)?cu(p):Yo(p)}function Tt(p){return Ee(p)?du(p):Zo(p)}function ws(p){for(var _=p.length;_--&&Vl.test(p.charAt(_)););return _}var fu=Ei(Mo);function cu(p){for(var _=Li.lastIndex=0;Li.test(p);)++_;return _}function du(p){return p.match(Li)||[]}function hu(p){return p.match(Eo)||[]}var pu=function p(_){_=_==null?et:Pe.defaults(et.Object(),_,Pe.pick(et,ko));var g=_.Array,w=_.Date,R=_.Error,N=_.Function,X=_.Math,U=_.Object,Ni=_.RegExp,vu=_.String,At=_.TypeError,Rn=g.prototype,gu=N.prototype,ke=U.prototype,In=_["__core-js_shared__"],Dn=gu.toString,M=ke.hasOwnProperty,_u=0,Ss=function(){var t=/[^.]+$/.exec(In&&In.keys&&In.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),$n=ke.toString,mu=Dn.call(U),Cu=et._,bu=Ni("^"+Dn.call(M).replace(bi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fn=ls?_.Buffer:s,ce=_.Symbol,En=_.Uint8Array,As=Fn?Fn.allocUnsafe:s,Tn=xs(U.getPrototypeOf,U),Ls=U.create,Os=ke.propertyIsEnumerable,Pn=Rn.splice,Rs=ce?ce.isConcatSpreadable:s,en=ce?ce.iterator:s,be=ce?ce.toStringTag:s,kn=function(){try{var t=Ae(U,"defineProperty");return t({},"",{}),t}catch{}}(),yu=_.clearTimeout!==et.clearTimeout&&_.clearTimeout,xu=w&&w.now!==et.Date.now&&w.now,wu=_.setTimeout!==et.setTimeout&&_.setTimeout,zn=X.ceil,Nn=X.floor,Wi=U.getOwnPropertySymbols,Su=Fn?Fn.isBuffer:s,Is=_.isFinite,Au=Rn.join,Lu=xs(U.keys,U),Q=X.max,it=X.min,Ou=w.now,Ru=_.parseInt,Ds=X.random,Iu=Rn.reverse,Mi=Ae(_,"DataView"),nn=Ae(_,"Map"),Ui=Ae(_,"Promise"),ze=Ae(_,"Set"),rn=Ae(_,"WeakMap"),sn=Ae(U,"create"),Wn=rn&&new rn,Ne={},Du=Le(Mi),$u=Le(nn),Fu=Le(Ui),Eu=Le(ze),Tu=Le(rn),Mn=ce?ce.prototype:s,an=Mn?Mn.valueOf:s,$s=Mn?Mn.toString:s;function u(t){if(j(t)&&!I(t)&&!(t instanceof P)){if(t instanceof Lt)return t;if(M.call(t,"__wrapped__"))return Fa(t)}return new Lt(t)}var We=function(){function t(){}return function(e){if(!K(e))return{};if(Ls)return Ls(e);t.prototype=e;var n=new t;return t.prototype=s,n}}();function Un(){}function Lt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=s}u.templateSettings={escape:jl,evaluate:Yl,interpolate:Mr,variable:"",imports:{_:u}},u.prototype=Un.prototype,u.prototype.constructor=u,Lt.prototype=We(Un.prototype),Lt.prototype.constructor=Lt;function P(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=qt,this.__views__=[]}function Pu(){var t=new P(this.__wrapped__);return t.__actions__=dt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=dt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=dt(this.__views__),t}function ku(){if(this.__filtered__){var t=new P(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function zu(){var t=this.__wrapped__.value(),e=this.__dir__,n=I(t),i=e<0,o=n?t.length:0,f=Jf(0,o,this.__views__),c=f.start,h=f.end,v=h-c,m=i?h:c-1,C=this.__iteratees__,b=C.length,x=0,S=it(v,this.__takeCount__);if(!n||!i&&o==v&&S==v)return ea(t,this.__actions__);var L=[];t:for(;v--&&x<S;){m+=e;for(var $=-1,O=t[m];++$<b;){var T=C[$],k=T.iteratee,yt=T.type,ut=k(O);if(yt==Dl)O=ut;else if(!ut){if(yt==Pr)continue t;break t}}L[x++]=O}return L}P.prototype=We(Un.prototype),P.prototype.constructor=P;function ye(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Nu(){this.__data__=sn?sn(null):{},this.size=0}function Wu(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Mu(t){var e=this.__data__;if(sn){var n=e[t];return n===ct?s:n}return M.call(e,t)?e[t]:s}function Uu(t){var e=this.__data__;return sn?e[t]!==s:M.call(e,t)}function Bu(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=sn&&e===s?ct:e,this}ye.prototype.clear=Nu,ye.prototype.delete=Wu,ye.prototype.get=Mu,ye.prototype.has=Uu,ye.prototype.set=Bu;function Qt(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function qu(){this.__data__=[],this.size=0}function Hu(t){var e=this.__data__,n=Bn(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():Pn.call(e,n,1),--this.size,!0}function Gu(t){var e=this.__data__,n=Bn(e,t);return n<0?s:e[n][1]}function Ku(t){return Bn(this.__data__,t)>-1}function ju(t,e){var n=this.__data__,i=Bn(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}Qt.prototype.clear=qu,Qt.prototype.delete=Hu,Qt.prototype.get=Gu,Qt.prototype.has=Ku,Qt.prototype.set=ju;function Vt(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Yu(){this.size=0,this.__data__={hash:new ye,map:new(nn||Qt),string:new ye}}function Zu(t){var e=ti(this,t).delete(t);return this.size-=e?1:0,e}function Ju(t){return ti(this,t).get(t)}function Xu(t){return ti(this,t).has(t)}function Qu(t,e){var n=ti(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}Vt.prototype.clear=Yu,Vt.prototype.delete=Zu,Vt.prototype.get=Ju,Vt.prototype.has=Xu,Vt.prototype.set=Qu;function xe(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Vt;++e<n;)this.add(t[e])}function Vu(t){return this.__data__.set(t,ct),this}function tf(t){return this.__data__.has(t)}xe.prototype.add=xe.prototype.push=Vu,xe.prototype.has=tf;function Pt(t){var e=this.__data__=new Qt(t);this.size=e.size}function ef(){this.__data__=new Qt,this.size=0}function nf(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function rf(t){return this.__data__.get(t)}function sf(t){return this.__data__.has(t)}function af(t,e){var n=this.__data__;if(n instanceof Qt){var i=n.__data__;if(!nn||i.length<d-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Vt(i)}return n.set(t,e),this.size=n.size,this}Pt.prototype.clear=ef,Pt.prototype.delete=nf,Pt.prototype.get=rf,Pt.prototype.has=sf,Pt.prototype.set=af;function Fs(t,e){var n=I(t),i=!n&&Oe(t),o=!n&&!i&&ge(t),f=!n&&!i&&!o&&qe(t),c=n||i||o||f,h=c?Pi(t.length,vu):[],v=h.length;for(var m in t)(e||M.call(t,m))&&!(c&&(m=="length"||o&&(m=="offset"||m=="parent")||f&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||ie(m,v)))&&h.push(m);return h}function Es(t){var e=t.length;return e?t[Qi(0,e-1)]:s}function lf(t,e){return ei(dt(t),we(e,0,t.length))}function of(t){return ei(dt(t))}function Bi(t,e,n){(n!==s&&!kt(t[e],n)||n===s&&!(e in t))&&te(t,e,n)}function ln(t,e,n){var i=t[e];(!(M.call(t,e)&&kt(i,n))||n===s&&!(e in t))&&te(t,e,n)}function Bn(t,e){for(var n=t.length;n--;)if(kt(t[n][0],e))return n;return-1}function uf(t,e,n,i){return de(t,function(o,f,c){e(i,o,n(o),c)}),i}function Ts(t,e){return t&&Gt(e,V(e),t)}function ff(t,e){return t&&Gt(e,pt(e),t)}function te(t,e,n){e=="__proto__"&&kn?kn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function qi(t,e){for(var n=-1,i=e.length,o=g(i),f=t==null;++n<i;)o[n]=f?s:wr(t,e[n]);return o}function we(t,e,n){return t===t&&(n!==s&&(t=t<=n?t:n),e!==s&&(t=t>=e?t:e)),t}function Ot(t,e,n,i,o,f){var c,h=e&tt,v=e&$t,m=e&st;if(n&&(c=o?n(t,i,o,f):n(t)),c!==s)return c;if(!K(t))return t;var C=I(t);if(C){if(c=Qf(t),!h)return dt(t,c)}else{var b=rt(t),x=b==bn||b==kr;if(ge(t))return ra(t,h);if(b==Xt||b==Ie||x&&!o){if(c=v||x?{}:wa(t),!h)return v?Uf(t,ff(c,t)):Mf(t,Ts(c,t))}else{if(!B[b])return o?t:{};c=Vf(t,b,h)}}f||(f=new Pt);var S=f.get(t);if(S)return S;f.set(t,c),Qa(t)?t.forEach(function(O){c.add(Ot(O,e,n,O,t,f))}):Ja(t)&&t.forEach(function(O,T){c.set(T,Ot(O,e,n,T,t,f))});var L=m?v?ur:or:v?pt:V,$=C?s:L(t);return St($||t,function(O,T){$&&(T=O,O=t[T]),ln(c,T,Ot(O,e,n,T,t,f))}),c}function cf(t){var e=V(t);return function(n){return Ps(n,t,e)}}function Ps(t,e,n){var i=n.length;if(t==null)return!i;for(t=U(t);i--;){var o=n[i],f=e[o],c=t[o];if(c===s&&!(o in t)||!f(c))return!1}return!0}function ks(t,e,n){if(typeof t!="function")throw new At(E);return pn(function(){t.apply(s,n)},e)}function on(t,e,n,i){var o=-1,f=An,c=!0,h=t.length,v=[],m=e.length;if(!h)return v;n&&(e=G(e,mt(n))),i?(f=Ii,c=!1):e.length>=d&&(f=tn,c=!1,e=new xe(e));t:for(;++o<h;){var C=t[o],b=n==null?C:n(C);if(C=i||C!==0?C:0,c&&b===b){for(var x=m;x--;)if(e[x]===b)continue t;v.push(C)}else f(e,b,i)||v.push(C)}return v}var de=ua(Ht),zs=ua(Gi,!0);function df(t,e){var n=!0;return de(t,function(i,o,f){return n=!!e(i,o,f),n}),n}function qn(t,e,n){for(var i=-1,o=t.length;++i<o;){var f=t[i],c=e(f);if(c!=null&&(h===s?c===c&&!bt(c):n(c,h)))var h=c,v=f}return v}function hf(t,e,n,i){var o=t.length;for(n=D(n),n<0&&(n=-n>o?0:o+n),i=i===s||i>o?o:D(i),i<0&&(i+=o),i=n>i?0:tl(i);n<i;)t[n++]=e;return t}function Ns(t,e){var n=[];return de(t,function(i,o,f){e(i,o,f)&&n.push(i)}),n}function nt(t,e,n,i,o){var f=-1,c=t.length;for(n||(n=ec),o||(o=[]);++f<c;){var h=t[f];e>0&&n(h)?e>1?nt(h,e-1,n,i,o):ue(o,h):i||(o[o.length]=h)}return o}var Hi=fa(),Ws=fa(!0);function Ht(t,e){return t&&Hi(t,e,V)}function Gi(t,e){return t&&Ws(t,e,V)}function Hn(t,e){return oe(e,function(n){return re(t[n])})}function Se(t,e){e=pe(e,t);for(var n=0,i=e.length;t!=null&&n<i;)t=t[Kt(e[n++])];return n&&n==i?t:s}function Ms(t,e,n){var i=e(t);return I(t)?i:ue(i,n(t))}function lt(t){return t==null?t===s?Ml:Nl:be&&be in U(t)?Zf(t):oc(t)}function Ki(t,e){return t>e}function pf(t,e){return t!=null&&M.call(t,e)}function vf(t,e){return t!=null&&e in U(t)}function gf(t,e,n){return t>=it(e,n)&&t<Q(e,n)}function ji(t,e,n){for(var i=n?Ii:An,o=t[0].length,f=t.length,c=f,h=g(f),v=1/0,m=[];c--;){var C=t[c];c&&e&&(C=G(C,mt(e))),v=it(C.length,v),h[c]=!n&&(e||o>=120&&C.length>=120)?new xe(c&&C):s}C=t[0];var b=-1,x=h[0];t:for(;++b<o&&m.length<v;){var S=C[b],L=e?e(S):S;if(S=n||S!==0?S:0,!(x?tn(x,L):i(m,L,n))){for(c=f;--c;){var $=h[c];if(!($?tn($,L):i(t[c],L,n)))continue t}x&&x.push(L),m.push(S)}}return m}function _f(t,e,n,i){return Ht(t,function(o,f,c){e(i,n(o),f,c)}),i}function un(t,e,n){e=pe(e,t),t=Oa(t,e);var i=t==null?t:t[Kt(It(e))];return i==null?s:_t(i,t,n)}function Us(t){return j(t)&&lt(t)==Ie}function mf(t){return j(t)&&lt(t)==Ve}function Cf(t){return j(t)&&lt(t)==Ye}function fn(t,e,n,i,o){return t===e?!0:t==null||e==null||!j(t)&&!j(e)?t!==t&&e!==e:bf(t,e,n,i,fn,o)}function bf(t,e,n,i,o,f){var c=I(t),h=I(e),v=c?mn:rt(t),m=h?mn:rt(e);v=v==Ie?Xt:v,m=m==Ie?Xt:m;var C=v==Xt,b=m==Xt,x=v==m;if(x&&ge(t)){if(!ge(e))return!1;c=!0,C=!1}if(x&&!C)return f||(f=new Pt),c||qe(t)?ba(t,e,n,i,o,f):jf(t,e,v,n,i,o,f);if(!(n&Yt)){var S=C&&M.call(t,"__wrapped__"),L=b&&M.call(e,"__wrapped__");if(S||L){var $=S?t.value():t,O=L?e.value():e;return f||(f=new Pt),o($,O,n,i,f)}}return x?(f||(f=new Pt),Yf(t,e,n,i,o,f)):!1}function yf(t){return j(t)&&rt(t)==Ft}function Yi(t,e,n,i){var o=n.length,f=o,c=!i;if(t==null)return!f;for(t=U(t);o--;){var h=n[o];if(c&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++o<f;){h=n[o];var v=h[0],m=t[v],C=h[1];if(c&&h[2]){if(m===s&&!(v in t))return!1}else{var b=new Pt;if(i)var x=i(m,C,v,t,e,b);if(!(x===s?fn(C,m,Yt|_e,i,b):x))return!1}}return!0}function Bs(t){if(!K(t)||ic(t))return!1;var e=re(t)?bu:uo;return e.test(Le(t))}function xf(t){return j(t)&&lt(t)==Je}function wf(t){return j(t)&&rt(t)==Et}function Sf(t){return j(t)&&li(t.length)&&!!q[lt(t)]}function qs(t){return typeof t=="function"?t:t==null?vt:typeof t=="object"?I(t)?Ks(t[0],t[1]):Gs(t):cl(t)}function Zi(t){if(!hn(t))return Lu(t);var e=[];for(var n in U(t))M.call(t,n)&&n!="constructor"&&e.push(n);return e}function Af(t){if(!K(t))return lc(t);var e=hn(t),n=[];for(var i in t)i=="constructor"&&(e||!M.call(t,i))||n.push(i);return n}function Ji(t,e){return t<e}function Hs(t,e){var n=-1,i=ht(t)?g(t.length):[];return de(t,function(o,f,c){i[++n]=e(o,f,c)}),i}function Gs(t){var e=cr(t);return e.length==1&&e[0][2]?Aa(e[0][0],e[0][1]):function(n){return n===t||Yi(n,t,e)}}function Ks(t,e){return hr(t)&&Sa(e)?Aa(Kt(t),e):function(n){var i=wr(n,t);return i===s&&i===e?Sr(n,t):fn(e,i,Yt|_e)}}function Gn(t,e,n,i,o){t!==e&&Hi(e,function(f,c){if(o||(o=new Pt),K(f))Lf(t,e,c,n,Gn,i,o);else{var h=i?i(vr(t,c),f,c+"",t,e,o):s;h===s&&(h=f),Bi(t,c,h)}},pt)}function Lf(t,e,n,i,o,f,c){var h=vr(t,n),v=vr(e,n),m=c.get(v);if(m){Bi(t,n,m);return}var C=f?f(h,v,n+"",t,e,c):s,b=C===s;if(b){var x=I(v),S=!x&&ge(v),L=!x&&!S&&qe(v);C=v,x||S||L?I(h)?C=h:Y(h)?C=dt(h):S?(b=!1,C=ra(v,!0)):L?(b=!1,C=sa(v,!0)):C=[]:vn(v)||Oe(v)?(C=h,Oe(h)?C=el(h):(!K(h)||re(h))&&(C=wa(v))):b=!1}b&&(c.set(v,C),o(C,v,i,f,c),c.delete(v)),Bi(t,n,C)}function js(t,e){var n=t.length;if(!!n)return e+=e<0?n:0,ie(e,n)?t[e]:s}function Ys(t,e,n){e.length?e=G(e,function(f){return I(f)?function(c){return Se(c,f.length===1?f[0]:f)}:f}):e=[vt];var i=-1;e=G(e,mt(A()));var o=Hs(t,function(f,c,h){var v=G(e,function(m){return m(f)});return{criteria:v,index:++i,value:f}});return Qo(o,function(f,c){return Wf(f,c,n)})}function Of(t,e){return Zs(t,e,function(n,i){return Sr(t,i)})}function Zs(t,e,n){for(var i=-1,o=e.length,f={};++i<o;){var c=e[i],h=Se(t,c);n(h,c)&&cn(f,pe(c,t),h)}return f}function Rf(t){return function(e){return Se(e,t)}}function Xi(t,e,n,i){var o=i?Xo:Fe,f=-1,c=e.length,h=t;for(t===e&&(e=dt(e)),n&&(h=G(t,mt(n)));++f<c;)for(var v=0,m=e[f],C=n?n(m):m;(v=o(h,C,v,i))>-1;)h!==t&&Pn.call(h,v,1),Pn.call(t,v,1);return t}function Js(t,e){for(var n=t?e.length:0,i=n-1;n--;){var o=e[n];if(n==i||o!==f){var f=o;ie(o)?Pn.call(t,o,1):er(t,o)}}return t}function Qi(t,e){return t+Nn(Ds()*(e-t+1))}function If(t,e,n,i){for(var o=-1,f=Q(zn((e-t)/(n||1)),0),c=g(f);f--;)c[i?f:++o]=t,t+=n;return c}function Vi(t,e){var n="";if(!t||e<1||e>le)return n;do e%2&&(n+=t),e=Nn(e/2),e&&(t+=t);while(e);return n}function F(t,e){return gr(La(t,e,vt),t+"")}function Df(t){return Es(He(t))}function $f(t,e){var n=He(t);return ei(n,we(e,0,n.length))}function cn(t,e,n,i){if(!K(t))return t;e=pe(e,t);for(var o=-1,f=e.length,c=f-1,h=t;h!=null&&++o<f;){var v=Kt(e[o]),m=n;if(v==="__proto__"||v==="constructor"||v==="prototype")return t;if(o!=c){var C=h[v];m=i?i(C,v,h):s,m===s&&(m=K(C)?C:ie(e[o+1])?[]:{})}ln(h,v,m),h=h[v]}return t}var Xs=Wn?function(t,e){return Wn.set(t,e),t}:vt,Ff=kn?function(t,e){return kn(t,"toString",{configurable:!0,enumerable:!1,value:Lr(e),writable:!0})}:vt;function Ef(t){return ei(He(t))}function Rt(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var f=g(o);++i<o;)f[i]=t[i+e];return f}function Tf(t,e){var n;return de(t,function(i,o,f){return n=e(i,o,f),!n}),!!n}function Kn(t,e,n){var i=0,o=t==null?i:t.length;if(typeof e=="number"&&e===e&&o<=Tl){for(;i<o;){var f=i+o>>>1,c=t[f];c!==null&&!bt(c)&&(n?c<=e:c<e)?i=f+1:o=f}return o}return tr(t,e,vt,n)}function tr(t,e,n,i){var o=0,f=t==null?0:t.length;if(f===0)return 0;e=n(e);for(var c=e!==e,h=e===null,v=bt(e),m=e===s;o<f;){var C=Nn((o+f)/2),b=n(t[C]),x=b!==s,S=b===null,L=b===b,$=bt(b);if(c)var O=i||L;else m?O=L&&(i||x):h?O=L&&x&&(i||!S):v?O=L&&x&&!S&&(i||!$):S||$?O=!1:O=i?b<=e:b<e;O?o=C+1:f=C}return it(f,El)}function Qs(t,e){for(var n=-1,i=t.length,o=0,f=[];++n<i;){var c=t[n],h=e?e(c):c;if(!n||!kt(h,v)){var v=h;f[o++]=c===0?0:c}}return f}function Vs(t){return typeof t=="number"?t:bt(t)?_n:+t}function Ct(t){if(typeof t=="string")return t;if(I(t))return G(t,Ct)+"";if(bt(t))return $s?$s.call(t):"";var e=t+"";return e=="0"&&1/t==-me?"-0":e}function he(t,e,n){var i=-1,o=An,f=t.length,c=!0,h=[],v=h;if(n)c=!1,o=Ii;else if(f>=d){var m=e?null:Gf(t);if(m)return On(m);c=!1,o=tn,v=new xe}else v=e?[]:h;t:for(;++i<f;){var C=t[i],b=e?e(C):C;if(C=n||C!==0?C:0,c&&b===b){for(var x=v.length;x--;)if(v[x]===b)continue t;e&&v.push(b),h.push(C)}else o(v,b,n)||(v!==h&&v.push(b),h.push(C))}return h}function er(t,e){return e=pe(e,t),t=Oa(t,e),t==null||delete t[Kt(It(e))]}function ta(t,e,n,i){return cn(t,e,n(Se(t,e)),i)}function jn(t,e,n,i){for(var o=t.length,f=i?o:-1;(i?f--:++f<o)&&e(t[f],f,t););return n?Rt(t,i?0:f,i?f+1:o):Rt(t,i?f+1:0,i?o:f)}function ea(t,e){var n=t;return n instanceof P&&(n=n.value()),Di(e,function(i,o){return o.func.apply(o.thisArg,ue([i],o.args))},n)}function nr(t,e,n){var i=t.length;if(i<2)return i?he(t[0]):[];for(var o=-1,f=g(i);++o<i;)for(var c=t[o],h=-1;++h<i;)h!=o&&(f[o]=on(f[o]||c,t[h],e,n));return he(nt(f,1),e,n)}function na(t,e,n){for(var i=-1,o=t.length,f=e.length,c={};++i<o;){var h=i<f?e[i]:s;n(c,t[i],h)}return c}function ir(t){return Y(t)?t:[]}function rr(t){return typeof t=="function"?t:vt}function pe(t,e){return I(t)?t:hr(t,e)?[t]:$a(W(t))}var Pf=F;function ve(t,e,n){var i=t.length;return n=n===s?i:n,!e&&n>=i?t:Rt(t,e,n)}var ia=yu||function(t){return et.clearTimeout(t)};function ra(t,e){if(e)return t.slice();var n=t.length,i=As?As(n):new t.constructor(n);return t.copy(i),i}function sr(t){var e=new t.constructor(t.byteLength);return new En(e).set(new En(t)),e}function kf(t,e){var n=e?sr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function zf(t){var e=new t.constructor(t.source,Ur.exec(t));return e.lastIndex=t.lastIndex,e}function Nf(t){return an?U(an.call(t)):{}}function sa(t,e){var n=e?sr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function aa(t,e){if(t!==e){var n=t!==s,i=t===null,o=t===t,f=bt(t),c=e!==s,h=e===null,v=e===e,m=bt(e);if(!h&&!m&&!f&&t>e||f&&c&&v&&!h&&!m||i&&c&&v||!n&&v||!o)return 1;if(!i&&!f&&!m&&t<e||m&&n&&o&&!i&&!f||h&&n&&o||!c&&o||!v)return-1}return 0}function Wf(t,e,n){for(var i=-1,o=t.criteria,f=e.criteria,c=o.length,h=n.length;++i<c;){var v=aa(o[i],f[i]);if(v){if(i>=h)return v;var m=n[i];return v*(m=="desc"?-1:1)}}return t.index-e.index}function la(t,e,n,i){for(var o=-1,f=t.length,c=n.length,h=-1,v=e.length,m=Q(f-c,0),C=g(v+m),b=!i;++h<v;)C[h]=e[h];for(;++o<c;)(b||o<f)&&(C[n[o]]=t[o]);for(;m--;)C[h++]=t[o++];return C}function oa(t,e,n,i){for(var o=-1,f=t.length,c=-1,h=n.length,v=-1,m=e.length,C=Q(f-h,0),b=g(C+m),x=!i;++o<C;)b[o]=t[o];for(var S=o;++v<m;)b[S+v]=e[v];for(;++c<h;)(x||o<f)&&(b[S+n[c]]=t[o++]);return b}function dt(t,e){var n=-1,i=t.length;for(e||(e=g(i));++n<i;)e[n]=t[n];return e}function Gt(t,e,n,i){var o=!n;n||(n={});for(var f=-1,c=e.length;++f<c;){var h=e[f],v=i?i(n[h],t[h],h,n,t):s;v===s&&(v=t[h]),o?te(n,h,v):ln(n,h,v)}return n}function Mf(t,e){return Gt(t,dr(t),e)}function Uf(t,e){return Gt(t,ya(t),e)}function Yn(t,e){return function(n,i){var o=I(n)?Go:uf,f=e?e():{};return o(n,t,A(i,2),f)}}function Me(t){return F(function(e,n){var i=-1,o=n.length,f=o>1?n[o-1]:s,c=o>2?n[2]:s;for(f=t.length>3&&typeof f=="function"?(o--,f):s,c&&ot(n[0],n[1],c)&&(f=o<3?s:f,o=1),e=U(e);++i<o;){var h=n[i];h&&t(e,h,i,f)}return e})}function ua(t,e){return function(n,i){if(n==null)return n;if(!ht(n))return t(n,i);for(var o=n.length,f=e?o:-1,c=U(n);(e?f--:++f<o)&&i(c[f],f,c)!==!1;);return n}}function fa(t){return function(e,n,i){for(var o=-1,f=U(e),c=i(e),h=c.length;h--;){var v=c[t?h:++o];if(n(f[v],v,f)===!1)break}return e}}function Bf(t,e,n){var i=e&at,o=dn(t);function f(){var c=this&&this!==et&&this instanceof f?o:t;return c.apply(i?n:this,arguments)}return f}function ca(t){return function(e){e=W(e);var n=Ee(e)?Tt(e):s,i=n?n[0]:e.charAt(0),o=n?ve(n,1).join(""):e.slice(1);return i[t]()+o}}function Ue(t){return function(e){return Di(ul(ol(e).replace($o,"")),t,"")}}function dn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=We(t.prototype),i=t.apply(n,e);return K(i)?i:n}}function qf(t,e,n){var i=dn(t);function o(){for(var f=arguments.length,c=g(f),h=f,v=Be(o);h--;)c[h]=arguments[h];var m=f<3&&c[0]!==v&&c[f-1]!==v?[]:fe(c,v);if(f-=m.length,f<n)return ga(t,e,Zn,o.placeholder,s,c,m,s,s,n-f);var C=this&&this!==et&&this instanceof o?i:t;return _t(C,this,c)}return o}function da(t){return function(e,n,i){var o=U(e);if(!ht(e)){var f=A(n,3);e=V(e),n=function(h){return f(o[h],h,o)}}var c=t(e,n,i);return c>-1?o[f?e[c]:c]:s}}function ha(t){return ne(function(e){var n=e.length,i=n,o=Lt.prototype.thru;for(t&&e.reverse();i--;){var f=e[i];if(typeof f!="function")throw new At(E);if(o&&!c&&Vn(f)=="wrapper")var c=new Lt([],!0)}for(i=c?i:n;++i<n;){f=e[i];var h=Vn(f),v=h=="wrapper"?fr(f):s;v&&pr(v[0])&&v[1]==(Jt|z|Bt|Ke)&&!v[4].length&&v[9]==1?c=c[Vn(v[0])].apply(c,v[3]):c=f.length==1&&pr(f)?c[h]():c.thru(f)}return function(){var m=arguments,C=m[0];if(c&&m.length==1&&I(C))return c.plant(C).value();for(var b=0,x=n?e[b].apply(this,m):C;++b<n;)x=e[b].call(this,x);return x}})}function Zn(t,e,n,i,o,f,c,h,v,m){var C=e&Jt,b=e&at,x=e&Ut,S=e&(z|Zt),L=e&fi,$=x?s:dn(t);function O(){for(var T=arguments.length,k=g(T),yt=T;yt--;)k[yt]=arguments[yt];if(S)var ut=Be(O),xt=tu(k,ut);if(i&&(k=la(k,i,o,S)),f&&(k=oa(k,f,c,S)),T-=xt,S&&T<m){var Z=fe(k,ut);return ga(t,e,Zn,O.placeholder,n,k,Z,h,v,m-T)}var zt=b?n:this,ae=x?zt[t]:t;return T=k.length,h?k=uc(k,h):L&&T>1&&k.reverse(),C&&v<T&&(k.length=v),this&&this!==et&&this instanceof O&&(ae=$||dn(ae)),ae.apply(zt,k)}return O}function pa(t,e){return function(n,i){return _f(n,t,e(i),{})}}function Jn(t,e){return function(n,i){var o;if(n===s&&i===s)return e;if(n!==s&&(o=n),i!==s){if(o===s)return i;typeof n=="string"||typeof i=="string"?(n=Ct(n),i=Ct(i)):(n=Vs(n),i=Vs(i)),o=t(n,i)}return o}}function ar(t){return ne(function(e){return e=G(e,mt(A())),F(function(n){var i=this;return t(e,function(o){return _t(o,i,n)})})})}function Xn(t,e){e=e===s?" ":Ct(e);var n=e.length;if(n<2)return n?Vi(e,t):e;var i=Vi(e,zn(t/Te(e)));return Ee(e)?ve(Tt(i),0,t).join(""):i.slice(0,t)}function Hf(t,e,n,i){var o=e&at,f=dn(t);function c(){for(var h=-1,v=arguments.length,m=-1,C=i.length,b=g(C+v),x=this&&this!==et&&this instanceof c?f:t;++m<C;)b[m]=i[m];for(;v--;)b[m++]=arguments[++h];return _t(x,o?n:this,b)}return c}function va(t){return function(e,n,i){return i&&typeof i!="number"&&ot(e,n,i)&&(n=i=s),e=se(e),n===s?(n=e,e=0):n=se(n),i=i===s?e<n?1:-1:se(i),If(e,n,i,t)}}function Qn(t){return function(e,n){return typeof e=="string"&&typeof n=="string"||(e=Dt(e),n=Dt(n)),t(e,n)}}function ga(t,e,n,i,o,f,c,h,v,m){var C=e&z,b=C?c:s,x=C?s:c,S=C?f:s,L=C?s:f;e|=C?Bt:Re,e&=~(C?Re:Bt),e&J||(e&=~(at|Ut));var $=[t,e,o,S,b,L,x,h,v,m],O=n.apply(s,$);return pr(t)&&Ra(O,$),O.placeholder=i,Ia(O,t,e)}function lr(t){var e=X[t];return function(n,i){if(n=Dt(n),i=i==null?0:it(D(i),292),i&&Is(n)){var o=(W(n)+"e").split("e"),f=e(o[0]+"e"+(+o[1]+i));return o=(W(f)+"e").split("e"),+(o[0]+"e"+(+o[1]-i))}return e(n)}}var Gf=ze&&1/On(new ze([,-0]))[1]==me?function(t){return new ze(t)}:Ir;function _a(t){return function(e){var n=rt(e);return n==Ft?zi(e):n==Et?lu(e):Vo(e,t(e))}}function ee(t,e,n,i,o,f,c,h){var v=e&Ut;if(!v&&typeof t!="function")throw new At(E);var m=i?i.length:0;if(m||(e&=~(Bt|Re),i=o=s),c=c===s?c:Q(D(c),0),h=h===s?h:D(h),m-=o?o.length:0,e&Re){var C=i,b=o;i=o=s}var x=v?s:fr(t),S=[t,e,n,i,o,C,b,f,c,h];if(x&&ac(S,x),t=S[0],e=S[1],n=S[2],i=S[3],o=S[4],h=S[9]=S[9]===s?v?0:t.length:Q(S[9]-m,0),!h&&e&(z|Zt)&&(e&=~(z|Zt)),!e||e==at)var L=Bf(t,e,n);else e==z||e==Zt?L=qf(t,e,h):(e==Bt||e==(at|Bt))&&!o.length?L=Hf(t,e,n,i):L=Zn.apply(s,S);var $=x?Xs:Ra;return Ia($(L,S),t,e)}function ma(t,e,n,i){return t===s||kt(t,ke[n])&&!M.call(i,n)?e:t}function Ca(t,e,n,i,o,f){return K(t)&&K(e)&&(f.set(e,t),Gn(t,e,s,Ca,f),f.delete(e)),t}function Kf(t){return vn(t)?s:t}function ba(t,e,n,i,o,f){var c=n&Yt,h=t.length,v=e.length;if(h!=v&&!(c&&v>h))return!1;var m=f.get(t),C=f.get(e);if(m&&C)return m==e&&C==t;var b=-1,x=!0,S=n&_e?new xe:s;for(f.set(t,e),f.set(e,t);++b<h;){var L=t[b],$=e[b];if(i)var O=c?i($,L,b,e,t,f):i(L,$,b,t,e,f);if(O!==s){if(O)continue;x=!1;break}if(S){if(!$i(e,function(T,k){if(!tn(S,k)&&(L===T||o(L,T,n,i,f)))return S.push(k)})){x=!1;break}}else if(!(L===$||o(L,$,n,i,f))){x=!1;break}}return f.delete(t),f.delete(e),x}function jf(t,e,n,i,o,f,c){switch(n){case De:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ve:return!(t.byteLength!=e.byteLength||!f(new En(t),new En(e)));case je:case Ye:case Ze:return kt(+t,+e);case Cn:return t.name==e.name&&t.message==e.message;case Je:case Xe:return t==e+"";case Ft:var h=zi;case Et:var v=i&Yt;if(h||(h=On),t.size!=e.size&&!v)return!1;var m=c.get(t);if(m)return m==e;i|=_e,c.set(t,e);var C=ba(h(t),h(e),i,o,f,c);return c.delete(t),C;case yn:if(an)return an.call(t)==an.call(e)}return!1}function Yf(t,e,n,i,o,f){var c=n&Yt,h=or(t),v=h.length,m=or(e),C=m.length;if(v!=C&&!c)return!1;for(var b=v;b--;){var x=h[b];if(!(c?x in e:M.call(e,x)))return!1}var S=f.get(t),L=f.get(e);if(S&&L)return S==e&&L==t;var $=!0;f.set(t,e),f.set(e,t);for(var O=c;++b<v;){x=h[b];var T=t[x],k=e[x];if(i)var yt=c?i(k,T,x,e,t,f):i(T,k,x,t,e,f);if(!(yt===s?T===k||o(T,k,n,i,f):yt)){$=!1;break}O||(O=x=="constructor")}if($&&!O){var ut=t.constructor,xt=e.constructor;ut!=xt&&"constructor"in t&&"constructor"in e&&!(typeof ut=="function"&&ut instanceof ut&&typeof xt=="function"&&xt instanceof xt)&&($=!1)}return f.delete(t),f.delete(e),$}function ne(t){return gr(La(t,s,Pa),t+"")}function or(t){return Ms(t,V,dr)}function ur(t){return Ms(t,pt,ya)}var fr=Wn?function(t){return Wn.get(t)}:Ir;function Vn(t){for(var e=t.name+"",n=Ne[e],i=M.call(Ne,e)?n.length:0;i--;){var o=n[i],f=o.func;if(f==null||f==t)return o.name}return e}function Be(t){var e=M.call(u,"placeholder")?u:t;return e.placeholder}function A(){var t=u.iteratee||Or;return t=t===Or?qs:t,arguments.length?t(arguments[0],arguments[1]):t}function ti(t,e){var n=t.__data__;return nc(e)?n[typeof e=="string"?"string":"hash"]:n.map}function cr(t){for(var e=V(t),n=e.length;n--;){var i=e[n],o=t[i];e[n]=[i,o,Sa(o)]}return e}function Ae(t,e){var n=ru(t,e);return Bs(n)?n:s}function Zf(t){var e=M.call(t,be),n=t[be];try{t[be]=s;var i=!0}catch{}var o=$n.call(t);return i&&(e?t[be]=n:delete t[be]),o}var dr=Wi?function(t){return t==null?[]:(t=U(t),oe(Wi(t),function(e){return Os.call(t,e)}))}:Dr,ya=Wi?function(t){for(var e=[];t;)ue(e,dr(t)),t=Tn(t);return e}:Dr,rt=lt;(Mi&&rt(new Mi(new ArrayBuffer(1)))!=De||nn&&rt(new nn)!=Ft||Ui&&rt(Ui.resolve())!=zr||ze&&rt(new ze)!=Et||rn&&rt(new rn)!=Qe)&&(rt=function(t){var e=lt(t),n=e==Xt?t.constructor:s,i=n?Le(n):"";if(i)switch(i){case Du:return De;case $u:return Ft;case Fu:return zr;case Eu:return Et;case Tu:return Qe}return e});function Jf(t,e,n){for(var i=-1,o=n.length;++i<o;){var f=n[i],c=f.size;switch(f.type){case"drop":t+=c;break;case"dropRight":e-=c;break;case"take":e=it(e,t+c);break;case"takeRight":t=Q(t,e-c);break}}return{start:t,end:e}}function Xf(t){var e=t.match(eo);return e?e[1].split(no):[]}function xa(t,e,n){e=pe(e,t);for(var i=-1,o=e.length,f=!1;++i<o;){var c=Kt(e[i]);if(!(f=t!=null&&n(t,c)))break;t=t[c]}return f||++i!=o?f:(o=t==null?0:t.length,!!o&&li(o)&&ie(c,o)&&(I(t)||Oe(t)))}function Qf(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&M.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function wa(t){return typeof t.constructor=="function"&&!hn(t)?We(Tn(t)):{}}function Vf(t,e,n){var i=t.constructor;switch(e){case Ve:return sr(t);case je:case Ye:return new i(+t);case De:return kf(t,n);case ci:case di:case hi:case pi:case vi:case gi:case _i:case mi:case Ci:return sa(t,n);case Ft:return new i;case Ze:case Xe:return new i(t);case Je:return zf(t);case Et:return new i;case yn:return Nf(t)}}function tc(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(to,`{
/* [wrapped with `+e+`] */
`)}function ec(t){return I(t)||Oe(t)||!!(Rs&&t&&t[Rs])}function ie(t,e){var n=typeof t;return e=e==null?le:e,!!e&&(n=="number"||n!="symbol"&&co.test(t))&&t>-1&&t%1==0&&t<e}function ot(t,e,n){if(!K(n))return!1;var i=typeof e;return(i=="number"?ht(n)&&ie(e,n.length):i=="string"&&e in n)?kt(n[e],t):!1}function hr(t,e){if(I(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||bt(t)?!0:Jl.test(t)||!Zl.test(t)||e!=null&&t in U(e)}function nc(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function pr(t){var e=Vn(t),n=u[e];if(typeof n!="function"||!(e in P.prototype))return!1;if(t===n)return!0;var i=fr(n);return!!i&&t===i[0]}function ic(t){return!!Ss&&Ss in t}var rc=In?re:$r;function hn(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||ke;return t===n}function Sa(t){return t===t&&!K(t)}function Aa(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==s||t in U(n))}}function sc(t){var e=si(t,function(i){return n.size===Mt&&n.clear(),i}),n=e.cache;return e}function ac(t,e){var n=t[1],i=e[1],o=n|i,f=o<(at|Ut|Jt),c=i==Jt&&n==z||i==Jt&&n==Ke&&t[7].length<=e[8]||i==(Jt|Ke)&&e[7].length<=e[8]&&n==z;if(!(f||c))return t;i&at&&(t[2]=e[2],o|=n&at?0:J);var h=e[3];if(h){var v=t[3];t[3]=v?la(v,h,e[4]):h,t[4]=v?fe(t[3],gt):e[4]}return h=e[5],h&&(v=t[5],t[5]=v?oa(v,h,e[6]):h,t[6]=v?fe(t[5],gt):e[6]),h=e[7],h&&(t[7]=h),i&Jt&&(t[8]=t[8]==null?e[8]:it(t[8],e[8])),t[9]==null&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function lc(t){var e=[];if(t!=null)for(var n in U(t))e.push(n);return e}function oc(t){return $n.call(t)}function La(t,e,n){return e=Q(e===s?t.length-1:e,0),function(){for(var i=arguments,o=-1,f=Q(i.length-e,0),c=g(f);++o<f;)c[o]=i[e+o];o=-1;for(var h=g(e+1);++o<e;)h[o]=i[o];return h[e]=n(c),_t(t,this,h)}}function Oa(t,e){return e.length<2?t:Se(t,Rt(e,0,-1))}function uc(t,e){for(var n=t.length,i=it(e.length,n),o=dt(t);i--;){var f=e[i];t[i]=ie(f,n)?o[f]:s}return t}function vr(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Ra=Da(Xs),pn=wu||function(t,e){return et.setTimeout(t,e)},gr=Da(Ff);function Ia(t,e,n){var i=e+"";return gr(t,tc(i,fc(Xf(i),n)))}function Da(t){var e=0,n=0;return function(){var i=Ou(),o=Il-(i-n);if(n=i,o>0){if(++e>=Rl)return arguments[0]}else e=0;return t.apply(s,arguments)}}function ei(t,e){var n=-1,i=t.length,o=i-1;for(e=e===s?i:e;++n<e;){var f=Qi(n,o),c=t[f];t[f]=t[n],t[n]=c}return t.length=e,t}var $a=sc(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Xl,function(n,i,o,f){e.push(o?f.replace(so,"$1"):i||n)}),e});function Kt(t){if(typeof t=="string"||bt(t))return t;var e=t+"";return e=="0"&&1/t==-me?"-0":e}function Le(t){if(t!=null){try{return Dn.call(t)}catch{}try{return t+""}catch{}}return""}function fc(t,e){return St(Pl,function(n){var i="_."+n[0];e&n[1]&&!An(t,i)&&t.push(i)}),t.sort()}function Fa(t){if(t instanceof P)return t.clone();var e=new Lt(t.__wrapped__,t.__chain__);return e.__actions__=dt(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function cc(t,e,n){(n?ot(t,e,n):e===s)?e=1:e=Q(D(e),0);var i=t==null?0:t.length;if(!i||e<1)return[];for(var o=0,f=0,c=g(zn(i/e));o<i;)c[f++]=Rt(t,o,o+=e);return c}function dc(t){for(var e=-1,n=t==null?0:t.length,i=0,o=[];++e<n;){var f=t[e];f&&(o[i++]=f)}return o}function hc(){var t=arguments.length;if(!t)return[];for(var e=g(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return ue(I(n)?dt(n):[n],nt(e,1))}var pc=F(function(t,e){return Y(t)?on(t,nt(e,1,Y,!0)):[]}),vc=F(function(t,e){var n=It(e);return Y(n)&&(n=s),Y(t)?on(t,nt(e,1,Y,!0),A(n,2)):[]}),gc=F(function(t,e){var n=It(e);return Y(n)&&(n=s),Y(t)?on(t,nt(e,1,Y,!0),s,n):[]});function _c(t,e,n){var i=t==null?0:t.length;return i?(e=n||e===s?1:D(e),Rt(t,e<0?0:e,i)):[]}function mc(t,e,n){var i=t==null?0:t.length;return i?(e=n||e===s?1:D(e),e=i-e,Rt(t,0,e<0?0:e)):[]}function Cc(t,e){return t&&t.length?jn(t,A(e,3),!0,!0):[]}function bc(t,e){return t&&t.length?jn(t,A(e,3),!0):[]}function yc(t,e,n,i){var o=t==null?0:t.length;return o?(n&&typeof n!="number"&&ot(t,e,n)&&(n=0,i=o),hf(t,e,n,i)):[]}function Ea(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var o=n==null?0:D(n);return o<0&&(o=Q(i+o,0)),Ln(t,A(e,3),o)}function Ta(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var o=i-1;return n!==s&&(o=D(n),o=n<0?Q(i+o,0):it(o,i-1)),Ln(t,A(e,3),o,!0)}function Pa(t){var e=t==null?0:t.length;return e?nt(t,1):[]}function xc(t){var e=t==null?0:t.length;return e?nt(t,me):[]}function wc(t,e){var n=t==null?0:t.length;return n?(e=e===s?1:D(e),nt(t,e)):[]}function Sc(t){for(var e=-1,n=t==null?0:t.length,i={};++e<n;){var o=t[e];i[o[0]]=o[1]}return i}function ka(t){return t&&t.length?t[0]:s}function Ac(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var o=n==null?0:D(n);return o<0&&(o=Q(i+o,0)),Fe(t,e,o)}function Lc(t){var e=t==null?0:t.length;return e?Rt(t,0,-1):[]}var Oc=F(function(t){var e=G(t,ir);return e.length&&e[0]===t[0]?ji(e):[]}),Rc=F(function(t){var e=It(t),n=G(t,ir);return e===It(n)?e=s:n.pop(),n.length&&n[0]===t[0]?ji(n,A(e,2)):[]}),Ic=F(function(t){var e=It(t),n=G(t,ir);return e=typeof e=="function"?e:s,e&&n.pop(),n.length&&n[0]===t[0]?ji(n,s,e):[]});function Dc(t,e){return t==null?"":Au.call(t,e)}function It(t){var e=t==null?0:t.length;return e?t[e-1]:s}function $c(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var o=i;return n!==s&&(o=D(n),o=o<0?Q(i+o,0):it(o,i-1)),e===e?uu(t,e,o):Ln(t,gs,o,!0)}function Fc(t,e){return t&&t.length?js(t,D(e)):s}var Ec=F(za);function za(t,e){return t&&t.length&&e&&e.length?Xi(t,e):t}function Tc(t,e,n){return t&&t.length&&e&&e.length?Xi(t,e,A(n,2)):t}function Pc(t,e,n){return t&&t.length&&e&&e.length?Xi(t,e,s,n):t}var kc=ne(function(t,e){var n=t==null?0:t.length,i=qi(t,e);return Js(t,G(e,function(o){return ie(o,n)?+o:o}).sort(aa)),i});function zc(t,e){var n=[];if(!(t&&t.length))return n;var i=-1,o=[],f=t.length;for(e=A(e,3);++i<f;){var c=t[i];e(c,i,t)&&(n.push(c),o.push(i))}return Js(t,o),n}function _r(t){return t==null?t:Iu.call(t)}function Nc(t,e,n){var i=t==null?0:t.length;return i?(n&&typeof n!="number"&&ot(t,e,n)?(e=0,n=i):(e=e==null?0:D(e),n=n===s?i:D(n)),Rt(t,e,n)):[]}function Wc(t,e){return Kn(t,e)}function Mc(t,e,n){return tr(t,e,A(n,2))}function Uc(t,e){var n=t==null?0:t.length;if(n){var i=Kn(t,e);if(i<n&&kt(t[i],e))return i}return-1}function Bc(t,e){return Kn(t,e,!0)}function qc(t,e,n){return tr(t,e,A(n,2),!0)}function Hc(t,e){var n=t==null?0:t.length;if(n){var i=Kn(t,e,!0)-1;if(kt(t[i],e))return i}return-1}function Gc(t){return t&&t.length?Qs(t):[]}function Kc(t,e){return t&&t.length?Qs(t,A(e,2)):[]}function jc(t){var e=t==null?0:t.length;return e?Rt(t,1,e):[]}function Yc(t,e,n){return t&&t.length?(e=n||e===s?1:D(e),Rt(t,0,e<0?0:e)):[]}function Zc(t,e,n){var i=t==null?0:t.length;return i?(e=n||e===s?1:D(e),e=i-e,Rt(t,e<0?0:e,i)):[]}function Jc(t,e){return t&&t.length?jn(t,A(e,3),!1,!0):[]}function Xc(t,e){return t&&t.length?jn(t,A(e,3)):[]}var Qc=F(function(t){return he(nt(t,1,Y,!0))}),Vc=F(function(t){var e=It(t);return Y(e)&&(e=s),he(nt(t,1,Y,!0),A(e,2))}),td=F(function(t){var e=It(t);return e=typeof e=="function"?e:s,he(nt(t,1,Y,!0),s,e)});function ed(t){return t&&t.length?he(t):[]}function nd(t,e){return t&&t.length?he(t,A(e,2)):[]}function id(t,e){return e=typeof e=="function"?e:s,t&&t.length?he(t,s,e):[]}function mr(t){if(!(t&&t.length))return[];var e=0;return t=oe(t,function(n){if(Y(n))return e=Q(n.length,e),!0}),Pi(e,function(n){return G(t,Fi(n))})}function Na(t,e){if(!(t&&t.length))return[];var n=mr(t);return e==null?n:G(n,function(i){return _t(e,s,i)})}var rd=F(function(t,e){return Y(t)?on(t,e):[]}),sd=F(function(t){return nr(oe(t,Y))}),ad=F(function(t){var e=It(t);return Y(e)&&(e=s),nr(oe(t,Y),A(e,2))}),ld=F(function(t){var e=It(t);return e=typeof e=="function"?e:s,nr(oe(t,Y),s,e)}),od=F(mr);function ud(t,e){return na(t||[],e||[],ln)}function fd(t,e){return na(t||[],e||[],cn)}var cd=F(function(t){var e=t.length,n=e>1?t[e-1]:s;return n=typeof n=="function"?(t.pop(),n):s,Na(t,n)});function Wa(t){var e=u(t);return e.__chain__=!0,e}function dd(t,e){return e(t),t}function ni(t,e){return e(t)}var hd=ne(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(f){return qi(f,t)};return e>1||this.__actions__.length||!(i instanceof P)||!ie(n)?this.thru(o):(i=i.slice(n,+n+(e?1:0)),i.__actions__.push({func:ni,args:[o],thisArg:s}),new Lt(i,this.__chain__).thru(function(f){return e&&!f.length&&f.push(s),f}))});function pd(){return Wa(this)}function vd(){return new Lt(this.value(),this.__chain__)}function gd(){this.__values__===s&&(this.__values__=Va(this.value()));var t=this.__index__>=this.__values__.length,e=t?s:this.__values__[this.__index__++];return{done:t,value:e}}function _d(){return this}function md(t){for(var e,n=this;n instanceof Un;){var i=Fa(n);i.__index__=0,i.__values__=s,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function Cd(){var t=this.__wrapped__;if(t instanceof P){var e=t;return this.__actions__.length&&(e=new P(this)),e=e.reverse(),e.__actions__.push({func:ni,args:[_r],thisArg:s}),new Lt(e,this.__chain__)}return this.thru(_r)}function bd(){return ea(this.__wrapped__,this.__actions__)}var yd=Yn(function(t,e,n){M.call(t,n)?++t[n]:te(t,n,1)});function xd(t,e,n){var i=I(t)?ps:df;return n&&ot(t,e,n)&&(e=s),i(t,A(e,3))}function wd(t,e){var n=I(t)?oe:Ns;return n(t,A(e,3))}var Sd=da(Ea),Ad=da(Ta);function Ld(t,e){return nt(ii(t,e),1)}function Od(t,e){return nt(ii(t,e),me)}function Rd(t,e,n){return n=n===s?1:D(n),nt(ii(t,e),n)}function Ma(t,e){var n=I(t)?St:de;return n(t,A(e,3))}function Ua(t,e){var n=I(t)?Ko:zs;return n(t,A(e,3))}var Id=Yn(function(t,e,n){M.call(t,n)?t[n].push(e):te(t,n,[e])});function Dd(t,e,n,i){t=ht(t)?t:He(t),n=n&&!i?D(n):0;var o=t.length;return n<0&&(n=Q(o+n,0)),oi(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&Fe(t,e,n)>-1}var $d=F(function(t,e,n){var i=-1,o=typeof e=="function",f=ht(t)?g(t.length):[];return de(t,function(c){f[++i]=o?_t(e,c,n):un(c,e,n)}),f}),Fd=Yn(function(t,e,n){te(t,n,e)});function ii(t,e){var n=I(t)?G:Hs;return n(t,A(e,3))}function Ed(t,e,n,i){return t==null?[]:(I(e)||(e=e==null?[]:[e]),n=i?s:n,I(n)||(n=n==null?[]:[n]),Ys(t,e,n))}var Td=Yn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});function Pd(t,e,n){var i=I(t)?Di:ms,o=arguments.length<3;return i(t,A(e,4),n,o,de)}function kd(t,e,n){var i=I(t)?jo:ms,o=arguments.length<3;return i(t,A(e,4),n,o,zs)}function zd(t,e){var n=I(t)?oe:Ns;return n(t,ai(A(e,3)))}function Nd(t){var e=I(t)?Es:Df;return e(t)}function Wd(t,e,n){(n?ot(t,e,n):e===s)?e=1:e=D(e);var i=I(t)?lf:$f;return i(t,e)}function Md(t){var e=I(t)?of:Ef;return e(t)}function Ud(t){if(t==null)return 0;if(ht(t))return oi(t)?Te(t):t.length;var e=rt(t);return e==Ft||e==Et?t.size:Zi(t).length}function Bd(t,e,n){var i=I(t)?$i:Tf;return n&&ot(t,e,n)&&(e=s),i(t,A(e,3))}var qd=F(function(t,e){if(t==null)return[];var n=e.length;return n>1&&ot(t,e[0],e[1])?e=[]:n>2&&ot(e[0],e[1],e[2])&&(e=[e[0]]),Ys(t,nt(e,1),[])}),ri=xu||function(){return et.Date.now()};function Hd(t,e){if(typeof e!="function")throw new At(E);return t=D(t),function(){if(--t<1)return e.apply(this,arguments)}}function Ba(t,e,n){return e=n?s:e,e=t&&e==null?t.length:e,ee(t,Jt,s,s,s,s,e)}function qa(t,e){var n;if(typeof e!="function")throw new At(E);return t=D(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=s),n}}var Cr=F(function(t,e,n){var i=at;if(n.length){var o=fe(n,Be(Cr));i|=Bt}return ee(t,i,e,n,o)}),Ha=F(function(t,e,n){var i=at|Ut;if(n.length){var o=fe(n,Be(Ha));i|=Bt}return ee(e,i,t,n,o)});function Ga(t,e,n){e=n?s:e;var i=ee(t,z,s,s,s,s,s,e);return i.placeholder=Ga.placeholder,i}function Ka(t,e,n){e=n?s:e;var i=ee(t,Zt,s,s,s,s,s,e);return i.placeholder=Ka.placeholder,i}function ja(t,e,n){var i,o,f,c,h,v,m=0,C=!1,b=!1,x=!0;if(typeof t!="function")throw new At(E);e=Dt(e)||0,K(n)&&(C=!!n.leading,b="maxWait"in n,f=b?Q(Dt(n.maxWait)||0,e):f,x="trailing"in n?!!n.trailing:x);function S(Z){var zt=i,ae=o;return i=o=s,m=Z,c=t.apply(ae,zt),c}function L(Z){return m=Z,h=pn(T,e),C?S(Z):c}function $(Z){var zt=Z-v,ae=Z-m,dl=e-zt;return b?it(dl,f-ae):dl}function O(Z){var zt=Z-v,ae=Z-m;return v===s||zt>=e||zt<0||b&&ae>=f}function T(){var Z=ri();if(O(Z))return k(Z);h=pn(T,$(Z))}function k(Z){return h=s,x&&i?S(Z):(i=o=s,c)}function yt(){h!==s&&ia(h),m=0,i=v=o=h=s}function ut(){return h===s?c:k(ri())}function xt(){var Z=ri(),zt=O(Z);if(i=arguments,o=this,v=Z,zt){if(h===s)return L(v);if(b)return ia(h),h=pn(T,e),S(v)}return h===s&&(h=pn(T,e)),c}return xt.cancel=yt,xt.flush=ut,xt}var Gd=F(function(t,e){return ks(t,1,e)}),Kd=F(function(t,e,n){return ks(t,Dt(e)||0,n)});function jd(t){return ee(t,fi)}function si(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new At(E);var n=function(){var i=arguments,o=e?e.apply(this,i):i[0],f=n.cache;if(f.has(o))return f.get(o);var c=t.apply(this,i);return n.cache=f.set(o,c)||f,c};return n.cache=new(si.Cache||Vt),n}si.Cache=Vt;function ai(t){if(typeof t!="function")throw new At(E);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Yd(t){return qa(2,t)}var Zd=Pf(function(t,e){e=e.length==1&&I(e[0])?G(e[0],mt(A())):G(nt(e,1),mt(A()));var n=e.length;return F(function(i){for(var o=-1,f=it(i.length,n);++o<f;)i[o]=e[o].call(this,i[o]);return _t(t,this,i)})}),br=F(function(t,e){var n=fe(e,Be(br));return ee(t,Bt,s,e,n)}),Ya=F(function(t,e){var n=fe(e,Be(Ya));return ee(t,Re,s,e,n)}),Jd=ne(function(t,e){return ee(t,Ke,s,s,s,e)});function Xd(t,e){if(typeof t!="function")throw new At(E);return e=e===s?e:D(e),F(t,e)}function Qd(t,e){if(typeof t!="function")throw new At(E);return e=e==null?0:Q(D(e),0),F(function(n){var i=n[e],o=ve(n,0,e);return i&&ue(o,i),_t(t,this,o)})}function Vd(t,e,n){var i=!0,o=!0;if(typeof t!="function")throw new At(E);return K(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),ja(t,e,{leading:i,maxWait:e,trailing:o})}function th(t){return Ba(t,1)}function eh(t,e){return br(rr(e),t)}function nh(){if(!arguments.length)return[];var t=arguments[0];return I(t)?t:[t]}function ih(t){return Ot(t,st)}function rh(t,e){return e=typeof e=="function"?e:s,Ot(t,st,e)}function sh(t){return Ot(t,tt|st)}function ah(t,e){return e=typeof e=="function"?e:s,Ot(t,tt|st,e)}function lh(t,e){return e==null||Ps(t,e,V(e))}function kt(t,e){return t===e||t!==t&&e!==e}var oh=Qn(Ki),uh=Qn(function(t,e){return t>=e}),Oe=Us(function(){return arguments}())?Us:function(t){return j(t)&&M.call(t,"callee")&&!Os.call(t,"callee")},I=g.isArray,fh=os?mt(os):mf;function ht(t){return t!=null&&li(t.length)&&!re(t)}function Y(t){return j(t)&&ht(t)}function ch(t){return t===!0||t===!1||j(t)&&lt(t)==je}var ge=Su||$r,dh=us?mt(us):Cf;function hh(t){return j(t)&&t.nodeType===1&&!vn(t)}function ph(t){if(t==null)return!0;if(ht(t)&&(I(t)||typeof t=="string"||typeof t.splice=="function"||ge(t)||qe(t)||Oe(t)))return!t.length;var e=rt(t);if(e==Ft||e==Et)return!t.size;if(hn(t))return!Zi(t).length;for(var n in t)if(M.call(t,n))return!1;return!0}function vh(t,e){return fn(t,e)}function gh(t,e,n){n=typeof n=="function"?n:s;var i=n?n(t,e):s;return i===s?fn(t,e,s,n):!!i}function yr(t){if(!j(t))return!1;var e=lt(t);return e==Cn||e==zl||typeof t.message=="string"&&typeof t.name=="string"&&!vn(t)}function _h(t){return typeof t=="number"&&Is(t)}function re(t){if(!K(t))return!1;var e=lt(t);return e==bn||e==kr||e==kl||e==Wl}function Za(t){return typeof t=="number"&&t==D(t)}function li(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=le}function K(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function j(t){return t!=null&&typeof t=="object"}var Ja=fs?mt(fs):yf;function mh(t,e){return t===e||Yi(t,e,cr(e))}function Ch(t,e,n){return n=typeof n=="function"?n:s,Yi(t,e,cr(e),n)}function bh(t){return Xa(t)&&t!=+t}function yh(t){if(rc(t))throw new R(y);return Bs(t)}function xh(t){return t===null}function wh(t){return t==null}function Xa(t){return typeof t=="number"||j(t)&&lt(t)==Ze}function vn(t){if(!j(t)||lt(t)!=Xt)return!1;var e=Tn(t);if(e===null)return!0;var n=M.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Dn.call(n)==mu}var xr=cs?mt(cs):xf;function Sh(t){return Za(t)&&t>=-le&&t<=le}var Qa=ds?mt(ds):wf;function oi(t){return typeof t=="string"||!I(t)&&j(t)&&lt(t)==Xe}function bt(t){return typeof t=="symbol"||j(t)&&lt(t)==yn}var qe=hs?mt(hs):Sf;function Ah(t){return t===s}function Lh(t){return j(t)&&rt(t)==Qe}function Oh(t){return j(t)&&lt(t)==Ul}var Rh=Qn(Ji),Ih=Qn(function(t,e){return t<=e});function Va(t){if(!t)return[];if(ht(t))return oi(t)?Tt(t):dt(t);if(en&&t[en])return au(t[en]());var e=rt(t),n=e==Ft?zi:e==Et?On:He;return n(t)}function se(t){if(!t)return t===0?t:0;if(t=Dt(t),t===me||t===-me){var e=t<0?-1:1;return e*Fl}return t===t?t:0}function D(t){var e=se(t),n=e%1;return e===e?n?e-n:e:0}function tl(t){return t?we(D(t),0,qt):0}function Dt(t){if(typeof t=="number")return t;if(bt(t))return _n;if(K(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=K(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Cs(t);var n=oo.test(t);return n||fo.test(t)?qo(t.slice(2),n?2:8):lo.test(t)?_n:+t}function el(t){return Gt(t,pt(t))}function Dh(t){return t?we(D(t),-le,le):t===0?t:0}function W(t){return t==null?"":Ct(t)}var $h=Me(function(t,e){if(hn(e)||ht(e)){Gt(e,V(e),t);return}for(var n in e)M.call(e,n)&&ln(t,n,e[n])}),nl=Me(function(t,e){Gt(e,pt(e),t)}),ui=Me(function(t,e,n,i){Gt(e,pt(e),t,i)}),Fh=Me(function(t,e,n,i){Gt(e,V(e),t,i)}),Eh=ne(qi);function Th(t,e){var n=We(t);return e==null?n:Ts(n,e)}var Ph=F(function(t,e){t=U(t);var n=-1,i=e.length,o=i>2?e[2]:s;for(o&&ot(e[0],e[1],o)&&(i=1);++n<i;)for(var f=e[n],c=pt(f),h=-1,v=c.length;++h<v;){var m=c[h],C=t[m];(C===s||kt(C,ke[m])&&!M.call(t,m))&&(t[m]=f[m])}return t}),kh=F(function(t){return t.push(s,Ca),_t(il,s,t)});function zh(t,e){return vs(t,A(e,3),Ht)}function Nh(t,e){return vs(t,A(e,3),Gi)}function Wh(t,e){return t==null?t:Hi(t,A(e,3),pt)}function Mh(t,e){return t==null?t:Ws(t,A(e,3),pt)}function Uh(t,e){return t&&Ht(t,A(e,3))}function Bh(t,e){return t&&Gi(t,A(e,3))}function qh(t){return t==null?[]:Hn(t,V(t))}function Hh(t){return t==null?[]:Hn(t,pt(t))}function wr(t,e,n){var i=t==null?s:Se(t,e);return i===s?n:i}function Gh(t,e){return t!=null&&xa(t,e,pf)}function Sr(t,e){return t!=null&&xa(t,e,vf)}var Kh=pa(function(t,e,n){e!=null&&typeof e.toString!="function"&&(e=$n.call(e)),t[e]=n},Lr(vt)),jh=pa(function(t,e,n){e!=null&&typeof e.toString!="function"&&(e=$n.call(e)),M.call(t,e)?t[e].push(n):t[e]=[n]},A),Yh=F(un);function V(t){return ht(t)?Fs(t):Zi(t)}function pt(t){return ht(t)?Fs(t,!0):Af(t)}function Zh(t,e){var n={};return e=A(e,3),Ht(t,function(i,o,f){te(n,e(i,o,f),i)}),n}function Jh(t,e){var n={};return e=A(e,3),Ht(t,function(i,o,f){te(n,o,e(i,o,f))}),n}var Xh=Me(function(t,e,n){Gn(t,e,n)}),il=Me(function(t,e,n,i){Gn(t,e,n,i)}),Qh=ne(function(t,e){var n={};if(t==null)return n;var i=!1;e=G(e,function(f){return f=pe(f,t),i||(i=f.length>1),f}),Gt(t,ur(t),n),i&&(n=Ot(n,tt|$t|st,Kf));for(var o=e.length;o--;)er(n,e[o]);return n});function Vh(t,e){return rl(t,ai(A(e)))}var tp=ne(function(t,e){return t==null?{}:Of(t,e)});function rl(t,e){if(t==null)return{};var n=G(ur(t),function(i){return[i]});return e=A(e),Zs(t,n,function(i,o){return e(i,o[0])})}function ep(t,e,n){e=pe(e,t);var i=-1,o=e.length;for(o||(o=1,t=s);++i<o;){var f=t==null?s:t[Kt(e[i])];f===s&&(i=o,f=n),t=re(f)?f.call(t):f}return t}function np(t,e,n){return t==null?t:cn(t,e,n)}function ip(t,e,n,i){return i=typeof i=="function"?i:s,t==null?t:cn(t,e,n,i)}var sl=_a(V),al=_a(pt);function rp(t,e,n){var i=I(t),o=i||ge(t)||qe(t);if(e=A(e,4),n==null){var f=t&&t.constructor;o?n=i?new f:[]:K(t)?n=re(f)?We(Tn(t)):{}:n={}}return(o?St:Ht)(t,function(c,h,v){return e(n,c,h,v)}),n}function sp(t,e){return t==null?!0:er(t,e)}function ap(t,e,n){return t==null?t:ta(t,e,rr(n))}function lp(t,e,n,i){return i=typeof i=="function"?i:s,t==null?t:ta(t,e,rr(n),i)}function He(t){return t==null?[]:ki(t,V(t))}function op(t){return t==null?[]:ki(t,pt(t))}function up(t,e,n){return n===s&&(n=e,e=s),n!==s&&(n=Dt(n),n=n===n?n:0),e!==s&&(e=Dt(e),e=e===e?e:0),we(Dt(t),e,n)}function fp(t,e,n){return e=se(e),n===s?(n=e,e=0):n=se(n),t=Dt(t),gf(t,e,n)}function cp(t,e,n){if(n&&typeof n!="boolean"&&ot(t,e,n)&&(e=n=s),n===s&&(typeof e=="boolean"?(n=e,e=s):typeof t=="boolean"&&(n=t,t=s)),t===s&&e===s?(t=0,e=1):(t=se(t),e===s?(e=t,t=0):e=se(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=Ds();return it(t+o*(e-t+Bo("1e-"+((o+"").length-1))),e)}return Qi(t,e)}var dp=Ue(function(t,e,n){return e=e.toLowerCase(),t+(n?ll(e):e)});function ll(t){return Ar(W(t).toLowerCase())}function ol(t){return t=W(t),t&&t.replace(ho,eu).replace(Fo,"")}function hp(t,e,n){t=W(t),e=Ct(e);var i=t.length;n=n===s?i:we(D(n),0,i);var o=n;return n-=e.length,n>=0&&t.slice(n,o)==e}function pp(t){return t=W(t),t&&Kl.test(t)?t.replace(Wr,nu):t}function vp(t){return t=W(t),t&&Ql.test(t)?t.replace(bi,"\\$&"):t}var gp=Ue(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),_p=Ue(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),mp=ca("toLowerCase");function Cp(t,e,n){t=W(t),e=D(e);var i=e?Te(t):0;if(!e||i>=e)return t;var o=(e-i)/2;return Xn(Nn(o),n)+t+Xn(zn(o),n)}function bp(t,e,n){t=W(t),e=D(e);var i=e?Te(t):0;return e&&i<e?t+Xn(e-i,n):t}function yp(t,e,n){t=W(t),e=D(e);var i=e?Te(t):0;return e&&i<e?Xn(e-i,n)+t:t}function xp(t,e,n){return n||e==null?e=0:e&&(e=+e),Ru(W(t).replace(yi,""),e||0)}function wp(t,e,n){return(n?ot(t,e,n):e===s)?e=1:e=D(e),Vi(W(t),e)}function Sp(){var t=arguments,e=W(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var Ap=Ue(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});function Lp(t,e,n){return n&&typeof n!="number"&&ot(t,e,n)&&(e=n=s),n=n===s?qt:n>>>0,n?(t=W(t),t&&(typeof e=="string"||e!=null&&!xr(e))&&(e=Ct(e),!e&&Ee(t))?ve(Tt(t),0,n):t.split(e,n)):[]}var Op=Ue(function(t,e,n){return t+(n?" ":"")+Ar(e)});function Rp(t,e,n){return t=W(t),n=n==null?0:we(D(n),0,t.length),e=Ct(e),t.slice(n,n+e.length)==e}function Ip(t,e,n){var i=u.templateSettings;n&&ot(t,e,n)&&(e=s),t=W(t),e=ui({},e,i,ma);var o=ui({},e.imports,i.imports,ma),f=V(o),c=ki(o,f),h,v,m=0,C=e.interpolate||xn,b="__p += '",x=Ni((e.escape||xn).source+"|"+C.source+"|"+(C===Mr?ao:xn).source+"|"+(e.evaluate||xn).source+"|$","g"),S="//# sourceURL="+(M.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zo+"]")+`
`;t.replace(x,function(O,T,k,yt,ut,xt){return k||(k=yt),b+=t.slice(m,xt).replace(po,iu),T&&(h=!0,b+=`' +
__e(`+T+`) +
'`),ut&&(v=!0,b+=`';
`+ut+`;
__p += '`),k&&(b+=`' +
((__t = (`+k+`)) == null ? '' : __t) +
'`),m=xt+O.length,O}),b+=`';
`;var L=M.call(e,"variable")&&e.variable;if(!L)b=`with (obj) {
`+b+`
}
`;else if(ro.test(L))throw new R(ft);b=(v?b.replace(Bl,""):b).replace(ql,"$1").replace(Hl,"$1;"),b="function("+(L||"obj")+`) {
`+(L?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(h?", __e = _.escape":"")+(v?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+b+`return __p
}`;var $=fl(function(){return N(f,S+"return "+b).apply(s,c)});if($.source=b,yr($))throw $;return $}function Dp(t){return W(t).toLowerCase()}function $p(t){return W(t).toUpperCase()}function Fp(t,e,n){if(t=W(t),t&&(n||e===s))return Cs(t);if(!t||!(e=Ct(e)))return t;var i=Tt(t),o=Tt(e),f=bs(i,o),c=ys(i,o)+1;return ve(i,f,c).join("")}function Ep(t,e,n){if(t=W(t),t&&(n||e===s))return t.slice(0,ws(t)+1);if(!t||!(e=Ct(e)))return t;var i=Tt(t),o=ys(i,Tt(e))+1;return ve(i,0,o).join("")}function Tp(t,e,n){if(t=W(t),t&&(n||e===s))return t.replace(yi,"");if(!t||!(e=Ct(e)))return t;var i=Tt(t),o=bs(i,Tt(e));return ve(i,o).join("")}function Pp(t,e){var n=Ll,i=Ol;if(K(e)){var o="separator"in e?e.separator:o;n="length"in e?D(e.length):n,i="omission"in e?Ct(e.omission):i}t=W(t);var f=t.length;if(Ee(t)){var c=Tt(t);f=c.length}if(n>=f)return t;var h=n-Te(i);if(h<1)return i;var v=c?ve(c,0,h).join(""):t.slice(0,h);if(o===s)return v+i;if(c&&(h+=v.length-h),xr(o)){if(t.slice(h).search(o)){var m,C=v;for(o.global||(o=Ni(o.source,W(Ur.exec(o))+"g")),o.lastIndex=0;m=o.exec(C);)var b=m.index;v=v.slice(0,b===s?h:b)}}else if(t.indexOf(Ct(o),h)!=h){var x=v.lastIndexOf(o);x>-1&&(v=v.slice(0,x))}return v+i}function kp(t){return t=W(t),t&&Gl.test(t)?t.replace(Nr,fu):t}var zp=Ue(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Ar=ca("toUpperCase");function ul(t,e,n){return t=W(t),e=n?s:e,e===s?su(t)?hu(t):Jo(t):t.match(e)||[]}var fl=F(function(t,e){try{return _t(t,s,e)}catch(n){return yr(n)?n:new R(n)}}),Np=ne(function(t,e){return St(e,function(n){n=Kt(n),te(t,n,Cr(t[n],t))}),t});function Wp(t){var e=t==null?0:t.length,n=A();return t=e?G(t,function(i){if(typeof i[1]!="function")throw new At(E);return[n(i[0]),i[1]]}):[],F(function(i){for(var o=-1;++o<e;){var f=t[o];if(_t(f[0],this,i))return _t(f[1],this,i)}})}function Mp(t){return cf(Ot(t,tt))}function Lr(t){return function(){return t}}function Up(t,e){return t==null||t!==t?e:t}var Bp=ha(),qp=ha(!0);function vt(t){return t}function Or(t){return qs(typeof t=="function"?t:Ot(t,tt))}function Hp(t){return Gs(Ot(t,tt))}function Gp(t,e){return Ks(t,Ot(e,tt))}var Kp=F(function(t,e){return function(n){return un(n,t,e)}}),jp=F(function(t,e){return function(n){return un(t,n,e)}});function Rr(t,e,n){var i=V(e),o=Hn(e,i);n==null&&!(K(e)&&(o.length||!i.length))&&(n=e,e=t,t=this,o=Hn(e,V(e)));var f=!(K(n)&&"chain"in n)||!!n.chain,c=re(t);return St(o,function(h){var v=e[h];t[h]=v,c&&(t.prototype[h]=function(){var m=this.__chain__;if(f||m){var C=t(this.__wrapped__),b=C.__actions__=dt(this.__actions__);return b.push({func:v,args:arguments,thisArg:t}),C.__chain__=m,C}return v.apply(t,ue([this.value()],arguments))})}),t}function Yp(){return et._===this&&(et._=Cu),this}function Ir(){}function Zp(t){return t=D(t),F(function(e){return js(e,t)})}var Jp=ar(G),Xp=ar(ps),Qp=ar($i);function cl(t){return hr(t)?Fi(Kt(t)):Rf(t)}function Vp(t){return function(e){return t==null?s:Se(t,e)}}var tv=va(),ev=va(!0);function Dr(){return[]}function $r(){return!1}function nv(){return{}}function iv(){return""}function rv(){return!0}function sv(t,e){if(t=D(t),t<1||t>le)return[];var n=qt,i=it(t,qt);e=A(e),t-=qt;for(var o=Pi(i,e);++n<t;)e(n);return o}function av(t){return I(t)?G(t,Kt):bt(t)?[t]:dt($a(W(t)))}function lv(t){var e=++_u;return W(t)+e}var ov=Jn(function(t,e){return t+e},0),uv=lr("ceil"),fv=Jn(function(t,e){return t/e},1),cv=lr("floor");function dv(t){return t&&t.length?qn(t,vt,Ki):s}function hv(t,e){return t&&t.length?qn(t,A(e,2),Ki):s}function pv(t){return _s(t,vt)}function vv(t,e){return _s(t,A(e,2))}function gv(t){return t&&t.length?qn(t,vt,Ji):s}function _v(t,e){return t&&t.length?qn(t,A(e,2),Ji):s}var mv=Jn(function(t,e){return t*e},1),Cv=lr("round"),bv=Jn(function(t,e){return t-e},0);function yv(t){return t&&t.length?Ti(t,vt):0}function xv(t,e){return t&&t.length?Ti(t,A(e,2)):0}return u.after=Hd,u.ary=Ba,u.assign=$h,u.assignIn=nl,u.assignInWith=ui,u.assignWith=Fh,u.at=Eh,u.before=qa,u.bind=Cr,u.bindAll=Np,u.bindKey=Ha,u.castArray=nh,u.chain=Wa,u.chunk=cc,u.compact=dc,u.concat=hc,u.cond=Wp,u.conforms=Mp,u.constant=Lr,u.countBy=yd,u.create=Th,u.curry=Ga,u.curryRight=Ka,u.debounce=ja,u.defaults=Ph,u.defaultsDeep=kh,u.defer=Gd,u.delay=Kd,u.difference=pc,u.differenceBy=vc,u.differenceWith=gc,u.drop=_c,u.dropRight=mc,u.dropRightWhile=Cc,u.dropWhile=bc,u.fill=yc,u.filter=wd,u.flatMap=Ld,u.flatMapDeep=Od,u.flatMapDepth=Rd,u.flatten=Pa,u.flattenDeep=xc,u.flattenDepth=wc,u.flip=jd,u.flow=Bp,u.flowRight=qp,u.fromPairs=Sc,u.functions=qh,u.functionsIn=Hh,u.groupBy=Id,u.initial=Lc,u.intersection=Oc,u.intersectionBy=Rc,u.intersectionWith=Ic,u.invert=Kh,u.invertBy=jh,u.invokeMap=$d,u.iteratee=Or,u.keyBy=Fd,u.keys=V,u.keysIn=pt,u.map=ii,u.mapKeys=Zh,u.mapValues=Jh,u.matches=Hp,u.matchesProperty=Gp,u.memoize=si,u.merge=Xh,u.mergeWith=il,u.method=Kp,u.methodOf=jp,u.mixin=Rr,u.negate=ai,u.nthArg=Zp,u.omit=Qh,u.omitBy=Vh,u.once=Yd,u.orderBy=Ed,u.over=Jp,u.overArgs=Zd,u.overEvery=Xp,u.overSome=Qp,u.partial=br,u.partialRight=Ya,u.partition=Td,u.pick=tp,u.pickBy=rl,u.property=cl,u.propertyOf=Vp,u.pull=Ec,u.pullAll=za,u.pullAllBy=Tc,u.pullAllWith=Pc,u.pullAt=kc,u.range=tv,u.rangeRight=ev,u.rearg=Jd,u.reject=zd,u.remove=zc,u.rest=Xd,u.reverse=_r,u.sampleSize=Wd,u.set=np,u.setWith=ip,u.shuffle=Md,u.slice=Nc,u.sortBy=qd,u.sortedUniq=Gc,u.sortedUniqBy=Kc,u.split=Lp,u.spread=Qd,u.tail=jc,u.take=Yc,u.takeRight=Zc,u.takeRightWhile=Jc,u.takeWhile=Xc,u.tap=dd,u.throttle=Vd,u.thru=ni,u.toArray=Va,u.toPairs=sl,u.toPairsIn=al,u.toPath=av,u.toPlainObject=el,u.transform=rp,u.unary=th,u.union=Qc,u.unionBy=Vc,u.unionWith=td,u.uniq=ed,u.uniqBy=nd,u.uniqWith=id,u.unset=sp,u.unzip=mr,u.unzipWith=Na,u.update=ap,u.updateWith=lp,u.values=He,u.valuesIn=op,u.without=rd,u.words=ul,u.wrap=eh,u.xor=sd,u.xorBy=ad,u.xorWith=ld,u.zip=od,u.zipObject=ud,u.zipObjectDeep=fd,u.zipWith=cd,u.entries=sl,u.entriesIn=al,u.extend=nl,u.extendWith=ui,Rr(u,u),u.add=ov,u.attempt=fl,u.camelCase=dp,u.capitalize=ll,u.ceil=uv,u.clamp=up,u.clone=ih,u.cloneDeep=sh,u.cloneDeepWith=ah,u.cloneWith=rh,u.conformsTo=lh,u.deburr=ol,u.defaultTo=Up,u.divide=fv,u.endsWith=hp,u.eq=kt,u.escape=pp,u.escapeRegExp=vp,u.every=xd,u.find=Sd,u.findIndex=Ea,u.findKey=zh,u.findLast=Ad,u.findLastIndex=Ta,u.findLastKey=Nh,u.floor=cv,u.forEach=Ma,u.forEachRight=Ua,u.forIn=Wh,u.forInRight=Mh,u.forOwn=Uh,u.forOwnRight=Bh,u.get=wr,u.gt=oh,u.gte=uh,u.has=Gh,u.hasIn=Sr,u.head=ka,u.identity=vt,u.includes=Dd,u.indexOf=Ac,u.inRange=fp,u.invoke=Yh,u.isArguments=Oe,u.isArray=I,u.isArrayBuffer=fh,u.isArrayLike=ht,u.isArrayLikeObject=Y,u.isBoolean=ch,u.isBuffer=ge,u.isDate=dh,u.isElement=hh,u.isEmpty=ph,u.isEqual=vh,u.isEqualWith=gh,u.isError=yr,u.isFinite=_h,u.isFunction=re,u.isInteger=Za,u.isLength=li,u.isMap=Ja,u.isMatch=mh,u.isMatchWith=Ch,u.isNaN=bh,u.isNative=yh,u.isNil=wh,u.isNull=xh,u.isNumber=Xa,u.isObject=K,u.isObjectLike=j,u.isPlainObject=vn,u.isRegExp=xr,u.isSafeInteger=Sh,u.isSet=Qa,u.isString=oi,u.isSymbol=bt,u.isTypedArray=qe,u.isUndefined=Ah,u.isWeakMap=Lh,u.isWeakSet=Oh,u.join=Dc,u.kebabCase=gp,u.last=It,u.lastIndexOf=$c,u.lowerCase=_p,u.lowerFirst=mp,u.lt=Rh,u.lte=Ih,u.max=dv,u.maxBy=hv,u.mean=pv,u.meanBy=vv,u.min=gv,u.minBy=_v,u.stubArray=Dr,u.stubFalse=$r,u.stubObject=nv,u.stubString=iv,u.stubTrue=rv,u.multiply=mv,u.nth=Fc,u.noConflict=Yp,u.noop=Ir,u.now=ri,u.pad=Cp,u.padEnd=bp,u.padStart=yp,u.parseInt=xp,u.random=cp,u.reduce=Pd,u.reduceRight=kd,u.repeat=wp,u.replace=Sp,u.result=ep,u.round=Cv,u.runInContext=p,u.sample=Nd,u.size=Ud,u.snakeCase=Ap,u.some=Bd,u.sortedIndex=Wc,u.sortedIndexBy=Mc,u.sortedIndexOf=Uc,u.sortedLastIndex=Bc,u.sortedLastIndexBy=qc,u.sortedLastIndexOf=Hc,u.startCase=Op,u.startsWith=Rp,u.subtract=bv,u.sum=yv,u.sumBy=xv,u.template=Ip,u.times=sv,u.toFinite=se,u.toInteger=D,u.toLength=tl,u.toLower=Dp,u.toNumber=Dt,u.toSafeInteger=Dh,u.toString=W,u.toUpper=$p,u.trim=Fp,u.trimEnd=Ep,u.trimStart=Tp,u.truncate=Pp,u.unescape=kp,u.uniqueId=lv,u.upperCase=zp,u.upperFirst=Ar,u.each=Ma,u.eachRight=Ua,u.first=ka,Rr(u,function(){var t={};return Ht(u,function(e,n){M.call(u.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),u.VERSION=l,St(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){u[t].placeholder=u}),St(["drop","take"],function(t,e){P.prototype[t]=function(n){n=n===s?1:Q(D(n),0);var i=this.__filtered__&&!e?new P(this):this.clone();return i.__filtered__?i.__takeCount__=it(n,i.__takeCount__):i.__views__.push({size:it(n,qt),type:t+(i.__dir__<0?"Right":"")}),i},P.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),St(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==Pr||n==$l;P.prototype[t]=function(o){var f=this.clone();return f.__iteratees__.push({iteratee:A(o,3),type:n}),f.__filtered__=f.__filtered__||i,f}}),St(["head","last"],function(t,e){var n="take"+(e?"Right":"");P.prototype[t]=function(){return this[n](1).value()[0]}}),St(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");P.prototype[t]=function(){return this.__filtered__?new P(this):this[n](1)}}),P.prototype.compact=function(){return this.filter(vt)},P.prototype.find=function(t){return this.filter(t).head()},P.prototype.findLast=function(t){return this.reverse().find(t)},P.prototype.invokeMap=F(function(t,e){return typeof t=="function"?new P(this):this.map(function(n){return un(n,t,e)})}),P.prototype.reject=function(t){return this.filter(ai(A(t)))},P.prototype.slice=function(t,e){t=D(t);var n=this;return n.__filtered__&&(t>0||e<0)?new P(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==s&&(e=D(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},P.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},P.prototype.toArray=function(){return this.take(qt)},Ht(P.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=u[i?"take"+(e=="last"?"Right":""):e],f=i||/^find/.test(e);!o||(u.prototype[e]=function(){var c=this.__wrapped__,h=i?[1]:arguments,v=c instanceof P,m=h[0],C=v||I(c),b=function(T){var k=o.apply(u,ue([T],h));return i&&x?k[0]:k};C&&n&&typeof m=="function"&&m.length!=1&&(v=C=!1);var x=this.__chain__,S=!!this.__actions__.length,L=f&&!x,$=v&&!S;if(!f&&C){c=$?c:new P(this);var O=t.apply(c,h);return O.__actions__.push({func:ni,args:[b],thisArg:s}),new Lt(O,x)}return L&&$?t.apply(this,h):(O=this.thru(b),L?i?O.value()[0]:O.value():O)})}),St(["pop","push","shift","sort","splice","unshift"],function(t){var e=Rn[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);u.prototype[t]=function(){var o=arguments;if(i&&!this.__chain__){var f=this.value();return e.apply(I(f)?f:[],o)}return this[n](function(c){return e.apply(I(c)?c:[],o)})}}),Ht(P.prototype,function(t,e){var n=u[e];if(n){var i=n.name+"";M.call(Ne,i)||(Ne[i]=[]),Ne[i].push({name:e,func:n})}}),Ne[Zn(s,Ut).name]=[{name:"wrapper",func:s}],P.prototype.clone=Pu,P.prototype.reverse=ku,P.prototype.value=zu,u.prototype.at=hd,u.prototype.chain=pd,u.prototype.commit=vd,u.prototype.next=gd,u.prototype.plant=md,u.prototype.reverse=Cd,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=bd,u.prototype.first=u.prototype.head,en&&(u.prototype[en]=_d),u},Pe=pu();Ce?((Ce.exports=Pe)._=Pe,Oi._=Pe):et._=Pe}).call(gn)})(Fr,Fr.exports);var Iv=function(){var r=this,a=r.$createElement,s=r._self._c||a;return s("div",{staticClass:"fs-file-selector",class:{"fs-drag-enter":r.isDragEnter}},[s("div",{directives:[{name:"show",rawName:"v-show",value:r.isLoading,expression:"isLoading"}],staticClass:"fs-loader"},[r._t("loader",function(){return[r._v(" Loading... ")]})],2),s("div",{ref:"fsDroppable",staticClass:"fs-droppable",style:{height:r.height+"px"},on:{dragenter:function(l){l.stopPropagation(),l.preventDefault(),r.isDragEnter=!0},dragover:function(l){return l.stopPropagation(),l.preventDefault(),function(){}.apply(null,arguments)},dragleave:function(l){l.stopPropagation(),l.preventDefault(),r.isDragEnter=!1},drop:function(l){return l.stopPropagation(),l.preventDefault(),r.handleDrop.apply(null,arguments)}}},[s("input",{ref:"fsFileInput",attrs:{type:"file",tabindex:"-1",multiple:r.multiple,accept:r.acceptExtensions},on:{change:r.handleFilesChange}}),r._t("top"),s("div",{staticClass:"fs-btn-select",attrs:{href:"#"},on:{click:function(l){return r.$refs.fsFileInput.click()}}},[r._t("default",function(){return[r._v("Select")]})],2),r._t("bottom")],2)])},Dv=[];const $v={name:"FileSelector",props:{multiple:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},acceptExtensions:{type:String,default:""},maxFileSize:{type:Number,default:NaN},height:{type:Number,default:NaN},validateFn:{type:Function,default:()=>!0}},data(){return{isDragEnter:!1}},methods:{handleFilesChange(r){this.preprocessFiles(r.target.files)},handleDrop(r){this.isDragEnter=!1,this.preprocessFiles(r.dataTransfer.files)},checkFileExtensions(r){const a=[...new Set(this.acceptExtensions.toLowerCase().split(",").filter(Boolean))];return Array.from(r).findIndex(d=>{const y=`.${d.name.toLowerCase().split(".").pop()}`;return!a.includes(y)})===-1},checkFileSize(r){return Number.isNaN(this.maxFileSize)?!0:Array.from(r).findIndex(l=>l.size>this.maxFileSize)===-1},validate(r){return!this.multiple&&r.length>1?"MULTIFILES_ERROR":this.checkFileExtensions(r)?this.checkFileSize(r)?this.validateFn(r):"FILE_SIZE_ERROR":"EXTENSION_ERROR"},preprocessFiles(r){const a=this.validate(r);this.$emit("validated",a,r),a===!0&&this.$emit("changed",r),this.$refs.fsFileInput.value=""}}},pl={};var Fv=Wt($v,Iv,Dv,!1,Ev,"28a6f273",null,null);function Ev(r){for(let a in pl)this[a]=pl[a]}var Tv=function(){return Fv.exports}(),Pv=jt({name:"AddDatasetsPanel",components:{FileSelector:Tv},props:{fileSystem:{type:Object,required:!0},subfolder:{type:String,required:!0},vizConfiguration:{type:Object}},data:()=>({validDataTypes:["CSV","TSV","TAB","TXT","DBF","GZ","DAT"],validRegex:/\.(CSV|TSV|TAB|TXT|DBF|DAT)(\.GZ)?$/,fileChoice:"",filesInFolder:[],isLoading:!1}),computed:{fileApi(){return new Av(this.fileSystem)}},async mounted(){const{files:r}=await this.fileApi.getDirectory(this.subfolder);this.filesInFolder=r.filter(a=>this.validRegex.test(a.toLocaleUpperCase())).sort()},watch:{fileChoice(){console.warn("*** File Chosen!"),this.fileChoiceChanged(this.fileChoice)}},methods:{clickedClose(){this.$emit("update",{})},async fileChoiceChanged(r){if(!r)return;this.isLoading=!0;const a=await this.fetchDataset(r);let s=r;const l=this.validRegex.exec(r.toLocaleUpperCase());l&&l[0]&&(s=r.substring(0,r.length-l[0].length));const d={key:s,dataTable:a,filename:r};this.$emit("update",{dataset:d}),this.isLoading=!1},handleFilesValidated(r,a){console.log("Validated result",r)},async handleFilesChanged(r){this.isLoading=!0;const a=Array.from(r);for(const s of a){let l=await this.loadDataUrl(s);const d=l.buffer||l,y=await this.processBuffer(s.name,d);let E=s.name;const ft=this.validRegex.exec(E.toLocaleUpperCase());ft&&ft[0]&&(E=E.substring(0,E.length-ft[0].length));const ct={key:E,dataTable:y,filename:s};this.$emit("update",{dataset:ct})}this.isLoading=!1},async processBuffer(r,a){return new Promise((s,l)=>{const d=new hl;try{d.postMessage({config:{dataset:r},buffer:a},[a]),d.onmessage=y=>{d.terminate(),s(y.data)}}catch(y){d.terminate(),l(y)}})},async loadDataUrl(r){return await new Promise(s=>{const l=new FileReader;l.readAsArrayBuffer(r),l.onload=d=>{const y=d.target.result,E=Sv(y);s(E)}})},async fetchDataset(r){return new Promise((a,s)=>{const l=new hl;try{l.postMessage({fileSystemConfig:this.fileSystem,subfolder:this.subfolder,files:this.filesInFolder,config:{dataset:r}}),l.onmessage=d=>{l.terminate(),a(d.data)}}catch(d){l.terminate(),s(d)}})}}}),kv=function(){var r=this,a=r.$createElement,s=r._self._c||a;return s("div",{staticClass:"datasets-panel"},[r.isLoading?s("div",{staticClass:"loading-panel"},[r._m(0)]):r._e(),s("h3",{staticClass:"button-close",on:{click:r.clickedClose}},[s("i",{staticClass:"fa fa-sm fa-times"})]),s("h3",{staticClass:"header-line"},[r._v("Add Data")]),s("div",{staticClass:"widgets"},[s("div",{staticClass:"widget"},[s("b",[r._v("Choose a dataset from files in this folder:")]),s("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.fileChoice,callback:function(l){r.fileChoice=l},expression:"fileChoice"}},[s("option",{attrs:{value:"",label:"Select file..."}}),r._l(r.filesInFolder,function(l){return s("option",{attrs:{label:l},domProps:{value:l}})})],2)],1)]),s("br"),s("div",{staticClass:"drop-zone"},[s("b",[r._v("Or Drag and Drop any dataset file:")]),s("file-selector",{attrs:{"accept-extensions":r.validDataTypes.map(function(l){return`.${l}`}).join(","),multiple:!0,"is-loading":r.isLoading},on:{validated:r.handleFilesValidated,changed:r.handleFilesChanged}},[r._v("or\xA0"),s("b",[s("a",[r._v("browse your files")])]),s("div",{staticClass:"section-top",attrs:{slot:"top"},slot:"top"},[s("br"),s("p",[r._v("Drop files into this area.")]),s("p",[r._v("No size limit, but large datasets could crash your browser :-)")]),s("br"),s("p",[r._v("Supported file types:\xA0"),s("b",[r._v(r._s(r.validDataTypes.join(", ")))])])]),s("div",{staticClass:"section-bottom",attrs:{slot:"loader"},slot:"loader"},[s("p",[r._v("Processing files"),s("br")]),s("p",[r._v("please wait...")])])]),s("br"),r._m(1)],1)])},zv=[function(){var r=this,a=r.$createElement,s=r._self._c||a;return s("div",{staticClass:"thing"},[s("div",{staticClass:"spinner-box"},[s("p",[r._v("\xA0")])]),s("h3",[r._v("LOADING...")])])},function(){var r=this,a=r.$createElement,s=r._self._c||a;return s("p",{staticClass:"center"},[s("input",{staticStyle:{display:"none"},attrs:{name:"dataBrowser",id:"dataBrowser",type:"file"}})])}];const vl={};var Nv=Wt(Pv,kv,zv,!1,Wv,"65ccef0a",null,null);function Wv(r){for(let a in vl)this[a]=vl[a]}var Mv=function(){return Nv.exports}();const Ge=Object.assign({},Lv,Ov);var Uv=jt({name:"ColorsConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>{const r=[{ramp:"Viridis",style:2,reverse:!0},{ramp:"Plasma",style:2,reverse:!0},{ramp:"Blues",style:2},{ramp:"Purples",style:2},{ramp:"Oranges",style:2},{ramp:"PRGn",style:1,reverse:!0},{ramp:"RdBu",style:1,reverse:!0},{ramp:"Tableau10",style:0},{ramp:"Paired",style:0}];return{colorChoices:r,globalState:Er.state,steps:"9",flip:!1,dataColumn:"",selectedColor:r[0],selectedSingleColor:"",datasetLabels:[],isFirstDataset:!0}},computed:{simpleColors(){return this.buildColors({ramp:"Tableau10",style:0},10)}},mounted(){this.selectedSingleColor=this.simpleColors[0],this.datasetLabels=Object.keys(this.vizConfiguration.datasets),this.datasetsAreLoaded()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},flip(){this.emitColorSpecification()},steps(){this.emitColorSpecification()},dataColumn(){this.emitColorSpecification()},"global.isDarkMode"(){this.emitColorSpecification()}},methods:{vizConfigChanged(){var a;const r=(a=this.vizConfiguration.display)==null?void 0:a.color;if(r!=null&&r.columnName){const s=`${r.dataset}/${r.columnName}`;this.dataColumn=s,this.datasetLabels=[...this.datasetLabels]}},datasetsAreLoaded(){const r=Object.keys(this.datasets);if(this.datasetLabels=r,!this.isFirstDataset)return;r.length&&(this.isFirstDataset=!1);const{dataset:a,columnName:s,colorRamp:l}=this.vizConfiguration.display.color;if(a&&s)this.dataColumn=`${a}/${s}`,l&&(this.selectedColor=this.colorChoices.find(d=>d.ramp.toLowerCase()===l.ramp.toLowerCase())||this.colorChoices[0],this.flip=!!l.reverse,l.steps&&(this.steps=""+l.steps));else if(r.length){const d=Object.keys(this.datasets[r[0]])[1];console.log(d),d&&(this.dataColumn=`${r[0]}/${d}`)}},emitColorSpecification(){if(!this.dataColumn)return;const r=this.dataColumn.indexOf("/");if(r===-1){this.clickedSingleColor(this.selectedSingleColor);return}const a=this.dataColumn.substring(0,r),s=this.dataColumn.substring(r+1),l=this.buildColors(this.selectedColor,parseInt(this.steps)),d=parseInt(this.steps),y={dataset:a,columnName:s,fixedColors:l,colorRamp:{ramp:this.selectedColor.ramp,style:this.selectedColor.style,reverse:this.flip,steps:d}};setTimeout(()=>this.$emit("update",{color:y}),50)},clickedSingleColor(r){this.selectedSingleColor=r;const a={fixedColors:[this.selectedSingleColor],dataset:"",columnName:""};setTimeout(()=>this.$emit("update",{color:a}),50)},datasetChoices(){return this.datasetLabels.filter(r=>r!=="csvBase")},columnsInDataset(r){const a=this.datasets[r];return a?Object.keys(a).filter(l=>a[l].type!==Nt.LOOKUP):[]},pickColor(r){this.selectedColor=r,this.emitColorSpecification()},buildColors(r,a){let s=[...this.ramp(r,a||parseInt(this.steps))],l=!!r.reverse;return this.flip&&(l=!l),l&&(s=s.reverse()),r.style===2&&this.globalState.isDarkMode&&(s=s.reverse()),s},ramp(r,a){let s;if(r.style===0)return Ge[`scheme${r.ramp}`].slice(0,a);if(Ge[`scheme${r.ramp}`]&&Ge[`scheme${r.ramp}`][a])s=Ge[`scheme${r.ramp}`][a];else try{const l=Ge[`interpolate${r.ramp}`];s=[];for(let d=0;d<a;++d)s.push(Ge.rgb(l(d/(a-1))).hex())}catch{return this.ramp(r,a-1)}return s}}}),Bv=function(){var r=this,a=r.$createElement,s=r._self._c||a;return s("div",{staticClass:"color-ramp-picker"},[s("div",{staticClass:"widgets"},[s("div",{staticClass:"widget"},[s("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.dataColumn,callback:function(l){r.dataColumn=l},expression:"dataColumn"}},[s("option",{attrs:{label:"Single color",value:""}}),r._l(r.datasetChoices(),function(l){return s("optgroup",{key:l,attrs:{label:l}},r._l(r.columnsInDataset(l),function(d){return s("option",{attrs:{label:d},domProps:{value:`${l}/${d}`}})}),0)})],2)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:!r.dataColumn,expression:"!dataColumn"}],staticClass:"colorbar single"},r._l(r.simpleColors,function(l){return s("div",{key:l,staticClass:"single-color",class:{active:r.selectedSingleColor==l},style:{backgroundColor:`${l}`},on:{click:function(d){return r.clickedSingleColor(l)}}})}),0),s("div",{directives:[{name:"show",rawName:"v-show",value:r.dataColumn,expression:"dataColumn"}],staticClass:"more"},[s("div",{staticClass:"widgets"},[s("div",{staticClass:"widget"},[s("p",[r._v("Steps")]),s("b-input",{attrs:{placeholder:"Number",type:"number",min:"2",max:"15"},model:{value:r.steps,callback:function(l){r.steps=l},expression:"steps"}})],1),s("div",{staticClass:"widget"},[s("p",[r._v("Reverse")]),s("b-checkbox",{staticClass:"hello",model:{value:r.flip,callback:function(l){r.flip=l},expression:"flip"}})],1)]),r._l(r.colorChoices,function(l){return s("div",{key:l.ramp,staticClass:"color-ramp",class:{active:l===r.selectedColor},on:{click:function(d){return r.pickColor(l)}}},[s("div",{staticClass:"colorbar"},r._l(r.buildColors(l),function(d,y){return s("div",{key:y,staticClass:"swatch",style:{backgroundColor:`${d}`}},[s("p",[r._v("\xA0")])])}),0)])})],2)])},qv=[];const gl={};var Hv=Wt(Uv,Bv,qv,!1,Gv,"44a26884",null,null);function Gv(r){for(let a in gl)this[a]=gl[a]}var Kv=function(){return Hv.exports}(),jv=jt({name:"WidthConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:r=>({dataColumn:"",xscaleFactor:"100",selectedTransform:["none","sqrt","pow5"][0],datasetLabels:[],debounceHandleWidthChanged:Tr(r.emitWidthSpecification,500)}),mounted(){this.datasetsAreLoaded()},computed:{datasetChoices(){return this.datasetLabels.filter(r=>r!=="csvBase")}},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},xscaleFactor(){this.debounceHandleWidthChanged()},dataColumn(){this.emitWidthSpecification()}},methods:{vizConfigChanged(){var a;const r=(a=this.vizConfiguration.display)==null?void 0:a.width;if(r!=null&&r.columnName){const s=`${r.dataset}/${r.columnName}`;this.dataColumn=s,this.datasetLabels=[...this.datasetLabels]}},datasetsAreLoaded(){const r=Object.keys(this.datasets),{dataset:a,columnName:s,scaleFactor:l}=this.vizConfiguration.display.width;if(a&&s)this.dataColumn=`${a}/${s}`,l&&(this.xscaleFactor=""+l);else if(r.length){const d=Object.keys(this.datasets[r[0]])[1];d&&(this.dataColumn=`${r[0]}/${d}`)}this.datasetLabels=r},emitWidthSpecification(){const r=this.dataColumn.indexOf("/");if(r===-1){this.clickedSingle();return}const a=this.dataColumn.substring(0,r),s=this.dataColumn.substring(r+1),l={dataset:a,columnName:s,scaleFactor:parseFloat(this.xscaleFactor)};setTimeout(()=>this.$emit("update",{width:l}),50)},clickedSingle(){const r={dataset:"",columnName:"",scaleFactor:parseFloat(this.xscaleFactor)};setTimeout(()=>this.$emit("update",{width:r}),50)},numericColumnsInDataset(r){const a=this.datasets[r];return a?Object.keys(a).filter(l=>a[l].type!==Nt.LOOKUP):[]}}}),Yv=function(){var r=this,a=r.$createElement,s=r._self._c||a;return s("div",{staticClass:"width-panel"},[s("div",{staticClass:"widgets"},[s("div",{staticClass:"widget"},[s("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.dataColumn,callback:function(l){r.dataColumn=l},expression:"dataColumn"}},[s("option",{attrs:{label:"None",value:""}}),r._l(r.datasetChoices,function(l){return s("optgroup",{key:l,attrs:{label:l}},r._l(r.numericColumnsInDataset(l),function(d){return s("option",{attrs:{label:d},domProps:{value:`${l}/${d}`}})}),0)})],2)],1)]),s("div",{staticClass:"widgets"},[s("div",{staticClass:"widget"},[s("p",[r._v("Scaling")]),s("b-field",[s("b-input",{attrs:{disabled:!r.dataColumn,placeholder:"1.0"},model:{value:r.xscaleFactor,callback:function(l){r.xscaleFactor=l},expression:"xscaleFactor"}})],1)],1)])])},Zv=[];const _l={};var Jv=Wt(jv,Yv,Zv,!1,Xv,"30894cab",null,null);function Xv(r){for(let a in _l)this[a]=_l[a]}var Qv=function(){return Jv.exports}();const Vv=[{ramp:"Viridis",style:H.sequential,reverse:!0},{ramp:"Plasma",style:H.sequential,reverse:!0},{ramp:"Blues",style:H.sequential},{ramp:"Greens",style:H.sequential},{ramp:"Purples",style:H.sequential},{ramp:"Oranges",style:H.sequential},{ramp:"RdBu",style:H.diverging,reverse:!0},{ramp:"RdYlBu",style:H.sequential},{ramp:"PRGn",style:H.diverging,reverse:!0},{ramp:"Tableau10",style:H.categorical},{ramp:"Paired",style:H.categorical}];var tg=jt({name:"LineColorsConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},computed:{simpleColors(){return this.buildColors({ramp:"Tableau10",style:H.categorical},10)},colorChoices(){return Vv},datasetChoices(){return this.datasetLabels.filter(r=>r!=="csvBase").reverse()}},data:()=>({globalState:Er.state,dataColumn:"",datasetLabels:[],diffDatasets:[],diffRelative:!1,diffUISelection:"",diffChoices:[],flip:!1,isCurrentlyDiffMode:!1,join:"",normalSelection:"",selectedColor:{},selectedSingleColor:"",steps:"9",useHardCodedColors:!1}),mounted(){var r,a;this.selectedSingleColor=this.simpleColors[0],this.selectedColor=this.colorChoices[0],this.datasetLabels=Object.keys(this.vizConfiguration.datasets),this.datasetsAreLoaded(),(a=(r=this.vizConfiguration.display)==null?void 0:r.lineColor)!=null&&a.fixedColors&&(this.useHardCodedColors=!0),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},diffUISelection(){this.diffSelectionChanged()},dataColumn(){this.emitColorSpecification()},join(){this.emitColorSpecification()},diffDatasets(){this.emitColorSpecification()},flip(){this.emitColorSpecification()},"globalState.isDarkMode"(){this.emitColorSpecification()},normalSelection(){this.emitColorSpecification()},selectedColor(){this.emitColorSpecification()},steps(){this.emitColorSpecification()},diffRelative(){this.emitColorSpecification()}},methods:{vizConfigChanged(){var a;const r=(a=this.vizConfiguration.display)==null?void 0:a.lineColor;if(this.setupDiffMode(r),r!=null&&r.columnName){const s=this.diffDatasets.length?`${this.diffDatasets[0]}/${r.columnName}`:`${r.dataset}/${r.columnName}`;if(this.dataColumn=s,this.datasetLabels=[...this.datasetLabels],r!=null&&r.normalize&&(this.normalSelection=r.normalize),r!=null&&r.join&&(this.join=r.join),r.colorRamp){let l=this.colorChoices.find(d=>d.ramp==r.colorRamp.ramp)||this.colorChoices[0];this.selectedColor=l,this.steps=r.colorRamp.steps,this.flip=!!r.colorRamp.reverse}}else r!=null&&r.fixedColors&&this.clickedSingleColor(r.fixedColors[0])},setupDiffMode(r){if(!(r!=null&&r.diff))return;let a=[];if(r.diff.indexOf(" - ")>-1)a=r.diff.split(" - ").map(s=>s.trim());else if(a=r.diff.split("-").map(s=>s.trim()),a.length>2)throw Error('Ambiguous diff, use " - " to separate terms');this.diffDatasets=a,this.diffRelative=!!r.relative,this.diffUISelection=`${a[0]} - ${a[1]}`},datasetsAreLoaded(){const r=Object.keys(this.datasets);this.datasetLabels=r,this.updateDiffLabels()},updateDiffLabels(){const r=[];if(r.push(["No",""]),this.datasetLabels.length<=1)return;const a=this.datasetLabels.slice(1);let s=a.flatMap((l,d)=>a.slice(d+1).map(y=>l+" - "+y));s.forEach(l=>r.push([l,l])),a.reverse(),s=a.flatMap((l,d)=>a.slice(d+1).map(y=>l+" - "+y)),s.forEach(l=>r.push([l,l])),this.diffChoices=r},diffSelectionChanged(){if(this.diffUISelection){const r=this.diffUISelection.split(" - ");this.diffDatasets=r}else this.diffDatasets=[],this.diffRelative=!1;this.isCurrentlyDiffMode=!!this.diffUISelection},emitColorSpecification(){var E,ft,ct,Mt,gt,tt,$t,st;if(!this.dataColumn)return;if(this.dataColumn==="@"){this.normalSelection="",this.selectedSingleColor||(this.selectedSingleColor=this.simpleColors[0]),this.clickedSingleColor(this.selectedSingleColor);return}const r=this.dataColumn.indexOf("/"),a=this.dataColumn.substring(0,r),s=this.dataColumn.substring(r+1),l=parseInt(this.steps),d=this.useHardCodedColors?(ft=(E=this.vizConfiguration.display)==null?void 0:E.lineColor)==null?void 0:ft.fixedColors.slice():this.buildColors(this.selectedColor,l);this.useHardCodedColors=!1;const y={dataset:a,columnName:s,join:this.join,fixedColors:d,normalize:this.normalSelection,colorRamp:{ramp:this.selectedColor.ramp,style:this.selectedColor.style,reverse:this.flip,steps:l}};this.diffDatasets.length&&(y.diffDatasets=this.diffDatasets),this.diffRelative&&(y.relative=!0),(gt=(Mt=(ct=this.vizConfiguration.display)==null?void 0:ct.lineColor)==null?void 0:Mt.colorRamp)!=null&&gt.breakpoints&&(y.colorRamp.breakpoints=(st=($t=(tt=this.vizConfiguration.display)==null?void 0:tt.lineColor)==null?void 0:$t.colorRamp)==null?void 0:st.breakpoints),setTimeout(()=>this.$emit("update",{lineColor:y}),50)},clickedSingleColor(r){this.selectedSingleColor=r;const a={fixedColors:[this.selectedSingleColor],dataset:"",columnName:"",normalize:""};setTimeout(()=>this.$emit("update",{lineColor:a}),50)},columnsInDataset(r){const a=this.datasets[r];return a?Object.keys(a).filter(l=>a[l].type!==Nt.LOOKUP):[]},pickColor(r){this.selectedColor=r,this.emitColorSpecification()},buildColors(r,a){let s=[...Al(r,a||parseInt(this.steps))],l=!!r.reverse;return this.flip&&(l=!l),l&&(s=s.reverse()),r.style===H.sequential&&this.globalState.isDarkMode&&(s=s.reverse()),s}}}),eg=function(){var r,a=this,s=a.$createElement,l=a._self._c||s;return l("div",{staticClass:"color-ramp-picker"},[l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget"},[l("p",{staticClass:"tight"},[a._v("Display")]),l("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:a.dataColumn,callback:function(d){a.dataColumn=d},expression:"dataColumn"}},[l("option",{attrs:{label:"Single color",value:"@"}}),a._l(a.datasetChoices,function(d){return l("optgroup",{key:d,attrs:{label:d}},a._l(a.columnsInDataset(d),function(y){return l("option",{key:`${d}/${y}`,attrs:{label:y},domProps:{value:`${d}/${y}`}})}),0)})],2)],1)]),a.datasetChoices.length>1&&a.dataColumn&&a.dataColumn.length>1?l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget"},[l("p",{staticClass:"tight"},[a._v("Join by")]),l("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:a.join,callback:function(d){a.join=d},expression:"join"}},[l("option",{attrs:{label:"None",value:""}}),l("option",{attrs:{label:"Row count",value:"@count"}}),l("optgroup",{attrs:{label:"Join by..."}},a._l(a.columnsInDataset(((r=a.dataColumn)===null||r===void 0?void 0:r.slice(0,a.dataColumn.indexOf("/")))||[]),function(d){return l("option",{attrs:{label:d},domProps:{value:d}})}),0)])],1)]):a._e(),a.dataColumn&&a.dataColumn.length>1?l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget"},[l("p",{staticClass:"tight"},[a._v("Normalize by")]),l("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:a.normalSelection,callback:function(d){a.normalSelection=d},expression:"normalSelection"}},[l("option",{attrs:{label:"None",value:""}}),a._l(a.datasetChoices,function(d){return l("optgroup",{key:d,attrs:{label:d}},a._l(a.columnsInDataset(d),function(y){return l("option",{key:`${d}/${y}`,attrs:{label:y},domProps:{value:`${d}:${y}`}})}),0)})],2)],1)]):a._e(),l("div",{staticClass:"more",attrs:{title:a.diffChoices.length<2?"Add two datasets to enable comparisons":""}},[l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget",staticStyle:{flex:"3"}},[l("p",{staticClass:"tight"},[a._v("Compare datasets")]),l("b-select",{staticClass:"selector",attrs:{disabled:!a.dataColumn||a.diffChoices.length<2,expanded:""},model:{value:a.diffUISelection,callback:function(d){a.diffUISelection=d},expression:"diffUISelection"}},a._l(a.diffChoices,function(d){return l("option",{attrs:{label:d[0]},domProps:{value:d[1]}})}),0)],1),l("div",{staticClass:"widget"},[l("p",[a._v("%Diff")]),l("b-checkbox",{staticClass:"hello",attrs:{disabled:!a.diffUISelection||!a.dataColumn||a.diffChoices.length<2},model:{value:a.diffRelative,callback:function(d){a.diffRelative=d},expression:"diffRelative"}})],1)])]),l("div",{directives:[{name:"show",rawName:"v-show",value:a.dataColumn=="@",expression:"dataColumn=='@'"}],staticClass:"colorbar single"},a._l(a.simpleColors,function(d){return l("div",{key:d,staticClass:"single-color",class:{active:a.selectedSingleColor==d},style:{backgroundColor:`${d}`},on:{click:function(y){return a.clickedSingleColor(d)}}})}),0),l("div",{directives:[{name:"show",rawName:"v-show",value:a.dataColumn&&a.dataColumn.length>1,expression:"dataColumn && dataColumn.length > 1"}],staticClass:"more"},[l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget",staticStyle:{flex:"3"}},[l("p",[a._v("Steps")]),l("b-input",{attrs:{placeholder:"Number",type:"number",min:"2",max:"15"},model:{value:a.steps,callback:function(d){a.steps=d},expression:"steps"}})],1),l("div",{staticClass:"widget"},[l("p",[a._v("Flip")]),l("b-checkbox",{staticClass:"hello",model:{value:a.flip,callback:function(d){a.flip=d},expression:"flip"}})],1)]),a._l(a.colorChoices,function(d){return l("div",{key:d.ramp,staticClass:"color-ramp",class:{active:d===a.selectedColor},on:{click:function(y){return a.pickColor(d)}}},[l("div",{staticClass:"colorbar"},a._l(a.buildColors(d),function(y,E){return l("div",{key:E,staticClass:"swatch",style:{backgroundColor:`${y}`}},[l("p",[a._v("\xA0")])])}),0)])})],2)])},ng=[];const ml={};var ig=Wt(tg,eg,ng,!1,rg,"4bfd1627",null,null);function rg(r){for(let a in ml)this[a]=ml[a]}var sg=function(){return ig.exports}();const ag=[{ramp:"Viridis",style:H.sequential,reverse:!0},{ramp:"Plasma",style:H.sequential,reverse:!0},{ramp:"Blues",style:H.sequential},{ramp:"Greens",style:H.sequential},{ramp:"Purples",style:H.sequential},{ramp:"Oranges",style:H.sequential},{ramp:"RdBu",style:H.diverging,reverse:!0},{ramp:"PRGn",style:H.diverging,reverse:!0},{ramp:"Tableau10",style:H.categorical},{ramp:"Paired",style:H.categorical}];var lg=jt({name:"FillColorsConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},computed:{simpleColors(){return this.buildColors({ramp:"Tableau10",style:H.categorical},10)},colorChoices(){return ag},datasetChoices(){return this.datasetLabels.filter(r=>r!=="csvBase").reverse()}},data:()=>({globalState:Er.state,dataColumn:"",datasetLabels:[],diffDatasets:[],diffRelative:!1,diffUISelection:"",diffChoices:[],flip:!1,isCurrentlyDiffMode:!1,join:"",normalSelection:"",selectedColor:{},selectedSingleColor:"",steps:"9",useHardCodedColors:!1}),mounted(){var r,a;this.selectedSingleColor=this.simpleColors[0],this.selectedColor=this.colorChoices[0],this.datasetLabels=Object.keys(this.vizConfiguration.datasets),this.datasetsAreLoaded(),(a=(r=this.vizConfiguration.display)==null?void 0:r.fill)!=null&&a.fixedColors&&(this.useHardCodedColors=!0),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},diffUISelection(){this.diffSelectionChanged()},dataColumn(){this.emitColorSpecification()},join(){this.emitColorSpecification()},diffDatasets(){this.emitColorSpecification()},flip(){this.emitColorSpecification()},"globalState.isDarkMode"(){this.emitColorSpecification()},normalSelection(){this.emitColorSpecification()},selectedColor(){this.emitColorSpecification()},steps(){this.emitColorSpecification()},diffRelative(){this.emitColorSpecification()}},methods:{vizConfigChanged(){var a;const r=(a=this.vizConfiguration.display)==null?void 0:a.fill;if(this.setupDiffMode(r),r!=null&&r.columnName){const s=this.diffDatasets.length?`${this.diffDatasets[0]}/${r.columnName}`:`${r.dataset}/${r.columnName}`;if(this.dataColumn=s,this.datasetLabels=[...this.datasetLabels],r!=null&&r.normalize&&(this.normalSelection=r.normalize),r!=null&&r.join&&(this.join=r.join),r.colorRamp){let l=this.colorChoices.find(d=>d.ramp==r.colorRamp.ramp)||this.colorChoices[0];this.selectedColor=l,this.steps=r.colorRamp.steps,this.flip=!!r.colorRamp.reverse}}else r!=null&&r.fixedColors&&this.clickedSingleColor(r.fixedColors[0])},setupDiffMode(r){if(!(r!=null&&r.diff))return;let a=[];if(r.diff.indexOf(" - ")>-1)a=r.diff.split(" - ").map(s=>s.trim());else if(a=r.diff.split("-").map(s=>s.trim()),a.length>2)throw Error('Ambiguous diff, use " - " to separate terms');this.diffDatasets=a,this.diffRelative=!!r.relative,this.diffUISelection=`${a[0]} - ${a[1]}`},datasetsAreLoaded(){const r=Object.keys(this.datasets);this.datasetLabels=r,this.updateDiffLabels()},updateDiffLabels(){const r=[];if(r.push(["No",""]),this.datasetLabels.length<=1)return;const a=this.datasetLabels.slice(1);let s=a.flatMap((l,d)=>a.slice(d+1).map(y=>l+" - "+y));s.forEach(l=>r.push([l,l])),a.reverse(),s=a.flatMap((l,d)=>a.slice(d+1).map(y=>l+" - "+y)),s.forEach(l=>r.push([l,l])),this.diffChoices=r},diffSelectionChanged(){if(this.diffUISelection){const r=this.diffUISelection.split(" - ");this.diffDatasets=r}else this.diffDatasets=[],this.diffRelative=!1;this.isCurrentlyDiffMode=!!this.diffUISelection},emitColorSpecification(){var E,ft,ct,Mt,gt,tt,$t,st;if(!this.dataColumn)return;if(this.dataColumn==="@"){this.normalSelection="",this.selectedSingleColor||(this.selectedSingleColor=this.simpleColors[0]),this.clickedSingleColor(this.selectedSingleColor);return}const r=this.dataColumn.indexOf("/"),a=this.dataColumn.substring(0,r),s=this.dataColumn.substring(r+1),l=parseInt(this.steps),d=this.useHardCodedColors?(ft=(E=this.vizConfiguration.display)==null?void 0:E.fill)==null?void 0:ft.fixedColors.slice():this.buildColors(this.selectedColor,l);this.useHardCodedColors=!1;const y={dataset:a,columnName:s,join:this.join,fixedColors:d,normalize:this.normalSelection,colorRamp:{ramp:this.selectedColor.ramp,style:this.selectedColor.style,reverse:this.flip,steps:l}};this.diffDatasets.length&&(y.diffDatasets=this.diffDatasets),this.diffRelative&&(y.relative=!0),(gt=(Mt=(ct=this.vizConfiguration.display)==null?void 0:ct.fill)==null?void 0:Mt.colorRamp)!=null&&gt.breakpoints&&(y.colorRamp.breakpoints=(st=($t=(tt=this.vizConfiguration.display)==null?void 0:tt.fill)==null?void 0:$t.colorRamp)==null?void 0:st.breakpoints),setTimeout(()=>this.$emit("update",{fill:y}),50)},clickedSingleColor(r){this.selectedSingleColor=r;const a={fixedColors:[this.selectedSingleColor],dataset:"",columnName:"",normalize:""};setTimeout(()=>this.$emit("update",{fill:a}),25)},columnsInDataset(r){const a=this.datasets[r];return a?Object.keys(a).filter(l=>a[l].type!==Nt.LOOKUP):[]},pickColor(r){this.selectedColor=r,this.emitColorSpecification()},buildColors(r,a){let s=[...Al(r,a||parseInt(this.steps))],l=!!r.reverse;return this.flip&&(l=!l),l&&(s=s.reverse()),r.style===H.sequential&&this.globalState.isDarkMode&&(s=s.reverse()),s}}}),og=function(){var r,a=this,s=a.$createElement,l=a._self._c||s;return l("div",{staticClass:"color-ramp-picker"},[l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget"},[l("p",{staticClass:"tight"},[a._v("Display")]),l("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:a.dataColumn,callback:function(d){a.dataColumn=d},expression:"dataColumn"}},[l("option",{attrs:{label:"Single color",value:"@"}}),a._l(a.datasetChoices,function(d){return l("optgroup",{key:d,attrs:{label:d}},a._l(a.columnsInDataset(d),function(y){return l("option",{key:`${d}/${y}`,attrs:{label:y},domProps:{value:`${d}/${y}`}})}),0)})],2)],1)]),a.datasetChoices.length>1?l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget"},[l("p",{staticClass:"tight"},[a._v("Join by")]),l("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:a.join,callback:function(d){a.join=d},expression:"join"}},[l("option",{attrs:{label:"None",value:""}}),l("option",{attrs:{label:"Row count",value:"@count"}}),l("optgroup",{attrs:{label:"Join by..."}},a._l(a.columnsInDataset(((r=a.dataColumn)===null||r===void 0?void 0:r.slice(0,a.dataColumn.indexOf("/")))||[]),function(d){return l("option",{attrs:{label:d},domProps:{value:d}})}),0)])],1)]):a._e(),a.dataColumn&&a.dataColumn.length>1?l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget"},[l("p",{staticClass:"tight"},[a._v("Normalize by")]),l("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:a.normalSelection,callback:function(d){a.normalSelection=d},expression:"normalSelection"}},[l("option",{attrs:{label:"None",value:""}}),a._l(a.datasetChoices,function(d){return l("optgroup",{key:d,attrs:{label:d}},a._l(a.columnsInDataset(d),function(y){return l("option",{key:`${d}/${y}`,attrs:{label:y},domProps:{value:`${d}:${y}`}})}),0)})],2)],1)]):a._e(),l("div",{staticClass:"more",attrs:{title:a.diffChoices.length<2?"Add two datasets to enable comparisons":""}},[l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget",staticStyle:{flex:"3"}},[l("p",{staticClass:"tight"},[a._v("Compare datasets")]),l("b-select",{staticClass:"selector",attrs:{disabled:!a.dataColumn||a.diffChoices.length<2,expanded:""},model:{value:a.diffUISelection,callback:function(d){a.diffUISelection=d},expression:"diffUISelection"}},a._l(a.diffChoices,function(d){return l("option",{attrs:{label:d[0]},domProps:{value:d[1]}})}),0)],1),l("div",{staticClass:"widget"},[l("p",[a._v("%Diff")]),l("b-checkbox",{staticClass:"hello",attrs:{disabled:!a.diffUISelection||!a.dataColumn||a.diffChoices.length<2},model:{value:a.diffRelative,callback:function(d){a.diffRelative=d},expression:"diffRelative"}})],1)])]),l("div",{directives:[{name:"show",rawName:"v-show",value:a.dataColumn=="@",expression:"dataColumn=='@'"}],staticClass:"colorbar single"},a._l(a.simpleColors,function(d){return l("div",{key:d,staticClass:"single-color",class:{active:a.selectedSingleColor==d},style:{backgroundColor:`${d}`},on:{click:function(y){return a.clickedSingleColor(d)}}})}),0),l("div",{directives:[{name:"show",rawName:"v-show",value:a.dataColumn&&a.dataColumn.length>1,expression:"dataColumn && dataColumn.length > 1"}],staticClass:"more"},[l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget",staticStyle:{flex:"3"}},[l("p",[a._v("Steps")]),l("b-input",{attrs:{placeholder:"Number",type:"number",min:"2",max:"15"},model:{value:a.steps,callback:function(d){a.steps=d},expression:"steps"}})],1),l("div",{staticClass:"widget"},[l("p",[a._v("Flip")]),l("b-checkbox",{staticClass:"hello",model:{value:a.flip,callback:function(d){a.flip=d},expression:"flip"}})],1)]),a._l(a.colorChoices,function(d){return l("div",{key:d.ramp,staticClass:"color-ramp",class:{active:d===a.selectedColor},on:{click:function(y){return a.pickColor(d)}}},[l("div",{staticClass:"colorbar"},a._l(a.buildColors(d),function(y,E){return l("div",{key:E,staticClass:"swatch",style:{backgroundColor:`${y}`}},[l("p",[a._v("\xA0")])])}),0)])})],2)])},ug=[];const Cl={};var fg=Wt(lg,og,ug,!1,cg,"7e7fa278",null,null);function cg(r){for(let a in Cl)this[a]=Cl[a]}var dg=function(){return fg.exports}(),hg=jt({name:"FillHeightConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>{const r=["none","sqrt","pow5"];return{transforms:r,dataColumn:"",join:"",normalSelection:"",scaleFactor:"1",selectedTransform:r[0],datasetLabels:[],debounceHandleScale:{}}},mounted(){this.datasetLabels=Object.keys(this.vizConfiguration.datasets),this.debounceHandleScale=Tr.debounce(this.handleScaleChanged,500),this.datasetsAreLoaded(),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},join(){this.emitSpecification()},scaleFactor(){this.debounceHandleScale()},dataColumn(){this.emitSpecification()},normalSelection(){this.emitSpecification()}},computed:{datasetChoices(){return this.datasetLabels.filter(r=>r!=="csvBase").reverse()}},methods:{vizConfigChanged(){var a;const r=(a=this.vizConfiguration.display)==null?void 0:a.fillHeight;r!=null&&r.columnName&&(this.dataColumn=`${r.dataset}/${r.columnName}`,this.datasetLabels=[...this.datasetLabels],this.scaleFactor=r.scaleFactor,this.join=r.join,r!=null&&r.normalize&&(this.normalSelection=r.normalize))},datasetsAreLoaded(){const r=Object.keys(this.datasets);this.datasetLabels=r},handleScaleChanged(){this.emitSpecification()},emitSpecification(){if(!this.dataColumn)return;if(this.dataColumn==="^"){this.normalSelection="";const d={dataset:"",columnName:"",join:this.join,normalize:this.normalSelection,scaleFactor:parseFloat(this.scaleFactor)};setTimeout(()=>this.$emit("update",{fillHeight:d}),25);return}const r=this.dataColumn.indexOf("/"),a=this.dataColumn.substring(0,r),s=this.dataColumn.substring(r+1),l={dataset:a,columnName:s,join:this.join,normalize:this.normalSelection,scaleFactor:parseFloat(this.scaleFactor)};setTimeout(()=>this.$emit("update",{fillHeight:l}),25)},columnsInDataset(r){const a=this.datasets[r];return a?Object.keys(a).filter(l=>a[l].type!==Nt.LOOKUP):[]},numericColumnsInDataset(r){const a=this.datasets[r];return a?Object.keys(a).filter(l=>a[l].type!==Nt.LOOKUP):[]}}}),pg=function(){var r,a=this,s=a.$createElement,l=a._self._c||s;return l("div",{staticClass:"height-panel"},[l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget"},[l("p",{staticClass:"tight"},[a._v("Display")]),l("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:a.dataColumn,callback:function(d){a.dataColumn=d},expression:"dataColumn"}},[l("option",{attrs:{label:"None",value:"^"}}),a._l(a.datasetChoices,function(d){return l("optgroup",{key:d,attrs:{label:d}},a._l(a.numericColumnsInDataset(d),function(y){return l("option",{key:`${d}/${y}`,attrs:{label:y},domProps:{value:`${d}/${y}`}})}),0)})],2)],1)]),a.datasetChoices.length>1?l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget"},[l("p",{staticClass:"tight"},[a._v("Join by")]),l("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:a.join,callback:function(d){a.join=d},expression:"join"}},[l("option",{attrs:{label:"None",value:""}}),l("option",{attrs:{label:"Row count",value:"@count"}}),l("optgroup",{attrs:{label:"Join by..."}},a._l(a.columnsInDataset(((r=a.dataColumn)===null||r===void 0?void 0:r.slice(0,a.dataColumn.indexOf("/")))||[]),function(d){return l("option",{key:d,attrs:{label:d},domProps:{value:d}})}),0)])],1)]):a._e(),a.dataColumn&&a.dataColumn.length>1?l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget"},[l("p",{staticClass:"tight"},[a._v("Normalize by")]),l("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:a.normalSelection,callback:function(d){a.normalSelection=d},expression:"normalSelection"}},[l("option",{attrs:{label:"None",value:""}}),a._l(a.datasetChoices,function(d){return l("optgroup",{key:d,attrs:{label:d}},a._l(a.numericColumnsInDataset(d),function(y){return l("option",{key:`${d}/${y}`,attrs:{label:y},domProps:{value:`${d}:${y}`}})}),0)})],2)],1)]):a._e(),l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget"},[l("p",[a._v("Scaling")]),l("b-field",[l("b-input",{attrs:{disabled:!a.dataColumn,placeholder:"1.0"},model:{value:a.scaleFactor,callback:function(d){a.scaleFactor=d},expression:"scaleFactor"}})],1)],1)])])},vg=[];const bl={};var gg=Wt(hg,pg,vg,!1,_g,"3d153334",null,null);function _g(r){for(let a in bl)this[a]=bl[a]}var mg=function(){return gg.exports}(),Cg=jt({name:"LineWidthsConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>({dataColumn:"",scaleFactor:"1",join:"",selectedTransform:["none","sqrt","pow5"][0],datasetLabels:[],diffDatasets:[],diffRelative:!1,diffUISelection:"",diffChoices:[],isCurrentlyDiffMode:!1,debounceHandleScaleChanged:{}}),mounted(){this.debounceHandleScaleChanged=Tr(this.handleScaleChanged,500),this.datasetsAreLoaded(),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},dataColumn(){this.emitSpecification()},diffDatasets(){this.emitSpecification()},diffRelative(){this.emitSpecification()},datasets(){this.datasetsAreLoaded()},diffUISelection(){this.diffSelectionChanged()},scaleFactor(){this.debounceHandleScaleChanged()},join(){this.emitSpecification()}},computed:{datasetChoices(){return this.datasetLabels.filter(r=>r!=="csvBase").reverse()}},methods:{vizConfigChanged(){var a,s;const r=(a=this.vizConfiguration.display)==null?void 0:a.lineWidth;this.setupDiffMode(r),r!=null&&r.columnName?(this.dataColumn=this.diffDatasets.length?`${this.diffDatasets[0]}/${r.columnName}`:`${r.dataset}/${r.columnName}`,this.datasetLabels=[...this.datasetLabels],this.scaleFactor=(s=r.scaleFactor)!=null?s:"1",this.join=r.join):/^@\d$/.test(r==null?void 0:r.dataset)&&(this.dataColumn=r.dataset)},setupDiffMode(r){if(!(r!=null&&r.diff))return;let a=[];if(r.diff.indexOf(" - ")>-1)a=r.diff.split(" - ").map(s=>s.trim());else if(a=r.diff.split("-").map(s=>s.trim()),a.length>2)throw Error('Ambiguous diff, use " - " to separate terms');this.diffDatasets=a,this.diffRelative=!!r.relative,this.diffUISelection=`${a[0]} - ${a[1]}`},datasetsAreLoaded(){const r=Object.keys(this.datasets);this.datasetLabels=r,this.updateDiffLabels()},updateDiffLabels(){const r=[];if(r.push(["No",""]),this.datasetLabels.length<=1)return;const a=this.datasetLabels.slice(1);let s=a.flatMap((l,d)=>a.slice(d+1).map(y=>l+" - "+y));s.forEach(l=>r.push([l,l])),a.reverse(),s=a.flatMap((l,d)=>a.slice(d+1).map(y=>l+" - "+y)),s.forEach(l=>r.push([l,l])),this.diffChoices=r},diffSelectionChanged(){if(this.diffUISelection){const r=this.diffUISelection.split(" - ");this.diffDatasets=r}else this.diffDatasets=[],this.diffRelative=!1;this.isCurrentlyDiffMode=!!this.diffUISelection},handleScaleChanged(){this.emitSpecification()},emitSpecification(){if(!this.dataColumn)return;const r=this.dataColumn.indexOf("/");if(r===-1){this.clickedSingle();return}const a=this.dataColumn.substring(0,r),s=this.dataColumn.substring(r+1),l={dataset:a,columnName:s,join:this.join,scaleFactor:parseFloat(this.scaleFactor)};this.diffDatasets.length&&(l.diffDatasets=this.diffDatasets),this.diffRelative&&(l.relative=!0),setTimeout(()=>this.$emit("update",{lineWidth:l}),50)},clickedSingle(){const r={dataset:"",columnName:"",scaleFactor:parseFloat(this.scaleFactor)};/^@\d$/.test(this.dataColumn)&&(r.dataset=this.dataColumn),setTimeout(()=>this.$emit("update",{lineWidth:r}),20)},columnsInDataset(r){const a=this.datasets[r];return a?Object.keys(a).filter(l=>a[l].type!==Nt.LOOKUP):[]},numericColumnsInDataset(r){const a=this.datasets[r];return a?Object.keys(a).filter(l=>a[l].type!==Nt.LOOKUP):[]}}}),bg=function(){var r,a=this,s=a.$createElement,l=a._self._c||s;return l("div",{staticClass:"width-panel"},[l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget"},[l("p",{staticClass:"tight"},[a._v("Display")]),l("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:a.dataColumn,callback:function(d){a.dataColumn=d},expression:"dataColumn"}},[l("option",{attrs:{label:"None",value:"@0"}}),l("option",{attrs:{label:"1px",value:"@1"}}),l("option",{attrs:{label:"2px",value:"@2"}}),l("option",{attrs:{label:"3px",value:"@3"}}),l("option",{attrs:{label:"5px",value:"@5"}}),l("option",{attrs:{label:"8px",value:"@8"}}),a._l(a.datasetChoices,function(d){return l("optgroup",{key:d,attrs:{label:d}},a._l(a.numericColumnsInDataset(d),function(y){return l("option",{key:`${d}/${y}`,attrs:{label:y},domProps:{value:`${d}/${y}`}})}),0)})],2)],1)]),a.datasetChoices.length>1&&a.dataColumn&&a.dataColumn.length>2?l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget"},[l("p",{staticClass:"tight"},[a._v("Join by")]),l("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:a.join,callback:function(d){a.join=d},expression:"join"}},[l("option",{attrs:{label:"None",value:""}}),l("option",{attrs:{label:"Row count",value:"@count"}}),l("optgroup",{attrs:{label:"Join by..."}},a._l(a.columnsInDataset(((r=a.dataColumn)===null||r===void 0?void 0:r.slice(0,a.dataColumn.indexOf("/")))||[]),function(d){return l("option",{key:d,attrs:{label:d},domProps:{value:d}})}),0)])],1)]):a._e(),a.dataColumn&&a.dataColumn.length>2?l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget"},[l("p",[a._v("Scaling")]),l("b-field",[l("b-input",{attrs:{disabled:!a.dataColumn,placeholder:"1.0"},model:{value:a.scaleFactor,callback:function(d){a.scaleFactor=d},expression:"scaleFactor"}})],1)],1)]):a._e(),l("div",{staticClass:"more",attrs:{title:a.diffChoices.length<2?"Add two datasets to enable comparisons":""}},[l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget",staticStyle:{flex:"3"}},[l("p",{staticClass:"tight"},[a._v("Compare datasets")]),l("b-select",{staticClass:"selector",attrs:{disabled:!a.dataColumn||a.diffChoices.length<2,expanded:""},model:{value:a.diffUISelection,callback:function(d){a.diffUISelection=d},expression:"diffUISelection"}},a._l(a.diffChoices,function(d){return l("option",{attrs:{label:d[0]},domProps:{value:d[1]}})}),0)],1)])])])},yg=[];const yl={};var xg=Wt(Cg,bg,yg,!1,wg,"1a7d7c5e",null,null);function wg(r){for(let a in yl)this[a]=yl[a]}var Sg=function(){return xg.exports}(),Ag=jt({name:"CircleRadiusConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>{const r=["none","sqrt","pow5"];return{transforms:r,dataColumn:"",scaleFactor:"100",selectedTransform:r[0],datasetLabels:[],join:""}},mounted(){this.datasetsAreLoaded(),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},scaleFactor(){this.emitWidthSpecification()},dataColumn(){this.emitWidthSpecification()},join(){this.emitWidthSpecification()}},computed:{datasetChoices(){return this.datasetLabels.filter(r=>r!=="csvBase").reverse()}},methods:{vizConfigChanged(){var a,s;const r=(a=this.vizConfiguration.display)==null?void 0:a.radius;if(r!=null&&r.columnName){const l=`${r.dataset}/${r.columnName}`;this.dataColumn=l,this.datasetLabels=[...this.datasetLabels],this.scaleFactor=r.scaleFactor,this.join=(s=r.join)!=null?s:""}},datasetsAreLoaded(){const r=Object.keys(this.datasets);this.datasetLabels=r},emitWidthSpecification(){if(!this.dataColumn)return;if(this.dataColumn=="@"){const d={columnName:"",scaleFactor:parseFloat(this.scaleFactor),join:this.join};setTimeout(()=>this.$emit("update",{radius:d}),50);return}const r=this.dataColumn.indexOf("/"),a=this.dataColumn.substring(0,r),s=this.dataColumn.substring(r+1),l={dataset:a,columnName:s,scaleFactor:parseFloat(this.scaleFactor),join:this.join};setTimeout(()=>this.$emit("update",{radius:l}),50)},columnsInDataset(r){const a=this.datasets[r];return a?Object.keys(a).filter(l=>a[l].type!==Nt.LOOKUP):[]},numericColumnsInDataset(r){const a=this.datasets[r];return a?Object.keys(a).filter(l=>a[l].type!==Nt.LOOKUP):[]}}}),Lg=function(){var r,a=this,s=a.$createElement,l=a._self._c||s;return l("div",{staticClass:"width-panel"},[l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget"},[l("p",{staticClass:"tight"},[a._v("Display")]),l("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:a.dataColumn,callback:function(d){a.dataColumn=d},expression:"dataColumn"}},[l("option",{attrs:{label:"None",value:"@"}}),a._l(a.datasetChoices,function(d){return l("optgroup",{key:d,attrs:{label:d}},a._l(a.numericColumnsInDataset(d),function(y){return l("option",{attrs:{label:y},domProps:{value:`${d}/${y}`}})}),0)})],2)],1)]),a.datasetChoices.length>1?l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget"},[l("p",{staticClass:"tight"},[a._v("Join by")]),l("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:a.join,callback:function(d){a.join=d},expression:"join"}},[l("option",{attrs:{label:"None",value:""}}),l("option",{attrs:{label:"Row count",value:"@count"}}),l("optgroup",{attrs:{label:"Join by..."}},a._l(a.columnsInDataset(((r=a.dataColumn)===null||r===void 0?void 0:r.slice(0,a.dataColumn.indexOf("/")))||[]),function(d){return l("option",{key:d,attrs:{label:d},domProps:{value:d}})}),0)])],1)]):a._e(),l("div",{staticClass:"widgets"},[l("div",{staticClass:"widget"},[l("p",[a._v("Scaling")]),l("b-field",[l("b-input",{attrs:{disabled:!a.dataColumn,placeholder:"1.0"},model:{value:a.scaleFactor,callback:function(d){a.scaleFactor=d},expression:"scaleFactor"}})],1)],1)])])},Og=[];const xl={};var Rg=Wt(Ag,Lg,Og,!1,Ig,"2f0ecc4c",null,null);function Ig(r){for(let a in xl)this[a]=xl[a]}var Dg=function(){return Rg.exports}(),$g=jt({props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>{const r=["Categories","==","!=","<=",">=","<",">"];return{OPERATORS:r,filters:{},addDataColumn:null,addOperator:r[0],addValue:"",datasetLabels:[]}},mounted(){this.datasetsAreLoaded(),this.vizConfigChanged()},watch:{filters(){this.emitSpecification()},vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()}},computed:{filterIds(){return Object.keys(this.filters)},datasetChoices(){return this.datasetLabels.filter(r=>r!=="XcsvBase").reverse()}},methods:{eraseFields(){this.addDataColumn=null,this.addOperator=this.OPERATORS[0],this.addValue=""},clickedCancel(){this.eraseFields()},clickedAddFilter(){let[r,a]=this.addDataColumn?this.addDataColumn.split("@"):["",""];this.datasetLabels.indexOf(r)<1&&(r="shapes"),this.addOperator===this.OPERATORS[0]&&(this.addValue="");const s={dataset:r,column:a,operator:this.addOperator,value:this.addValue};this.filters[`${r}.${a}`]=s,this.filters=Object.assign({},this.filters),this.eraseFields()},clickedRemoveFilter(r){delete this.filters[r],this.filters=Object.assign({},this.filters)},vizConfigChanged(){if(this.filters={},!this.vizConfiguration.filters)return;let r=JSON.parse(JSON.stringify(this.vizConfiguration.filters));if(Array.isArray(r)){const a={};r.forEach(s=>Object.assign(a,s)),r=a}for(const a of Object.keys(r)){const[s,l]=a.split(".");if(l==null){this.$store.commit("error",`Filter key is not "dataset.column": ${a}`);continue}const d={dataset:s,column:l,operator:"",value:r[a]};d.value===this.OPERATORS[0]&&(d.column=d.column.substring(0,d.column.length-1),d.operator=this.OPERATORS[0]),l.endsWith("!")&&(d.column=d.column.substring(0,d.column.length-1),d.operator="!=");for(const y of["<=",">=","<",">"])if(typeof d.value=="string"&&d.value.startsWith(y)){d.value=d.value.substring(y.length).trim(),d.operator=y;break}this.filters[`${d.dataset}.${d.column}`]=d}this.datasetLabels=[...this.datasetLabels]},datasetsAreLoaded(){const r=Object.keys(this.datasets);this.datasetLabels=r},emitSpecification(){const r={};for(const a of Object.keys(this.filters)){const s=Object.assign({},this.filters[a]);let l=`${s.dataset}.${s.column}`;s.operator==="!="&&(l+="!"),s.operator===this.OPERATORS[0]&&(s.value="@categorical"),(s.operator.startsWith("<")||s.operator.startsWith(">"))&&(s.value=`${s.operator} ${s.value}`),r[l]=s.value}setTimeout(()=>this.$emit("update",{filters:r}),25)},numericColumnsInDataset(r){const a=this.datasets[r];return a?Object.keys(a).filter(l=>a[l].type!==Nt.LOOKUP):[]}}}),Fg=function(){var r=this,a=r.$createElement,s=r._self._c||a;return s("div",{staticClass:"width-panel"},[s("div",{directives:[{name:"show",rawName:"v-show",value:r.filterIds.length,expression:"filterIds.length"}],staticClass:"widgets"},[s("div",{staticClass:"widget"},[s("h4",[r._v("Active Filters")]),s("div",{staticClass:"filter-items"},r._l(r.filterIds,function(l){return s("div",{key:l,staticClass:"active-filter filter-details"},[s("p",{staticClass:"stretch"},[s("b",[r._v(r._s(r.filters[l].dataset)+":\xA0")]),r.filters[l].operator==r.OPERATORS[0]?s("span",[r._v("by\xA0")]):r._e(),r._v(r._s(`${r.filters[l].column}`)),r.filters[l].operator!==r.OPERATORS[0]?s("span",[r._v("\xA0"+r._s(`${r.filters[l].operator} ${r.filters[l].value}`))]):r._e()]),s("div",{staticClass:"span close-button",on:{click:function(d){return r.clickedRemoveFilter(l)}}},[r._v("\xD7")])])}),0)])]),s("div",{staticClass:"widgets"},[s("div",{staticClass:"widget boop"},[s("h4",[r._v("Add New Filter")]),s("b-select",{staticClass:"tight selector",attrs:{expanded:"",placeholder:"Select..."},model:{value:r.addDataColumn,callback:function(l){r.addDataColumn=l},expression:"addDataColumn"}},r._l(r.datasetChoices,function(l){return s("optgroup",{key:l,attrs:{label:l}},r._l(r.numericColumnsInDataset(l),function(d){return s("option",{attrs:{label:d},domProps:{value:`${l}@${d}`}})}),0)}),0),r.addDataColumn?s("div",{staticClass:"filter-details2"},[s("b-select",{staticClass:"operator",attrs:{expanded:""},model:{value:r.addOperator,callback:function(l){r.addOperator=l},expression:"addOperator"}},r._l(r.OPERATORS,function(l){return s("option",{attrs:{label:l},domProps:{value:l}})}),0),r.addOperator!==r.OPERATORS[0]?s("b-field",[s("b-input",{attrs:{placeholder:"1.0"},model:{value:r.addValue,callback:function(l){r.addValue=l},expression:"addValue"}})],1):r._e()],1):r._e(),r.addDataColumn?s("div",{staticClass:"button-bar"},[s("button",{staticClass:"button add-button is-small is-inverted",on:{click:r.clickedCancel}},[r._v("Cancel")]),r.addDataColumn?s("button",{staticClass:"button add-button is-small is-primary",attrs:{disabled:r.addOperator!==r.OPERATORS[0]&&r.addValue===""},on:{click:r.clickedAddFilter}},[r._v("\xA0\xA0Add\xA0\xA0")]):r._e()]):r._e()],1)])])},Eg=[];const wl={};var Tg=Wt($g,Fg,Eg,!1,Pg,"704b81ff",null,null);function Pg(r){for(let a in wl)this[a]=wl[a]}var kg=function(){return Tg.exports}(),zg=jt({name:"VizConfigurator",components:{AddDatasetsPanel:Mv,CircleRadiusPanel:Dg,ColorPanel:Kv,WidthPanel:Qv,FillColorPanel:dg,FillHeightPanel:mg,LegendBox:Rv,LineColorPanel:sg,LineWidthPanel:Sg,FiltersPanel:kg},props:{vizDetails:{type:Object,required:!0},datasets:{type:Object,required:!0},fileSystem:{type:Object,required:!0},subfolder:{type:String,required:!0},yamlConfig:{type:String},legendStore:{type:Object,required:!0},filterDefinitions:{type:Object,required:!0},sections:{type:Array},embedded:Boolean},data:()=>({showPanels:!1,showLegend:!1,activeSection:"",showAddDatasets:!1,selectedExportAction:"",layer:{general:{type:"links",dataset:"network.geojson",columns:{}},display:{lineColor:{},color:{},lineWidth:{},radius:{},fill:{},label:{},fillHeight:{}}}}),mounted(){this.activeSection=this.sections?this.sections[0]:"color",this.embedded&&(this.showLegend=!0)},computed:{vizConfiguration(){return{datasets:this.vizDetails.datasets,display:this.vizDetails.display,filters:this.vizDetails.filters}},fidgetSections(){return Object.keys(this.layer.display)}},methods:{getSections(){return this.sections?this.sections.map(r=>({component:Fr.exports.startCase(r.replaceAll("-"," ")).replaceAll(" ","")+"Panel",name:r.replaceAll("-"," ")})):[{component:"ColorPanel",name:"color"},{component:"WidthPanel",name:"width"}]},clickedShowHide(){this.showPanels=!this.showPanels},clickedLegendShowHide(){this.showLegend=!this.showLegend},clickedSection(r){r===this.activeSection?this.activeSection="":this.activeSection=r},async handleConfigChanged(r){this.showAddDatasets=!1,await this.$nextTick(),this.$emit("update",r)},clickedAddData(){this.showAddDatasets=!0},async clickedExport(){await this.$nextTick(),this.selectedExportAction=="yaml"?this.exportYaml():this.selectedExportAction=="png"&&this.$emit("screenshot"),this.selectedExportAction=""},exportYaml(){var ft,ct,Mt,gt,tt,$t,st,Yt,_e,at,Ut;let r="viz-viztype-config.yaml";const a=((ft=this.yamlConfig)==null?void 0:ft.toLocaleLowerCase())||"";(a.endsWith("yaml")||a.endsWith("yml"))&&(r=this.yamlConfig||"viz-viztype-config.yaml"),a.endsWith("shp")&&(r=`viz-map-${a}.yaml`);const s=prompt("Export filename:",r);if(!s)return;const l={title:this.vizDetails.title,description:this.vizDetails.description,zoom:Math.round(10*this.$store.state.viewState.zoom)/10,pitch:Math.round(this.$store.state.viewState.pitch),bearing:Math.round(this.$store.state.viewState.bearing),center:[Math.round(100*this.$store.state.viewState.center[0])/100,Math.round(100*this.$store.state.viewState.center[1])/100],network:this.vizDetails.network||this.vizDetails.geojsonFile,projection:this.vizDetails.projection,showDifferences:this.vizDetails.showDifferences,sampleRate:this.vizDetails.sampleRate,shapes:((ct=this.vizDetails.shapes)==null?void 0:ct.file)||this.vizDetails.shapes,datasets:{...this.vizDetails.datasets},display:{...this.vizDetails.display},filters:{}};typeof this.vizDetails.shapes=="object"&&this.vizDetails.shapes.join&&(l.shapes={file:l.shapes,join:this.vizDetails.shapes.join}),this.$store.state.viewState.bearing||delete l.bearing,this.$store.state.viewState.pitch||delete l.pitch;const d=typeof l.shapes=="string"?(Mt=l==null?void 0:l.shapes)==null?void 0:Mt.substring(1+l.shapes.lastIndexOf("/")):(tt=(gt=l==null?void 0:l.shapes)==null?void 0:gt.file)==null?void 0:tt.substring(1+l.shapes.file.lastIndexOf("/")||0);l.datasets[d]&&delete l.datasets[d];for(const J of Object.keys(l))l[J]||delete l[J];l.display.color&&((st=($t=l.display.color)==null?void 0:$t.colorRamp)==null||delete st.style,(Yt=l.display.color)==null||delete Yt.fixedColors),l.display.fill&&(l.display.fill.colorRamp?((_e=l.display.fill.colorRamp)==null||delete _e.style,delete l.display.fill.fixedColors,l.display.fill.colorRamp.reverse||delete l.display.fill.colorRamp.reverse):(delete l.display.fill.filters,delete l.display.fill.dataset,delete l.display.fill.columnName)),l.display.lineColor&&(console.log(555,l.display.lineColor),l.display.lineColor.fixedColors&&l.display.lineColor.fixedColors[0]===""?l.display.lineColor=!1:l.display.lineColor.colorRamp?((at=l.display.lineColor.colorRamp)==null||delete at.style,delete l.display.lineColor.fixedColors,l.display.lineColor.colorRamp.reverse||delete l.display.lineColor.colorRamp.reverse):(delete l.display.lineColor.dataset,delete l.display.lineColor.columnName));for(const J of["fill","lineColor","lineWidth"]){const z=l.display[J];if(!!z&&(z.normalize||delete z.normalize,z.relative||delete z.relative,z.diffDatasets)){z.diff=`${z.diffDatasets[0]} - ${z.diffDatasets[1]}`,delete z.dataset,delete z.diffDatasets;const Zt={diff:z.diff,columnName:z.columnName};z.relative&&(Zt.relative=!0),l.display[J]=Object.assign(Zt,z)}}if(l.datasets)for(const[J,z]of Object.entries(l.datasets))typeof z.file=="object"&&(l.datasets[J].file=((Ut=z.file)==null?void 0:Ut.name)||z.file||J),typeof z=="object"&&(delete l.datasets[J].join,Object.keys(l.datasets[J]).length==1&&l.datasets[J].file&&(l.datasets[J]=l.datasets[J].file));for(const J of Object.entries(l.display))J[1]!==!1&&(Object.keys(J[1]).length||delete l.display[J[0]]);Object.keys(this.filterDefinitions).length?l.filters=Object.assign({},this.filterDefinitions):delete l.filters;const y=wv.stringify(l,{indent:4,simpleKeys:!0});var E=document.createElement("a");E.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(y)),E.setAttribute("download",s),E.style.display="none",document.body.appendChild(E),E.click(),document.body.removeChild(E)}}}),Ng=function(){var r=this,a=r.$createElement,s=r._self._c||a;return s("div",{staticClass:"viz-configurator"},[s("div",{staticClass:"map-actions"},[s("button",{directives:[{name:"show",rawName:"v-show",value:!r.embedded,expression:"!embedded"}],staticClass:"button draw-button is-tiny",class:{"is-showing":r.showPanels},attrs:{title:"Config"},on:{click:r.clickedShowHide}},[s("i",{staticClass:"fa fa-sliders-h settings-icon"})]),s("button",{staticClass:"button draw-button is-tiny",class:{"is-showing":r.showLegend},attrs:{title:"Legend"},on:{click:r.clickedLegendShowHide}},[s("i",{staticClass:"fa fa-info settings-icon"})])]),s("div",{staticClass:"right-panels"},[s("div",{directives:[{name:"show",rawName:"v-show",value:r.showPanels&&!r.showAddDatasets,expression:"showPanels && !showAddDatasets"}],staticClass:"configuration-panels"},[s("div",{staticClass:"section-panel"},[s("div",{staticClass:"actions"},[s("b-dropdown",{attrs:{"aria-role":"list",position:"is-bottom-left","close-on-click":!0},on:{change:r.clickedExport},scopedSlots:r._u([{key:"trigger",fn:function(l){return l.active,[s("b-button",{staticClass:"is-small is-white export-button"},[s("i",{staticClass:"fa fa-sm fa-share"}),r._v("\xA0Export")])]}}]),model:{value:r.selectedExportAction,callback:function(l){r.selectedExportAction=l},expression:"selectedExportAction"}},[s("b-dropdown-item",{attrs:{value:"yaml","aria-role":"listitem"}},[r._v("Save YAML config")]),s("b-dropdown-item",{attrs:{value:"png","aria-role":"listitem"}},[r._v("Take screenshot")])],1),s("b-button",{staticClass:"is-small is-white export-button",on:{click:r.clickedAddData}},[s("i",{staticClass:"fa fa-sm fa-plus"}),r._v("\xA0Add Data")])],1)]),r._l(r.getSections(),function(l){return s("div",{key:l.name,staticClass:"section-panel"},[s("h1",{class:{h1active:l.name===r.activeSection},on:{click:function(d){return r.clickedSection(l.name)}}},[r._v(r._s(l.name))]),s("div",{directives:[{name:"show",rawName:"v-show",value:l.name===r.activeSection,expression:"section.name===activeSection"}],staticClass:"symbology-panel",class:{active:l.name===r.activeSection}},[l.component?s(l.component,{tag:"component",attrs:{vizConfiguration:r.vizConfiguration,datasets:r.datasets},on:{update:r.handleConfigChanged}}):s("p",[r._v("To be added")])],1)])})],2),s("div",{staticClass:"legend-area"},[s("legend-box",{directives:[{name:"show",rawName:"v-show",value:r.showLegend,expression:"showLegend"}],staticClass:"legend-panel",attrs:{legendStore:r.legendStore}})],1)]),r.showAddDatasets?s("add-datasets-panel",{attrs:{vizConfiguration:r.vizConfiguration,fileSystem:r.fileSystem,subfolder:r.subfolder},on:{update:r.handleConfigChanged}}):r._e()],1)},Wg=[];const Sl={};var Mg=Wt(zg,Ng,Wg,!1,Ug,"ef1acc78",null,null);function Ug(r){for(let a in Sl)this[a]=Sl[a]}var Jg=function(){return Mg.exports}();export{Jg as V};
//# sourceMappingURL=VizConfigurator.ac3cf377.js.map
