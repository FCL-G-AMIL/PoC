{"version":3,"file":"LegendBox.9918cd96.js","sources":["../../src/components/viz-configurator/LegendBox.vue","../../src/components/viz-configurator/LegendBox.vue?vue&type=template&lang.js"],"sourcesContent":["<template lang=\"pug\">\r\n.legend-box(v-if=\"sections.length\")\r\n  .legend-section(v-for=\"section,i in sections\" :key=\"section.section\")\r\n    p(:style=\"{marginBottom: '0.25rem', marginTop: i ? '1rem':''}\"): b {{ sectionTitle(section) }}\r\n    .section-row(v-for=\"row,i of getRowsInSection(section)\" :key=\"i\")\r\n      .row-value(:style=\"getRowStyle(row)\")\r\n      .row-label(:style=\"getLabelStyle(row)\") {{ getRowLabel(row) }}\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nimport type { PropType } from 'vue'\r\nimport LegendStore, { LegendSection } from '@/js/LegendStore'\r\n\r\nexport default defineComponent({\r\n  name: 'LegendBox',\r\n  props: {\r\n    legendStore: { type: Object as PropType<LegendStore>, required: true },\r\n  },\r\n  data: () => {\r\n    return {}\r\n  },\r\n  beforeDestroy() {\r\n    this.legendStore.clear()\r\n  },\r\n  computed: {\r\n    sections(): any {\r\n      return this.legendStore.state.sections\r\n    },\r\n  },\r\n  methods: {\r\n    sectionTitle(section: LegendSection) {\r\n      let title = section.column\r\n\r\n      if (section.normalColumn) title += ` / ${section.normalColumn}`\r\n\r\n      if (section.relative) {\r\n        title += ' (% Diff)'\r\n      } else if (section.diff) {\r\n        title += ' (Diff)'\r\n      }\r\n\r\n      return title\r\n    },\r\n\r\n    getRowsInSection(section: LegendSection) {\r\n      if (!section) return\r\n\r\n      const z = section.values.filter((f: any) => !Number.isNaN(f.label))\r\n      return z\r\n    },\r\n\r\n    getRowLabel(row: { label: string; value: any }) {\r\n      return row.label // || row.value // no label -> it's a line width\r\n    },\r\n\r\n    getRowStyle(row: { label: string; value: any }) {\r\n      if (Array.isArray(row.value)) {\r\n        // it's a 3-color\r\n        const backgroundColor = `rgb(${row.value[0]},${row.value[1]},${row.value[2]})`\r\n        const style = {\r\n          backgroundColor,\r\n          width: '1rem',\r\n          height: '1rem',\r\n          border: '1px solid #88888844',\r\n          // lineHeight: '14px',\r\n        }\r\n        return style\r\n      } else {\r\n        const style = {\r\n          backgroundColor: '#779',\r\n          width: '2rem',\r\n          height: `${row.value / 2}px`,\r\n          margin: 'auto 0 4px 0',\r\n        }\r\n        return style\r\n      }\r\n      return {}\r\n    },\r\n\r\n    getLabelStyle(row: { label: string; value: any }) {\r\n      if (Array.isArray(row.value)) {\r\n        // colors\r\n        return {\r\n          marginLeft: '4px',\r\n        }\r\n      } else {\r\n        // widths\r\n        return {\r\n          display: 'flex',\r\n          flexDirection: 'column-reverse',\r\n          marginLeft: '4px',\r\n          marginBottom: '-2px',\r\n        }\r\n      }\r\n    },\r\n  },\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '@/styles.scss';\r\n\r\n.legend-box {\r\n  font-size: 0.85rem;\r\n  padding: 0.5rem 0.75rem;\r\n  height: 100%;\r\n  min-height: 100%;\r\n  // border: var(--borderThin);\r\n}\r\n\r\n.section-row {\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\nb {\r\n  font-size: 1rem;\r\n  line-height: 1rem;\r\n}\r\n</style>\r\n","\r\n.legend-box(v-if=\"sections.length\")\r\n  .legend-section(v-for=\"section,i in sections\" :key=\"section.section\")\r\n    p(:style=\"{marginBottom: '0.25rem', marginTop: i ? '1rem':''}\"): b {{ sectionTitle(section) }}\r\n    .section-row(v-for=\"row,i of getRowsInSection(section)\" :key=\"i\")\r\n      .row-value(:style=\"getRowStyle(row)\")\r\n      .row-label(:style=\"getLabelStyle(row)\") {{ getRowLabel(row) }}\r\n"],"names":["__vue2_script","defineComponent","section","title","f","row","render","_vm","_h","_c","i","staticRenderFns"],"mappings":"+CAcA,IAAAA,EAAAC,EAAA,CACA,KAAA,YACA,MAAA,CACA,YAAA,CAAA,KAAA,OAAA,SAAA,EAAA,CACA,EACA,KAAA,KACA,IAEA,eAAA,CACA,KAAA,YAAA,OACA,EACA,SAAA,CACA,UAAA,CACA,OAAA,KAAA,YAAA,MAAA,QACA,CACA,EACA,QAAA,CACA,aAAAC,EAAA,CACA,IAAAC,EAAAD,EAAA,OAEA,OAAAA,EAAA,eAAAC,GAAA,MAAAD,EAAA,gBAEAA,EAAA,SACAC,GAAA,YACAD,EAAA,OACAC,GAAA,WAGAA,CACA,EAEA,iBAAAD,EAAA,CACA,OAAAA,EAEAA,EAAA,OAAA,OAAAE,GAAA,CAAA,OAAA,MAAAA,EAAA,KAAA,CAAA,EAFA,MAIA,EAEA,YAAAC,EAAA,CACA,OAAAA,EAAA,KACA,EAEA,YAAAA,EAAA,CACA,OAAA,MAAA,QAAAA,EAAA,KAAA,EAGA,CACA,gBAFA,OAAAA,EAAA,MAAA,MAAAA,EAAA,MAAA,MAAAA,EAAA,MAAA,MAGA,MAAA,OACA,OAAA,OACA,OAAA,qBAAA,EAKA,CACA,gBAAA,OACA,MAAA,OACA,OAAA,GAAAA,EAAA,MAAA,MACA,OAAA,cAAA,CAKA,EAEA,cAAAA,EAAA,CACA,OAAA,MAAA,QAAAA,EAAA,KAAA,EAEA,CACA,WAAA,KAAA,EAIA,CACA,QAAA,OACA,cAAA,iBACA,WAAA,MACA,aAAA,MAAA,CAGA,CACA,CACA,CAAA,ECjGIC,EAAS,UAAY,CACvB,IAAIC,EAAI,KACJC,EAAGD,EAAI,eACPE,EAAGF,EAAI,MAAM,IAAIC,EAErB,OAAOD,EAAI,SAAS,OAASE,EAAG,MAAO,CACrC,YAAa,YACjB,EAAKF,EAAI,GAAGA,EAAI,SAAU,SAAUL,EAASQ,EAAG,CAC5C,OAAOD,EAAG,MAAO,CACf,IAAKP,EAAQ,QACb,YAAa,gBACnB,EAAO,CAACO,EAAG,IAAK,CACV,MAAO,CACL,aAAc,UACd,UAAWC,EAAI,OAAS,EACzB,CACP,EAAO,CAACD,EAAG,IAAK,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,aAAaL,CAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAGK,EAAI,GAAGA,EAAI,iBAAiBL,CAAO,EAAG,SAAUG,EAAKK,EAAG,CAClH,OAAOD,EAAG,MAAO,CACf,IAAKC,EACL,YAAa,aACrB,EAAS,CAACD,EAAG,MAAO,CACZ,YAAa,YACb,MAAOF,EAAI,YAAYF,CAAG,CAClC,CAAO,EAAGI,EAAG,MAAO,CACZ,YAAa,YACb,MAAOF,EAAI,cAAcF,CAAG,CAC7B,EAAE,CAACE,EAAI,GAAGA,EAAI,GAAGA,EAAI,YAAYF,CAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACjD,CAAK,CAAC,EAAG,CAAC,CACP,CAAA,EAAG,CAAC,EAAIE,EAAI,GAAE,CACjB,EACII,EAAkB,CAAE"}